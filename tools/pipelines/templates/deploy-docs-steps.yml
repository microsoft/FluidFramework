# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License.

# deploy-docs pipeline

parameters:
- name: STORAGE_ACCOUNT
  type: string

- name: STORAGE_KEY
  type: string

- name: DEST_PATH
  type: string

- name: artifactName
  type: string
  default: fluid-docs

steps:
- download: current
  artifact: '${{ parameters.artifactName }}'
- task: AzureCLI@2
  displayName: 'CDN Upload'
  inputs:
    azureSubscription: 'fluid-docs'
    scriptType: bash
    scriptLocation: inlineScript
    inlineScript: |
      az storage blob upload-batch -s '$(Pipeline.Workspace)/${{ parameters.artifactName }}' -d '$web' --account-name ${{ parameters.STORAGE_ACCOUNT }} --account-key ${{ parameters.STORAGE_KEY }}  --destination-path ${{ parameters.DEST_PATH }}
