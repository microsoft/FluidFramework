# Copyright (c) Microsoft Corporation and contributors. All rights reserved.
# Licensed under the MIT License.

# download-api-extractor-artifact pipeline
# Downloads the _api-extractor-temp artifact from a specific internal pipeline using
# branchName and pipelineName as parameters. By default, the branch triggering this
# pipeline will be used as branchName. 
parameters:
- name: pipelineName
  type: string

- name: branchName
  type: string
  default: ${{ variables['Build.SourceBranch'] }}
  
steps:
# Download the api-extractor outputs
# Setting allowPartiallySucceededBuilds to true so that builds which complete with 
# warnings will be included as well. This is especially needed for archived builds
# with warnings such as driver-definitions and core-interfaces
- task: DownloadPipelineArtifact@2
  inputs:
    buildType: specific
    project: internal
    pipeline: ${{ parameters.pipelineName }}
    buildVersionToDownload: latestFromBranch
    branchName: ${{ parameters.branchName }}
    artifact: _api-extractor-temp
    allowPartiallySucceededBuilds: true