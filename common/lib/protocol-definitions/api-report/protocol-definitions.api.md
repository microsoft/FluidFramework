## API Report File for "@fluidframework/protocol-definitions"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { IDisposable } from '@fluidframework/common-definitions';
import { IErrorEvent } from '@fluidframework/common-definitions';
import { IEventProvider } from '@fluidframework/common-definitions';

// @public (undocumented)
export type ConnectionMode = "write" | "read";

// @public (undocumented)
export enum FileMode {
    // (undocumented)
    Directory = "040000",
    // (undocumented)
    Executable = "100755",
    // (undocumented)
    File = "100644",
    // (undocumented)
    Symlink = "120000"
}

// @public @deprecated (undocumented)
export interface IActorClient {
    // (undocumented)
    sub: string;
}

// @public
export type IApprovedProposal = {
    approvalSequenceNumber: number;
} & ISequencedProposal;

// @public (undocumented)
export interface IAttachment {
    // (undocumented)
    id: string;
}

// @public
export interface IBlob {
    contents: string;
    encoding: "utf-8" | "base64";
}

// @public
export interface IBranchOrigin {
    id: string;
    minimumSequenceNumber: number;
    sequenceNumber: number;
}

// @public (undocumented)
export interface ICapabilities {
    // (undocumented)
    interactive: boolean;
}

// @public (undocumented)
export interface IClient {
    // (undocumented)
    details: IClientDetails;
    // (undocumented)
    mode: ConnectionMode;
    // (undocumented)
    permission: string[];
    // (undocumented)
    scopes: string[];
    timestamp?: number;
    // (undocumented)
    user: IUser;
}

// @public
export interface IClientConfiguration {
    // (undocumented)
    blockSize: number;
    // (undocumented)
    maxMessageSize: number;
    noopCountFrequency?: number;
    noopTimeFrequency?: number;
}

// @public (undocumented)
export interface IClientDetails {
    // (undocumented)
    capabilities: ICapabilities;
    // (undocumented)
    device?: string;
    environment?: string;
    // (undocumented)
    type?: string;
}

// @public
export interface IClientJoin {
    // (undocumented)
    clientId: string;
    // (undocumented)
    detail: IClient;
}

// @public
export type ICommittedProposal = {
    commitSequenceNumber: number;
} & IApprovedProposal;

// @public
export interface IConnect {
    client: IClient;
    epoch?: string;
    id: string;
    mode: ConnectionMode;
    nonce?: string;
    relayUserAgent?: string;
    supportedFeatures?: Record<string, any>;
    tenantId: string;
    token: string | null;
    versions: string[];
}

// @public
export interface IConnected {
    checkpointSequenceNumber?: number;
    claims: ITokenClaims;
    clientId: string;
    epoch?: string;
    existing: boolean;
    initialClients: ISignalClient[];
    initialMessages: ISequencedDocumentMessage[];
    initialSignals: ISignalMessage[];
    maxMessageSize: number;
    mode: ConnectionMode;
    nonce?: string;
    relayServiceAgent?: string;
    serviceConfiguration: IClientConfiguration;
    supportedFeatures?: Record<string, any>;
    supportedVersions: string[];
    timestamp?: number;
    version: string;
}

// @public (undocumented)
export interface ICreateBlobResponse {
    // (undocumented)
    id: string;
}

// @public (undocumented)
export interface IDocumentAttributes {
    minimumSequenceNumber: number;
    sequenceNumber: number;
    term: number | undefined;
}

// @public
export interface IDocumentMessage {
    clientSequenceNumber: number;
    compression?: string;
    contents: any;
    metadata?: any;
    referenceSequenceNumber: number;
    serverMetadata?: any;
    traces?: ITrace[];
    type: string;
}

// @public
export interface IDocumentSystemMessage extends IDocumentMessage {
    // (undocumented)
    data: string;
}

// @public
export interface IHelpMessage {
    // (undocumented)
    tasks: string[];
    // (undocumented)
    version?: string;
}

// @public (undocumented)
export interface INack {
    content: INackContent;
    operation: IDocumentMessage | undefined;
    sequenceNumber: number;
}

// @public
export interface INackContent {
    code: number;
    message: string;
    retryAfter?: number;
    type: NackErrorType;
}

// @public (undocumented)
export interface IProcessMessageResult {
    // (undocumented)
    immediateNoOp?: boolean;
}

// @public
export interface IProposal {
    key: string;
    value: any;
}

// @public (undocumented)
export interface IProtocolState {
    // (undocumented)
    members: [string, ISequencedClient][];
    // (undocumented)
    minimumSequenceNumber: number;
    // (undocumented)
    proposals: [number, ISequencedProposal, string[]][];
    // (undocumented)
    sequenceNumber: number;
    // (undocumented)
    values: [string, ICommittedProposal][];
}

// @public
export interface IQueueMessage {
    // (undocumented)
    documentId: string;
    // (undocumented)
    message: IHelpMessage;
    // (undocumented)
    tenantId: string;
    // (undocumented)
    token: string;
}

// @public
export interface IQuorum extends Omit<IQuorumClients, "on" | "once" | "off">, Omit<IQuorumProposals, "on" | "once" | "off">, IEventProvider<IQuorumEvents> {
}

// @public
export interface IQuorumClients extends IEventProvider<IQuorumClientsEvents>, IDisposable {
    // (undocumented)
    getMember(clientId: string): ISequencedClient | undefined;
    // (undocumented)
    getMembers(): Map<string, ISequencedClient>;
}

// @public
export interface IQuorumClientsEvents extends IErrorEvent {
    // (undocumented)
    (event: "addMember", listener: (clientId: string, details: ISequencedClient) => void): any;
    // (undocumented)
    (event: "removeMember", listener: (clientId: string) => void): any;
}

// @public
export type IQuorumEvents = IQuorumClientsEvents & IQuorumProposalsEvents;

// @public
export interface IQuorumProposals extends IEventProvider<IQuorumProposalsEvents>, IDisposable {
    // (undocumented)
    get(key: string): any;
    // (undocumented)
    has(key: string): boolean;
    // (undocumented)
    propose(key: string, value: any): Promise<void>;
}

// @public
export interface IQuorumProposalsEvents extends IErrorEvent {
    // (undocumented)
    (event: "addProposal", listener: (proposal: ISequencedProposal) => void): any;
    // (undocumented)
    (event: "approveProposal", listener: (sequenceNumber: number, key: string, value: any, approvalSequenceNumber: number) => void): any;
}

// @public (undocumented)
export interface ISequencedClient {
    // (undocumented)
    client: IClient;
    // (undocumented)
    sequenceNumber: number;
}

// @public (undocumented)
export interface ISequencedDocumentAugmentedMessage extends ISequencedDocumentMessage {
    // (undocumented)
    additionalContent: string;
}

// @public
export interface ISequencedDocumentMessage {
    clientId: string;
    clientSequenceNumber: number;
    compression?: string;
    contents: any;
    // @alpha
    expHash1?: string;
    metadata?: any;
    minimumSequenceNumber: number;
    origin?: IBranchOrigin;
    referenceSequenceNumber: number;
    sequenceNumber: number;
    serverMetadata?: any;
    term: number | undefined;
    timestamp: number;
    traces?: ITrace[];
    type: string;
}

// @public (undocumented)
export interface ISequencedDocumentSystemMessage extends ISequencedDocumentMessage {
    // (undocumented)
    data: string;
}

// @public
export type ISequencedProposal = {
    sequenceNumber: number;
} & IProposal;

// @public
export interface IServerError {
    errorMessage: string;
}

// @public (undocumented)
export interface ISignalClient {
    // (undocumented)
    client: IClient;
    clientConnectionNumber?: number;
    // (undocumented)
    clientId: string;
    referenceSequenceNumber?: number;
}

// @public (undocumented)
export interface ISignalMessage {
    clientConnectionNumber?: number;
    // (undocumented)
    clientId: string | null;
    // (undocumented)
    content: any;
    referenceSequenceNumber?: number;
}

// @public (undocumented)
export interface ISnapshotTree {
    // (undocumented)
    blobs: {
        [path: string]: string;
    };
    // (undocumented)
    id?: string;
    // (undocumented)
    trees: {
        [path: string]: ISnapshotTree;
    };
    unreferenced?: true;
}

// @public (undocumented)
export interface ISnapshotTreeEx extends ISnapshotTree {
    // (undocumented)
    id: string;
    // (undocumented)
    trees: {
        [path: string]: ISnapshotTreeEx;
    };
}

// @public
export type IsoDate = string;

// @public
export interface ISummaryAck {
    handle: string;
    summaryProposal: ISummaryProposal;
}

// @public
export interface ISummaryAttachment {
    // (undocumented)
    id: string;
    // (undocumented)
    type: SummaryType.Attachment;
}

// @public
export interface ISummaryBlob {
    // (undocumented)
    content: string | Uint8Array;
    // (undocumented)
    type: SummaryType.Blob;
}

// @public (undocumented)
export interface ISummaryContent {
    // (undocumented)
    details?: IUploadedSummaryDetails;
    // (undocumented)
    handle: string;
    // (undocumented)
    head: string;
    // (undocumented)
    message: string;
    // (undocumented)
    parents: string[];
}

// @public
export interface ISummaryHandle {
    handle: string;
    handleType: SummaryTypeNoHandle;
    // (undocumented)
    type: SummaryType.Handle;
}

// @public
export interface ISummaryNack {
    code?: number;
    message?: string;
    retryAfter?: number;
    summaryProposal: ISummaryProposal;
}

// @public
export interface ISummaryProposal {
    summarySequenceNumber: number;
}

// @public @deprecated (undocumented)
export interface ISummaryTokenClaims {
    // (undocumented)
    act: IActorClient;
    // (undocumented)
    claims: ITokenClaims;
    // (undocumented)
    sub: string;
}

// @public
export interface ISummaryTree {
    // (undocumented)
    tree: {
        [path: string]: SummaryObject;
    };
    // (undocumented)
    type: SummaryType.Tree;
    unreferenced?: true;
}

// @public
export interface ITokenClaims {
    documentId: string;
    exp: number;
    iat: number;
    jti?: string;
    scopes: string[];
    tenantId: string;
    user: IUser;
    ver: string;
}

// @public @deprecated (undocumented)
export interface ITokenProvider {
    isValid(): boolean;
}

// @public @deprecated (undocumented)
export interface ITokenService {
    // (undocumented)
    extractClaims(token: string): ITokenClaims;
}

// @public
export interface ITrace {
    action: string;
    service: string;
    timestamp: number;
}

// @public (undocumented)
export interface ITree {
    // (undocumented)
    entries: ITreeEntry[];
    id?: string;
    unreferenced?: true;
}

// @public
export type ITreeEntry = {
    path: string;
    mode: FileMode;
} & ({
    type: TreeEntry.Blob;
    value: IBlob;
} | {
    type: TreeEntry.Tree;
    value: ITree;
} | {
    type: TreeEntry.Attachment;
    value: IAttachment;
});

// @public (undocumented)
export interface IUploadedSummaryDetails {
    // (undocumented)
    includesProtocolTree?: boolean;
}

// @public
export interface IUser {
    id: string;
}

// @public
export interface IVersion {
    date?: IsoDate;
    id: string;
    treeId: string;
}

// @public (undocumented)
export enum MessageType {
    ClientJoin = "join",
    ClientLeave = "leave",
    Control = "control",
    NoClient = "noClient",
    NoOp = "noop",
    Operation = "op",
    Propose = "propose",
    Reject = "reject",
    RemoteHelp = "remoteHelp",
    RoundTrip = "tripComplete",
    Summarize = "summarize",
    SummaryAck = "summaryAck",
    SummaryNack = "summaryNack"
}

// @public
export enum NackErrorType {
    // (undocumented)
    BadRequestError = "BadRequestError",
    // (undocumented)
    InvalidScopeError = "InvalidScopeError",
    // (undocumented)
    LimitExceededError = "LimitExceededError",
    // (undocumented)
    ThrottlingError = "ThrottlingError"
}

// @public
export enum ScopeType {
    DocRead = "doc:read",
    DocWrite = "doc:write",
    SummaryWrite = "summary:write"
}

// @public (undocumented)
export enum SignalType {
    ClientJoin = "join",
    ClientLeave = "leave"
}

// @public
export type SummaryObject = ISummaryTree | ISummaryBlob | ISummaryHandle | ISummaryAttachment;

// @public
export type SummaryTree = ISummaryTree | ISummaryHandle;

// @public
export namespace SummaryType {
    // (undocumented)
    export type Attachment = 4;
    // (undocumented)
    export type Blob = 2;
    // (undocumented)
    export type Handle = 3;
    // (undocumented)
    export type Tree = 1;
    const Tree: Tree;
    const Blob: Blob;
    const Handle: Handle;
    const Attachment: Attachment;
}

// @public
export type SummaryType = SummaryType.Attachment | SummaryType.Blob | SummaryType.Handle | SummaryType.Tree;

// @public
export type SummaryTypeNoHandle = SummaryType.Tree | SummaryType.Blob | SummaryType.Attachment;

// @public
export enum TreeEntry {
    // (undocumented)
    Attachment = "Attachment",
    // (undocumented)
    Blob = "Blob",
    // (undocumented)
    Tree = "Tree"
}

```
