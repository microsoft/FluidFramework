## API Report File for "@fluidframework/runtime-definitions"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { AttachState } from '@fluidframework/container-definitions';
import { FluidObject } from '@fluidframework/core-interfaces';
import { IAudience } from '@fluidframework/container-definitions';
import { IClientDetails } from '@fluidframework/protocol-definitions';
import { IDeltaManager } from '@fluidframework/container-definitions';
import { IDisposable } from '@fluidframework/common-definitions';
import { IDocumentMessage } from '@fluidframework/protocol-definitions';
import { IDocumentStorageService } from '@fluidframework/driver-definitions';
import { IEvent } from '@fluidframework/common-definitions';
import { IEventProvider } from '@fluidframework/common-definitions';
import { IFluidHandle } from '@fluidframework/core-interfaces';
import { IFluidRouter } from '@fluidframework/core-interfaces';
import { ILoaderOptions } from '@fluidframework/container-definitions';
import { IProvideFluidHandleContext } from '@fluidframework/core-interfaces';
import { IQuorumClients } from '@fluidframework/protocol-definitions';
import { IRequest } from '@fluidframework/core-interfaces';
import { IResponse } from '@fluidframework/core-interfaces';
import { ISequencedDocumentMessage } from '@fluidframework/protocol-definitions';
import { ISignalMessage } from '@fluidframework/protocol-definitions';
import { ISnapshotTree } from '@fluidframework/protocol-definitions';
import { ISummaryTree } from '@fluidframework/protocol-definitions';
import { ITelemetryBaseLogger } from '@fluidframework/common-definitions';
import { ITree } from '@fluidframework/protocol-definitions';
import { SummaryTree } from '@fluidframework/protocol-definitions';
import { TelemetryEventPropertyType } from '@fluidframework/common-definitions';

// @public
export type AliasResult = "Success" | "Conflict" | "AlreadyAliased";

// @public @deprecated (undocumented)
export enum BindState {
    // (undocumented)
    Binding = "Binding",
    // (undocumented)
    Bound = "Bound",
    // (undocumented)
    NotBound = "NotBound"
}

// @public (undocumented)
export const blobCountPropertyName = "BlobCount";

// @public (undocumented)
export const channelsTreeName = ".channels";

// @public (undocumented)
export type CreateChildSummarizerNodeFn = (summarizeInternal: SummarizeInternalFn, getGCDataFn: (fullGC?: boolean) => Promise<IGarbageCollectionData>, getInitialGCSummaryDetailsFn: () => Promise<IGarbageCollectionSummaryDetails>) => ISummarizerNodeWithGC;

// @public (undocumented)
export type CreateChildSummarizerNodeParam = {
    type: CreateSummarizerNodeSource.FromSummary;
} | {
    type: CreateSummarizerNodeSource.FromAttach;
    sequenceNumber: number;
    snapshot: ITree;
} | {
    type: CreateSummarizerNodeSource.Local;
};

// @public (undocumented)
export enum CreateSummarizerNodeSource {
    // (undocumented)
    FromAttach = 1,
    // (undocumented)
    FromSummary = 0,
    // (undocumented)
    Local = 2
}

// @public
export type FluidDataStoreRegistryEntry = Readonly<Partial<IProvideFluidDataStoreRegistry & IProvideFluidDataStoreFactory>>;

// @public
export enum FlushMode {
    Immediate = 0,
    TurnBased = 1
}

// @public (undocumented)
export const gcBlobKey = "gc";

// @public
export interface IAttachMessage {
    id: string;
    snapshot: ITree;
    type: string;
}

// @public
export interface IContainerRuntimeBase extends IEventProvider<IContainerRuntimeBaseEvents>, IProvideFluidHandleContext {
    // (undocumented)
    readonly clientDetails: IClientDetails;
    createDataStore(pkg: string | string[]): Promise<IDataStore>;
    // @internal @deprecated (undocumented)
    _createDataStoreWithProps(pkg: string | string[], props?: any, id?: string): Promise<IDataStore>;
    createDetachedDataStore(pkg: Readonly<string[]>): IFluidDataStoreContextDetached;
    getAbsoluteUrl(relativeUrl: string): Promise<string | undefined>;
    getAudience(): IAudience;
    getQuorum(): IQuorumClients;
    // (undocumented)
    readonly logger: ITelemetryBaseLogger;
    orderSequentially(callback: () => void): void;
    request(request: IRequest): Promise<IResponse>;
    // @deprecated
    setFlushMode(mode: FlushMode): void;
    submitSignal(type: string, content: any): void;
    // (undocumented)
    uploadBlob(blob: ArrayBufferLike): Promise<IFluidHandle<ArrayBufferLike>>;
}

// @public (undocumented)
export interface IContainerRuntimeBaseEvents extends IEvent {
    // (undocumented)
    (event: "batchBegin" | "op", listener: (op: ISequencedDocumentMessage) => void): any;
    // (undocumented)
    (event: "batchEnd", listener: (error: any, op: ISequencedDocumentMessage) => void): any;
    // (undocumented)
    (event: "signal", listener: (message: IInboundSignalMessage, local: boolean) => void): any;
}

// @public
export interface IDataStore extends IFluidRouter {
    trySetAlias(alias: string): Promise<AliasResult>;
}

// @public
export interface IEnvelope {
    address: string;
    contents: any;
}

// @public
export interface IFluidDataStoreChannel extends IFluidRouter, IDisposable {
    // (undocumented)
    applyStashedOp(content: any): Promise<unknown>;
    // @deprecated (undocumented)
    attachGraph(): void;
    readonly attachState: AttachState;
    getAttachSummary(telemetryContext?: ITelemetryContext): ISummaryTreeWithStats;
    getGCData(fullGC?: boolean): Promise<IGarbageCollectionData>;
    // (undocumented)
    readonly id: string;
    makeVisibleAndAttachGraph(): void;
    process(message: ISequencedDocumentMessage, local: boolean, localOpMetadata: unknown): void;
    processSignal(message: any, local: boolean): void;
    reSubmit(type: string, content: any, localOpMetadata: unknown): any;
    rollback?(type: string, content: any, localOpMetadata: unknown): void;
    setConnectionState(connected: boolean, clientId?: string): any;
    summarize(fullTree?: boolean, trackState?: boolean, telemetryContext?: ITelemetryContext): Promise<ISummaryTreeWithStats>;
    updateUsedRoutes(usedRoutes: string[], gcTimestamp?: number): void;
    // (undocumented)
    readonly visibilityState?: VisibilityState_2;
}

// @public
export interface IFluidDataStoreContext extends IEventProvider<IFluidDataStoreContextEvents>, Partial<IProvideFluidDataStoreRegistry>, IProvideFluidHandleContext {
    addedGCOutboundReference?(srcHandle: IFluidHandle, outboundHandle: IFluidHandle): void;
    readonly attachState: AttachState;
    // (undocumented)
    readonly baseSnapshot: ISnapshotTree | undefined;
    // @deprecated (undocumented)
    bindToContext(): void;
    // (undocumented)
    readonly clientDetails: IClientDetails;
    // (undocumented)
    readonly clientId: string | undefined;
    // (undocumented)
    readonly connected: boolean;
    // (undocumented)
    readonly containerRuntime: IContainerRuntimeBase;
    // @deprecated (undocumented)
    readonly createProps?: any;
    // (undocumented)
    readonly deltaManager: IDeltaManager<ISequencedDocumentMessage, IDocumentMessage>;
    getAbsoluteUrl(relativeUrl: string): Promise<string | undefined>;
    getAudience(): IAudience;
    getBaseGCDetails?(): Promise<IGarbageCollectionDetailsBase>;
    // (undocumented)
    getCreateChildSummarizerNodeFn(
    id: string,
    createParam: CreateChildSummarizerNodeParam): CreateChildSummarizerNodeFn;
    // @deprecated (undocumented)
    getInitialGCSummaryDetails(): Promise<IGarbageCollectionSummaryDetails>;
    getQuorum(): IQuorumClients;
    // (undocumented)
    readonly id: string;
    readonly isLocalDataStore: boolean;
    // (undocumented)
    readonly logger: ITelemetryBaseLogger;
    makeLocallyVisible(): void;
    // (undocumented)
    readonly options: ILoaderOptions;
    readonly packagePath: readonly string[];
    readonly scope: FluidObject;
    setChannelDirty(address: string): void;
    // (undocumented)
    readonly storage: IDocumentStorageService;
    submitMessage(type: string, content: any, localOpMetadata: unknown): void;
    submitSignal(type: string, content: any): void;
    // (undocumented)
    uploadBlob(blob: ArrayBufferLike): Promise<IFluidHandle<ArrayBufferLike>>;
}

// @public (undocumented)
export interface IFluidDataStoreContextDetached extends IFluidDataStoreContext {
    attachRuntime(factory: IProvideFluidDataStoreFactory, dataStoreRuntime: IFluidDataStoreChannel): Promise<void>;
}

// @public (undocumented)
export interface IFluidDataStoreContextEvents extends IEvent {
    // (undocumented)
    (event: "attaching" | "attached", listener: () => void): any;
}

// @public (undocumented)
export const IFluidDataStoreFactory: keyof IProvideFluidDataStoreFactory;

// @public
export interface IFluidDataStoreFactory extends IProvideFluidDataStoreFactory {
    instantiateDataStore(context: IFluidDataStoreContext, existing: boolean): Promise<IFluidDataStoreChannel>;
    type: string;
}

// @public (undocumented)
export const IFluidDataStoreRegistry: keyof IProvideFluidDataStoreRegistry;

// @public
export interface IFluidDataStoreRegistry extends IProvideFluidDataStoreRegistry {
    // (undocumented)
    get(name: string): Promise<FluidDataStoreRegistryEntry | undefined>;
}

// @public
export interface IGarbageCollectionData {
    gcNodes: {
        [id: string]: string[];
    };
}

// @public
export interface IGarbageCollectionDetailsBase {
    gcData?: IGarbageCollectionData;
    unrefTimestamp?: number;
    usedRoutes?: string[];
}

// @public
export interface IGarbageCollectionNodeData {
    outboundRoutes: string[];
    unreferencedTimestampMs?: number;
}

// @public
export interface IGarbageCollectionState {
    // (undocumented)
    gcNodes: {
        [id: string]: IGarbageCollectionNodeData;
    };
}

// @public @deprecated (undocumented)
export type IGarbageCollectionSummaryDetails = IGarbageCollectionDetailsBase;

// @public
export interface IInboundSignalMessage extends ISignalMessage {
    // (undocumented)
    type: string;
}

// @public
export type InboundAttachMessage = Omit<IAttachMessage, "snapshot"> & {
    snapshot: IAttachMessage["snapshot"] | null;
};

// @public (undocumented)
export interface IProvideFluidDataStoreFactory {
    // (undocumented)
    readonly IFluidDataStoreFactory: IFluidDataStoreFactory;
}

// @public (undocumented)
export interface IProvideFluidDataStoreRegistry {
    // (undocumented)
    readonly IFluidDataStoreRegistry: IFluidDataStoreRegistry;
}

// @public (undocumented)
export interface ISignalEnvelope {
    address?: string;
    clientSignalSequenceNumber: number;
    contents: {
        type: string;
        content: any;
    };
}

// @public
export interface ISummarizeInternalResult extends ISummarizeResult {
    // (undocumented)
    id: string;
    pathPartsForChildren?: string[];
}

// @public
export interface ISummarizeResult {
    // (undocumented)
    stats: ISummaryStats;
    // (undocumented)
    summary: SummaryTree;
}

// @public (undocumented)
export interface ISummarizerNode {
    // (undocumented)
    createChild(
    summarizeInternalFn: SummarizeInternalFn,
    id: string,
    createParam: CreateChildSummarizerNodeParam,
    config?: ISummarizerNodeConfig): ISummarizerNode;
    // (undocumented)
    getChild(id: string): ISummarizerNode | undefined;
    invalidate(sequenceNumber: number): void;
    loadBaseSummary(snapshot: ISnapshotTree, readAndParseBlob: <T>(id: string) => Promise<T>): Promise<ISnapshotTree>;
    loadBaseSummaryWithoutDifferential(snapshot: ISnapshotTree): void;
    recordChange(op: ISequencedDocumentMessage): void;
    readonly referenceSequenceNumber: number;
    summarize(fullTree: boolean, trackState?: boolean, telemetryContext?: ITelemetryContext): Promise<ISummarizeResult>;
}

// @public (undocumented)
export interface ISummarizerNodeConfig {
    readonly canReuseHandle?: boolean;
    readonly throwOnFailure?: true;
}

// @public (undocumented)
export interface ISummarizerNodeConfigWithGC extends ISummarizerNodeConfig {
    readonly gcDisabled?: boolean;
}

// @public
export interface ISummarizerNodeWithGC extends ISummarizerNode {
    // (undocumented)
    createChild(
    summarizeInternalFn: SummarizeInternalFn,
    id: string,
    createParam: CreateChildSummarizerNodeParam,
    config?: ISummarizerNodeConfigWithGC, getGCDataFn?: (fullGC?: boolean) => Promise<IGarbageCollectionData>, getInitialGCSummaryDetailsFn?: () => Promise<IGarbageCollectionSummaryDetails>): ISummarizerNodeWithGC;
    deleteChild(id: string): void;
    getBaseGCDetails?(): IGarbageCollectionDetailsBase;
    // (undocumented)
    getChild(id: string): ISummarizerNodeWithGC | undefined;
    getGCData(fullGC?: boolean): Promise<IGarbageCollectionData>;
    // @deprecated (undocumented)
    getGCSummaryDetails(): IGarbageCollectionSummaryDetails;
    isReferenced(): boolean;
    updateUsedRoutes(usedRoutes: string[], gcTimestamp?: number): void;
}

// @public
export interface ISummaryStats {
    // (undocumented)
    blobNodeCount: number;
    // (undocumented)
    handleNodeCount: number;
    // (undocumented)
    totalBlobSize: number;
    // (undocumented)
    treeNodeCount: number;
    // (undocumented)
    unreferencedBlobSize: number;
}

// @public
export interface ISummaryTreeWithStats {
    stats: ISummaryStats;
    summary: ISummaryTree;
}

// @public
export interface ITelemetryContext {
    get(prefix: string, property: string): TelemetryEventPropertyType;
    serialize(): string;
    set(prefix: string, property: string, value: TelemetryEventPropertyType): void;
}

// @public
export type NamedFluidDataStoreRegistryEntries = Iterable<NamedFluidDataStoreRegistryEntry>;

// @public
export type NamedFluidDataStoreRegistryEntry = [string, Promise<FluidDataStoreRegistryEntry>];

// @public (undocumented)
export type SummarizeInternalFn = (fullTree: boolean, trackState: boolean, telemetryContext?: ITelemetryContext) => Promise<ISummarizeInternalResult>;

// @public (undocumented)
export const totalBlobSizePropertyName = "TotalBlobSize";

// @public
const VisibilityState_2: {
    NotVisible: string;
    LocallyVisible: string;
    GloballyVisible: string;
};

// @public (undocumented)
type VisibilityState_2 = typeof VisibilityState_2[keyof typeof VisibilityState_2];
export { VisibilityState_2 as VisibilityState }

// (No @packageDocumentation comment for this package)

```
