## API Report File for "@fluidframework/runtime-definitions"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { AttachState } from '@fluidframework/container-definitions';
import { FluidObject } from '@fluidframework/core-interfaces';
import { IAudience } from '@fluidframework/container-definitions';
import { IClientDetails } from '@fluidframework/protocol-definitions';
import { IDeltaManager } from '@fluidframework/container-definitions';
import { IDisposable } from '@fluidframework/common-definitions';
import { IDocumentMessage } from '@fluidframework/protocol-definitions';
import { IDocumentStorageService } from '@fluidframework/driver-definitions';
import { IEvent } from '@fluidframework/common-definitions';
import { IEventProvider } from '@fluidframework/common-definitions';
import { IFluidHandle } from '@fluidframework/core-interfaces';
import { IFluidRouter } from '@fluidframework/core-interfaces';
import { ILoaderOptions } from '@fluidframework/container-definitions';
import { IProvideFluidHandleContext } from '@fluidframework/core-interfaces';
import { IQuorumClients } from '@fluidframework/protocol-definitions';
import { IRequest } from '@fluidframework/core-interfaces';
import { IResponse } from '@fluidframework/core-interfaces';
import { ISequencedDocumentMessage } from '@fluidframework/protocol-definitions';
import { ISignalMessage } from '@fluidframework/protocol-definitions';
import { ISnapshotTree } from '@fluidframework/protocol-definitions';
import { ISummaryTree } from '@fluidframework/protocol-definitions';
import { ITelemetryBaseLogger } from '@fluidframework/common-definitions';
import { ITree } from '@fluidframework/protocol-definitions';
import type { IUser } from '@fluidframework/protocol-definitions';
import { SummaryTree } from '@fluidframework/protocol-definitions';
import { TelemetryEventPropertyType } from '@fluidframework/common-definitions';

// @public
export type AliasResult = "Success" | "Conflict" | "AlreadyAliased";

// @alpha
export interface AttributionInfo {
    timestamp: number;
    user: IUser;
}

// @alpha
export type AttributionKey = OpAttributionKey | DetachedAttributionKey | LocalAttributionKey;

// @public (undocumented)
export const blobCountPropertyName = "BlobCount";

// @public (undocumented)
export const channelsTreeName = ".channels";

// @alpha
export type CompressedId = FinalCompressedId | LocalCompressedId;

// @public (undocumented)
export type CreateChildSummarizerNodeFn = (summarizeInternal: SummarizeInternalFn, getGCDataFn: (fullGC?: boolean) => Promise<IGarbageCollectionData>,
getBaseGCDetailsFn?: () => Promise<IGarbageCollectionDetailsBase>) => ISummarizerNodeWithGC;

// @public (undocumented)
export type CreateChildSummarizerNodeParam = {
    type: CreateSummarizerNodeSource.FromSummary;
} | {
    type: CreateSummarizerNodeSource.FromAttach;
    sequenceNumber: number;
    snapshot: ITree;
} | {
    type: CreateSummarizerNodeSource.Local;
};

// @public (undocumented)
export enum CreateSummarizerNodeSource {
    // (undocumented)
    FromAttach = 1,
    // (undocumented)
    FromSummary = 0,
    // (undocumented)
    Local = 2
}

// @alpha
export interface DetachedAttributionKey {
    id: 0;
    // (undocumented)
    type: "detached";
}

// @alpha
export type FinalCompressedId = number & {
    readonly FinalCompressedId: "5d83d1e2-98b7-4e4e-a889-54c855cfa73d";
    readonly OpNormalized: "9209432d-a959-4df7-b2ad-767ead4dbcae";
};

// @public
export type FluidDataStoreRegistryEntry = Readonly<Partial<IProvideFluidDataStoreRegistry & IProvideFluidDataStoreFactory>>;

// @public
export enum FlushMode {
    Immediate = 0,
    TurnBased = 1
}

// @public (undocumented)
export enum FlushModeExperimental {
    Async = 2
}

// @public
export const gcBlobPrefix = "__gc";

// @public
export const gcDeletedBlobKey = "__deletedNodes";

// @public
export const gcTombstoneBlobKey = "__tombstones";

// @public
export const gcTreeKey = "gc";

// @public
export interface IAttachMessage {
    id: string;
    snapshot: ITree;
    type: string;
}

// @public
export interface IContainerRuntimeBase extends IEventProvider<IContainerRuntimeBaseEvents>, IProvideFluidHandleContext {
    // (undocumented)
    readonly clientDetails: IClientDetails;
    createDataStore(pkg: string | string[]): Promise<IDataStore>;
    // @internal @deprecated (undocumented)
    _createDataStoreWithProps(pkg: string | string[], props?: any, id?: string): Promise<IDataStore>;
    createDetachedDataStore(pkg: Readonly<string[]>): IFluidDataStoreContextDetached;
    getAbsoluteUrl(relativeUrl: string): Promise<string | undefined>;
    getAudience(): IAudience;
    getQuorum(): IQuorumClients;
    // (undocumented)
    readonly logger: ITelemetryBaseLogger;
    orderSequentially(callback: () => void): void;
    request(request: IRequest): Promise<IResponse>;
    submitSignal(type: string, content: any): void;
    // (undocumented)
    uploadBlob(blob: ArrayBufferLike): Promise<IFluidHandle<ArrayBufferLike>>;
}

// @public (undocumented)
export interface IContainerRuntimeBaseEvents extends IEvent {
    // (undocumented)
    (event: "batchBegin", listener: (op: ISequencedDocumentMessage) => void): any;
    // (undocumented)
    (event: "op", listener: (op: ISequencedDocumentMessage, runtimeMessage?: boolean) => void): any;
    // (undocumented)
    (event: "batchEnd", listener: (error: any, op: ISequencedDocumentMessage) => void): any;
    // (undocumented)
    (event: "signal", listener: (message: IInboundSignalMessage, local: boolean) => void): any;
}

// @public
export interface IDataStore extends IFluidRouter {
    readonly entryPoint?: IFluidHandle<FluidObject>;
    trySetAlias(alias: string): Promise<AliasResult>;
}

// @public
export interface IdCreationRange {
    // (undocumented)
    readonly ids?: IdCreationRange.Ids;
    // (undocumented)
    readonly sessionId: SessionId;
}

// @public (undocumented)
export namespace IdCreationRange {
    // (undocumented)
    export interface HasOverrides {
        // (undocumented)
        readonly overrides: Overrides;
    }
    // (undocumented)
    export type Ids = {
        readonly first: UnackedLocalId;
        readonly last: UnackedLocalId;
    } | ({
        readonly first?: UnackedLocalId;
        readonly last?: UnackedLocalId;
    } & HasOverrides);
    // (undocumented)
    export type Override = readonly [id: UnackedLocalId, override: string];
    // (undocumented)
    export type Overrides = readonly [Override, ...Override[]];
}

// @public (undocumented)
export type IdCreationRangeWithStashedState = IdCreationRange & {
    stashedState: SerializedIdCompressorWithOngoingSession;
};

// @public
export interface IEnvelope {
    address: string;
    contents: any;
}

// @public
export interface IExperimentalIncrementalSummaryContext {
    latestSummarySequenceNumber: number;
    summaryPath: string;
    summarySequenceNumber: number;
}

// @public
export interface IFluidDataStoreChannel extends IFluidRouter, IDisposable {
    // (undocumented)
    applyStashedOp(content: any): Promise<unknown>;
    // @deprecated
    attachGraph(): void;
    readonly attachState: AttachState;
    readonly entryPoint?: IFluidHandle<FluidObject>;
    getAttachSummary(telemetryContext?: ITelemetryContext): ISummaryTreeWithStats;
    getGCData(fullGC?: boolean): Promise<IGarbageCollectionData>;
    // (undocumented)
    readonly id: string;
    makeVisibleAndAttachGraph(): void;
    process(message: ISequencedDocumentMessage, local: boolean, localOpMetadata: unknown): void;
    processSignal(message: any, local: boolean): void;
    reSubmit(type: string, content: any, localOpMetadata: unknown): any;
    rollback?(type: string, content: any, localOpMetadata: unknown): void;
    setConnectionState(connected: boolean, clientId?: string): any;
    summarize(fullTree?: boolean, trackState?: boolean, telemetryContext?: ITelemetryContext): Promise<ISummaryTreeWithStats>;
    updateUsedRoutes(usedRoutes: string[]): void;
    // (undocumented)
    readonly visibilityState: VisibilityState_2;
}

// @public
export interface IFluidDataStoreContext extends IEventProvider<IFluidDataStoreContextEvents>, Partial<IProvideFluidDataStoreRegistry>, IProvideFluidHandleContext {
    addedGCOutboundReference?(srcHandle: IFluidHandle, outboundHandle: IFluidHandle): void;
    readonly attachState: AttachState;
    // (undocumented)
    readonly baseSnapshot: ISnapshotTree | undefined;
    // @deprecated (undocumented)
    bindToContext(): void;
    // (undocumented)
    readonly clientDetails: IClientDetails;
    // (undocumented)
    readonly clientId: string | undefined;
    // (undocumented)
    readonly connected: boolean;
    // (undocumented)
    readonly containerRuntime: IContainerRuntimeBase;
    // @deprecated (undocumented)
    readonly createProps?: any;
    // (undocumented)
    readonly deltaManager: IDeltaManager<ISequencedDocumentMessage, IDocumentMessage>;
    ensureNoDataModelChanges<T>(callback: () => T): T;
    getAbsoluteUrl(relativeUrl: string): Promise<string | undefined>;
    getAudience(): IAudience;
    // @deprecated (undocumented)
    getBaseGCDetails(): Promise<IGarbageCollectionDetailsBase>;
    // (undocumented)
    getCreateChildSummarizerNodeFn(
    id: string,
    createParam: CreateChildSummarizerNodeParam): CreateChildSummarizerNodeFn;
    getQuorum(): IQuorumClients;
    // (undocumented)
    readonly id: string;
    // (undocumented)
    readonly idCompressor?: IIdCompressor;
    readonly isLocalDataStore: boolean;
    // (undocumented)
    readonly logger: ITelemetryBaseLogger;
    makeLocallyVisible(): void;
    // (undocumented)
    readonly options: ILoaderOptions;
    readonly packagePath: readonly string[];
    readonly scope: FluidObject;
    setChannelDirty(address: string): void;
    // (undocumented)
    readonly storage: IDocumentStorageService;
    submitMessage(type: string, content: any, localOpMetadata: unknown): void;
    submitSignal(type: string, content: any): void;
    // (undocumented)
    uploadBlob(blob: ArrayBufferLike): Promise<IFluidHandle<ArrayBufferLike>>;
}

// @public (undocumented)
export interface IFluidDataStoreContextDetached extends IFluidDataStoreContext {
    attachRuntime(factory: IProvideFluidDataStoreFactory, dataStoreRuntime: IFluidDataStoreChannel): Promise<void>;
}

// @public (undocumented)
export interface IFluidDataStoreContextEvents extends IEvent {
    // (undocumented)
    (event: "attaching" | "attached", listener: () => void): any;
}

// @public (undocumented)
export const IFluidDataStoreFactory: keyof IProvideFluidDataStoreFactory;

// @public
export interface IFluidDataStoreFactory extends IProvideFluidDataStoreFactory {
    instantiateDataStore(context: IFluidDataStoreContext, existing: boolean): Promise<IFluidDataStoreChannel>;
    type: string;
}

// @public (undocumented)
export const IFluidDataStoreRegistry: keyof IProvideFluidDataStoreRegistry;

// @public
export interface IFluidDataStoreRegistry extends IProvideFluidDataStoreRegistry {
    // (undocumented)
    get(name: string): Promise<FluidDataStoreRegistryEntry | undefined>;
}

// @public
export interface IGarbageCollectionData {
    gcNodes: {
        [id: string]: string[];
    };
}

// @public
export interface IGarbageCollectionDetailsBase {
    gcData?: IGarbageCollectionData;
    usedRoutes?: string[];
}

// @public
export interface IIdCompressor {
    // Warning: (ae-incompatible-release-tags) The symbol "decompress" is marked as @public, but its signature references "SessionSpaceCompressedId" which is marked as @alpha
    // Warning: (ae-incompatible-release-tags) The symbol "decompress" is marked as @public, but its signature references "FinalCompressedId" which is marked as @alpha
    decompress(id: SessionSpaceCompressedId | FinalCompressedId): StableId | string;
    // Warning: (ae-incompatible-release-tags) The symbol "generateCompressedId" is marked as @public, but its signature references "SessionSpaceCompressedId" which is marked as @alpha
    generateCompressedId(override?: string): SessionSpaceCompressedId;
    // (undocumented)
    localSessionId: SessionId;
    // Warning: (ae-incompatible-release-tags) The symbol "normalizeToOpSpace" is marked as @public, but its signature references "SessionSpaceCompressedId" which is marked as @alpha
    normalizeToOpSpace(id: SessionSpaceCompressedId): OpSpaceCompressedId;
    // Warning: (ae-incompatible-release-tags) The symbol "normalizeToSessionSpace" is marked as @public, but its signature references "SessionSpaceCompressedId" which is marked as @alpha
    normalizeToSessionSpace(id: OpSpaceCompressedId, originSessionId: SessionId): SessionSpaceCompressedId;
    // Warning: (ae-incompatible-release-tags) The symbol "normalizeToSessionSpace" is marked as @public, but its signature references "FinalCompressedId" which is marked as @alpha
    // Warning: (ae-incompatible-release-tags) The symbol "normalizeToSessionSpace" is marked as @public, but its signature references "SessionSpaceCompressedId" which is marked as @alpha
    normalizeToSessionSpace(id: FinalCompressedId): SessionSpaceCompressedId;
    // Warning: (ae-incompatible-release-tags) The symbol "recompress" is marked as @public, but its signature references "SessionSpaceCompressedId" which is marked as @alpha
    recompress(uncompressed: string): SessionSpaceCompressedId;
    // Warning: (ae-incompatible-release-tags) The symbol "tryDecompress" is marked as @public, but its signature references "SessionSpaceCompressedId" which is marked as @alpha
    // Warning: (ae-incompatible-release-tags) The symbol "tryDecompress" is marked as @public, but its signature references "FinalCompressedId" which is marked as @alpha
    tryDecompress(id: SessionSpaceCompressedId | FinalCompressedId): StableId | string | undefined;
    // Warning: (ae-incompatible-release-tags) The symbol "tryRecompress" is marked as @public, but its signature references "SessionSpaceCompressedId" which is marked as @alpha
    tryRecompress(uncompressed: string): SessionSpaceCompressedId | undefined;
}

// @public (undocumented)
export interface IIdCompressorCore {
    // (undocumented)
    clusterCapacity: number;
    finalizeCreationRange(range: IdCreationRange): void;
    serialize(withSession: true): SerializedIdCompressorWithOngoingSession;
    serialize(withSession: false): SerializedIdCompressorWithNoSession;
    takeNextCreationRange(): IdCreationRange;
}

// @public
export interface IInboundSignalMessage extends ISignalMessage {
    // (undocumented)
    type: string;
}

// @public
export type InboundAttachMessage = Omit<IAttachMessage, "snapshot"> & {
    snapshot: IAttachMessage["snapshot"] | null;
};

// @public (undocumented)
export interface IProvideFluidDataStoreFactory {
    // (undocumented)
    readonly IFluidDataStoreFactory: IFluidDataStoreFactory;
}

// @public (undocumented)
export interface IProvideFluidDataStoreRegistry {
    // (undocumented)
    readonly IFluidDataStoreRegistry: IFluidDataStoreRegistry;
}

// @public (undocumented)
export interface ISignalEnvelope {
    address?: string;
    clientSignalSequenceNumber: number;
    contents: {
        type: string;
        content: any;
    };
}

// @public
export interface ISummarizeInternalResult extends ISummarizeResult {
    // (undocumented)
    id: string;
    pathPartsForChildren?: string[];
}

// @public
export interface ISummarizeResult {
    // (undocumented)
    stats: ISummaryStats;
    // (undocumented)
    summary: SummaryTree;
}

// @public (undocumented)
export interface ISummarizerNode {
    // (undocumented)
    createChild(
    summarizeInternalFn: SummarizeInternalFn,
    id: string,
    createParam: CreateChildSummarizerNodeParam,
    config?: ISummarizerNodeConfig): ISummarizerNode;
    // (undocumented)
    getChild(id: string): ISummarizerNode | undefined;
    invalidate(sequenceNumber: number): void;
    isSummaryInProgress?(): boolean;
    recordChange(op: ISequencedDocumentMessage): void;
    readonly referenceSequenceNumber: number;
    summarize(fullTree: boolean, trackState?: boolean, telemetryContext?: ITelemetryContext): Promise<ISummarizeResult>;
    updateBaseSummaryState(snapshot: ISnapshotTree): void;
}

// @public (undocumented)
export interface ISummarizerNodeConfig {
    readonly canReuseHandle?: boolean;
    readonly throwOnFailure?: true;
}

// @public (undocumented)
export interface ISummarizerNodeConfigWithGC extends ISummarizerNodeConfig {
    readonly gcDisabled?: boolean;
}

// @public
export interface ISummarizerNodeWithGC extends ISummarizerNode {
    // (undocumented)
    createChild(
    summarizeInternalFn: SummarizeInternalFn,
    id: string,
    createParam: CreateChildSummarizerNodeParam,
    config?: ISummarizerNodeConfigWithGC, getGCDataFn?: (fullGC?: boolean) => Promise<IGarbageCollectionData>,
    getBaseGCDetailsFn?: () => Promise<IGarbageCollectionDetailsBase>): ISummarizerNodeWithGC;
    deleteChild(id: string): void;
    // (undocumented)
    getChild(id: string): ISummarizerNodeWithGC | undefined;
    getGCData(fullGC?: boolean): Promise<IGarbageCollectionData>;
    isReferenced(): boolean;
    updateUsedRoutes(usedRoutes: string[]): void;
}

// @public
export interface ISummaryStats {
    // (undocumented)
    blobNodeCount: number;
    // (undocumented)
    handleNodeCount: number;
    // (undocumented)
    totalBlobSize: number;
    // (undocumented)
    treeNodeCount: number;
    // (undocumented)
    unreferencedBlobSize: number;
}

// @public
export interface ISummaryTreeWithStats {
    stats: ISummaryStats;
    summary: ISummaryTree;
}

// @public
export interface ITelemetryContext {
    get(prefix: string, property: string): TelemetryEventPropertyType;
    serialize(): string;
    set(prefix: string, property: string, value: TelemetryEventPropertyType): void;
    setMultiple(prefix: string, property: string, values: Record<string, TelemetryEventPropertyType>): void;
}

// @alpha
export interface LocalAttributionKey {
    // (undocumented)
    type: "local";
}

// @alpha
export type LocalCompressedId = number & {
    readonly LocalCompressedId: "6fccb42f-e2a4-4243-bd29-f13d12b9c6d1";
} & SessionUnique;

// @public
export type NamedFluidDataStoreRegistryEntries = Iterable<NamedFluidDataStoreRegistryEntry>;

// @public
export type NamedFluidDataStoreRegistryEntry = [string, Promise<FluidDataStoreRegistryEntry>];

// @alpha
export interface OpAttributionKey {
    seq: number;
    type: "op";
}

// Warning: (ae-incompatible-release-tags) The symbol "OpSpaceCompressedId" is marked as @public, but its signature references "CompressedId" which is marked as @alpha
//
// @public
export type OpSpaceCompressedId = CompressedId & {
    readonly OpNormalized: "9209432d-a959-4df7-b2ad-767ead4dbcae";
};

// @public
export type SerializedCluster = readonly [
sessionIndex: number,
capacity: number,
countOrOverrides?: number | SerializedClusterOverrides,
overrides?: SerializedClusterOverrides
];

// Warning: (ae-incompatible-release-tags) The symbol "SerializedClusterOverrides" is marked as @public, but its signature references "FinalCompressedId" which is marked as @alpha
//
// @public (undocumented)
export type SerializedClusterOverrides = readonly [
overriddenFinalIndex: number,
override: string,
overriddenId?: FinalCompressedId
][];

// @public
export interface SerializedIdCompressor extends VersionedSerializedIdCompressor {
    readonly clusterCapacity: number;
    readonly clusters: readonly SerializedCluster[];
    readonly sessions: readonly SerializedSessionData[];
}

// @public
export interface SerializedIdCompressorWithNoSession extends SerializedIdCompressor {
    // (undocumented)
    readonly _noLocalState: "3aa2e1e8-cc28-4ea7-bc1a-a11dc3f26dfb";
}

// @public
export interface SerializedIdCompressorWithOngoingSession extends SerializedIdCompressor {
    // (undocumented)
    readonly _hasLocalState: "1281acae-6d14-47e7-bc92-71c8ee0819cb";
    readonly localSessionIndex: number;
    readonly localState?: SerializedLocalState;
}

// Warning: (ae-incompatible-release-tags) The symbol "SerializedLocalOverrides" is marked as @public, but its signature references "LocalCompressedId" which is marked as @alpha
//
// @public (undocumented)
export type SerializedLocalOverrides = readonly (readonly [LocalCompressedId, string])[];

// @public (undocumented)
export interface SerializedLocalState {
    // Warning: (ae-incompatible-release-tags) The symbol "lastTakenLocalId" is marked as @public, but its signature references "LocalCompressedId" which is marked as @alpha
    readonly lastTakenLocalId: LocalCompressedId | undefined;
    readonly localIdCount: number;
    readonly overrides?: SerializedLocalOverrides;
    readonly sessionNormalizer: SerializedSessionIdNormalizer;
}

// @public
export type SerializedSessionData = readonly [
sessionId: SessionId
];

// @public
export interface SerializedSessionIdNormalizer {
    // Warning: (ae-incompatible-release-tags) The symbol "localRanges" is marked as @public, but its signature references "LocalCompressedId" which is marked as @alpha
    // Warning: (ae-incompatible-release-tags) The symbol "localRanges" is marked as @public, but its signature references "FinalCompressedId" which is marked as @alpha
    //
    // (undocumented)
    readonly localRanges: readonly (readonly [
    firstLocal: LocalCompressedId,
    lastLocal: LocalCompressedId,
    finalRanges?: readonly (readonly [
    alignedLocal: LocalCompressedId,
    firstFinal: FinalCompressedId,
    lastFinal: FinalCompressedId
    ])[]
    ])[];
    // Warning: (ae-incompatible-release-tags) The symbol "nextLocalId" is marked as @public, but its signature references "LocalCompressedId" which is marked as @alpha
    //
    // (undocumented)
    readonly nextLocalId: LocalCompressedId;
}

// @public
export type SessionId = StableId & {
    readonly SessionId: "4498f850-e14e-4be9-8db0-89ec00997e58";
};

// @alpha
export type SessionSpaceCompressedId = CompressedId & SessionUnique;

// @public
export interface SessionUnique {
    // (undocumented)
    readonly SessionUnique: "cea55054-6b82-4cbf-ad19-1fa645ea3b3e";
}

// @public
export type StableId = UuidString & {
    readonly StableId: "53172b0d-a3d5-41ea-bd75-b43839c97f5a";
};

// @public (undocumented)
export type SummarizeInternalFn = (fullTree: boolean, trackState: boolean, telemetryContext?: ITelemetryContext, incrementalSummaryContext?: IExperimentalIncrementalSummaryContext) => Promise<ISummarizeInternalResult>;

// @public (undocumented)
export const totalBlobSizePropertyName = "TotalBlobSize";

// Warning: (ae-incompatible-release-tags) The symbol "UnackedLocalId" is marked as @public, but its signature references "LocalCompressedId" which is marked as @alpha
//
// @public (undocumented)
export type UnackedLocalId = LocalCompressedId & OpSpaceCompressedId;

// @public
export type UuidString = string & {
    readonly UuidString: "9d40d0ae-90d9-44b1-9482-9f55d59d5465";
};

// @public
export interface VersionedSerializedIdCompressor {
    // (undocumented)
    readonly version: string;
    // (undocumented)
    readonly _versionedSerializedIdCompressor: "8c73c57c-1cf4-4278-8915-6444cb4f6af5";
}

// @public
const VisibilityState_2: {
    NotVisible: string;
    LocallyVisible: string;
    GloballyVisible: string;
};

// @public (undocumented)
type VisibilityState_2 = typeof VisibilityState_2[keyof typeof VisibilityState_2];
export { VisibilityState_2 as VisibilityState }

// (No @packageDocumentation comment for this package)

```
