{
  "title": "SharedSegmentSequence Class",
  "kind": "Class",
  "members": {
    "Constructor": {
      "(constructor)": "/docs/apis/sequence\\sharedsegmentsequence-class#_constructor_-constructor"
    },
    "Method": {
      "annotateRange": "/docs/apis/sequence\\sharedsegmentsequence-class#annotaterange-method",
      "applyStashedOp": "/docs/apis/sequence\\sharedsegmentsequence-class#applystashedop-method",
      "createLocalReferencePosition": "/docs/apis/sequence\\sharedsegmentsequence-class#createlocalreferenceposition-method",
      "didAttach": "/docs/apis/sequence\\sharedsegmentsequence-class#didattach-method",
      "getContainingSegment": "/docs/apis/sequence\\sharedsegmentsequence-class#getcontainingsegment-method",
      "getCurrentSeq": "/docs/apis/sequence\\sharedsegmentsequence-class#getcurrentseq-method",
      "getIntervalCollection": "/docs/apis/sequence\\sharedsegmentsequence-class#getintervalcollection-method",
      "getIntervalCollectionLabels": "/docs/apis/sequence\\sharedsegmentsequence-class#getintervalcollectionlabels-method",
      "getLength": "/docs/apis/sequence\\sharedsegmentsequence-class#getlength-method",
      "getPosition": "/docs/apis/sequence\\sharedsegmentsequence-class#getposition-method",
      "getPropertiesAtPosition": "/docs/apis/sequence\\sharedsegmentsequence-class#getpropertiesatposition-method",
      "getRangeExtentsOfPosition": "/docs/apis/sequence\\sharedsegmentsequence-class#getrangeextentsofposition-method",
      "getStackContext": "/docs/apis/sequence\\sharedsegmentsequence-class#getstackcontext-method",
      "groupOperation": "/docs/apis/sequence\\sharedsegmentsequence-class#groupoperation-method",
      "initializeLocalCore": "/docs/apis/sequence\\sharedsegmentsequence-class#initializelocalcore-method",
      "insertAtReferencePosition": "/docs/apis/sequence\\sharedsegmentsequence-class#insertatreferenceposition-method",
      "insertFromSpec": "/docs/apis/sequence\\sharedsegmentsequence-class#insertfromspec-method",
      "loadCore": "/docs/apis/sequence\\sharedsegmentsequence-class#loadcore-method",
      "localReferencePositionToPosition": "/docs/apis/sequence\\sharedsegmentsequence-class#localreferencepositiontoposition-method",
      "onConnect": "/docs/apis/sequence\\sharedsegmentsequence-class#onconnect-method",
      "onDisconnect": "/docs/apis/sequence\\sharedsegmentsequence-class#ondisconnect-method",
      "posFromRelativePos": "/docs/apis/sequence\\sharedsegmentsequence-class#posfromrelativepos-method",
      "processCore": "/docs/apis/sequence\\sharedsegmentsequence-class#processcore-method",
      "processGCDataCore": "/docs/apis/sequence\\sharedsegmentsequence-class#processgcdatacore-method",
      "removeLocalReferencePosition": "/docs/apis/sequence\\sharedsegmentsequence-class#removelocalreferenceposition-method",
      "removeRange": "/docs/apis/sequence\\sharedsegmentsequence-class#removerange-method",
      "replaceRange": "/docs/apis/sequence\\sharedsegmentsequence-class#replacerange-method",
      "resolveRemoteClientPosition": "/docs/apis/sequence\\sharedsegmentsequence-class#resolveremoteclientposition-method",
      "reSubmitCore": "/docs/apis/sequence\\sharedsegmentsequence-class#resubmitcore-method",
      "submitSequenceMessage": "/docs/apis/sequence\\sharedsegmentsequence-class#submitsequencemessage-method",
      "summarizeCore": "/docs/apis/sequence\\sharedsegmentsequence-class#summarizecore-method",
      "walkSegments": "/docs/apis/sequence\\sharedsegmentsequence-class#walksegments-method"
    },
    "Property": {
      "client": "/docs/apis/sequence\\sharedsegmentsequence-class#client-property",
      "id": "/docs/apis/sequence\\sharedsegmentsequence-class#id-property",
      "loaded": "/docs/apis/sequence\\sharedsegmentsequence-class#loaded-property",
      "loadedDeferred": "/docs/apis/sequence\\sharedsegmentsequence-class#loadeddeferred-property",
      "segmentFromSpec": "/docs/apis/sequence\\sharedsegmentsequence-class#segmentfromspec-property"
    }
  },
  "package": "@fluidframework/sequence",
  "unscopedPackageName": "sequence"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/sequence](/docs/apis/sequence) &gt; [SharedSegmentSequence](/docs/apis/sequence\sharedsegmentsequence-class)

## Signature {#sharedsegmentsequence-signature}

```typescript
export declare abstract class SharedSegmentSequence<T extends ISegment> extends SharedObject<ISharedSegmentSequenceEvents> implements ISharedIntervalCollection<SequenceInterval>, MergeTreeRevertibleDriver 
```
<b>Extends:</b> [SharedObject](/docs/apis/shared-object-base\sharedobject-class)<!-- -->&lt;[ISharedSegmentSequenceEvents](/docs/apis/sequence\isharedsegmentsequenceevents-interface)

<b>Implements:</b> [ISharedIntervalCollection](/docs/apis/sequence\isharedintervalcollection-interface)<!-- -->&lt;[SequenceInterval](/docs/apis/sequence\sequenceinterval-class)<!-- -->&gt;, MergeTreeRevertibleDriver

<b>Type parameters:</b> 

* <b>T</b>

## Constructors

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Constructor
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#_constructor_-constructor'>(constructor)</a>
      </td>
      <td>
        Constructs a new instance of the <code>SharedSegmentSequence</code> class
      </td>
    </tr>
  </tbody>
</table>

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Property
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#client-property'>client</a>
      </td>
      <td>
        <a href='/docs/apis/merge-tree\client-class'>Client</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#id-property'>id</a>
      </td>
      <td>
        string
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#loaded-property'>loaded</a>
      </td>
      <td>
        Promise<void>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#loadeddeferred-property'>loadedDeferred</a>
      </td>
      <td>
        <a href='/docs/apis/common-utils\deferred-class'>Deferred</a><void>
      </td>
      <td>
        <code>Deferred</code> that triggers once the object is loaded
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#segmentfromspec-property'>segmentFromSpec</a>
      </td>
      <td>
        (spec: <a href='/docs/apis/merge-tree\ijsonsegment-interface'>IJSONSegment</a>) => <a href='/docs/apis/merge-tree\isegment-interface'>ISegment</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Method
      </th>
      <th scope="col">
        Return Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#annotaterange-method'>annotateRange</a>
      </td>
      <td>
        void
      </td>
      <td>
        Annotates the range with the provided properties
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#applystashedop-method'>applyStashedOp</a>
      </td>
      <td>
        unknown
      </td>
      <td>
        Apply changes from an op. Used when rehydrating an attached container with pending changes. This prepares the SharedObject for seeing an ACK for the op or resubmitting the op upon reconnection.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#createlocalreferenceposition-method'>createLocalReferencePosition</a>
      </td>
      <td>
        <a href='/docs/apis/merge-tree\localreferenceposition-interface'>LocalReferencePosition</a>
      </td>
      <td>
        Creates a <code>LocalReferencePosition</code> on this SharedString. If the refType does not include ReferenceType.Transient, the returned reference will be added to the localRefs on the provided segment.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#didattach-method'>didAttach</a>
      </td>
      <td>
        void
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#getcontainingsegment-method'>getContainingSegment</a>
      </td>
      <td>
        { segment: T | undefined; offset: number | undefined; }
      </td>
      <td>
        Finds the segment information (i.e. segment + offset) corresponding to a character position in the SharedString. If the position is past the end of the string, <code>segment</code> and <code>offset</code> on the returned object may be undefined.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#getcurrentseq-method'>getCurrentSeq</a>
      </td>
      <td>
        number
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#getintervalcollection-method'>getIntervalCollection</a>
      </td>
      <td>
        <a href='/docs/apis/sequence\intervalcollection-class'>IntervalCollection</a><<a href='/docs/apis/sequence\sequenceinterval-class'>SequenceInterval</a>>
      </td>
      <td>
        Retrieves the interval collection keyed on <code>label</code>. If no such interval collection exists, creates one.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#getintervalcollectionlabels-method'>getIntervalCollectionLabels</a>
      </td>
      <td>
        IterableIterator<string>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#getlength-method'>getLength</a>
      </td>
      <td>
        number
      </td>
      <td>
        Returns the length of the current sequence for the client
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#getposition-method'>getPosition</a>
      </td>
      <td>
        number
      </td>
      <td>
        Returns the current position of a segment, and -1 if the segment does not exist in this sequence
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#getpropertiesatposition-method'>getPropertiesAtPosition</a>
      </td>
      <td>
        <a href='/docs/apis/merge-tree#propertyset-typealias'>PropertySet</a> | undefined
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#getrangeextentsofposition-method'>getRangeExtentsOfPosition</a>
      </td>
      <td>
        { posStart: number | undefined; posAfterEnd: number | undefined; }
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#getstackcontext-method'>getStackContext</a>
      </td>
      <td>
        <a href='/docs/apis/merge-tree#rangestackmap-typealias'>RangeStackMap</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#groupoperation-method'>groupOperation</a>
      </td>
      <td>
        void
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#initializelocalcore-method'>initializeLocalCore</a>
      </td>
      <td>
        void
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#insertatreferenceposition-method'>insertAtReferencePosition</a>
      </td>
      <td>
        void
      </td>
      <td>
        Inserts a segment directly before a <code>ReferencePosition</code>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#insertfromspec-method'>insertFromSpec</a>
      </td>
      <td>
        void
      </td>
      <td>
        Inserts a segment
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#loadcore-method'>loadCore</a>
      </td>
      <td>
        Promise<void>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#localreferencepositiontoposition-method'>localReferencePositionToPosition</a>
      </td>
      <td>
        number
      </td>
      <td>
        Resolves a <code>ReferencePosition</code> into a character position using this client's perspective.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#onconnect-method'>onConnect</a>
      </td>
      <td>
        void
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#ondisconnect-method'>onDisconnect</a>
      </td>
      <td>
        void
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#posfromrelativepos-method'>posFromRelativePos</a>
      </td>
      <td>
        number
      </td>
      <td>
        Given a position specified relative to a marker id, lookup the marker and convert the position to a character position.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#processcore-method'>processCore</a>
      </td>
      <td>
        void
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#processgcdatacore-method'>processGCDataCore</a>
      </td>
      <td>
        void
      </td>
      <td>
        Runs serializer over the GC data for this SharedMatrix. All the IFluidHandle's represent routes to other objects.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#removelocalreferenceposition-method'>removeLocalReferencePosition</a>
      </td>
      <td>
        <a href='/docs/apis/merge-tree\localreferenceposition-interface'>LocalReferencePosition</a> | undefined
      </td>
      <td>
        Removes a <code>LocalReferencePosition</code> from this SharedString.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#removerange-method'>removeRange</a>
      </td>
      <td>
        <a href='/docs/apis/merge-tree\imergetreeremovemsg-interface'>IMergeTreeRemoveMsg</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#replacerange-method'>replaceRange</a>
      </td>
      <td>
        void
      </td>
      <td>
        Replace the range specified from start to end with the provided segment This is done by inserting the segment at the end of the range, followed by removing the contents of the range For a zero or reverse range (start >= end), insert at end do not remove anything
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#resolveremoteclientposition-method'>resolveRemoteClientPosition</a>
      </td>
      <td>
        number | undefined
      </td>
      <td>
        Resolves a remote client's position against the local sequence and returns the remote client's position relative to the local sequence. The client ref seq must be above the minimum sequence number or the return value will be undefined. Generally this method is used in conjunction with signals which provide point in time values for the below parameters, and is useful for things like displaying user position. It should not be used with persisted values as persisted values will quickly become invalid as the remoteClientRefSeq moves below the minimum sequence number
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#resubmitcore-method'>reSubmitCore</a>
      </td>
      <td>
        void
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#submitsequencemessage-method'>submitSequenceMessage</a>
      </td>
      <td>
        void
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#summarizecore-method'>summarizeCore</a>
      </td>
      <td>
        <a href='/docs/apis/runtime-definitions\isummarytreewithstats-interface'>ISummaryTreeWithStats</a>
      </td>
      <td>
        Gets a form of the object that can be serialized.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/sequence\sharedsegmentsequence-class#walksegments-method'>walkSegments</a>
      </td>
      <td>
        void
      </td>
      <td>
        Walk the underlying segments of the sequence. The walked segments may extend beyond the range if the segments cross the ranges start or end boundaries. Set split range to true to ensure only segments within the range are walked.
      </td>
    </tr>
  </tbody>
</table>

## Constructor Details

### (constructor) {#_constructor_-constructor}

Constructs a new instance of the `SharedSegmentSequence` class

#### Signature {#_constructor_-signature}

```typescript
constructor(dataStoreRuntime: IFluidDataStoreRuntime, id: string, attributes: IChannelAttributes, segmentFromSpec: (spec: IJSONSegment) => ISegment);
```

#### Parameters {#_constructor_-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        dataStoreRuntime
      </td>
      <td>
        <a href='/docs/apis/datastore-definitions\ifluiddatastoreruntime-interface'>IFluidDataStoreRuntime</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        id
      </td>
      <td>
        string
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        attributes
      </td>
      <td>
        <a href='/docs/apis/datastore-definitions\ichannelattributes-interface'>IChannelAttributes</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        segmentFromSpec
      </td>
      <td>
        (spec: <a href='/docs/apis/merge-tree\ijsonsegment-interface'>IJSONSegment</a>) => <a href='/docs/apis/merge-tree\isegment-interface'>ISegment</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### client {#client-property}

#### Signature {#client-signature}

```typescript
protected client: Client;
```

### id {#id-property}

#### Signature {#id-signature}

```typescript
id: string;
```

### loaded {#loaded-property}

#### Signature {#loaded-signature}

```typescript
get loaded(): Promise<void>;
```

### loadedDeferred {#loadeddeferred-property}

`Deferred` that triggers once the object is loaded

#### Signature {#loadeddeferred-signature}

```typescript
protected loadedDeferred: Deferred<void>;
```

### segmentFromSpec {#segmentfromspec-property}

#### Signature {#segmentfromspec-signature}

```typescript
readonly segmentFromSpec: (spec: IJSONSegment) => ISegment;
```

## Method Details

### annotateRange {#annotaterange-method}

Annotates the range with the provided properties

#### Signature {#annotaterange-signature}

```typescript
annotateRange(start: number, end: number, props: PropertySet, combiningOp?: ICombiningOp): void;
```

#### Parameters {#annotaterange-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Modifiers
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        start
      </td>
      <td>
      </td>
      <td>
        number
      </td>
      <td>
        The inclusive start position of the range to annotate
      </td>
    </tr>
    <tr>
      <td>
        end
      </td>
      <td>
      </td>
      <td>
        number
      </td>
      <td>
        The exclusive end position of the range to annotate
      </td>
    </tr>
    <tr>
      <td>
        props
      </td>
      <td>
      </td>
      <td>
        <a href='/docs/apis/merge-tree#propertyset-typealias'>PropertySet</a>
      </td>
      <td>
        The properties to annotate the range with
      </td>
    </tr>
    <tr>
      <td>
        combiningOp
      </td>
      <td>
        optional
      </td>
      <td>
        <a href='/docs/apis/merge-tree\icombiningop-interface'>ICombiningOp</a>
      </td>
      <td>
        Optional. Specifies how to combine values for the property, such as "incr" for increment.
      </td>
    </tr>
  </tbody>
</table>

### applyStashedOp {#applystashedop-method}

Apply changes from an op. Used when rehydrating an attached container with pending changes. This prepares the SharedObject for seeing an ACK for the op or resubmitting the op upon reconnection.

#### Signature {#applystashedop-signature}

```typescript
protected applyStashedOp(content: any): unknown;
```

#### Parameters {#applystashedop-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        content
      </td>
      <td>
        any
      </td>
      <td>
        Contents of a stashed op.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#applystashedop-returns}

localMetadata of the op, to be passed to process() or resubmit() when the op is ACKed or resubmitted, respectively

<b>Return type:</b> unknown

### createLocalReferencePosition {#createlocalreferenceposition-method}

Creates a `LocalReferencePosition` on this SharedString. If the refType does not include ReferenceType.Transient, the returned reference will be added to the localRefs on the provided segment.

#### Signature {#createlocalreferenceposition-signature}

```typescript
createLocalReferencePosition(segment: T, offset: number, refType: ReferenceType, properties: PropertySet | undefined): LocalReferencePosition;
```

#### Parameters {#createlocalreferenceposition-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        segment
      </td>
      <td>
        T
      </td>
      <td>
        Segment to add the local reference on
      </td>
    </tr>
    <tr>
      <td>
        offset
      </td>
      <td>
        number
      </td>
      <td>
        Offset on the segment at which to place the local reference
      </td>
    </tr>
    <tr>
      <td>
        refType
      </td>
      <td>
        <a href='/docs/apis/merge-tree#referencetype-enum'>ReferenceType</a>
      </td>
      <td>
        ReferenceType for the created local reference
      </td>
    </tr>
    <tr>
      <td>
        properties
      </td>
      <td>
        <a href='/docs/apis/merge-tree#propertyset-typealias'>PropertySet</a> | undefined
      </td>
      <td>
        PropertySet to place on the created local reference
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#createlocalreferenceposition-returns}

<b>Return type:</b> [LocalReferencePosition](/docs/apis/merge-tree\localreferenceposition-interface)

### didAttach {#didattach-method}


#### Signature {#didattach-signature}

```typescript
protected didAttach(): void;
```

### getContainingSegment {#getcontainingsegment-method}

Finds the segment information (i.e. segment + offset) corresponding to a character position in the SharedString. If the position is past the end of the string, `segment` and `offset` on the returned object may be undefined.

#### Signature {#getcontainingsegment-signature}

```typescript
getContainingSegment(pos: number): {
        segment: T | undefined;
        offset: number | undefined;
    };
```

#### Parameters {#getcontainingsegment-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        pos
      </td>
      <td>
        number
      </td>
      <td>
        Character position (index) into the current local view of the SharedString.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getcontainingsegment-returns}

<b>Return type:</b> { segment: T \| undefined; offset: number \| undefined; }

### getCurrentSeq {#getcurrentseq-method}

#### Signature {#getcurrentseq-signature}

```typescript
getCurrentSeq(): number;
```

#### Returns {#getcurrentseq-returns}

- The most recent sequence number which has been acked by the server and processed by this SharedSegmentSequence.

<b>Return type:</b> number

### getIntervalCollection {#getintervalcollection-method}

Retrieves the interval collection keyed on `label`<!-- -->. If no such interval collection exists, creates one.

#### Signature {#getintervalcollection-signature}

```typescript
getIntervalCollection(label: string): IntervalCollection<SequenceInterval>;
```

#### Parameters {#getintervalcollection-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        label
      </td>
      <td>
        string
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getintervalcollection-returns}

<b>Return type:</b> [IntervalCollection](/docs/apis/sequence\intervalcollection-class)<!-- -->&lt;[SequenceInterval](/docs/apis/sequence\sequenceinterval-class)<!-- -->&gt;

### getIntervalCollectionLabels {#getintervalcollectionlabels-method}

#### Signature {#getintervalcollectionlabels-signature}

```typescript
getIntervalCollectionLabels(): IterableIterator<string>;
```

#### Example {#getintervalcollectionlabels-example}


```typescript
const iter = this.getIntervalCollectionKeys();
for (key of iter)
    const collection = this.getIntervalCollection(key);
    ...
```

#### Returns {#getintervalcollectionlabels-returns}

An iterable object that enumerates the IntervalCollection labels.

<b>Return type:</b> IterableIterator&lt;string&gt;

### getLength {#getlength-method}

Returns the length of the current sequence for the client

#### Signature {#getlength-signature}

```typescript
getLength(): number;
```

#### Returns {#getlength-returns}

<b>Return type:</b> number

### getPosition {#getposition-method}

Returns the current position of a segment, and -1 if the segment does not exist in this sequence

#### Signature {#getposition-signature}

```typescript
getPosition(segment: ISegment): number;
```

#### Parameters {#getposition-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        segment
      </td>
      <td>
        <a href='/docs/apis/merge-tree\isegment-interface'>ISegment</a>
      </td>
      <td>
        The segment to get the position of
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getposition-returns}

<b>Return type:</b> number

### getPropertiesAtPosition {#getpropertiesatposition-method}

#### Signature {#getpropertiesatposition-signature}

```typescript
getPropertiesAtPosition(pos: number): PropertySet | undefined;
```

#### Parameters {#getpropertiesatposition-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        pos
      </td>
      <td>
        number
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getpropertiesatposition-returns}

<b>Return type:</b> [PropertySet](/docs/apis/merge-tree#propertyset-typealias) \| undefined

### getRangeExtentsOfPosition {#getrangeextentsofposition-method}

#### Signature {#getrangeextentsofposition-signature}

```typescript
getRangeExtentsOfPosition(pos: number): {
        posStart: number | undefined;
        posAfterEnd: number | undefined;
    };
```

#### Parameters {#getrangeextentsofposition-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        pos
      </td>
      <td>
        number
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getrangeextentsofposition-returns}

<b>Return type:</b> { posStart: number \| undefined; posAfterEnd: number \| undefined; }

### getStackContext {#getstackcontext-method}

#### Signature {#getstackcontext-signature}

```typescript
getStackContext(startPos: number, rangeLabels: string[]): RangeStackMap;
```

#### Parameters {#getstackcontext-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        startPos
      </td>
      <td>
        number
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        rangeLabels
      </td>
      <td>
        string[]
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getstackcontext-returns}

<b>Return type:</b> [RangeStackMap](/docs/apis/merge-tree#rangestackmap-typealias)

### groupOperation {#groupoperation-method}

#### Signature {#groupoperation-signature}

```typescript
groupOperation(groupOp: IMergeTreeGroupMsg): void;
```

#### Parameters {#groupoperation-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        groupOp
      </td>
      <td>
        <a href='/docs/apis/merge-tree\imergetreegroupmsg-interface'>IMergeTreeGroupMsg</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### initializeLocalCore {#initializelocalcore-method}


#### Signature {#initializelocalcore-signature}

```typescript
protected initializeLocalCore(): void;
```

### insertAtReferencePosition {#insertatreferenceposition-method}

Inserts a segment directly before a `ReferencePosition`<!-- -->.

#### Signature {#insertatreferenceposition-signature}

```typescript
insertAtReferencePosition(pos: ReferencePosition, segment: T): void;
```

#### Parameters {#insertatreferenceposition-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        pos
      </td>
      <td>
        <a href='/docs/apis/merge-tree\referenceposition-interface'>ReferencePosition</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        segment
      </td>
      <td>
        T
      </td>
      <td>
        The segment to insert
      </td>
    </tr>
  </tbody>
</table>

### insertFromSpec {#insertfromspec-method}

Inserts a segment

#### Signature {#insertfromspec-signature}

```typescript
insertFromSpec(pos: number, spec: IJSONSegment): void;
```

#### Parameters {#insertfromspec-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        pos
      </td>
      <td>
        number
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        spec
      </td>
      <td>
        <a href='/docs/apis/merge-tree\ijsonsegment-interface'>IJSONSegment</a>
      </td>
      <td>
        The segment to inserts spec
      </td>
    </tr>
  </tbody>
</table>

### loadCore {#loadcore-method}


#### Signature {#loadcore-signature}

```typescript
protected loadCore(storage: IChannelStorageService): Promise<void>;
```

#### Parameters {#loadcore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        storage
      </td>
      <td>
        <a href='/docs/apis/datastore-definitions\ichannelstorageservice-interface'>IChannelStorageService</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#loadcore-returns}

<b>Return type:</b> Promise&lt;void&gt;

### localReferencePositionToPosition {#localreferencepositiontoposition-method}

Resolves a `ReferencePosition` into a character position using this client's perspective.

#### Signature {#localreferencepositiontoposition-signature}

```typescript
localReferencePositionToPosition(lref: ReferencePosition): number;
```

#### Parameters {#localreferencepositiontoposition-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        lref
      </td>
      <td>
        <a href='/docs/apis/merge-tree\referenceposition-interface'>ReferencePosition</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#localreferencepositiontoposition-returns}

<b>Return type:</b> number

### onConnect {#onconnect-method}


#### Signature {#onconnect-signature}

```typescript
protected onConnect(): void;
```

### onDisconnect {#ondisconnect-method}


#### Signature {#ondisconnect-signature}

```typescript
protected onDisconnect(): void;
```

### posFromRelativePos {#posfromrelativepos-method}

Given a position specified relative to a marker id, lookup the marker and convert the position to a character position.

#### Signature {#posfromrelativepos-signature}

```typescript
posFromRelativePos(relativePos: IRelativePosition): number;
```

#### Parameters {#posfromrelativepos-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        relativePos
      </td>
      <td>
        <a href='/docs/apis/merge-tree\irelativeposition-interface'>IRelativePosition</a>
      </td>
      <td>
        Id of marker (may be indirect) and whether position is before or after marker.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#posfromrelativepos-returns}

<b>Return type:</b> number

### processCore {#processcore-method}


#### Signature {#processcore-signature}

```typescript
protected processCore(message: ISequencedDocumentMessage, local: boolean, localOpMetadata: unknown): void;
```

#### Parameters {#processcore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        message
      </td>
      <td>
        <a href='/docs/apis/protocol-definitions\isequenceddocumentmessage-interface'>ISequencedDocumentMessage</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        local
      </td>
      <td>
        boolean
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        localOpMetadata
      </td>
      <td>
        unknown
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### processGCDataCore {#processgcdatacore-method}

Runs serializer over the GC data for this SharedMatrix. All the IFluidHandle's represent routes to other objects.

#### Signature {#processgcdatacore-signature}

```typescript
protected processGCDataCore(serializer: SummarySerializer): void;
```

#### Parameters {#processgcdatacore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        serializer
      </td>
      <td>
        <a href='/docs/apis/shared-object-base\summaryserializer-class'>SummarySerializer</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### removeLocalReferencePosition {#removelocalreferenceposition-method}

Removes a `LocalReferencePosition` from this SharedString.

#### Signature {#removelocalreferenceposition-signature}

```typescript
removeLocalReferencePosition(lref: LocalReferencePosition): LocalReferencePosition | undefined;
```

#### Parameters {#removelocalreferenceposition-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        lref
      </td>
      <td>
        <a href='/docs/apis/merge-tree\localreferenceposition-interface'>LocalReferencePosition</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#removelocalreferenceposition-returns}

<b>Return type:</b> [LocalReferencePosition](/docs/apis/merge-tree\localreferenceposition-interface) \| undefined

### removeRange {#removerange-method}

#### Signature {#removerange-signature}

```typescript
removeRange(start: number, end: number): IMergeTreeRemoveMsg;
```

#### Parameters {#removerange-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        start
      </td>
      <td>
        number
      </td>
      <td>
        The inclusive start of the range to remove
      </td>
    </tr>
    <tr>
      <td>
        end
      </td>
      <td>
        number
      </td>
      <td>
        The exclusive end of the range to remove
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#removerange-returns}

<b>Return type:</b> [IMergeTreeRemoveMsg](/docs/apis/merge-tree\imergetreeremovemsg-interface)

### replaceRange {#replacerange-method}

Replace the range specified from start to end with the provided segment This is done by inserting the segment at the end of the range, followed by removing the contents of the range For a zero or reverse range (start &gt;<!-- -->= end), insert at end do not remove anything

#### Signature {#replacerange-signature}

```typescript
protected replaceRange(start: number, end: number, segment: ISegment): void;
```

#### Parameters {#replacerange-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        start
      </td>
      <td>
        number
      </td>
      <td>
        The start of the range to replace
      </td>
    </tr>
    <tr>
      <td>
        end
      </td>
      <td>
        number
      </td>
      <td>
        The end of the range to replace
      </td>
    </tr>
    <tr>
      <td>
        segment
      </td>
      <td>
        <a href='/docs/apis/merge-tree\isegment-interface'>ISegment</a>
      </td>
      <td>
        The segment that will replace the range
      </td>
    </tr>
  </tbody>
</table>

### resolveRemoteClientPosition {#resolveremoteclientposition-method}

Resolves a remote client's position against the local sequence and returns the remote client's position relative to the local sequence. The client ref seq must be above the minimum sequence number or the return value will be undefined. Generally this method is used in conjunction with signals which provide point in time values for the below parameters, and is useful for things like displaying user position. It should not be used with persisted values as persisted values will quickly become invalid as the remoteClientRefSeq moves below the minimum sequence number

#### Signature {#resolveremoteclientposition-signature}

```typescript
resolveRemoteClientPosition(remoteClientPosition: number, remoteClientRefSeq: number, remoteClientId: string): number | undefined;
```

#### Parameters {#resolveremoteclientposition-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        remoteClientPosition
      </td>
      <td>
        number
      </td>
      <td>
        The remote client's position to resolve
      </td>
    </tr>
    <tr>
      <td>
        remoteClientRefSeq
      </td>
      <td>
        number
      </td>
      <td>
        The reference sequence number of the remote client
      </td>
    </tr>
    <tr>
      <td>
        remoteClientId
      </td>
      <td>
        string
      </td>
      <td>
        The client id of the remote client
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#resolveremoteclientposition-returns}

<b>Return type:</b> number \| undefined

### reSubmitCore {#resubmitcore-method}


#### Signature {#resubmitcore-signature}

```typescript
protected reSubmitCore(content: any, localOpMetadata: unknown): void;
```

#### Parameters {#resubmitcore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        content
      </td>
      <td>
        any
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        localOpMetadata
      </td>
      <td>
        unknown
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### submitSequenceMessage {#submitsequencemessage-method}

#### Signature {#submitsequencemessage-signature}

```typescript
submitSequenceMessage(message: IMergeTreeOp): void;
```

#### Parameters {#submitsequencemessage-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        message
      </td>
      <td>
        <a href='/docs/apis/merge-tree#imergetreeop-typealias'>IMergeTreeOp</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### summarizeCore {#summarizecore-method}

Gets a form of the object that can be serialized.

#### Signature {#summarizecore-signature}

```typescript
protected summarizeCore(serializer: IFluidSerializer, telemetryContext?: ITelemetryContext): ISummaryTreeWithStats;
```

#### Parameters {#summarizecore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Modifiers
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        serializer
      </td>
      <td>
      </td>
      <td>
        <a href='/docs/apis/shared-object-base\ifluidserializer-interface'>IFluidSerializer</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        telemetryContext
      </td>
      <td>
        optional
      </td>
      <td>
        <a href='/docs/apis/runtime-definitions\itelemetrycontext-interface'>ITelemetryContext</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#summarizecore-returns}

A tree representing the snapshot of the shared object.

<b>Return type:</b> [ISummaryTreeWithStats](/docs/apis/runtime-definitions\isummarytreewithstats-interface)

### walkSegments {#walksegments-method}

Walk the underlying segments of the sequence. The walked segments may extend beyond the range if the segments cross the ranges start or end boundaries. Set split range to true to ensure only segments within the range are walked.

#### Signature {#walksegments-signature}

```typescript
walkSegments<TClientData>(handler: ISegmentAction<TClientData>, start?: number, end?: number, accum?: TClientData, splitRange?: boolean): void;
```

#### Parameters {#walksegments-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Modifiers
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        handler
      </td>
      <td>
      </td>
      <td>
        <a href='/docs/apis/merge-tree\isegmentaction-interface'>ISegmentAction</a><TClientData>
      </td>
      <td>
        The function to handle each segment
      </td>
    </tr>
    <tr>
      <td>
        start
      </td>
      <td>
        optional
      </td>
      <td>
        number
      </td>
      <td>
        Optional. The start of range walk.
      </td>
    </tr>
    <tr>
      <td>
        end
      </td>
      <td>
        optional
      </td>
      <td>
        number
      </td>
      <td>
        Optional. The end of range walk
      </td>
    </tr>
    <tr>
      <td>
        accum
      </td>
      <td>
        optional
      </td>
      <td>
        TClientData
      </td>
      <td>
        Optional. An object that will be passed to the handler for accumulation
      </td>
    </tr>
    <tr>
      <td>
        splitRange
      </td>
      <td>
        optional
      </td>
      <td>
        boolean
      </td>
      <td>
        Optional. Splits boundary segments on the range boundaries
      </td>
    </tr>
  </tbody>
</table>