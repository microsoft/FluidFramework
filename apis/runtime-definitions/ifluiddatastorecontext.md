{"kind":"Interface","title":"IFluidDataStoreContext Interface","summary":"Represents the context for the data store. It is used by the data store runtime to get information and call functionality to the container.","members":{"MethodSignature":{"addedGCOutboundReference":"/docs/apis/runtime-definitions/ifluiddatastorecontext#addedgcoutboundreference-MethodSignature","getAbsoluteUrl":"/docs/apis/runtime-definitions/ifluiddatastorecontext#getabsoluteurl-MethodSignature","getAudience":"/docs/apis/runtime-definitions/ifluiddatastorecontext#getaudience-MethodSignature","getBaseGCDetails":"/docs/apis/runtime-definitions/ifluiddatastorecontext#getbasegcdetails-MethodSignature","getCreateChildSummarizerNodeFn":"/docs/apis/runtime-definitions/ifluiddatastorecontext#getcreatechildsummarizernodefn-MethodSignature","getInitialGCSummaryDetails":"/docs/apis/runtime-definitions/ifluiddatastorecontext#getinitialgcsummarydetails-MethodSignature","getQuorum":"/docs/apis/runtime-definitions/ifluiddatastorecontext#getquorum-MethodSignature","makeLocallyVisible":"/docs/apis/runtime-definitions/ifluiddatastorecontext#makelocallyvisible-MethodSignature","setChannelDirty":"/docs/apis/runtime-definitions/ifluiddatastorecontext#setchanneldirty-MethodSignature","submitMessage":"/docs/apis/runtime-definitions/ifluiddatastorecontext#submitmessage-MethodSignature","submitSignal":"/docs/apis/runtime-definitions/ifluiddatastorecontext#submitsignal-MethodSignature","uploadBlob":"/docs/apis/runtime-definitions/ifluiddatastorecontext#uploadblob-MethodSignature"},"PropertySignature":{"attachState":"/docs/apis/runtime-definitions/ifluiddatastorecontext#attachstate-PropertySignature","baseSnapshot":"/docs/apis/runtime-definitions/ifluiddatastorecontext#basesnapshot-PropertySignature","clientDetails":"/docs/apis/runtime-definitions/ifluiddatastorecontext#clientdetails-PropertySignature","clientId":"/docs/apis/runtime-definitions/ifluiddatastorecontext#clientid-PropertySignature","connected":"/docs/apis/runtime-definitions/ifluiddatastorecontext#connected-PropertySignature","containerRuntime":"/docs/apis/runtime-definitions/ifluiddatastorecontext#containerruntime-PropertySignature","createProps":"/docs/apis/runtime-definitions/ifluiddatastorecontext#createprops-PropertySignature","deltaManager":"/docs/apis/runtime-definitions/ifluiddatastorecontext#deltamanager-PropertySignature","id":"/docs/apis/runtime-definitions/ifluiddatastorecontext#id-PropertySignature","isLocalDataStore":"/docs/apis/runtime-definitions/ifluiddatastorecontext#islocaldatastore-PropertySignature","logger":"/docs/apis/runtime-definitions/ifluiddatastorecontext#logger-PropertySignature","options":"/docs/apis/runtime-definitions/ifluiddatastorecontext#options-PropertySignature","packagePath":"/docs/apis/runtime-definitions/ifluiddatastorecontext#packagepath-PropertySignature","scope":"/docs/apis/runtime-definitions/ifluiddatastorecontext#scope-PropertySignature","storage":"/docs/apis/runtime-definitions/ifluiddatastorecontext#storage-PropertySignature"}},"package":"@fluidframework/runtime-definitions","unscopedPackageName":"runtime-definitions"}

[//]: # (Do not edit this file. It is automatically generated by API Documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/runtime-definitions](/docs/apis/runtime-definitions) &gt; [IFluidDataStoreContext](/docs/apis/runtime-definitions/ifluiddatastorecontext)

Represents the context for the data store. It is used by the data store runtime to get information and call functionality to the container.

<b>Signature:</b>

```typescript
export interface IFluidDataStoreContext extends IEventProvider<IFluidDataStoreContextEvents>, Partial<IProvideFluidDataStoreRegistry>, IProvideFluidHandleContext 
```
<b>Extends:</b> [IEventProvider](/docs/apis/common-definitions/ieventprovider)<!-- -->&lt;[IFluidDataStoreContextEvents](/docs/apis/runtime-definitions/ifluiddatastorecontextevents)<!-- -->&gt;, Partial&lt;[IProvideFluidDataStoreRegistry](/docs/apis/runtime-definitions/iprovidefluiddatastoreregistry)<!-- -->&gt;, [IProvideFluidHandleContext](/docs/apis/core-interfaces/iprovidefluidhandlecontext)

## Properties

<table class="table table-striped table-hover property-list">
<caption>List of properties on this interface</caption>
  <thead>
    <tr>
     <th scope="col">Property</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#attachstate-PropertySignature'>attachState</a></td>
      <td><a href='/docs/apis/container-definitions#attachstate-Enum'>AttachState</a></td>
      <td>Indicates the attachment state of the data store to a host service.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#basesnapshot-PropertySignature'>baseSnapshot</a></td>
      <td><a href='/docs/apis/protocol-definitions/isnapshottree'>ISnapshotTree</a> | undefined</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#clientdetails-PropertySignature'>clientDetails</a></td>
      <td><a href='/docs/apis/protocol-definitions/iclientdetails'>IClientDetails</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#clientid-PropertySignature'>clientId</a></td>
      <td>string | undefined</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#connected-PropertySignature'>connected</a></td>
      <td>boolean</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#containerruntime-PropertySignature'>containerRuntime</a></td>
      <td><a href='/docs/apis/runtime-definitions/icontainerruntimebase'>IContainerRuntimeBase</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#createprops-PropertySignature'>createProps</a></td>
      <td>any</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#deltamanager-PropertySignature'>deltaManager</a></td>
      <td>IDeltaManager<<a href='/docs/apis/protocol-definitions/isequenceddocumentmessage'>ISequencedDocumentMessage</a>, <a href='/docs/apis/protocol-definitions/idocumentmessage'>IDocumentMessage</a>></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#id-PropertySignature'>id</a></td>
      <td>string</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#islocaldatastore-PropertySignature'>isLocalDataStore</a></td>
      <td>boolean</td>
      <td>A data store created by a client, is a local data store for that client. Also, when a detached container loads from a snapshot, all the data stores are treated as local data stores because at that stage the container still doesn't exists in storage and so the data store couldn't have been created by any other client. Value of this never changes even after the data store is attached. As implementer of data store runtime, you can use this property to check that this data store belongs to this client and hence implement any scenario based on that.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#logger-PropertySignature'>logger</a></td>
      <td><a href='/docs/apis/common-definitions/itelemetrybaselogger'>ITelemetryBaseLogger</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#options-PropertySignature'>options</a></td>
      <td>ILoaderOptions</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#packagepath-PropertySignature'>packagePath</a></td>
      <td>readonly string[]</td>
      <td>The package path of the data store as per the package factory.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#scope-PropertySignature'>scope</a></td>
      <td><a href='/docs/apis/core-interfaces#fluidobject-TypeAlias'>FluidObject</a></td>
      <td>Ambient services provided with the context</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#storage-PropertySignature'>storage</a></td>
      <td><a href='/docs/apis/driver-definitions/idocumentstorageservice'>IDocumentStorageService</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover method-list">
<caption>List of methods on this interface</caption>
  <thead>
    <tr>
     <th scope="col">Method</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#addedgcoutboundreference-MethodSignature'>addedGCOutboundReference(srcHandle, outboundHandle)</a></td>
      <td>Called when a new outbound reference is added to another node. This is used by garbage collection to identify all references added in the system.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#getabsoluteurl-MethodSignature'>getAbsoluteUrl(relativeUrl)</a></td>
      <td>Get an absolute url to the container based on the provided relativeUrl. Returns undefined if the container or data store isn't attached to storage.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#getaudience-MethodSignature'>getAudience()</a></td>
      <td>Returns the current audience.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#getbasegcdetails-MethodSignature'>getBaseGCDetails()</a></td>
      <td>Returns the GC details in the initial summary of this data store. This is used to initialize the data store and its children with the GC details from the previous summary.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#getcreatechildsummarizernodefn-MethodSignature'>getCreateChildSummarizerNodeFn(id, createParam)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#getinitialgcsummarydetails-MethodSignature'>getInitialGCSummaryDetails()</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#getquorum-MethodSignature'>getQuorum()</a></td>
      <td>Returns the current quorum.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#makelocallyvisible-MethodSignature'>makeLocallyVisible()</a></td>
      <td>Called to make the data store locally visible in the container. This happens automatically for root data stores when they are marked as root. For non-root data stores, this happens when their handle is added to a visible DDS.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#setchanneldirty-MethodSignature'>setChannelDirty(address)</a></td>
      <td>Call by IFluidDataStoreChannel, indicates that a channel is dirty and needs to be part of the summary.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#submitmessage-MethodSignature'>submitMessage(type, content, localOpMetadata)</a></td>
      <td>Submits the message to be sent to other clients.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#submitsignal-MethodSignature'>submitSignal(type, content)</a></td>
      <td>Submits the signal to be sent to other clients.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorecontext#uploadblob-MethodSignature'>uploadBlob(blob)</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

<hr><div id=interface-details>

## Property Details {#properties-details}

### attachState {#attachstate-PropertySignature}

Indicates the attachment state of the data store to a host service.

<b>Signature:</b>

```typescript
readonly attachState: AttachState;
```

### baseSnapshot {#basesnapshot-PropertySignature}

<b>Signature:</b>

```typescript
readonly baseSnapshot: ISnapshotTree | undefined;
```

### clientDetails {#clientdetails-PropertySignature}

<b>Signature:</b>

```typescript
readonly clientDetails: IClientDetails;
```

### clientId {#clientid-PropertySignature}

<b>Signature:</b>

```typescript
readonly clientId: string | undefined;
```

### connected {#connected-PropertySignature}

<b>Signature:</b>

```typescript
readonly connected: boolean;
```

### containerRuntime {#containerruntime-PropertySignature}

<b>Signature:</b>

```typescript
readonly containerRuntime: IContainerRuntimeBase;
```

### createProps {#createprops-PropertySignature}

{{% callout warning Deprecated %}}
0.16 Issue \#1635, \#3631

{{% /callout %}}

<b>Signature:</b>

```typescript
readonly createProps?: any;
```

### deltaManager {#deltamanager-PropertySignature}

<b>Signature:</b>

```typescript
readonly deltaManager: IDeltaManager<ISequencedDocumentMessage, IDocumentMessage>;
```

### id {#id-PropertySignature}

<b>Signature:</b>

```typescript
readonly id: string;
```

### isLocalDataStore {#islocaldatastore-PropertySignature}

A data store created by a client, is a local data store for that client. Also, when a detached container loads from a snapshot, all the data stores are treated as local data stores because at that stage the container still doesn't exists in storage and so the data store couldn't have been created by any other client. Value of this never changes even after the data store is attached. As implementer of data store runtime, you can use this property to check that this data store belongs to this client and hence implement any scenario based on that.

<b>Signature:</b>

```typescript
readonly isLocalDataStore: boolean;
```

### logger {#logger-PropertySignature}

<b>Signature:</b>

```typescript
readonly logger: ITelemetryBaseLogger;
```

### options {#options-PropertySignature}

<b>Signature:</b>

```typescript
readonly options: ILoaderOptions;
```

### packagePath {#packagepath-PropertySignature}

The package path of the data store as per the package factory.

<b>Signature:</b>

```typescript
readonly packagePath: readonly string[];
```

### scope {#scope-PropertySignature}

Ambient services provided with the context

<b>Signature:</b>

```typescript
readonly scope: FluidObject;
```

### storage {#storage-PropertySignature}

<b>Signature:</b>

```typescript
readonly storage: IDocumentStorageService;
```

## Method Details {#methods-details}

### addedGCOutboundReference {#addedgcoutboundreference-MethodSignature}

Called when a new outbound reference is added to another node. This is used by garbage collection to identify all references added in the system.

<b>Signature:</b>

```typescript
addedGCOutboundReference?(srcHandle: IFluidHandle, outboundHandle: IFluidHandle): void;
```

#### Parameters {#addedgcoutboundreference-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>srcHandle</td>
      <td><a href='/docs/apis/core-interfaces/ifluidhandle'>IFluidHandle</a></td>
      <td>The handle of the node that added the reference.</td>
    </tr>
    <tr>
      <td>outboundHandle</td>
      <td><a href='/docs/apis/core-interfaces/ifluidhandle'>IFluidHandle</a></td>
      <td>The handle of the outbound node that is referenced.</td>
    </tr>
  </tbody>
</table>

### getAbsoluteUrl {#getabsoluteurl-MethodSignature}

Get an absolute url to the container based on the provided relativeUrl. Returns undefined if the container or data store isn't attached to storage.

<b>Signature:</b>

```typescript
getAbsoluteUrl(relativeUrl: string): Promise<string | undefined>;
```

#### Parameters {#getabsoluteurl-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>relativeUrl</td>
      <td>string</td>
      <td>A relative request within the container</td>
    </tr>
  </tbody>
</table>

### getAudience {#getaudience-MethodSignature}

Returns the current audience.

<b>Signature:</b>

```typescript
getAudience(): IAudience;
```

### getBaseGCDetails {#getbasegcdetails-MethodSignature}

Returns the GC details in the initial summary of this data store. This is used to initialize the data store and its children with the GC details from the previous summary.

<b>Signature:</b>

```typescript
getBaseGCDetails?(): Promise<IGarbageCollectionDetailsBase>;
```

### getCreateChildSummarizerNodeFn {#getcreatechildsummarizernodefn-MethodSignature}

<b>Signature:</b>

```typescript
getCreateChildSummarizerNodeFn(
    id: string, 
    createParam: CreateChildSummarizerNodeParam): CreateChildSummarizerNodeFn;
```

#### Parameters {#getcreatechildsummarizernodefn-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>string</td>
      <td></td>
    </tr>
    <tr>
      <td>createParam</td>
      <td><a href='/docs/apis/runtime-definitions#createchildsummarizernodeparam-TypeAlias'>CreateChildSummarizerNodeParam</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### getInitialGCSummaryDetails {#getinitialgcsummarydetails-MethodSignature}

{{% callout warning Deprecated %}}
- Renamed to getBaseGCDetails.

{{% /callout %}}

<b>Signature:</b>

```typescript
getInitialGCSummaryDetails(): Promise<IGarbageCollectionSummaryDetails>;
```

### getQuorum {#getquorum-MethodSignature}

Returns the current quorum.

<b>Signature:</b>

```typescript
getQuorum(): IQuorumClients;
```

### makeLocallyVisible {#makelocallyvisible-MethodSignature}

Called to make the data store locally visible in the container. This happens automatically for root data stores when they are marked as root. For non-root data stores, this happens when their handle is added to a visible DDS.

<b>Signature:</b>

```typescript
makeLocallyVisible(): void;
```

### setChannelDirty {#setchanneldirty-MethodSignature}

Call by IFluidDataStoreChannel, indicates that a channel is dirty and needs to be part of the summary.

<b>Signature:</b>

```typescript
setChannelDirty(address: string): void;
```

#### Parameters {#setchanneldirty-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>address</td>
      <td>string</td>
      <td>The address of the channel that is dirty.</td>
    </tr>
  </tbody>
</table>

### submitMessage {#submitmessage-MethodSignature}

Submits the message to be sent to other clients.

<b>Signature:</b>

```typescript
submitMessage(type: string, content: any, localOpMetadata: unknown): void;
```

#### Parameters {#submitmessage-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>type</td>
      <td>string</td>
      <td>Type of the message.</td>
    </tr>
    <tr>
      <td>content</td>
      <td>any</td>
      <td>Content of the message.</td>
    </tr>
    <tr>
      <td>localOpMetadata</td>
      <td>unknown</td>
      <td>The local metadata associated with the message. This is kept locally and not sent to the server. This will be sent back when this message is received back from the server. This is also sent if we are asked to resubmit the message.</td>
    </tr>
  </tbody>
</table>

### submitSignal {#submitsignal-MethodSignature}

Submits the signal to be sent to other clients.

<b>Signature:</b>

```typescript
submitSignal(type: string, content: any): void;
```

#### Parameters {#submitsignal-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>type</td>
      <td>string</td>
      <td>Type of the signal.</td>
    </tr>
    <tr>
      <td>content</td>
      <td>any</td>
      <td>Content of the signal.</td>
    </tr>
  </tbody>
</table>

### uploadBlob {#uploadblob-MethodSignature}

<b>Signature:</b>

```typescript
uploadBlob(blob: ArrayBufferLike): Promise<IFluidHandle<ArrayBufferLike>>;
```

#### Parameters {#uploadblob-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>blob</td>
      <td>ArrayBufferLike</td>
      <td></td>
    </tr>
  </tbody>
</table>


</div>
