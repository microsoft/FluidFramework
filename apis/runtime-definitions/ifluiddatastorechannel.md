{"kind":"Interface","title":"IFluidDataStoreChannel Interface","summary":"Minimal interface a data store runtime need to provide for IFluidDataStoreContext to bind to control\n\nFunctionality include attach, snapshot, op/signal processing, request routes, and connection state notifications","members":{"MethodSignature":{"applyStashedOp":"/docs/apis/runtime-definitions/ifluiddatastorechannel#applystashedop-MethodSignature","attachGraph":"/docs/apis/runtime-definitions/ifluiddatastorechannel#attachgraph-MethodSignature","getAttachSummary":"/docs/apis/runtime-definitions/ifluiddatastorechannel#getattachsummary-MethodSignature","getGCData":"/docs/apis/runtime-definitions/ifluiddatastorechannel#getgcdata-MethodSignature","makeVisibleAndAttachGraph":"/docs/apis/runtime-definitions/ifluiddatastorechannel#makevisibleandattachgraph-MethodSignature","process":"/docs/apis/runtime-definitions/ifluiddatastorechannel#process-MethodSignature","processSignal":"/docs/apis/runtime-definitions/ifluiddatastorechannel#processsignal-MethodSignature","reSubmit":"/docs/apis/runtime-definitions/ifluiddatastorechannel#resubmit-MethodSignature","rollback":"/docs/apis/runtime-definitions/ifluiddatastorechannel#rollback-MethodSignature","setConnectionState":"/docs/apis/runtime-definitions/ifluiddatastorechannel#setconnectionstate-MethodSignature","summarize":"/docs/apis/runtime-definitions/ifluiddatastorechannel#summarize-MethodSignature","updateUsedRoutes":"/docs/apis/runtime-definitions/ifluiddatastorechannel#updateusedroutes-MethodSignature"},"PropertySignature":{"attachState":"/docs/apis/runtime-definitions/ifluiddatastorechannel#attachstate-PropertySignature","id":"/docs/apis/runtime-definitions/ifluiddatastorechannel#id-PropertySignature","visibilityState":"/docs/apis/runtime-definitions/ifluiddatastorechannel#visibilitystate-PropertySignature"}},"package":"@fluidframework/runtime-definitions","unscopedPackageName":"runtime-definitions"}

[//]: # (Do not edit this file. It is automatically generated by API Documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/runtime-definitions](/docs/apis/runtime-definitions) &gt; [IFluidDataStoreChannel](/docs/apis/runtime-definitions/ifluiddatastorechannel)

Minimal interface a data store runtime need to provide for IFluidDataStoreContext to bind to control

Functionality include attach, snapshot, op/signal processing, request routes, and connection state notifications

<b>Signature:</b>

```typescript
export interface IFluidDataStoreChannel extends IFluidRouter, IDisposable 
```
<b>Extends:</b> [IFluidRouter](/docs/apis/core-interfaces/ifluidrouter)<!-- -->, [IDisposable](/docs/apis/common-definitions/idisposable)

## Properties

<table class="table table-striped table-hover property-list">
<caption>List of properties on this interface</caption>
  <thead>
    <tr>
     <th scope="col">Property</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorechannel#attachstate-PropertySignature'>attachState</a></td>
      <td><a href='/docs/apis/container-definitions#attachstate-Enum'>AttachState</a></td>
      <td>Indicates the attachment state of the channel to a host service.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorechannel#id-PropertySignature'>id</a></td>
      <td>string</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorechannel#visibilitystate-PropertySignature'>visibilityState</a></td>
      <td>VisibilityState</td>
      <td></td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover method-list">
<caption>List of methods on this interface</caption>
  <thead>
    <tr>
     <th scope="col">Method</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorechannel#applystashedop-MethodSignature'>applyStashedOp(content)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorechannel#attachgraph-MethodSignature'>attachGraph()</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorechannel#getattachsummary-MethodSignature'>getAttachSummary(telemetryContext)</a></td>
      <td>Retrieves the summary used as part of the initial summary message</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorechannel#getgcdata-MethodSignature'>getGCData(fullGC)</a></td>
      <td>Returns the data used for garbage collection. This includes a list of GC nodes that represent this context including any of its children. Each node has a list of outbound routes to other GC nodes in the document.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorechannel#makevisibleandattachgraph-MethodSignature'>makeVisibleAndAttachGraph()</a></td>
      <td>Makes the data store channel visible in the container. Also, runs through its graph and attaches all bound handles that represent its dependencies in the container's graph.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorechannel#process-MethodSignature'>process(message, local, localOpMetadata)</a></td>
      <td>Processes the op.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorechannel#processsignal-MethodSignature'>processSignal(message, local)</a></td>
      <td>Processes the signal.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorechannel#resubmit-MethodSignature'>reSubmit(type, content, localOpMetadata)</a></td>
      <td>Ask the DDS to resubmit a message. This could be because we reconnected and this message was not acked.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorechannel#rollback-MethodSignature'>rollback(type, content, localOpMetadata)</a></td>
      <td>Revert a local message.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorechannel#setconnectionstate-MethodSignature'>setConnectionState(connected, clientId)</a></td>
      <td>Notifies this object about changes in the connection state.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorechannel#summarize-MethodSignature'>summarize(fullTree, trackState, telemetryContext)</a></td>
      <td>Generates a summary for the channel. Introduced with summarizerNode - will be required in a future release.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorechannel#updateusedroutes-MethodSignature'>updateUsedRoutes(usedRoutes, gcTimestamp)</a></td>
      <td>After GC has run, called to notify this channel of routes that are used in it.</td>
    </tr>
  </tbody>
</table>

<hr><div id=interface-details>

## Property Details {#properties-details}

### attachState {#attachstate-PropertySignature}

Indicates the attachment state of the channel to a host service.

<b>Signature:</b>

```typescript
readonly attachState: AttachState;
```

### id {#id-PropertySignature}

<b>Signature:</b>

```typescript
readonly id: string;
```

### visibilityState {#visibilitystate-PropertySignature}

<b>Signature:</b>

```typescript
readonly visibilityState?: VisibilityState;
```

## Method Details {#methods-details}

### applyStashedOp {#applystashedop-MethodSignature}

<b>Signature:</b>

```typescript
applyStashedOp(content: any): Promise<unknown>;
```

#### Parameters {#applystashedop-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>content</td>
      <td>any</td>
      <td></td>
    </tr>
  </tbody>
</table>

### attachGraph {#attachgraph-MethodSignature}

{{% callout warning Deprecated %}}
- This will be removed in favor of makeVisibleAndAttachGraph. Runs through the graph and attaches the bound handles. Then binds this runtime to the container.

{{% /callout %}}

<b>Signature:</b>

```typescript
attachGraph(): void;
```

### getAttachSummary {#getattachsummary-MethodSignature}

Retrieves the summary used as part of the initial summary message

<b>Signature:</b>

```typescript
getAttachSummary(telemetryContext?: ITelemetryContext): ISummaryTreeWithStats;
```

#### Parameters {#getattachsummary-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>telemetryContext</td>
      <td><a href='/docs/apis/runtime-definitions/itelemetrycontext'>ITelemetryContext</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### getGCData {#getgcdata-MethodSignature}

Returns the data used for garbage collection. This includes a list of GC nodes that represent this context including any of its children. Each node has a list of outbound routes to other GC nodes in the document.

<b>Signature:</b>

```typescript
getGCData(fullGC?: boolean): Promise<IGarbageCollectionData>;
```

#### Parameters {#getgcdata-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fullGC</td>
      <td>boolean</td>
      <td>true to bypass optimizations and force full generation of GC data.</td>
    </tr>
  </tbody>
</table>

### makeVisibleAndAttachGraph {#makevisibleandattachgraph-MethodSignature}

Makes the data store channel visible in the container. Also, runs through its graph and attaches all bound handles that represent its dependencies in the container's graph.

<b>Signature:</b>

```typescript
makeVisibleAndAttachGraph(): void;
```

### process {#process-MethodSignature}

Processes the op.

<b>Signature:</b>

```typescript
process(message: ISequencedDocumentMessage, local: boolean, localOpMetadata: unknown): void;
```

#### Parameters {#process-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>message</td>
      <td><a href='/docs/apis/protocol-definitions/isequenceddocumentmessage'>ISequencedDocumentMessage</a></td>
      <td></td>
    </tr>
    <tr>
      <td>local</td>
      <td>boolean</td>
      <td></td>
    </tr>
    <tr>
      <td>localOpMetadata</td>
      <td>unknown</td>
      <td></td>
    </tr>
  </tbody>
</table>

### processSignal {#processsignal-MethodSignature}

Processes the signal.

<b>Signature:</b>

```typescript
processSignal(message: any, local: boolean): void;
```

#### Parameters {#processsignal-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>message</td>
      <td>any</td>
      <td></td>
    </tr>
    <tr>
      <td>local</td>
      <td>boolean</td>
      <td></td>
    </tr>
  </tbody>
</table>

### reSubmit {#resubmit-MethodSignature}

Ask the DDS to resubmit a message. This could be because we reconnected and this message was not acked.

<b>Signature:</b>

```typescript
reSubmit(type: string, content: any, localOpMetadata: unknown): any;
```

#### Parameters {#resubmit-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>type</td>
      <td>string</td>
      <td>The type of the original message.</td>
    </tr>
    <tr>
      <td>content</td>
      <td>any</td>
      <td>The content of the original message.</td>
    </tr>
    <tr>
      <td>localOpMetadata</td>
      <td>unknown</td>
      <td>The local metadata associated with the original message.</td>
    </tr>
  </tbody>
</table>

### rollback {#rollback-MethodSignature}

Revert a local message.

<b>Signature:</b>

```typescript
rollback?(type: string, content: any, localOpMetadata: unknown): void;
```

#### Parameters {#rollback-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>type</td>
      <td>string</td>
      <td>The type of the original message.</td>
    </tr>
    <tr>
      <td>content</td>
      <td>any</td>
      <td>The content of the original message.</td>
    </tr>
    <tr>
      <td>localOpMetadata</td>
      <td>unknown</td>
      <td>The local metadata associated with the original message.</td>
    </tr>
  </tbody>
</table>

### setConnectionState {#setconnectionstate-MethodSignature}

Notifies this object about changes in the connection state.

<b>Signature:</b>

```typescript
setConnectionState(connected: boolean, clientId?: string): any;
```

#### Parameters {#setconnectionstate-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>connected</td>
      <td>boolean</td>
      <td></td>
    </tr>
    <tr>
      <td>clientId</td>
      <td>string</td>
      <td>ID of the client. It's old ID when in disconnected state and it's new client ID when we are connecting or connected.</td>
    </tr>
  </tbody>
</table>

### summarize {#summarize-MethodSignature}

Generates a summary for the channel. Introduced with summarizerNode - will be required in a future release.

<b>Signature:</b>

```typescript
summarize(fullTree?: boolean, trackState?: boolean, telemetryContext?: ITelemetryContext): Promise<ISummaryTreeWithStats>;
```

#### Parameters {#summarize-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fullTree</td>
      <td>boolean</td>
      <td>true to bypass optimizations and force a full summary tree.</td>
    </tr>
    <tr>
      <td>trackState</td>
      <td>boolean</td>
      <td>This tells whether we should track state from this summary.</td>
    </tr>
    <tr>
      <td>telemetryContext</td>
      <td><a href='/docs/apis/runtime-definitions/itelemetrycontext'>ITelemetryContext</a></td>
      <td>summary data passed through the layers for telemetry purposes</td>
    </tr>
  </tbody>
</table>

### updateUsedRoutes {#updateusedroutes-MethodSignature}

After GC has run, called to notify this channel of routes that are used in it.

<b>Signature:</b>

```typescript
updateUsedRoutes(usedRoutes: string[], gcTimestamp?: number): void;
```

#### Parameters {#updateusedroutes-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>usedRoutes</td>
      <td>string[]</td>
      <td>The routes that are used in this channel.</td>
    </tr>
    <tr>
      <td>gcTimestamp</td>
      <td>number</td>
      <td>The time when GC was run that generated these used routes. If any node becomes unreferenced as part of this GC run, this should be used to update the time when it happens.</td>
    </tr>
  </tbody>
</table>


</div>
