{"kind":"Package","title":"@fluidframework/driver-utils Package","members":{"Class":{"AuthorizationError":"/docs/apis/driver-utils/authorizationerror","BlobAggregationStorage":"/docs/apis/driver-utils/blobaggregationstorage","BlobCacheStorageService":"/docs/apis/driver-utils/blobcachestorageservice","DeltaStreamConnectionForbiddenError":"/docs/apis/driver-utils/deltastreamconnectionforbiddenerror","DocumentStorageServiceProxy":"/docs/apis/driver-utils/documentstorageserviceproxy","EmptyDocumentDeltaStorageService":"/docs/apis/driver-utils/emptydocumentdeltastorageservice","GenericNetworkError":"/docs/apis/driver-utils/genericnetworkerror","InsecureUrlResolver":"/docs/apis/driver-utils/insecureurlresolver","LocationRedirectionError":"/docs/apis/driver-utils/locationredirectionerror","MultiDocumentServiceFactory":"/docs/apis/driver-utils/multidocumentservicefactory","MultiUrlResolver":"/docs/apis/driver-utils/multiurlresolver","NetworkErrorBasic":"/docs/apis/driver-utils/networkerrorbasic","NonRetryableError":"/docs/apis/driver-utils/nonretryableerror","ParallelRequests":"/docs/apis/driver-utils/parallelrequests","PrefetchDocumentStorageService":"/docs/apis/driver-utils/prefetchdocumentstorageservice","Queue":"/docs/apis/driver-utils/queue","RateLimiter":"/docs/apis/driver-utils/ratelimiter","RetryableError":"/docs/apis/driver-utils/retryableerror","SnapshotExtractor":"/docs/apis/driver-utils/snapshotextractor","SummaryTreeAssembler":"/docs/apis/driver-utils/summarytreeassembler","ThrottlingError":"/docs/apis/driver-utils/throttlingerror","UsageError":"/docs/apis/driver-utils/usageerror"},"Function":{"buildSnapshotTree":"/docs/apis/driver-utils#buildsnapshottree-Function","combineAppAndProtocolSummary":"/docs/apis/driver-utils#combineappandprotocolsummary-Function","configurableUrlResolver":"/docs/apis/driver-utils#configurableurlresolver-Function","convertSnapshotAndBlobsToSummaryTree":"/docs/apis/driver-utils#convertsnapshotandblobstosummarytree-Function","convertSummaryTreeToSnapshotITree":"/docs/apis/driver-utils#convertsummarytreetosnapshotitree-Function","createGenericNetworkError":"/docs/apis/driver-utils#creategenericnetworkerror-Function","ensureFluidResolvedUrl":"/docs/apis/driver-utils#ensurefluidresolvedurl-Function","getDocAttributesFromProtocolSummary":"/docs/apis/driver-utils#getdocattributesfromprotocolsummary-Function","getQuorumValuesFromProtocolSummary":"/docs/apis/driver-utils#getquorumvaluesfromprotocolsummary-Function","isClientMessage":"/docs/apis/driver-utils#isclientmessage-Function","isOnline":"/docs/apis/driver-utils#isonline-Function","isRuntimeMessage":"/docs/apis/driver-utils#isruntimemessage-Function","isUnpackedRuntimeMessage":"/docs/apis/driver-utils#isunpackedruntimemessage-Function","logNetworkFailure":"/docs/apis/driver-utils#lognetworkfailure-Function","readAndParse":"/docs/apis/driver-utils#readandparse-Function","requestOps":"/docs/apis/driver-utils#requestops-Function","runWithRetry":"/docs/apis/driver-utils#runwithretry-Function","streamFromMessages":"/docs/apis/driver-utils#streamfrommessages-Function","streamObserver":"/docs/apis/driver-utils#streamobserver-Function","waitForConnectedState":"/docs/apis/driver-utils#waitforconnectedstate-Function"},"Variable":{"canRetryOnError":"/docs/apis/driver-utils#canretryonerror-Variable","createWriteError":"/docs/apis/driver-utils#createwriteerror-Variable","emptyMessageStream":"/docs/apis/driver-utils#emptymessagestream-Variable","getRetryDelayFromError":"/docs/apis/driver-utils#getretrydelayfromerror-Variable","getRetryDelaySecondsFromError":"/docs/apis/driver-utils#getretrydelaysecondsfromerror-Variable","isFluidResolvedUrl":"/docs/apis/driver-utils#isfluidresolvedurl-Variable"},"TypeAlias":{"DriverErrorTelemetryProps":"/docs/apis/driver-utils#drivererrortelemetryprops-TypeAlias"},"Interface":{"IAnyDriverError":"/docs/apis/driver-utils/ianydrivererror","IProgress":"/docs/apis/driver-utils/iprogress","ISummaryTreeAssemblerProps":"/docs/apis/driver-utils/isummarytreeassemblerprops"},"Enum":{"OnlineStatus":"/docs/apis/driver-utils#onlinestatus-Enum"}},"package":"@fluidframework/driver-utils","unscopedPackageName":"driver-utils"}

[//]: # (Do not edit this file. It is automatically generated by API Documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/driver-utils](/docs/apis/driver-utils)

## Classes

<table class="table table-striped table-hover class-list">
<caption>List of classes contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Class</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/driver-utils/authorizationerror'>AuthorizationError</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/blobaggregationstorage'>BlobAggregationStorage</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/blobcachestorageservice'>BlobCacheStorageService</a></td>
      <td>IDocumentStorageService adapter with pre-cached blobs.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/deltastreamconnectionforbiddenerror'>DeltaStreamConnectionForbiddenError</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/documentstorageserviceproxy'>DocumentStorageServiceProxy</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/emptydocumentdeltastorageservice'>EmptyDocumentDeltaStorageService</a></td>
      <td>Implementation of IDocumentDeltaStorageService that will always return an empty message queue when fetching messages</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/genericnetworkerror'>GenericNetworkError</a></td>
      <td>Generic network error class.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/insecureurlresolver'>InsecureUrlResolver</a></td>
      <td>As the name implies this is not secure and should not be used in production. It simply makes the example easier to get up and running.<!-- -->In our example we run a simple web server via webpack-dev-server. This defines a URL format of the form http://localhost:8080/<documentId>/<path>.<!-- -->We then need to map that to a Fluid based URL. These are of the form fluid://orderingUrl/<tenantId>/<documentId>/<path>.<!-- -->The tenantId/documentId pair defines the 'full' document ID the service makes use of. The path is then an optional part of the URL that the document interprets and maps to a data store. It's exactly similar to how a web service works or a router inside of a single page app framework.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/locationredirectionerror'>LocationRedirectionError</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/multidocumentservicefactory'>MultiDocumentServiceFactory</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/multiurlresolver'>MultiUrlResolver</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/networkerrorbasic'>NetworkErrorBasic</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/nonretryableerror'>NonRetryableError</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/parallelrequests'>ParallelRequests</a></td>
      <td>Helper class to organize parallel fetching of data It can be used to concurrently do many requests, while consuming data in the right order. Take a look at UT for examples.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/prefetchdocumentstorageservice'>PrefetchDocumentStorageService</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/queue'>Queue</a></td>
      <td>Helper queue class to allow async push / pull It's essentially a pipe allowing multiple writers, and single reader</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/ratelimiter'>RateLimiter</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/retryableerror'>RetryableError</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/snapshotextractor'>SnapshotExtractor</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/summarytreeassembler'>SummaryTreeAssembler</a></td>
      <td>Summary tree assembler (without stats collection).</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/throttlingerror'>ThrottlingError</a></td>
      <td>Throttling error class - used to communicate all throttling errors</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/usageerror'>UsageError</a></td>
      <td>Error indicating an API is being used improperly resulting in an invalid operation.</td>
    </tr>
  </tbody>
</table>

## Enumerations

<table class="table table-striped table-hover enum-list">
<caption>List of enums contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Enumeration</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/driver-utils#onlinestatus-Enum'>OnlineStatus</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

## Functions

<table class="table table-striped table-hover function-list">
<caption>List of functions contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Function</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/driver-utils#buildsnapshottree-Function'>buildSnapshotTree(entries, blobMap)</a></td>
      <td>Build a tree hierarchy base on an array of ITreeEntry</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#combineappandprotocolsummary-Function'>combineAppAndProtocolSummary(appSummary, protocolSummary)</a></td>
      <td>Combine the app summary and protocol summary in 1 tree.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#configurableurlresolver-Function'>configurableUrlResolver(resolversList, request)</a></td>
      <td>Resolver that takes a list of url resolvers and then try each of them to resolve the url.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#convertsnapshotandblobstosummarytree-Function'>convertSnapshotAndBlobsToSummaryTree(snapshot, blobs)</a></td>
      <td>Helper function that converts ISnapshotTree and blobs to ISummaryTree</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#convertsummarytreetosnapshotitree-Function'>convertSummaryTreeToSnapshotITree(summaryTree)</a></td>
      <td>Converts ISummaryTree to ITree format.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#creategenericnetworkerror-Function'>createGenericNetworkError(message, retryInfo, props)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#ensurefluidresolvedurl-Function'>ensureFluidResolvedUrl(resolved)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#getdocattributesfromprotocolsummary-Function'>getDocAttributesFromProtocolSummary(protocolSummary)</a></td>
      <td>Extract the attributes from the protocol summary.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#getquorumvaluesfromprotocolsummary-Function'>getQuorumValuesFromProtocolSummary(protocolSummary)</a></td>
      <td>Extract quorum values from the protocol summary.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#isclientmessage-Function'>isClientMessage(message)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#isonline-Function'>isOnline()</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#isruntimemessage-Function'>isRuntimeMessage(message)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#isunpackedruntimemessage-Function'>isUnpackedRuntimeMessage(message)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#lognetworkfailure-Function'>logNetworkFailure(logger, event, error)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#readandparse-Function'>readAndParse(storage, id)</a></td>
      <td>Read a blob from <a href='/docs/apis/driver-definitions/idocumentstorageservice'>IDocumentStorageService</a> and <a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse'>JSON.parse</a> it into object of type <code>T</code>.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#requestops-Function'>requestOps(get, concurrency, fromTotal, toTotal, payloadSize, logger, signal, scenarioName)</a></td>
      <td>Request ops from storage</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#runwithretry-Function'>runWithRetry(api, fetchCallName, logger, progress)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#streamfrommessages-Function'>streamFromMessages(messagesArg)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#streamobserver-Function'>streamObserver(stream, handler)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#waitforconnectedstate-Function'>waitForConnectedState(minDelay)</a></td>
      <td>Wait for browser to get to connected state. If connected, waits minimum of minDelay anyway (between network retries) If disconnected, polls every 30 seconds anyway, to make sure we are not getting stuck because of wrong signal Note that browsers will have false positives (like having Hyper-V adapter on machine, or machine connected to router that is not connected to internet) But there should be no false negatives. The only exception - Opera returns false when user enters "Work Offline" mode, regardless of actual connectivity.</td>
    </tr>
  </tbody>
</table>

## Interfaces

<table class="table table-striped table-hover interface-list">
<caption>List of interfaces contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Interface</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/driver-utils/ianydrivererror'>IAnyDriverError</a></td>
      <td>Interface describing errors and warnings raised by any driver code. Not expected to be implemented by a class or an object literal, but rather used in place of any or unknown in various function signatures that pass errors around.<!-- -->"Any" in the interface name is a nod to the fact that errorType has lost its type constraint. It will be either DriverErrorType or the specific driver's specialized error type enum, but we can't reference a specific driver's error type enum in this code.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/iprogress'>IProgress</a></td>
      <td>Interface describing an object passed to various network APIs. It allows caller to control cancellation, as well as learn about any delays.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils/isummarytreeassemblerprops'>ISummaryTreeAssemblerProps</a></td>
      <td>Summary tree assembler props</td>
    </tr>
  </tbody>
</table>

## Variables

<table class="table table-striped table-hover variable-list">
<caption>List of variables contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Variable</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/driver-utils#canretryonerror-Variable'>canRetryOnError</a></td>
      <td>Check if a connection error can be retried. Unless explicitly allowed, retry is disallowed. I.e. asserts or unexpected exceptions in our code result in container failure.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#createwriteerror-Variable'>createWriteError</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#emptymessagestream-Variable'>emptyMessageStream</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#getretrydelayfromerror-Variable'>getRetryDelayFromError</a></td>
      <td>Check retryAfterSeconds property on error and convert to ms</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#getretrydelaysecondsfromerror-Variable'>getRetryDelaySecondsFromError</a></td>
      <td>Check retryAfterSeconds property on error</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-utils#isfluidresolvedurl-Variable'>isFluidResolvedUrl</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

## Type Aliases

<table class="table table-striped table-hover alias-list">
<caption>List of type aliases contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Type Alias</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/driver-utils#drivererrortelemetryprops-TypeAlias'>DriverErrorTelemetryProps</a></td>
      <td>Telemetry props with driver-specific required properties</td>
    </tr>
  </tbody>
</table>

<hr><div id=package-details>

## Enumeration Details {#enumerations-details}

### OnlineStatus enum {#onlinestatus-Enum}

<b>Signature:</b>

```typescript
export declare enum OnlineStatus 
```

### Enumeration Members

<table class="table table-striped table-hover enum-list">
<caption>List of members in use in this enum</caption>
  <thead>
    <tr>
     <th scope="col">Member</th>
 <th scope="col">Value</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Offline</td>
      <td><code>0</code></td>
      <td></td>
    </tr>
    <tr>
      <td>Online</td>
      <td><code>1</code></td>
      <td></td>
    </tr>
    <tr>
      <td>Unknown</td>
      <td><code>2</code></td>
      <td></td>
    </tr>
  </tbody>
</table>


## Function Details {#functions-details}

### buildSnapshotTree {#buildsnapshottree-Function}

Build a tree hierarchy base on an array of ITreeEntry

<b>Signature:</b>

```typescript
export declare function buildSnapshotTree(entries: ITreeEntry[], blobMap: Map<string, ArrayBufferLike>): ISnapshotTree;
```

#### Parameters {#buildsnapshottree-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>entries</td>
      <td><a href='/docs/apis/protocol-definitions#itreeentry-TypeAlias'>ITreeEntry</a>[]</td>
      <td>an array of ITreeEntry to flatten</td>
    </tr>
    <tr>
      <td>blobMap</td>
      <td>Map<string, ArrayBufferLike></td>
      <td>a map of blob's sha1 to content that gets filled with content from entries NOTE: blobMap's validity is contingent on the returned promise's resolution</td>
    </tr>
  </tbody>
</table>

#### Returns {#buildsnapshottree-Function-returns}


the hierarchical tree

<b>Return type(s):</b> [ISnapshotTree](/docs/apis/protocol-definitions/isnapshottree)

### combineAppAndProtocolSummary {#combineappandprotocolsummary-Function}

Combine the app summary and protocol summary in 1 tree.

<b>Signature:</b>

```typescript
export declare function combineAppAndProtocolSummary(appSummary: ISummaryTree, protocolSummary: ISummaryTree): ISummaryTree;
```

#### Parameters {#combineappandprotocolsummary-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>appSummary</td>
      <td><a href='/docs/apis/protocol-definitions/isummarytree'>ISummaryTree</a></td>
      <td>Summary of the app.</td>
    </tr>
    <tr>
      <td>protocolSummary</td>
      <td><a href='/docs/apis/protocol-definitions/isummarytree'>ISummaryTree</a></td>
      <td>Summary of the protocol.</td>
    </tr>
  </tbody>
</table>

### configurableUrlResolver {#configurableurlresolver-Function}

Resolver that takes a list of url resolvers and then try each of them to resolve the url.

<b>Signature:</b>

```typescript
export declare function configurableUrlResolver(resolversList: IUrlResolver[], request: IRequest): Promise<IResolvedUrl | undefined>;
```

#### Parameters {#configurableurlresolver-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>resolversList</td>
      <td><a href='/docs/apis/driver-definitions/iurlresolver'>IUrlResolver</a>[]</td>
      <td>List of url resolvers to be used to resolve the request.</td>
    </tr>
    <tr>
      <td>request</td>
      <td><a href='/docs/apis/core-interfaces/irequest'>IRequest</a></td>
      <td>Request to be resolved.</td>
    </tr>
  </tbody>
</table>

### convertSnapshotAndBlobsToSummaryTree {#convertsnapshotandblobstosummarytree-Function}

Helper function that converts ISnapshotTree and blobs to ISummaryTree

<b>Signature:</b>

```typescript
export declare function convertSnapshotAndBlobsToSummaryTree(snapshot: ISnapshotTree, blobs: Map<string, ArrayBuffer>): ISummaryTree;
```

#### Parameters {#convertsnapshotandblobstosummarytree-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>snapshot</td>
      <td><a href='/docs/apis/protocol-definitions/isnapshottree'>ISnapshotTree</a></td>
      <td>Source snapshot tree</td>
    </tr>
    <tr>
      <td>blobs</td>
      <td>Map<string, ArrayBuffer></td>
      <td>Blobs cache</td>
    </tr>
  </tbody>
</table>

#### Returns {#convertsnapshotandblobstosummarytree-Function-returns}


Converted snapshot in ISummaryTree format

<b>Return type(s):</b> [ISummaryTree](/docs/apis/protocol-definitions/isummarytree)

### convertSummaryTreeToSnapshotITree {#convertsummarytreetosnapshotitree-Function}

Converts ISummaryTree to ITree format.

<b>Signature:</b>

```typescript
export declare function convertSummaryTreeToSnapshotITree(summaryTree: ISummaryTree): ITree;
```

#### Parameters {#convertsummarytreetosnapshotitree-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>summaryTree</td>
      <td><a href='/docs/apis/protocol-definitions/isummarytree'>ISummaryTree</a></td>
      <td>summary tree in ISummaryTree format</td>
    </tr>
  </tbody>
</table>

### createGenericNetworkError {#creategenericnetworkerror-Function}

<b>Signature:</b>

```typescript
export declare function createGenericNetworkError(message: string, retryInfo: {
    canRetry: boolean;
    retryAfterMs?: number;
}, props: DriverErrorTelemetryProps): ThrottlingError | GenericNetworkError;
```

#### Parameters {#creategenericnetworkerror-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>message</td>
      <td>string</td>
      <td></td>
    </tr>
    <tr>
      <td>retryInfo</td>
      <td>{ canRetry: boolean; retryAfterMs?: number; }</td>
      <td></td>
    </tr>
    <tr>
      <td>props</td>
      <td><a href='/docs/apis/driver-utils#drivererrortelemetryprops-TypeAlias'>DriverErrorTelemetryProps</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### ensureFluidResolvedUrl {#ensurefluidresolvedurl-Function}

<b>Signature:</b>

```typescript
export declare function ensureFluidResolvedUrl(resolved: IResolvedUrl | undefined): asserts resolved is IFluidResolvedUrl;
```

#### Parameters {#ensurefluidresolvedurl-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>resolved</td>
      <td><a href='/docs/apis/driver-definitions#iresolvedurl-TypeAlias'>IResolvedUrl</a> | undefined</td>
      <td></td>
    </tr>
  </tbody>
</table>

### getDocAttributesFromProtocolSummary {#getdocattributesfromprotocolsummary-Function}

Extract the attributes from the protocol summary.

<b>Signature:</b>

```typescript
export declare function getDocAttributesFromProtocolSummary(protocolSummary: ISummaryTree): IDocumentAttributes;
```

#### Parameters {#getdocattributesfromprotocolsummary-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>protocolSummary</td>
      <td><a href='/docs/apis/protocol-definitions/isummarytree'>ISummaryTree</a></td>
      <td>protocol summary from which the values are to be extracted.</td>
    </tr>
  </tbody>
</table>

### getQuorumValuesFromProtocolSummary {#getquorumvaluesfromprotocolsummary-Function}

Extract quorum values from the protocol summary.

<b>Signature:</b>

```typescript
export declare function getQuorumValuesFromProtocolSummary(protocolSummary: ISummaryTree): [string, ICommittedProposal][];
```

#### Parameters {#getquorumvaluesfromprotocolsummary-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>protocolSummary</td>
      <td><a href='/docs/apis/protocol-definitions/isummarytree'>ISummaryTree</a></td>
      <td>protocol summary from which the values are to be extracted.</td>
    </tr>
  </tbody>
</table>

### isClientMessage {#isclientmessage-Function}

<b>Signature:</b>

```typescript
export declare function isClientMessage(message: ISequencedDocumentMessage | IDocumentMessage): boolean;
```

#### Parameters {#isclientmessage-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>message</td>
      <td><a href='/docs/apis/protocol-definitions/isequenceddocumentmessage'>ISequencedDocumentMessage</a> | <a href='/docs/apis/protocol-definitions/idocumentmessage'>IDocumentMessage</a></td>
      <td>message</td>
    </tr>
  </tbody>
</table>

#### Returns {#isclientmessage-Function-returns}


whether or not the message type is one listed below "op" "summarize" "propose" "reject" "noop"

<b>Return type(s):</b> boolean

### isOnline {#isonline-Function}

<b>Signature:</b>

```typescript
export declare function isOnline(): OnlineStatus;
```

### isRuntimeMessage {#isruntimemessage-Function}

<b>Signature:</b>

```typescript
export declare function isRuntimeMessage(message: ISequencedDocumentMessage | IDocumentMessage): boolean;
```

#### Parameters {#isruntimemessage-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>message</td>
      <td><a href='/docs/apis/protocol-definitions/isequenceddocumentmessage'>ISequencedDocumentMessage</a> | <a href='/docs/apis/protocol-definitions/idocumentmessage'>IDocumentMessage</a></td>
      <td>message</td>
    </tr>
  </tbody>
</table>

#### Returns {#isruntimemessage-Function-returns}


whether or not the message type is one listed below "op" "summarize"

<b>Return type(s):</b> boolean

### isUnpackedRuntimeMessage {#isunpackedruntimemessage-Function}

<b>Signature:</b>

```typescript
export declare function isUnpackedRuntimeMessage(message: ISequencedDocumentMessage): boolean;
```

#### Parameters {#isunpackedruntimemessage-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>message</td>
      <td><a href='/docs/apis/protocol-definitions/isequenceddocumentmessage'>ISequencedDocumentMessage</a></td>
      <td>message</td>
    </tr>
  </tbody>
</table>

#### Returns {#isunpackedruntimemessage-Function-returns}


whether or not the message type is one listed below (legacy) "component" "attach" "chunkedOp" "blobAttach" "rejoin" "alias" "op"

<b>Return type(s):</b> boolean

### logNetworkFailure {#lognetworkfailure-Function}

<b>Signature:</b>

```typescript
export declare function logNetworkFailure(logger: ITelemetryLogger, event: ITelemetryErrorEvent, error?: any): void;
```

#### Parameters {#lognetworkfailure-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>logger</td>
      <td><a href='/docs/apis/common-definitions/itelemetrylogger'>ITelemetryLogger</a></td>
      <td></td>
    </tr>
    <tr>
      <td>event</td>
      <td><a href='/docs/apis/common-definitions/itelemetryerrorevent'>ITelemetryErrorEvent</a></td>
      <td></td>
    </tr>
    <tr>
      <td>error</td>
      <td>any</td>
      <td></td>
    </tr>
  </tbody>
</table>

### readAndParse {#readandparse-Function}

Read a blob from [IDocumentStorageService](/docs/apis/driver-definitions/idocumentstorageservice) and [JSON.parse](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse) it into object of type `T`<!-- -->.

<b>Signature:</b>

```typescript
export declare function readAndParse<T>(storage: Pick<IDocumentStorageService, "readBlob">, id: string): Promise<T>;
```

#### Parameters {#readandparse-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>storage</td>
      <td>Pick<<a href='/docs/apis/driver-definitions/idocumentstorageservice'>IDocumentStorageService</a>, "readBlob"></td>
      <td>The <code>DocumentStorageService</code> to read from.</td>
    </tr>
    <tr>
      <td>id</td>
      <td>string</td>
      <td>The ID of the blob to read and parse.</td>
    </tr>
  </tbody>
</table>

#### Returns {#readandparse-Function-returns}


The object that we decoded and parsed via `JSON.parse`<!-- -->.

<b>Return type(s):</b> Promise&lt;T&gt;

### requestOps {#requestops-Function}

Request ops from storage

<b>Signature:</b>

```typescript
export declare function requestOps(get: (from: number, to: number, telemetryProps: ITelemetryProperties) => Promise<IDeltasFetchResult>, concurrency: number, fromTotal: number, toTotal: number | undefined, payloadSize: number, logger: ITelemetryLogger, signal?: AbortSignal, scenarioName?: string): IStream<ISequencedDocumentMessage[]>;
```

#### Parameters {#requestops-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>get</td>
      <td>(from: number, to: number, telemetryProps: <a href='/docs/apis/common-definitions/itelemetryproperties'>ITelemetryProperties</a>) => Promise<<a href='/docs/apis/driver-definitions/ideltasfetchresult'>IDeltasFetchResult</a>></td>
      <td>Getter callback to get individual batches</td>
    </tr>
    <tr>
      <td>concurrency</td>
      <td>number</td>
      <td>Number of concurrent requests to make</td>
    </tr>
    <tr>
      <td>fromTotal</td>
      <td>number</td>
      <td>starting sequence number to fetch (inclusive)</td>
    </tr>
    <tr>
      <td>toTotal</td>
      <td>number | undefined</td>
      <td>max (exclusive) sequence number to fetch</td>
    </tr>
    <tr>
      <td>payloadSize</td>
      <td>number</td>
      <td>Payload size</td>
    </tr>
    <tr>
      <td>logger</td>
      <td><a href='/docs/apis/common-definitions/itelemetrylogger'>ITelemetryLogger</a></td>
      <td>Logger to log progress and errors</td>
    </tr>
    <tr>
      <td>signal</td>
      <td>AbortSignal</td>
      <td>Cancelation signal</td>
    </tr>
    <tr>
      <td>scenarioName</td>
      <td>string</td>
      <td>Reason for fetching ops</td>
    </tr>
  </tbody>
</table>

#### Returns {#requestops-Function-returns}


- Messages fetched

<b>Return type(s):</b> [IStream](/docs/apis/driver-definitions/istream)<!-- -->&lt;[ISequencedDocumentMessage](/docs/apis/protocol-definitions/isequenceddocumentmessage)<!-- -->\[\]&gt;

### runWithRetry {#runwithretry-Function}

<b>Signature:</b>

```typescript
export declare function runWithRetry<T>(api: (cancel?: AbortSignal) => Promise<T>, fetchCallName: string, logger: ITelemetryLogger, progress: IProgress): Promise<T>;
```

#### Parameters {#runwithretry-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>api</td>
      <td>(cancel?: AbortSignal) => Promise<T></td>
      <td></td>
    </tr>
    <tr>
      <td>fetchCallName</td>
      <td>string</td>
      <td></td>
    </tr>
    <tr>
      <td>logger</td>
      <td><a href='/docs/apis/common-definitions/itelemetrylogger'>ITelemetryLogger</a></td>
      <td></td>
    </tr>
    <tr>
      <td>progress</td>
      <td><a href='/docs/apis/driver-utils/iprogress'>IProgress</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### streamFromMessages {#streamfrommessages-Function}

<b>Signature:</b>

```typescript
export declare function streamFromMessages(messagesArg: Promise<ISequencedDocumentMessage[]>): IStream<ISequencedDocumentMessage[]>;
```

#### Parameters {#streamfrommessages-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>messagesArg</td>
      <td>Promise<<a href='/docs/apis/protocol-definitions/isequenceddocumentmessage'>ISequencedDocumentMessage</a>[]></td>
      <td></td>
    </tr>
  </tbody>
</table>

### streamObserver {#streamobserver-Function}

<b>Signature:</b>

```typescript
export declare function streamObserver<T>(stream: IStream<T>, handler: (value: IStreamResult<T>) => void): IStream<T>;
```

#### Parameters {#streamobserver-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stream</td>
      <td><a href='/docs/apis/driver-definitions/istream'>IStream</a><T></td>
      <td></td>
    </tr>
    <tr>
      <td>handler</td>
      <td>(value: <a href='/docs/apis/driver-definitions#istreamresult-TypeAlias'>IStreamResult</a><T>) => void</td>
      <td></td>
    </tr>
  </tbody>
</table>

### waitForConnectedState {#waitforconnectedstate-Function}

Wait for browser to get to connected state. If connected, waits minimum of minDelay anyway (between network retries) If disconnected, polls every 30 seconds anyway, to make sure we are not getting stuck because of wrong signal Note that browsers will have false positives (like having Hyper-V adapter on machine, or machine connected to router that is not connected to internet) But there should be no false negatives. The only exception - Opera returns false when user enters "Work Offline" mode, regardless of actual connectivity.

<b>Signature:</b>

```typescript
export declare function waitForConnectedState(minDelay: number): Promise<void>;
```

#### Parameters {#waitforconnectedstate-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>minDelay</td>
      <td>number</td>
      <td></td>
    </tr>
  </tbody>
</table>


## Variable Details {#variables-details}

### canRetryOnError {#canretryonerror-Variable}

Check if a connection error can be retried. Unless explicitly allowed, retry is disallowed. I.e. asserts or unexpected exceptions in our code result in container failure.

<b>Signature:</b>

```typescript
canRetryOnError: (error: any) => boolean
```

### createWriteError {#createwriteerror-Variable}

<b>Signature:</b>

```typescript
createWriteError: (message: string, props: DriverErrorTelemetryProps) => NonRetryableError<DriverErrorType.writeError>
```

### emptyMessageStream {#emptymessagestream-Variable}

<b>Signature:</b>

```typescript
emptyMessageStream: IStream<ISequencedDocumentMessage[]>
```

### getRetryDelayFromError {#getretrydelayfromerror-Variable}

Check retryAfterSeconds property on error and convert to ms

<b>Signature:</b>

```typescript
getRetryDelayFromError: (error: any) => number | undefined
```

### getRetryDelaySecondsFromError {#getretrydelaysecondsfromerror-Variable}

Check retryAfterSeconds property on error

<b>Signature:</b>

```typescript
getRetryDelaySecondsFromError: (error: any) => number | undefined
```

### isFluidResolvedUrl {#isfluidresolvedurl-Variable}

<b>Signature:</b>

```typescript
isFluidResolvedUrl: (resolved: IResolvedUrl | undefined) => resolved is IFluidResolvedUrl
```

## Type Alias Details {#type-aliases-details}

### DriverErrorTelemetryProps {#drivererrortelemetryprops-TypeAlias}

Telemetry props with driver-specific required properties

<b>Signature:</b>

```typescript
export declare type DriverErrorTelemetryProps = ITelemetryProperties & {
    driverVersion: string | undefined;
};
```

</div>
