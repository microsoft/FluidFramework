{"kind":"Interface","title":"IDocumentStorageService Interface","summary":"Interface to provide access to snapshots saved for a shared object","members":{"MethodSignature":{"createBlob":"/docs/apis/driver-definitions/idocumentstorageservice#createblob-MethodSignature","downloadSummary":"/docs/apis/driver-definitions/idocumentstorageservice#downloadsummary-MethodSignature","getSnapshotTree":"/docs/apis/driver-definitions/idocumentstorageservice#getsnapshottree-MethodSignature","getVersions":"/docs/apis/driver-definitions/idocumentstorageservice#getversions-MethodSignature","readBlob":"/docs/apis/driver-definitions/idocumentstorageservice#readblob-MethodSignature","uploadSummaryWithContext":"/docs/apis/driver-definitions/idocumentstorageservice#uploadsummarywithcontext-MethodSignature"},"PropertySignature":{"policies":"/docs/apis/driver-definitions/idocumentstorageservice#policies-PropertySignature","repositoryUrl":"/docs/apis/driver-definitions/idocumentstorageservice#repositoryurl-PropertySignature"}},"package":"@fluidframework/driver-definitions","unscopedPackageName":"driver-definitions"}

[//]: # (Do not edit this file. It is automatically generated by API Documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/driver-definitions](/docs/apis/driver-definitions) &gt; [IDocumentStorageService](/docs/apis/driver-definitions/idocumentstorageservice)

Interface to provide access to snapshots saved for a shared object

<b>Signature:</b>

```typescript
export interface IDocumentStorageService extends Partial<IDisposable> 
```
<b>Extends:</b> Partial&lt;[IDisposable](/docs/apis/common-definitions/idisposable)

## Properties

<table class="table table-striped table-hover property-list">
<caption>List of properties on this interface</caption>
  <thead>
    <tr>
     <th scope="col">Property</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/driver-definitions/idocumentstorageservice#policies-PropertySignature'>policies</a></td>
      <td><a href='/docs/apis/driver-definitions/idocumentstorageservicepolicies'>IDocumentStorageServicePolicies</a></td>
      <td>Policies implemented/instructed by driver.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-definitions/idocumentstorageservice#repositoryurl-PropertySignature'>repositoryUrl</a></td>
      <td>string</td>
      <td></td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover method-list">
<caption>List of methods on this interface</caption>
  <thead>
    <tr>
     <th scope="col">Method</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/driver-definitions/idocumentstorageservice#createblob-MethodSignature'>createBlob(file)</a></td>
      <td>Creates a blob out of the given buffer</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-definitions/idocumentstorageservice#downloadsummary-MethodSignature'>downloadSummary(handle)</a></td>
      <td>Retrieves the commit that matches the packfile handle. If the packfile has already been committed and the server has deleted it this call may result in a broken promise.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-definitions/idocumentstorageservice#getsnapshottree-MethodSignature'>getSnapshotTree(version, scenarioName)</a></td>
      <td>Returns the snapshot tree.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-definitions/idocumentstorageservice#getversions-MethodSignature'>getVersions(versionId, count, scenarioName, fetchSource)</a></td>
      <td>Retrieves all versions of the document starting at the specified versionId - or null if from the head</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-definitions/idocumentstorageservice#readblob-MethodSignature'>readBlob(id)</a></td>
      <td>Reads the object with the given ID, returns content in arrayBufferLike</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/driver-definitions/idocumentstorageservice#uploadsummarywithcontext-MethodSignature'>uploadSummaryWithContext(summary, context)</a></td>
      <td>Uploads a summary tree to storage using the given context for reference of previous summary handle. The ISummaryHandles in the uploaded tree should have paths to indicate which summary object they are referencing from the previously acked summary. Returns the uploaded summary handle.</td>
    </tr>
  </tbody>
</table>

<hr><div id=interface-details>

## Property Details {#properties-details}

### policies {#policies-PropertySignature}

Policies implemented/instructed by driver.

<b>Signature:</b>

```typescript
readonly policies?: IDocumentStorageServicePolicies;
```

### repositoryUrl {#repositoryurl-PropertySignature}

<b>Signature:</b>

```typescript
repositoryUrl: string;
```

## Method Details {#methods-details}

### createBlob {#createblob-MethodSignature}

Creates a blob out of the given buffer

<b>Signature:</b>

```typescript
createBlob(file: ArrayBufferLike): Promise<ICreateBlobResponse>;
```

#### Parameters {#createblob-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>file</td>
      <td>ArrayBufferLike</td>
      <td></td>
    </tr>
  </tbody>
</table>

### downloadSummary {#downloadsummary-MethodSignature}

Retrieves the commit that matches the packfile handle. If the packfile has already been committed and the server has deleted it this call may result in a broken promise.

<b>Signature:</b>

```typescript
downloadSummary(handle: ISummaryHandle): Promise<ISummaryTree>;
```

#### Parameters {#downloadsummary-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>handle</td>
      <td><a href='/docs/apis/protocol-definitions/isummaryhandle'>ISummaryHandle</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### getSnapshotTree {#getsnapshottree-MethodSignature}

Returns the snapshot tree.

<b>Signature:</b>

```typescript
getSnapshotTree(version?: IVersion, scenarioName?: string): Promise<ISnapshotTree | null>;
```

#### Parameters {#getsnapshottree-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>version</td>
      <td><a href='/docs/apis/protocol-definitions/iversion'>IVersion</a></td>
      <td>Version of the snapshot to be fetched.</td>
    </tr>
    <tr>
      <td>scenarioName</td>
      <td>string</td>
      <td>scenario in which this api is called. This will be recorded by server and would help in debugging purposes to see why this call was made.</td>
    </tr>
  </tbody>
</table>

### getVersions {#getversions-MethodSignature}

Retrieves all versions of the document starting at the specified versionId - or null if from the head

<b>Signature:</b>

```typescript
getVersions(versionId: string | null, count: number, scenarioName?: string, fetchSource?: FetchSource): Promise<IVersion[]>;
```

#### Parameters {#getversions-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>versionId</td>
      <td>string | null</td>
      <td>Version id of the requested version.</td>
    </tr>
    <tr>
      <td>count</td>
      <td>number</td>
      <td>Number of the versions to be fetched.</td>
    </tr>
    <tr>
      <td>scenarioName</td>
      <td>string</td>
      <td>scenario in which this api is called. This will be recorded by server and would help in debugging purposes to see why this call was made.</td>
    </tr>
    <tr>
      <td>fetchSource</td>
      <td><a href='/docs/apis/driver-definitions#fetchsource-Enum'>FetchSource</a></td>
      <td>Callers can specify the source of the response. For ex. Driver may choose to cache requests and serve data from cache. That will result in stale info returned. Callers can disable this functionality by passing fetchSource = noCache and ensuring that driver will return latest information from storage.</td>
    </tr>
  </tbody>
</table>

### readBlob {#readblob-MethodSignature}

Reads the object with the given ID, returns content in arrayBufferLike

<b>Signature:</b>

```typescript
readBlob(id: string): Promise<ArrayBufferLike>;
```

#### Parameters {#readblob-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>string</td>
      <td></td>
    </tr>
  </tbody>
</table>

### uploadSummaryWithContext {#uploadsummarywithcontext-MethodSignature}

Uploads a summary tree to storage using the given context for reference of previous summary handle. The ISummaryHandles in the uploaded tree should have paths to indicate which summary object they are referencing from the previously acked summary. Returns the uploaded summary handle.

<b>Signature:</b>

```typescript
uploadSummaryWithContext(summary: ISummaryTree, context: ISummaryContext): Promise<string>;
```

#### Parameters {#uploadsummarywithcontext-MethodSignature-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>summary</td>
      <td><a href='/docs/apis/protocol-definitions/isummarytree'>ISummaryTree</a></td>
      <td></td>
    </tr>
    <tr>
      <td>context</td>
      <td><a href='/docs/apis/driver-definitions/isummarycontext'>ISummaryContext</a></td>
      <td></td>
    </tr>
  </tbody>
</table>


</div>
