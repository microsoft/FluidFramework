{
  "title": "@fluidframework/garbage-collector Package",
  "kind": "Package",
  "members": {
    "Function": {
      "cloneGCData": "/docs/apis/garbage-collector#clonegcdata-function",
      "concatGarbageCollectionData": "/docs/apis/garbage-collector#concatgarbagecollectiondata-function",
      "concatGarbageCollectionStates": "/docs/apis/garbage-collector#concatgarbagecollectionstates-function",
      "getGCDataFromSnapshot": "/docs/apis/garbage-collector#getgcdatafromsnapshot-function",
      "removeRouteFromAllNodes": "/docs/apis/garbage-collector#removeroutefromallnodes-function",
      "runGarbageCollection": "/docs/apis/garbage-collector#rungarbagecollection-function",
      "trimLeadingAndTrailingSlashes": "/docs/apis/garbage-collector#trimleadingandtrailingslashes-function",
      "trimLeadingSlashes": "/docs/apis/garbage-collector#trimleadingslashes-function",
      "trimTrailingSlashes": "/docs/apis/garbage-collector#trimtrailingslashes-function",
      "unpackChildNodesGCDetails": "/docs/apis/garbage-collector#unpackchildnodesgcdetails-function",
      "unpackChildNodesUsedRoutes": "/docs/apis/garbage-collector#unpackchildnodesusedroutes-function"
    },
    "Class": {
      "GCDataBuilder": "/docs/apis/garbage-collector\\gcdatabuilder-class"
    },
    "Interface": {
      "IGCResult": "/docs/apis/garbage-collector\\igcresult-interface"
    }
  },
  "package": "@fluidframework/garbage-collector",
  "unscopedPackageName": "garbage-collector"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/garbage-collector](/docs/apis/garbage-collector)

## Interfaces

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Interface
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/garbage-collector\igcresult-interface'>IGCResult</a>
      </td>
      <td>
        Represents the result of a GC run.
      </td>
    </tr>
  </tbody>
</table>

## Classes

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Class
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/garbage-collector\gcdatabuilder-class'>GCDataBuilder</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Functions

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Function
      </th>
      <th scope="col">
        Return Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/garbage-collector#clonegcdata-function'>cloneGCData</a>
      </td>
      <td>
        <a href='/docs/apis/runtime-definitions\igarbagecollectiondata-interface'>IGarbageCollectionData</a>
      </td>
      <td>
        Helper function that clones the GC data.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/garbage-collector#concatgarbagecollectiondata-function'>concatGarbageCollectionData</a>
      </td>
      <td>
        <a href='/docs/apis/runtime-definitions\igarbagecollectiondata-interface'>IGarbageCollectionData</a>
      </td>
      <td>
        Concatenates the given GC datas and returns the concatenated GC data.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/garbage-collector#concatgarbagecollectionstates-function'>concatGarbageCollectionStates</a>
      </td>
      <td>
        <a href='/docs/apis/runtime-definitions\igarbagecollectionstate-interface'>IGarbageCollectionState</a>
      </td>
      <td>
        Concatenates the given GC states and returns the concatenated GC state.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/garbage-collector#getgcdatafromsnapshot-function'>getGCDataFromSnapshot</a>
      </td>
      <td>
        Promise<<a href='/docs/apis/runtime-definitions\igarbagecollectionsnapshotdata-interface'>IGarbageCollectionSnapshotData</a>>
      </td>
      <td>
        Gets the base garbage collection state from the given snapshot tree. It contains GC state, deleted nodes and tombstones. The GC state may be written into multiple blobs. Merge the GC state from all such blobs into one.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/garbage-collector#removeroutefromallnodes-function'>removeRouteFromAllNodes</a>
      </td>
      <td>
        void
      </td>
      <td>
        Removes the given route from the outbound routes of all the given GC nodes, and any duplicates
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/garbage-collector#rungarbagecollection-function'>runGarbageCollection</a>
      </td>
      <td>
        <a href='/docs/apis/garbage-collector\igcresult-interface'>IGCResult</a>
      </td>
      <td>
        Runs garbage collection on the given reference graph.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/garbage-collector#trimleadingandtrailingslashes-function'>trimLeadingAndTrailingSlashes</a>
      </td>
      <td>
        string
      </td>
      <td>
        Trims the leading and trailing slashes from the given string.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/garbage-collector#trimleadingslashes-function'>trimLeadingSlashes</a>
      </td>
      <td>
        string
      </td>
      <td>
        Trims the leading slashes from the given string.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/garbage-collector#trimtrailingslashes-function'>trimTrailingSlashes</a>
      </td>
      <td>
        string
      </td>
      <td>
        Trims the trailing slashes from the given string.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/garbage-collector#unpackchildnodesgcdetails-function'>unpackChildNodesGCDetails</a>
      </td>
      <td>
        Map<string, <a href='/docs/apis/runtime-definitions\igarbagecollectiondetailsbase-interface'>IGarbageCollectionDetailsBase</a>>
      </td>
      <td>
        Helper function that unpacks the GC details of the children from a given node's GC details.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/garbage-collector#unpackchildnodesusedroutes-function'>unpackChildNodesUsedRoutes</a>
      </td>
      <td>
        Map<string, string[]>
      </td>
      <td>
        Helper function that unpacks the used routes of children from a given node's used routes.
      </td>
    </tr>
  </tbody>
</table>

## Function Details

### cloneGCData {#clonegcdata-function}

Helper function that clones the GC data.

#### Signature {#clonegcdata-signature}

```typescript
export declare function cloneGCData(gcData: IGarbageCollectionData): IGarbageCollectionData;
```

#### Parameters {#clonegcdata-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        gcData
      </td>
      <td>
        <a href='/docs/apis/runtime-definitions\igarbagecollectiondata-interface'>IGarbageCollectionData</a>
      </td>
      <td>
        The GC data to clone.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#clonegcdata-returns}

a clone of the given GC data.

<b>Return type:</b> [IGarbageCollectionData](/docs/apis/runtime-definitions\igarbagecollectiondata-interface)

### concatGarbageCollectionData {#concatgarbagecollectiondata-function}

Concatenates the given GC datas and returns the concatenated GC data.

#### Signature {#concatgarbagecollectiondata-signature}

```typescript
export declare function concatGarbageCollectionData(gcData1: IGarbageCollectionData, gcData2: IGarbageCollectionData): IGarbageCollectionData;
```

#### Parameters {#concatgarbagecollectiondata-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        gcData1
      </td>
      <td>
        <a href='/docs/apis/runtime-definitions\igarbagecollectiondata-interface'>IGarbageCollectionData</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        gcData2
      </td>
      <td>
        <a href='/docs/apis/runtime-definitions\igarbagecollectiondata-interface'>IGarbageCollectionData</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#concatgarbagecollectiondata-returns}

<b>Return type:</b> [IGarbageCollectionData](/docs/apis/runtime-definitions\igarbagecollectiondata-interface)

### concatGarbageCollectionStates {#concatgarbagecollectionstates-function}

Concatenates the given GC states and returns the concatenated GC state.

#### Signature {#concatgarbagecollectionstates-signature}

```typescript
export declare function concatGarbageCollectionStates(gcState1: IGarbageCollectionState, gcState2: IGarbageCollectionState): IGarbageCollectionState;
```

#### Parameters {#concatgarbagecollectionstates-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        gcState1
      </td>
      <td>
        <a href='/docs/apis/runtime-definitions\igarbagecollectionstate-interface'>IGarbageCollectionState</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        gcState2
      </td>
      <td>
        <a href='/docs/apis/runtime-definitions\igarbagecollectionstate-interface'>IGarbageCollectionState</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#concatgarbagecollectionstates-returns}

<b>Return type:</b> [IGarbageCollectionState](/docs/apis/runtime-definitions\igarbagecollectionstate-interface)

### getGCDataFromSnapshot {#getgcdatafromsnapshot-function}

Gets the base garbage collection state from the given snapshot tree. It contains GC state, deleted nodes and tombstones. The GC state may be written into multiple blobs. Merge the GC state from all such blobs into one.

#### Signature {#getgcdatafromsnapshot-signature}

```typescript
export declare function getGCDataFromSnapshot(gcSnapshotTree: ISnapshotTree, readAndParseBlob: <T>(id: string) => Promise<T>): Promise<IGarbageCollectionSnapshotData>;
```

#### Parameters {#getgcdatafromsnapshot-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        gcSnapshotTree
      </td>
      <td>
        <a href='/docs/apis/protocol-definitions\isnapshottree-interface'>ISnapshotTree</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        readAndParseBlob
      </td>
      <td>
        <T>(id: string) => Promise<T>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getgcdatafromsnapshot-returns}

<b>Return type:</b> Promise&lt;[IGarbageCollectionSnapshotData](/docs/apis/runtime-definitions\igarbagecollectionsnapshotdata-interface)<!-- -->&gt;

### removeRouteFromAllNodes {#removeroutefromallnodes-function}

Removes the given route from the outbound routes of all the given GC nodes, and any duplicates

#### Signature {#removeroutefromallnodes-signature}

```typescript
export declare function removeRouteFromAllNodes(gcNodes: {
    [id: string]: string[];
}, outboundRoute: string): void;
```

#### Parameters {#removeroutefromallnodes-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        gcNodes
      </td>
      <td>
        { [id: string]: string[]; }
      </td>
      <td>
        The nodes from which the route is to be removed.
      </td>
    </tr>
    <tr>
      <td>
        outboundRoute
      </td>
      <td>
        string
      </td>
      <td>
        The route to be removed.
      </td>
    </tr>
  </tbody>
</table>

### runGarbageCollection {#rungarbagecollection-function}

Runs garbage collection on the given reference graph.

#### Signature {#rungarbagecollection-signature}

```typescript
export declare function runGarbageCollection(referenceGraph: {
    [id: string]: string[];
}, rootIds: string[]): IGCResult;
```

#### Parameters {#rungarbagecollection-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        referenceGraph
      </td>
      <td>
        { [id: string]: string[]; }
      </td>
      <td>
        The reference graph to run GC on. It's a list of nodes where each node has an id and set of routes to other nodes in the graph.
      </td>
    </tr>
    <tr>
      <td>
        rootIds
      </td>
      <td>
        string[]
      </td>
      <td>
        The ids of root nodes that are considered referenced.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#rungarbagecollection-returns}

the ids of referenced nodes and the ids of deleted nodes in the referenced graph.

<b>Return type:</b> [IGCResult](/docs/apis/garbage-collector\igcresult-interface)

### trimLeadingAndTrailingSlashes {#trimleadingandtrailingslashes-function}

Trims the leading and trailing slashes from the given string.

#### Signature {#trimleadingandtrailingslashes-signature}

```typescript
export declare function trimLeadingAndTrailingSlashes(str: string): string;
```

#### Parameters {#trimleadingandtrailingslashes-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        str
      </td>
      <td>
        string
      </td>
      <td>
        A string that may contain leading and / or trailing slashes.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#trimleadingandtrailingslashes-returns}

A new string without leading and trailing slashes.

<b>Return type:</b> string

### trimLeadingSlashes {#trimleadingslashes-function}

Trims the leading slashes from the given string.

#### Signature {#trimleadingslashes-signature}

```typescript
export declare function trimLeadingSlashes(str: string): string;
```

#### Parameters {#trimleadingslashes-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        str
      </td>
      <td>
        string
      </td>
      <td>
        A string that may contain leading slashes.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#trimleadingslashes-returns}

A new string without leading slashes.

<b>Return type:</b> string

### trimTrailingSlashes {#trimtrailingslashes-function}

Trims the trailing slashes from the given string.

#### Signature {#trimtrailingslashes-signature}

```typescript
export declare function trimTrailingSlashes(str: string): string;
```

#### Parameters {#trimtrailingslashes-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        str
      </td>
      <td>
        string
      </td>
      <td>
        A string that may contain trailing slashes.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#trimtrailingslashes-returns}

A new string without trailing slashes.

<b>Return type:</b> string

### unpackChildNodesGCDetails {#unpackchildnodesgcdetails-function}

Helper function that unpacks the GC details of the children from a given node's GC details.

#### Signature {#unpackchildnodesgcdetails-signature}

```typescript
export declare function unpackChildNodesGCDetails(gcDetails: IGarbageCollectionDetailsBase): Map<string, IGarbageCollectionDetailsBase>;
```

#### Parameters {#unpackchildnodesgcdetails-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        gcDetails
      </td>
      <td>
        <a href='/docs/apis/runtime-definitions\igarbagecollectiondetailsbase-interface'>IGarbageCollectionDetailsBase</a>
      </td>
      <td>
        The GC details of a node.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#unpackchildnodesgcdetails-returns}

A map of GC details of each children of the the given node.

<b>Return type:</b> Map&lt;string, [IGarbageCollectionDetailsBase](/docs/apis/runtime-definitions\igarbagecollectiondetailsbase-interface)<!-- -->&gt;

### unpackChildNodesUsedRoutes {#unpackchildnodesusedroutes-function}

Helper function that unpacks the used routes of children from a given node's used routes.

#### Signature {#unpackchildnodesusedroutes-signature}

```typescript
export declare function unpackChildNodesUsedRoutes(usedRoutes: string[]): Map<string, string[]>;
```

#### Parameters {#unpackchildnodesusedroutes-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        usedRoutes
      </td>
      <td>
        string[]
      </td>
      <td>
        The used routes of a node.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#unpackchildnodesusedroutes-returns}

A map of used routes of each children of the the given node.

<b>Return type:</b> Map&lt;string, string\[\]&gt;