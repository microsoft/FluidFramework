{"kind":"Class","title":"PromiseCache Class","summary":"A specialized cache for async work, allowing you to safely cache the promised result of some async work without fear of running it multiple times or losing track of errors.","members":{"Constructor":{"(constructor)":"/docs/apis/common-utils/promisecache#_constructor_-Constructor"},"Method":{"add":"/docs/apis/common-utils/promisecache#add-Method","addOrGet":"/docs/apis/common-utils/promisecache#addorget-Method","addValue":"/docs/apis/common-utils/promisecache#addvalue-Method","addValueOrGet":"/docs/apis/common-utils/promisecache#addvalueorget-Method","get":"/docs/apis/common-utils/promisecache#get-Method","has":"/docs/apis/common-utils/promisecache#has-Method","remove":"/docs/apis/common-utils/promisecache#remove-Method"}},"package":"@fluidframework/common-utils","unscopedPackageName":"common-utils"}

[//]: # (Do not edit this file. It is automatically generated by API Documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/common-utils](/docs/apis/common-utils) &gt; [PromiseCache](/docs/apis/common-utils/promisecache)

A specialized cache for async work, allowing you to safely cache the promised result of some async work without fear of running it multiple times or losing track of errors.

<b>Signature:</b>

```typescript
export declare class PromiseCache<TKey, TResult> 
```
<b>Type parameters:</b> 

<b>TKey</b> --

<b>TResult</b> --

## Constructors

<table class="table table-striped table-hover constructor-list">
<caption>List of constructors for this class</caption>
  <thead>
    <tr>
     <th scope="col">Constructor</th>
 <th scope="col">Modifiers</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/common-utils/promisecache#_constructor_-Constructor'>(constructor)({ expiry, removeOnError, })</a></td>
      <td></td>
      <td>Create the PromiseCache with the given options, with the following defaults:<!-- -->expiry: indefinite, removeOnError: true for all errors</td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover method-list">
<caption>List of methods on this class</caption>
  <thead>
    <tr>
     <th scope="col">Method</th>
 <th scope="col">Modifiers</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/common-utils/promisecache#add-Method'>add(key, asyncFn)</a></td>
      <td></td>
      <td>Try to add the result of the given asyncFn, without overwriting an existing cache entry at that key. Returns false if the cache already contained an entry at that key, and true otherwise.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/common-utils/promisecache#addorget-Method'>addOrGet(key, asyncFn)</a></td>
      <td></td>
      <td>Try to add the result of the given asyncFn, without overwriting an existing cache entry at that key. Returns a Promise for the added or existing async work being done at that key.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/common-utils/promisecache#addvalue-Method'>addValue(key, value)</a></td>
      <td></td>
      <td>Try to add the given value, without overwriting an existing cache entry at that key. Returns false if the cache already contained an entry at that key, and true otherwise.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/common-utils/promisecache#addvalueorget-Method'>addValueOrGet(key, value)</a></td>
      <td></td>
      <td>Try to add the given value, without overwriting an existing cache entry at that key. Returns a Promise for the added or existing async work being done at that key.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/common-utils/promisecache#get-Method'>get(key)</a></td>
      <td></td>
      <td>Get the Promise for the given key, or undefined if it's not found. Extend expiry if applicable.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/common-utils/promisecache#has-Method'>has(key)</a></td>
      <td></td>
      <td>Check if there's anything cached at the given key</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/common-utils/promisecache#remove-Method'>remove(key)</a></td>
      <td></td>
      <td>Remove the Promise for the given key, returning true if it was found and removed</td>
    </tr>
  </tbody>
</table>

<hr><div id=class-details>

## Constructor Details {#constructors-details}

### PromiseCache.(constructor) {#_constructor_-Constructor}

Create the PromiseCache with the given options, with the following defaults:

expiry: indefinite, removeOnError: true for all errors

<b>Signature:</b>

```typescript
constructor({ expiry, removeOnError, }?: PromiseCacheOptions);
```

#### Parameters {#_constructor_-Constructor-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{ expiry, removeOnError, }</td>
      <td><a href='/docs/apis/common-utils/promisecacheoptions'>PromiseCacheOptions</a></td>
      <td></td>
    </tr>
  </tbody>
</table>


## Method Details {#methods-details}

### add {#add-Method}

Try to add the result of the given asyncFn, without overwriting an existing cache entry at that key. Returns false if the cache already contained an entry at that key, and true otherwise.

<b>Signature:</b>

```typescript
add(key: TKey, asyncFn: () => Promise<TResult>): boolean;
```

#### Parameters {#add-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key</td>
      <td>TKey</td>
      <td>key name where to store the async work</td>
    </tr>
    <tr>
      <td>asyncFn</td>
      <td>() => Promise<TResult></td>
      <td>the async work to do and store, if not already in progress under the given key</td>
    </tr>
  </tbody>
</table>

### addOrGet {#addorget-Method}

Try to add the result of the given asyncFn, without overwriting an existing cache entry at that key. Returns a Promise for the added or existing async work being done at that key.

<b>Signature:</b>

```typescript
addOrGet(key: TKey, asyncFn: () => Promise<TResult>): Promise<TResult>;
```

#### Parameters {#addorget-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key</td>
      <td>TKey</td>
      <td>key name where to store the async work</td>
    </tr>
    <tr>
      <td>asyncFn</td>
      <td>() => Promise<TResult></td>
      <td>the async work to do and store, if not already in progress under the given key</td>
    </tr>
  </tbody>
</table>

### addValue {#addvalue-Method}

Try to add the given value, without overwriting an existing cache entry at that key. Returns false if the cache already contained an entry at that key, and true otherwise.

<b>Signature:</b>

```typescript
addValue(key: TKey, value: TResult): boolean;
```

#### Parameters {#addvalue-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key</td>
      <td>TKey</td>
      <td>key name where to store the value</td>
    </tr>
    <tr>
      <td>value</td>
      <td>TResult</td>
      <td>value to store</td>
    </tr>
  </tbody>
</table>

### addValueOrGet {#addvalueorget-Method}

Try to add the given value, without overwriting an existing cache entry at that key. Returns a Promise for the added or existing async work being done at that key.

<b>Signature:</b>

```typescript
addValueOrGet(key: TKey, value: TResult): Promise<TResult>;
```

#### Parameters {#addvalueorget-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key</td>
      <td>TKey</td>
      <td>key name where to store the async work</td>
    </tr>
    <tr>
      <td>value</td>
      <td>TResult</td>
      <td>value to store</td>
    </tr>
  </tbody>
</table>

### get {#get-Method}

Get the Promise for the given key, or undefined if it's not found. Extend expiry if applicable.

<b>Signature:</b>

```typescript
get(key: TKey): Promise<TResult> | undefined;
```

#### Parameters {#get-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key</td>
      <td>TKey</td>
      <td></td>
    </tr>
  </tbody>
</table>

### has {#has-Method}

Check if there's anything cached at the given key

<b>Signature:</b>

```typescript
has(key: TKey): boolean;
```

#### Parameters {#has-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key</td>
      <td>TKey</td>
      <td></td>
    </tr>
  </tbody>
</table>

### remove {#remove-Method}

Remove the Promise for the given key, returning true if it was found and removed

<b>Signature:</b>

```typescript
remove(key: TKey): boolean;
```

#### Parameters {#remove-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key</td>
      <td>TKey</td>
      <td></td>
    </tr>
  </tbody>
</table>


</div>
