{"kind":"Namespace","title":"TransactionInternal Namespace","summary":"A mutable transaction for applying sequences of changes to a TreeView. Allows viewing the intermediate states.\n\nContains necessary state to apply changes within an edit to a TreeView.\n\nMay have any number of changes applied to make up the edit. Use `close` to complete the transaction, returning the array of changes and an EditingResult showing the results of applying the changes as an Edit to the initial TreeView (passed to the constructor).\n\nNo data outside the Transaction is modified by Transaction: the results from `close` must be used to actually submit an `Edit`<!-- -->.","members":{"Interface":{"BadPlaceFailure":"/docs/apis/tree/transactioninternal/badplacefailure","BadRangeFailure":"/docs/apis/tree/transactioninternal/badrangefailure","ConstraintViolationFailure":"/docs/apis/tree/transactioninternal/constraintviolationfailure","DetachedSequenceIdAlreadyInUseFailure":"/docs/apis/tree/transactioninternal/detachedsequenceidalreadyinusefailure","DetachedSequenceNotFoundFailure":"/docs/apis/tree/transactioninternal/detachedsequencenotfoundfailure","DuplicateIdInBuildFailure":"/docs/apis/tree/transactioninternal/duplicateidinbuildfailure","IdAlreadyInUseFailure":"/docs/apis/tree/transactioninternal/idalreadyinusefailure","UnknownIdFailure":"/docs/apis/tree/transactioninternal/unknownidfailure","UnusedDetachedSequenceFailure":"/docs/apis/tree/transactioninternal/unuseddetachedsequencefailure"},"Enum":{"ConstraintViolationKind":"/docs/apis/tree/transactioninternal#constraintviolationkind-Enum","FailureKind":"/docs/apis/tree/transactioninternal#failurekind-Enum"},"TypeAlias":{"ConstraintViolationResult":"/docs/apis/tree/transactioninternal#constraintviolationresult-TypeAlias","Failure":"/docs/apis/tree/transactioninternal#failure-TypeAlias","ValidState":"/docs/apis/tree/transactioninternal#validstate-TypeAlias"},"Function":{"factory":"/docs/apis/tree/transactioninternal#factory-Function"},"Class":{"Policy":"/docs/apis/tree/transactioninternal/policy"}},"package":"@fluid-experimental/tree","unscopedPackageName":"tree"}

[//]: # (Do not edit this file. It is automatically generated by API Documenter.)

A mutable transaction for applying sequences of changes to a TreeView. Allows viewing the intermediate states.

Contains necessary state to apply changes within an edit to a TreeView.

May have any number of changes applied to make up the edit. Use `close` to complete the transaction, returning the array of changes and an EditingResult showing the results of applying the changes as an Edit to the initial TreeView (passed to the constructor).

No data outside the Transaction is modified by Transaction: the results from `close` must be used to actually submit an `Edit`<!-- -->.

<b>Signature:</b>

```typescript
export declare namespace TransactionInternal 
```

## Classes

<table class="table table-striped table-hover class-list">
<caption>List of classes contained in this namespace</caption>
  <thead>
    <tr>
     <th scope="col">Class</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/tree/transactioninternal/policy'>Policy</a></td>
      <td>The policy followed by a <a href='/docs/apis/tree/transactioninternal'>TransactionInternal</a>.</td>
    </tr>
  </tbody>
</table>

## Enumerations

<table class="table table-striped table-hover enum-list">
<caption>List of enums contained in this namespace</caption>
  <thead>
    <tr>
     <th scope="col">Enumeration</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/tree/transactioninternal#constraintviolationkind-Enum'>ConstraintViolationKind</a></td>
      <td>Enum of possible kinds of constraint violations that can be encountered</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/tree/transactioninternal#failurekind-Enum'>FailureKind</a></td>
      <td>The kinds of failures that a transaction might encounter.</td>
    </tr>
  </tbody>
</table>

## Functions

<table class="table table-striped table-hover function-list">
<caption>List of functions contained in this namespace</caption>
  <thead>
    <tr>
     <th scope="col">Function</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/tree/transactioninternal#factory-Function'>factory(view)</a></td>
      <td>Makes a new <a href='/docs/apis/tree/generictransaction'>GenericTransaction</a> that follows the <a href='/docs/apis/tree/transactioninternal/policy'>TransactionInternal.Policy</a> policy.</td>
    </tr>
  </tbody>
</table>

## Interfaces

<table class="table table-striped table-hover interface-list">
<caption>List of interfaces contained in this namespace</caption>
  <thead>
    <tr>
     <th scope="col">Interface</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/tree/transactioninternal/badplacefailure'>BadPlaceFailure</a></td>
      <td>Error thrown when an insert change uses an invalid Place</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/tree/transactioninternal/badrangefailure'>BadRangeFailure</a></td>
      <td>Error thrown when a detach operation is given an invalid or malformed Range</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/tree/transactioninternal/constraintviolationfailure'>ConstraintViolationFailure</a></td>
      <td>Error thrown when a constraint fails to apply</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/tree/transactioninternal/detachedsequenceidalreadyinusefailure'>DetachedSequenceIdAlreadyInUseFailure</a></td>
      <td>Error thrown when a transaction encounters a build operation using an already in use DetachedSequenceID.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/tree/transactioninternal/detachedsequencenotfoundfailure'>DetachedSequenceNotFoundFailure</a></td>
      <td>Error thrown when a transaction tries to operate on an unknown DetachedSequenceID</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/tree/transactioninternal/duplicateidinbuildfailure'>DuplicateIdInBuildFailure</a></td>
      <td>Error thrown when a build uses a duplicated NodeId</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/tree/transactioninternal/idalreadyinusefailure'>IdAlreadyInUseFailure</a></td>
      <td>Error thrown when a build node ID is already used in the current state</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/tree/transactioninternal/unknownidfailure'>UnknownIdFailure</a></td>
      <td>Error thrown when a change is attempted on an unknown NodeId</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/tree/transactioninternal/unuseddetachedsequencefailure'>UnusedDetachedSequenceFailure</a></td>
      <td>Error returned when a transaction is closed while there is an unused detached sequence.</td>
    </tr>
  </tbody>
</table>

## Type Aliases

<table class="table table-striped table-hover alias-list">
<caption>List of type aliases contained in this namespace</caption>
  <thead>
    <tr>
     <th scope="col">Type Alias</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/tree/transactioninternal#constraintviolationresult-TypeAlias'>ConstraintViolationResult</a></td>
      <td>The details of what kind of constraint was violated and caused a ConstraintViolationFailure error to occur</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/tree/transactioninternal#failure-TypeAlias'>Failure</a></td>
      <td>A failure encountered by a transaction.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/tree/transactioninternal#validstate-TypeAlias'>ValidState</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

<hr><div id=package-details>

## Enumeration Details {#enumerations-details}

### TransactionInternal.ConstraintViolationKind enum {#constraintviolationkind-Enum}

Enum of possible kinds of constraint violations that can be encountered

<b>Signature:</b>

```typescript
export enum ConstraintViolationKind 
```

### Enumeration Members

<table class="table table-striped table-hover enum-list">
<caption>List of members in use in this enum</caption>
  <thead>
    <tr>
     <th scope="col">Member</th>
 <th scope="col">Value</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>BadLabel</td>
      <td><code>&quot;BadLabel&quot;</code></td>
      <td>The constraint failed because the trait label prescribed by the constraint does not match the actual trait label of the range being constrained</td>
    </tr>
    <tr>
      <td>BadLength</td>
      <td><code>&quot;BadLength&quot;</code></td>
      <td>The constraint failed because the length prescribed by the constraint does not match the length of range being constrained</td>
    </tr>
    <tr>
      <td>BadParent</td>
      <td><code>&quot;BadParent&quot;</code></td>
      <td>The constraint failed because the parent prescribed by the constraint does not match the actual parent of the range being constrained</td>
    </tr>
    <tr>
      <td>BadRange</td>
      <td><code>&quot;BadRange&quot;</code></td>
      <td>The constraint failed because it applies to an invalid range</td>
    </tr>
  </tbody>
</table>

### TransactionInternal.FailureKind enum {#failurekind-Enum}

The kinds of failures that a transaction might encounter.

<b>Signature:</b>

```typescript
export enum FailureKind 
```

### Enumeration Members

<table class="table table-striped table-hover enum-list">
<caption>List of members in use in this enum</caption>
  <thead>
    <tr>
     <th scope="col">Member</th>
 <th scope="col">Value</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>BadPlace</td>
      <td><code>&quot;BadPlace&quot;</code></td>
      <td>Transaction tries to insert in an invalid Place</td>
    </tr>
    <tr>
      <td>BadRange</td>
      <td><code>&quot;BadRange&quot;</code></td>
      <td>Transaction tries to detach an invalid Range</td>
    </tr>
    <tr>
      <td>ConstraintViolation</td>
      <td><code>&quot;ConstraintViolation&quot;</code></td>
      <td>Transaction has an invalid constraint</td>
    </tr>
    <tr>
      <td>DetachedSequenceIdAlreadyInUse</td>
      <td><code>&quot;DetachedSequenceIdAlreadyInUse&quot;</code></td>
      <td>Transaction has a build operation using an already in use DetachedSequenceID.</td>
    </tr>
    <tr>
      <td>DetachedSequenceNotFound</td>
      <td><code>&quot;DetachedSequenceNotFound&quot;</code></td>
      <td>Transaction tries to operate on an unknown DetachedSequenceID</td>
    </tr>
    <tr>
      <td>DuplicateIdInBuild</td>
      <td><code>&quot;DuplicateIdInBuild&quot;</code></td>
      <td>Transaction has a build which uses a duplicated NodeId</td>
    </tr>
    <tr>
      <td>IdAlreadyInUse</td>
      <td><code>&quot;IdAlreadyInUse&quot;</code></td>
      <td>Transaction tries to build a node using an ID which is already used in the current state</td>
    </tr>
    <tr>
      <td>UnknownId</td>
      <td><code>&quot;UnknownId&quot;</code></td>
      <td>Transaction tries to set value of an unknown node</td>
    </tr>
    <tr>
      <td>UnusedDetachedSequence</td>
      <td><code>&quot;UnusedDetachedSequence&quot;</code></td>
      <td>Transaction has an unused DetachedSequenceId</td>
    </tr>
  </tbody>
</table>


## Function Details {#functions-details}

### factory {#factory-Function}

Makes a new [GenericTransaction](/docs/apis/tree/generictransaction) that follows the [TransactionInternal.Policy](/docs/apis/tree/transactioninternal/policy) policy.

<b>Signature:</b>

```typescript
export function factory(view: RevisionView): GenericTransaction;
```

#### Parameters {#factory-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>view</td>
      <td><a href='/docs/apis/tree/revisionview'>RevisionView</a></td>
      <td></td>
    </tr>
  </tbody>
</table>


## Type Alias Details {#type-aliases-details}

### ConstraintViolationResult {#constraintviolationresult-TypeAlias}

The details of what kind of constraint was violated and caused a ConstraintViolationFailure error to occur

<b>Signature:</b>

```typescript
export type ConstraintViolationResult = {
        readonly kind: ConstraintViolationKind.BadRange;
        readonly rangeFailure: BadRangeValidationResult;
    } | {
        readonly kind: ConstraintViolationKind.BadLength;
        readonly actual: number;
    } | {
        readonly kind: ConstraintViolationKind.BadParent;
        readonly actual: NodeId;
    } | {
        readonly kind: ConstraintViolationKind.BadLabel;
        readonly actual: TraitLabel;
    };
```

### Failure {#failure-TypeAlias}

A failure encountered by a transaction.

<b>Signature:</b>

```typescript
export type Failure = UnusedDetachedSequenceFailure | DetachedSequenceIdAlreadyInUseFailure | DetachedSequenceNotFoundFailure | DuplicateIdInBuildFailure | IdAlreadyInUseFailure | UnknownIdFailure | BadPlaceFailure | BadRangeFailure | ConstraintViolationFailure;
```

### ValidState {#validstate-TypeAlias}

<b>Signature:</b>

```typescript
type ValidState = SucceedingTransactionState;
```

</div>
