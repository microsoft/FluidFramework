{"kind":"Package","title":"@fluidframework/test-utils Package","members":{"TypeAlias":{"ChannelFactoryRegistry":"/docs/apis/test-utils#channelfactoryregistry-TypeAlias","fluidEntryPoint":"/docs/apis/test-utils#fluidentrypoint-TypeAlias","SupportedExportInterfaces":"/docs/apis/test-utils#supportedexportinterfaces-TypeAlias"},"Function":{"createAndAttachContainer":"/docs/apis/test-utils#createandattachcontainer-Function","createLoader":"/docs/apis/test-utils#createloader-Function","createSummarizer":"/docs/apis/test-utils#createsummarizer-Function","createSummarizerFromFactory":"/docs/apis/test-utils#createsummarizerfromfactory-Function","ensureContainerConnected":"/docs/apis/test-utils#ensurecontainerconnected-Function","getUnexpectedLogErrorException":"/docs/apis/test-utils#getunexpectedlogerrorexception-Function","summarizeNow":"/docs/apis/test-utils#summarizenow-Function","timeoutAwait":"/docs/apis/test-utils#timeoutawait-Function","timeoutPromise":"/docs/apis/test-utils#timeoutpromise-Function","waitForContainerConnection":"/docs/apis/test-utils#waitforcontainerconnection-Function","wrapDocumentService":"/docs/apis/test-utils#wrapdocumentservice-Function","wrapDocumentServiceFactory":"/docs/apis/test-utils#wrapdocumentservicefactory-Function","wrapDocumentStorageService":"/docs/apis/test-utils#wrapdocumentstorageservice-Function"},"Variable":{"createDocumentId":"/docs/apis/test-utils#createdocumentid-Variable","createTestContainerRuntimeFactory":"/docs/apis/test-utils#createtestcontainerruntimefactory-Variable","defaultTimeoutDurationMs":"/docs/apis/test-utils#defaulttimeoutdurationms-Variable","mockConfigProvider":"/docs/apis/test-utils#mockconfigprovider-Variable","retryWithEventualValue":"/docs/apis/test-utils#retrywitheventualvalue-Variable","TestContainerRuntimeFactory":"/docs/apis/test-utils#testcontainerruntimefactory-Variable"},"Enum":{"DataObjectFactoryType":"/docs/apis/test-utils#dataobjectfactorytype-Enum"},"Class":{"EventAndErrorTrackingLogger":"/docs/apis/test-utils/eventanderrortrackinglogger","LoaderContainerTracker":"/docs/apis/test-utils/loadercontainertracker","LocalCodeLoader":"/docs/apis/test-utils/localcodeloader","TestFluidObject":"/docs/apis/test-utils/testfluidobject","TestFluidObjectFactory":"/docs/apis/test-utils/testfluidobjectfactory","TestObjectProvider":"/docs/apis/test-utils/testobjectprovider"},"Interface":{"IOpProcessingController":"/docs/apis/test-utils/iopprocessingcontroller","IProvideTestFluidObject":"/docs/apis/test-utils/iprovidetestfluidobject","ITestContainerConfig":"/docs/apis/test-utils/itestcontainerconfig","ITestFluidObject":"/docs/apis/test-utils/itestfluidobject","ITestObjectProvider":"/docs/apis/test-utils/itestobjectprovider","TimeoutWithError":"/docs/apis/test-utils/timeoutwitherror","TimeoutWithValue":"/docs/apis/test-utils/timeoutwithvalue"}},"package":"@fluidframework/test-utils","unscopedPackageName":"test-utils"}

[//]: # (Do not edit this file. It is automatically generated by API Documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/test-utils](/docs/apis/test-utils)

## Classes

<table class="table table-striped table-hover class-list">
<caption>List of classes contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Class</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/test-utils/eventanderrortrackinglogger'>EventAndErrorTrackingLogger</a></td>
      <td>This class tracks events. It allows specifying expected events, which will be looked for in order. It also tracks all unexpected errors. At any point you call reportAndClearTrackedEvents which will provide all unexpected errors, and any expected events that have not occurred.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils/loadercontainertracker'>LoaderContainerTracker</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils/localcodeloader'>LocalCodeLoader</a></td>
      <td>A simple code loader that caches a mapping of package name to a Fluid entry point. On load, it retrieves the entry point matching the package name in the given code details.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils/testfluidobject'>TestFluidObject</a></td>
      <td>A test Fluid object that will create a shared object for each key-value pair in the factoryEntries passed to load. The shared objects can be retrieved by passing the key of the entry to getSharedObject. It exposes the IFluidDataStoreContext and IFluidDataStoreRuntime.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils/testfluidobjectfactory'>TestFluidObjectFactory</a></td>
      <td>Creates a factory for a TestFluidObject with the given object factory entries. It creates a data store runtime with the object factories in the entry list. All the entries with an id other than undefined are passed to the Fluid object so that it can create a shared object for each.<!-- -->For example, the following will create a Fluid object that creates and loads a SharedString and SharedDirectory. It will add SparseMatrix to the data store's factory so that it can be created later. new TestFluidObjectFactory([ [ "sharedString", SharedString.getFactory() ], [ "sharedDirectory", SharedDirectory.getFactory() ], [ undefined, SparseMatrix.getFactory() ], ]);<!-- -->The SharedString and SharedDirectory can be retrieved via getSharedObject() on the TestFluidObject as follows: sharedString = testFluidObject.getSharedObject<SharedString>("sharedString"); sharedDir = testFluidObject.getSharedObject<SharedDirectory>("sharedDirectory");</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils/testobjectprovider'>TestObjectProvider</a></td>
      <td>Shared base class for test object provider. Contain code for loader and container creation and loading</td>
    </tr>
  </tbody>
</table>

## Enumerations

<table class="table table-striped table-hover enum-list">
<caption>List of enums contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Enumeration</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/test-utils#dataobjectfactorytype-Enum'>DataObjectFactoryType</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

## Functions

<table class="table table-striped table-hover function-list">
<caption>List of functions contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Function</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/test-utils#createandattachcontainer-Function'>createAndAttachContainer(source, loader, attachRequest)</a></td>
      <td>Creates a detached Container and attaches it.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#createloader-Function'>createLoader(packageEntries, documentServiceFactory, urlResolver, logger, options)</a></td>
      <td>Creates a loader with the given package entries and driver.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#createsummarizer-Function'>createSummarizer(provider, container, summaryVersion, gcOptions)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#createsummarizerfromfactory-Function'>createSummarizerFromFactory(provider, container, dataStoreFactory, summaryVersion, containerRuntimeFactoryType)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#ensurecontainerconnected-Function'>ensureContainerConnected(container)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#getunexpectedlogerrorexception-Function'>getUnexpectedLogErrorException(logger, prefix)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#summarizenow-Function'>summarizeNow(summarizer, reason)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#timeoutawait-Function'>timeoutAwait(promise, timeoutOptions)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#timeoutpromise-Function'>timeoutPromise(executor, timeoutOptions)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#waitforcontainerconnection-Function'>waitForContainerConnection(container)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#wrapdocumentservice-Function'>wrapDocumentService(innerDocService, uploadSummaryCb)</a></td>
      <td>Wraps the given IDocumentService to override the <code>connectToStorage</code> method. The intent is to plumb the <code>uploadSummaryCb</code> to the IDocumentStorageService so that it is called whenever a summary is uploaded by the client. The document storage service that is created in <code>connectToStorage</code> is wrapped by calling <code>wrapDocumentStorageService</code> to pass in the <code>uploadSummaryCb</code>.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#wrapdocumentservicefactory-Function'>wrapDocumentServiceFactory(innerDocServiceFactory, uploadSummaryCb)</a></td>
      <td>Wraps the given IDocumentServiceFactory to override the <code>createDocumentService</code> method. The intent is to plumb the <code>uploadSummaryCb</code> all the way to the IDocumentStorageService so that it is called whenever a summary is uploaded by the client. The document service that is created in <code>createDocumentService</code> is wrapped by calling <code>wrapDocumentService</code> to pass in the <code>uploadSummaryCb</code>.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#wrapdocumentstorageservice-Function'>wrapDocumentStorageService(innerDocStorageService, uploadSummaryCb)</a></td>
      <td>Wraps the given IDocumentStorageService to override the <code>uploadSummaryWithContext</code> method. It calls the <code>uploadSummaryCb</code> whenever a summary is uploaded by the client. The summary context can be updated in the callback before it is uploaded to the server.</td>
    </tr>
  </tbody>
</table>

## Interfaces

<table class="table table-striped table-hover interface-list">
<caption>List of interfaces contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Interface</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/test-utils/iopprocessingcontroller'>IOpProcessingController</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils/iprovidetestfluidobject'>IProvideTestFluidObject</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils/itestcontainerconfig'>ITestContainerConfig</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils/itestfluidobject'>ITestFluidObject</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils/itestobjectprovider'>ITestObjectProvider</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils/timeoutwitherror'>TimeoutWithError</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils/timeoutwithvalue'>TimeoutWithValue</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

## Variables

<table class="table table-striped table-hover variable-list">
<caption>List of variables contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Variable</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/test-utils#createdocumentid-Variable'>createDocumentId</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#createtestcontainerruntimefactory-Variable'>createTestContainerRuntimeFactory</a></td>
      <td>Create a container runtime factory class that allows you to set runtime options</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#defaulttimeoutdurationms-Variable'>defaultTimeoutDurationMs</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#mockconfigprovider-Variable'>mockConfigProvider</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#retrywitheventualvalue-Variable'>retryWithEventualValue</a></td>
      <td>Simple retry mechanism with linear back off to call a function which may eventually return an accepted value.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#testcontainerruntimefactory-Variable'>TestContainerRuntimeFactory</a></td>
      <td>A container runtime factory that allows you to set runtime options</td>
    </tr>
  </tbody>
</table>

## Type Aliases

<table class="table table-striped table-hover alias-list">
<caption>List of type aliases contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Type Alias</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/test-utils#channelfactoryregistry-TypeAlias'>ChannelFactoryRegistry</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#fluidentrypoint-TypeAlias'>fluidEntryPoint</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/test-utils#supportedexportinterfaces-TypeAlias'>SupportedExportInterfaces</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

<hr><div id=package-details>

## Enumeration Details {#enumerations-details}

### DataObjectFactoryType enum {#dataobjectfactorytype-Enum}

<b>Signature:</b>

```typescript
export declare enum DataObjectFactoryType 
```

### Enumeration Members

<table class="table table-striped table-hover enum-list">
<caption>List of members in use in this enum</caption>
  <thead>
    <tr>
     <th scope="col">Member</th>
 <th scope="col">Value</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Primed</td>
      <td><code>0</code></td>
      <td></td>
    </tr>
    <tr>
      <td>Test</td>
      <td><code>1</code></td>
      <td></td>
    </tr>
  </tbody>
</table>


## Function Details {#functions-details}

### createAndAttachContainer {#createandattachcontainer-Function}

Creates a detached Container and attaches it.

<b>Signature:</b>

```typescript
export declare function createAndAttachContainer(source: IFluidCodeDetails, loader: IHostLoader, attachRequest: IRequest): Promise<IContainer>;
```

#### Parameters {#createandattachcontainer-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>source</td>
      <td>IFluidCodeDetails</td>
      <td>The code details used to create the Container.</td>
    </tr>
    <tr>
      <td>loader</td>
      <td>IHostLoader</td>
      <td>The loader to use to initialize the container.</td>
    </tr>
    <tr>
      <td>attachRequest</td>
      <td><a href='/docs/apis/core-interfaces/irequest'>IRequest</a></td>
      <td>The request to create new from.</td>
    </tr>
  </tbody>
</table>

### createLoader {#createloader-Function}

Creates a loader with the given package entries and driver.

<b>Signature:</b>

```typescript
export declare function createLoader(packageEntries: Iterable<[IFluidCodeDetails, fluidEntryPoint]>, documentServiceFactory: IDocumentServiceFactory, urlResolver: IUrlResolver, logger?: ITelemetryBaseLogger, options?: ILoaderOptions): IHostLoader;
```

#### Parameters {#createloader-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>packageEntries</td>
      <td>Iterable<[IFluidCodeDetails, <a href='/docs/apis/test-utils#fluidentrypoint-TypeAlias'>fluidEntryPoint</a>]></td>
      <td>A list of code details to Fluid entry points.</td>
    </tr>
    <tr>
      <td>documentServiceFactory</td>
      <td><a href='/docs/apis/driver-definitions/idocumentservicefactory'>IDocumentServiceFactory</a></td>
      <td>the driver factory to use</td>
    </tr>
    <tr>
      <td>urlResolver</td>
      <td><a href='/docs/apis/driver-definitions/iurlresolver'>IUrlResolver</a></td>
      <td>the url resolver to use</td>
    </tr>
    <tr>
      <td>logger</td>
      <td><a href='/docs/apis/common-definitions/itelemetrybaselogger'>ITelemetryBaseLogger</a></td>
      <td></td>
    </tr>
    <tr>
      <td>options</td>
      <td>ILoaderOptions</td>
      <td>loader options</td>
    </tr>
  </tbody>
</table>

### createSummarizer {#createsummarizer-Function}

<b>Signature:</b>

```typescript
export declare function createSummarizer(provider: ITestObjectProvider, container: IContainer, summaryVersion?: string, gcOptions?: IGCRuntimeOptions): Promise<ISummarizer>;
```

#### Parameters {#createsummarizer-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>provider</td>
      <td><a href='/docs/apis/test-utils/itestobjectprovider'>ITestObjectProvider</a></td>
      <td></td>
    </tr>
    <tr>
      <td>container</td>
      <td>IContainer</td>
      <td></td>
    </tr>
    <tr>
      <td>summaryVersion</td>
      <td>string</td>
      <td></td>
    </tr>
    <tr>
      <td>gcOptions</td>
      <td><a href='/docs/apis/container-runtime/igcruntimeoptions'>IGCRuntimeOptions</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### createSummarizerFromFactory {#createsummarizerfromfactory-Function}

<b>Signature:</b>

```typescript
export declare function createSummarizerFromFactory(provider: ITestObjectProvider, container: IContainer, dataStoreFactory: IFluidDataStoreFactory, summaryVersion?: string, containerRuntimeFactoryType?: typeof ContainerRuntimeFactoryWithDefaultDataStore): Promise<ISummarizer>;
```

#### Parameters {#createsummarizerfromfactory-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>provider</td>
      <td><a href='/docs/apis/test-utils/itestobjectprovider'>ITestObjectProvider</a></td>
      <td></td>
    </tr>
    <tr>
      <td>container</td>
      <td>IContainer</td>
      <td></td>
    </tr>
    <tr>
      <td>dataStoreFactory</td>
      <td><a href='/docs/apis/runtime-definitions/ifluiddatastorefactory'>IFluidDataStoreFactory</a></td>
      <td></td>
    </tr>
    <tr>
      <td>summaryVersion</td>
      <td>string</td>
      <td></td>
    </tr>
    <tr>
      <td>containerRuntimeFactoryType</td>
      <td>typeof <a href='/docs/apis/aqueduct/containerruntimefactorywithdefaultdatastore'>ContainerRuntimeFactoryWithDefaultDataStore</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### ensureContainerConnected {#ensurecontainerconnected-Function}

<b>Signature:</b>

```typescript
export declare function ensureContainerConnected(container: Container): Promise<void>;
```

#### Parameters {#ensurecontainerconnected-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>container</td>
      <td><a href='/docs/apis/container-loader/container'>Container</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### getUnexpectedLogErrorException {#getunexpectedlogerrorexception-Function}

<b>Signature:</b>

```typescript
export declare function getUnexpectedLogErrorException(logger: EventAndErrorTrackingLogger | undefined, prefix?: string): Error | undefined;
```

#### Parameters {#getunexpectedlogerrorexception-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>logger</td>
      <td><a href='/docs/apis/test-utils/eventanderrortrackinglogger'>EventAndErrorTrackingLogger</a> | undefined</td>
      <td></td>
    </tr>
    <tr>
      <td>prefix</td>
      <td>string</td>
      <td></td>
    </tr>
  </tbody>
</table>

### summarizeNow {#summarizenow-Function}

<b>Signature:</b>

```typescript
export declare function summarizeNow(summarizer: ISummarizer, reason?: string): Promise<{
    summaryTree: import("@fluidframework/protocol-definitions").ISummaryTree;
    summaryVersion: string;
}>;
```

#### Parameters {#summarizenow-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>summarizer</td>
      <td><a href='/docs/apis/container-runtime/isummarizer'>ISummarizer</a></td>
      <td></td>
    </tr>
    <tr>
      <td>reason</td>
      <td>string</td>
      <td></td>
    </tr>
  </tbody>
</table>

### timeoutAwait {#timeoutawait-Function}

<b>Signature:</b>

```typescript
export declare function timeoutAwait<T = void>(promise: PromiseLike<T>, timeoutOptions?: TimeoutWithError | TimeoutWithValue<T>): Promise<T>;
```

#### Parameters {#timeoutawait-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>promise</td>
      <td>PromiseLike<T></td>
      <td></td>
    </tr>
    <tr>
      <td>timeoutOptions</td>
      <td><a href='/docs/apis/test-utils/timeoutwitherror'>TimeoutWithError</a> | <a href='/docs/apis/test-utils/timeoutwithvalue'>TimeoutWithValue</a><T></td>
      <td></td>
    </tr>
  </tbody>
</table>

### timeoutPromise {#timeoutpromise-Function}

<b>Signature:</b>

```typescript
export declare function timeoutPromise<T = void>(executor: (resolve: (value: T | PromiseLike<T>) => void, reject: (reason?: any) => void) => void, timeoutOptions?: TimeoutWithError | TimeoutWithValue<T>): Promise<T>;
```

#### Parameters {#timeoutpromise-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>executor</td>
      <td>(resolve: (value: T | PromiseLike<T>) => void, reject: (reason?: any) => void) => void</td>
      <td></td>
    </tr>
    <tr>
      <td>timeoutOptions</td>
      <td><a href='/docs/apis/test-utils/timeoutwitherror'>TimeoutWithError</a> | <a href='/docs/apis/test-utils/timeoutwithvalue'>TimeoutWithValue</a><T></td>
      <td></td>
    </tr>
  </tbody>
</table>

### waitForContainerConnection {#waitforcontainerconnection-Function}

<b>Signature:</b>

```typescript
export declare function waitForContainerConnection(container: IContainer): Promise<void>;
```

#### Parameters {#waitforcontainerconnection-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>container</td>
      <td>IContainer</td>
      <td></td>
    </tr>
  </tbody>
</table>

### wrapDocumentService {#wrapdocumentservice-Function}

Wraps the given IDocumentService to override the `connectToStorage` method. The intent is to plumb the `uploadSummaryCb` to the IDocumentStorageService so that it is called whenever a summary is uploaded by the client. The document storage service that is created in `connectToStorage` is wrapped by calling `wrapDocumentStorageService` to pass in the `uploadSummaryCb`<!-- -->.

<b>Signature:</b>

```typescript
export declare function wrapDocumentService(innerDocService: IDocumentService, uploadSummaryCb: (summaryTree: ISummaryTree, context: ISummaryContext) => ISummaryContext): IDocumentService;
```

#### Parameters {#wrapdocumentservice-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>innerDocService</td>
      <td><a href='/docs/apis/driver-definitions/idocumentservice'>IDocumentService</a></td>
      <td></td>
    </tr>
    <tr>
      <td>uploadSummaryCb</td>
      <td>(summaryTree: <a href='/docs/apis/protocol-definitions/isummarytree'>ISummaryTree</a>, context: <a href='/docs/apis/driver-definitions/isummarycontext'>ISummaryContext</a>) => <a href='/docs/apis/driver-definitions/isummarycontext'>ISummaryContext</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### wrapDocumentServiceFactory {#wrapdocumentservicefactory-Function}

Wraps the given IDocumentServiceFactory to override the `createDocumentService` method. The intent is to plumb the `uploadSummaryCb` all the way to the IDocumentStorageService so that it is called whenever a summary is uploaded by the client. The document service that is created in `createDocumentService` is wrapped by calling `wrapDocumentService` to pass in the `uploadSummaryCb`<!-- -->.

<b>Signature:</b>

```typescript
export declare function wrapDocumentServiceFactory(innerDocServiceFactory: IDocumentServiceFactory, uploadSummaryCb: (summaryTree: ISummaryTree, context: ISummaryContext) => ISummaryContext): IDocumentServiceFactory;
```

#### Parameters {#wrapdocumentservicefactory-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>innerDocServiceFactory</td>
      <td><a href='/docs/apis/driver-definitions/idocumentservicefactory'>IDocumentServiceFactory</a></td>
      <td></td>
    </tr>
    <tr>
      <td>uploadSummaryCb</td>
      <td>(summaryTree: <a href='/docs/apis/protocol-definitions/isummarytree'>ISummaryTree</a>, context: <a href='/docs/apis/driver-definitions/isummarycontext'>ISummaryContext</a>) => <a href='/docs/apis/driver-definitions/isummarycontext'>ISummaryContext</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### wrapDocumentStorageService {#wrapdocumentstorageservice-Function}

Wraps the given IDocumentStorageService to override the `uploadSummaryWithContext` method. It calls the `uploadSummaryCb` whenever a summary is uploaded by the client. The summary context can be updated in the callback before it is uploaded to the server.

<b>Signature:</b>

```typescript
export declare function wrapDocumentStorageService(innerDocStorageService: IDocumentStorageService, uploadSummaryCb: (summaryTree: ISummaryTree, context: ISummaryContext) => ISummaryContext): IDocumentStorageService;
```

#### Parameters {#wrapdocumentstorageservice-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>innerDocStorageService</td>
      <td><a href='/docs/apis/driver-definitions/idocumentstorageservice'>IDocumentStorageService</a></td>
      <td></td>
    </tr>
    <tr>
      <td>uploadSummaryCb</td>
      <td>(summaryTree: <a href='/docs/apis/protocol-definitions/isummarytree'>ISummaryTree</a>, context: <a href='/docs/apis/driver-definitions/isummarycontext'>ISummaryContext</a>) => <a href='/docs/apis/driver-definitions/isummarycontext'>ISummaryContext</a></td>
      <td></td>
    </tr>
  </tbody>
</table>


## Variable Details {#variables-details}

### createDocumentId {#createdocumentid-Variable}

<b>Signature:</b>

```typescript
createDocumentId: () => string
```

### createTestContainerRuntimeFactory {#createtestcontainerruntimefactory-Variable}

Create a container runtime factory class that allows you to set runtime options

<b>Signature:</b>

```typescript
createTestContainerRuntimeFactory: (containerRuntimeCtor: typeof ContainerRuntime) => {
    new (type: string, dataStoreFactory: IFluidDataStoreFactory, runtimeOptions?: IContainerRuntimeOptions, requestHandlers?: RuntimeRequestHandler[]): {
        type: string;
        dataStoreFactory: IFluidDataStoreFactory;
        runtimeOptions: IContainerRuntimeOptions;
        requestHandlers: RuntimeRequestHandler[];
        instantiateFirstTime(runtime: ContainerRuntime): Promise<void>;
        instantiateFromExisting(runtime: ContainerRuntime): Promise<void>;
        preInitialize(context: IContainerContext, existing: boolean): Promise<IRuntime & IContainerRuntime>;
        readonly IRuntimeFactory: any;
        instantiateRuntime(context: IContainerContext, existing?: boolean | undefined): Promise<IRuntime>;
        hasInitialized(_runtime: IContainerRuntime): Promise<void>;
    };
}
```

### defaultTimeoutDurationMs {#defaulttimeoutdurationms-Variable}

<b>Signature:</b>

```typescript
defaultTimeoutDurationMs = 250
```

### mockConfigProvider {#mockconfigprovider-Variable}

<b>Signature:</b>

```typescript
mockConfigProvider: (settings?: Record<string, ConfigTypes>) => IConfigProviderBase
```

### retryWithEventualValue {#retrywitheventualvalue-Variable}

Simple retry mechanism with linear back off to call a function which may eventually return an accepted value.

<b>Signature:</b>

```typescript
retryWithEventualValue: <T>(callback: () => Promise<T>, check: (value: T) => boolean, defaultValue: T, maxTries?: number, backOffMs?: number) => Promise<T>
```

### TestContainerRuntimeFactory {#testcontainerruntimefactory-Variable}

A container runtime factory that allows you to set runtime options

<b>Signature:</b>

```typescript
TestContainerRuntimeFactory: {
    new (type: string, dataStoreFactory: IFluidDataStoreFactory, runtimeOptions?: IContainerRuntimeOptions, requestHandlers?: RuntimeRequestHandler[]): {
        type: string;
        dataStoreFactory: IFluidDataStoreFactory;
        runtimeOptions: IContainerRuntimeOptions;
        requestHandlers: RuntimeRequestHandler[];
        instantiateFirstTime(runtime: ContainerRuntime): Promise<void>;
        instantiateFromExisting(runtime: ContainerRuntime): Promise<void>;
        preInitialize(context: IContainerContext, existing: boolean): Promise<IRuntime & IContainerRuntime>;
        readonly IRuntimeFactory: any;
        instantiateRuntime(context: IContainerContext, existing?: boolean | undefined): Promise<IRuntime>;
        hasInitialized(_runtime: IContainerRuntime): Promise<void>;
    };
}
```

## Type Alias Details {#type-aliases-details}

### ChannelFactoryRegistry {#channelfactoryregistry-TypeAlias}

<b>Signature:</b>

```typescript
export declare type ChannelFactoryRegistry = Iterable<[string | undefined, IChannelFactory]>;
```

### fluidEntryPoint {#fluidentrypoint-TypeAlias}

<b>Signature:</b>

```typescript
export declare type fluidEntryPoint = SupportedExportInterfaces | IFluidModule;
```

### SupportedExportInterfaces {#supportedexportinterfaces-TypeAlias}

<b>Signature:</b>

```typescript
export declare type SupportedExportInterfaces = Partial<IProvideRuntimeFactory & IProvideFluidDataStoreFactory & IProvideFluidDataStoreRegistry & IProvideFluidCodeDetailsComparer>;
```

</div>
