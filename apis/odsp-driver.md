{"kind":"Package","title":"@fluidframework/odsp-driver Package","members":{"Function":{"checkUrl":"/docs/apis/odsp-driver#checkurl-Function","createLocalOdspDocumentServiceFactory":"/docs/apis/odsp-driver#createlocalodspdocumentservicefactory-Function","createOdspCreateContainerRequest":"/docs/apis/odsp-driver#createodspcreatecontainerrequest-Function","createOdspUrl":"/docs/apis/odsp-driver#createodspurl-Function","encodeOdspFluidDataStoreLocator":"/docs/apis/odsp-driver#encodeodspfluiddatastorelocator-Function","getApiRoot":"/docs/apis/odsp-driver#getapiroot-Function","getHashedDocumentId":"/docs/apis/odsp-driver#gethasheddocumentid-Function","getLocatorFromOdspUrl":"/docs/apis/odsp-driver#getlocatorfromodspurl-Function","getOdspUrlParts":"/docs/apis/odsp-driver#getodspurlparts-Function","isOdcOrigin":"/docs/apis/odsp-driver#isodcorigin-Function","isOdcUrl":"/docs/apis/odsp-driver#isodcurl-Function","isSpoUrl":"/docs/apis/odsp-driver#isspourl-Function","parseCompactSnapshotResponse":"/docs/apis/odsp-driver#parsecompactsnapshotresponse-Function","prefetchLatestSnapshot":"/docs/apis/odsp-driver#prefetchlatestsnapshot-Function","storeLocatorInOdspUrl":"/docs/apis/odsp-driver#storelocatorinodspurl-Function"},"Enum":{"ClpCompliantAppHeader":"/docs/apis/odsp-driver#clpcompliantappheader-Enum","SharingLinkHeader":"/docs/apis/odsp-driver#sharinglinkheader-Enum"},"Variable":{"currentReadVersion":"/docs/apis/odsp-driver#currentreadversion-Variable","locatorQueryParamName":"/docs/apis/odsp-driver#locatorqueryparamname-Variable","OdcApiSiteOrigin":"/docs/apis/odsp-driver#odcapisiteorigin-Variable","OdcFileSiteOrigin":"/docs/apis/odsp-driver#odcfilesiteorigin-Variable","snapshotMinReadVersion":"/docs/apis/odsp-driver#snapshotminreadversion-Variable"},"Interface":{"IClpCompliantAppHeader":"/docs/apis/odsp-driver/iclpcompliantappheader","ISharingLinkHeader":"/docs/apis/odsp-driver/isharinglinkheader","ISnapshotContents":"/docs/apis/odsp-driver/isnapshotcontents","OdspFluidDataStoreLocator":"/docs/apis/odsp-driver/odspfluiddatastorelocator","ShareLinkFetcherProps":"/docs/apis/odsp-driver/sharelinkfetcherprops"},"Class":{"OdspDocumentServiceFactory":"/docs/apis/odsp-driver/odspdocumentservicefactory","OdspDocumentServiceFactoryCore":"/docs/apis/odsp-driver/odspdocumentservicefactorycore","OdspDocumentServiceFactoryWithCodeSplit":"/docs/apis/odsp-driver/odspdocumentservicefactorywithcodesplit","OdspDriverUrlResolver":"/docs/apis/odsp-driver/odspdriverurlresolver","OdspDriverUrlResolverForShareLink":"/docs/apis/odsp-driver/odspdriverurlresolverforsharelink","ReadBuffer":"/docs/apis/odsp-driver/readbuffer"}},"package":"@fluidframework/odsp-driver","unscopedPackageName":"odsp-driver"}

[//]: # (Do not edit this file. It is automatically generated by API Documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/odsp-driver](/docs/apis/odsp-driver)

## Classes

<table class="table table-striped table-hover class-list">
<caption>List of classes contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Class</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/odsp-driver/odspdocumentservicefactory'>OdspDocumentServiceFactory</a></td>
      <td>Factory for creating the sharepoint document service. Use this if you want to use the sharepoint implementation.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver/odspdocumentservicefactorycore'>OdspDocumentServiceFactoryCore</a></td>
      <td>Factory for creating the sharepoint document service. Use this if you want to use the sharepoint implementation.<!-- -->This constructor should be used by environments that support dynamic imports and that wish to leverage code splitting as a means to keep bundles as small as possible.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver/odspdocumentservicefactorywithcodesplit'>OdspDocumentServiceFactoryWithCodeSplit</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver/odspdriverurlresolver'>OdspDriverUrlResolver</a></td>
      <td>Resolver to resolve urls like the ones created by createOdspUrl which is driver inner url format. Ex: <code>${siteUrl}?driveId=${driveId}&amp;itemId=${itemId}&amp;path=${path}</code></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver/odspdriverurlresolverforsharelink'>OdspDriverUrlResolverForShareLink</a></td>
      <td>Resolver to resolve urls like the ones created by createOdspUrl which is driver inner url format and the ones which have things like driveId, siteId, itemId etc encoded in nav param. This resolver also handles share links and try to generate one for the use by the app.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver/readbuffer'>ReadBuffer</a></td>
      <td>Buffer class, used to sequentially read data. Used by tree code to reconstruct a tree from binary representation.</td>
    </tr>
  </tbody>
</table>

## Enumerations

<table class="table table-striped table-hover enum-list">
<caption>List of enums contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Enumeration</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/odsp-driver#clpcompliantappheader-Enum'>ClpCompliantAppHeader</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#sharinglinkheader-Enum'>SharingLinkHeader</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

## Functions

<table class="table table-striped table-hover function-list">
<caption>List of functions contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Function</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/odsp-driver#checkurl-Function'>checkUrl(documentUrl)</a></td>
      <td>A check that returns DriverPreCheckInfo if the URL format is likely supported by this driver. Note that returning information here is NOT a full guarantee that resolve will ultimately be successful. Instead, this should be used as a lightweight check that can filter out easily detectable unsupported URLs before the entire Fluid loading process needs to be kicked off.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#createlocalodspdocumentservicefactory-Function'>createLocalOdspDocumentServiceFactory(localSnapshot)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#createodspcreatecontainerrequest-Function'>createOdspCreateContainerRequest(siteUrl, driveId, filePath, fileName, createLinkType)</a></td>
      <td>Create the request object with url and headers for creating a new file on OneDrive Sharepoint</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#createodspurl-Function'>createOdspUrl(l)</a></td>
      <td>Encodes ODC/SPO information into a URL format that can be handled by the Loader</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#encodeodspfluiddatastorelocator-Function'>encodeOdspFluidDataStoreLocator(locator)</a></td>
      <td>Transforms given Fluid data store locator into string that can be embedded into url</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#getapiroot-Function'>getApiRoot(origin)</a></td>
      <td>Gets the correct API root for the given ODSP url, e.g. 'https://foo-my.sharepoint.com/_api/v2.1'</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#gethasheddocumentid-Function'>getHashedDocumentId(driveId, itemId)</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#getlocatorfromodspurl-Function'>getLocatorFromOdspUrl(url)</a></td>
      <td>Extract ODSP Fluid data store locator object from given ODSP url. This extracts things like driveId, ItemId, siteUrl etc from a url where these are encoded in nav query param.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#getodspurlparts-Function'>getOdspUrlParts(url)</a></td>
      <td>Breaks an ODSP URL into its parts, extracting the site, drive ID, and item ID. Returns undefined for invalid/malformed URLs.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#isodcorigin-Function'>isOdcOrigin(origin)</a></td>
      <td>Checks whether or not the given URL origin is an ODC origin</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#isodcurl-Function'>isOdcUrl(url)</a></td>
      <td>Whether or not the given URL is a valid ODC URL</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#isspourl-Function'>isSpoUrl(url)</a></td>
      <td>Whether or not the given URL is a valid SPO/ODB URL</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#parsecompactsnapshotresponse-Function'>parseCompactSnapshotResponse(buffer)</a></td>
      <td>Converts snapshot from binary compact representation to tree/blobs/ops.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#prefetchlatestsnapshot-Function'>prefetchLatestSnapshot(resolvedUrl, getStorageToken, persistedCache, forceAccessTokenViaAuthorizationHeader, logger, hostSnapshotFetchOptions, enableRedeemFallback, fetchBinarySnapshotFormat, snapshotFormatFetchType)</a></td>
      <td>Function to prefetch the snapshot and cached it in the persistant cache, so that when the container is loaded the cached latest snapshot could be used and removes the network call from the critical path.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#storelocatorinodspurl-Function'>storeLocatorInOdspUrl(url, locator)</a></td>
      <td>Embeds Fluid data store locator data into given ODSP url</td>
    </tr>
  </tbody>
</table>

## Interfaces

<table class="table table-striped table-hover interface-list">
<caption>List of interfaces contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Interface</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/odsp-driver/iclpcompliantappheader'>IClpCompliantAppHeader</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver/isharinglinkheader'>ISharingLinkHeader</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver/isnapshotcontents'>ISnapshotContents</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver/odspfluiddatastorelocator'>OdspFluidDataStoreLocator</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver/sharelinkfetcherprops'>ShareLinkFetcherProps</a></td>
      <td>Properties passed to the code responsible for fetching share link for a file.</td>
    </tr>
  </tbody>
</table>

## Variables

<table class="table table-striped table-hover variable-list">
<caption>List of variables contained in this package</caption>
  <thead>
    <tr>
     <th scope="col">Variable</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/odsp-driver#currentreadversion-Variable'>currentReadVersion</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#locatorqueryparamname-Variable'>locatorQueryParamName</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#odcapisiteorigin-Variable'>OdcApiSiteOrigin</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#odcfilesiteorigin-Variable'>OdcFileSiteOrigin</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/odsp-driver#snapshotminreadversion-Variable'>snapshotMinReadVersion</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

<hr><div id=package-details>

## Enumeration Details {#enumerations-details}

### ClpCompliantAppHeader enum {#clpcompliantappheader-Enum}

<b>Signature:</b>

```typescript
export declare enum ClpCompliantAppHeader 
```

### Enumeration Members

<table class="table table-striped table-hover enum-list">
<caption>List of members in use in this enum</caption>
  <thead>
    <tr>
     <th scope="col">Member</th>
 <th scope="col">Value</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>isClpCompliantApp</td>
      <td><code>&quot;X-CLP-Compliant-App&quot;</code></td>
      <td></td>
    </tr>
  </tbody>
</table>

### SharingLinkHeader enum {#sharinglinkheader-Enum}

<b>Signature:</b>

```typescript
export declare enum SharingLinkHeader 
```

### Enumeration Members

<table class="table table-striped table-hover enum-list">
<caption>List of members in use in this enum</caption>
  <thead>
    <tr>
     <th scope="col">Member</th>
 <th scope="col">Value</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>isSharingLinkToRedeem</td>
      <td><code>&quot;isSharingLinkToRedeem&quot;</code></td>
      <td></td>
    </tr>
  </tbody>
</table>


## Function Details {#functions-details}

### checkUrl {#checkurl-Function}

A check that returns DriverPreCheckInfo if the URL format is likely supported by this driver. Note that returning information here is NOT a full guarantee that resolve will ultimately be successful. Instead, this should be used as a lightweight check that can filter out easily detectable unsupported URLs before the entire Fluid loading process needs to be kicked off.

<b>Signature:</b>

```typescript
export declare function checkUrl(documentUrl: URL): DriverPreCheckInfo | undefined;
```

#### Parameters {#checkurl-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>documentUrl</td>
      <td>URL</td>
      <td></td>
    </tr>
  </tbody>
</table>

### createLocalOdspDocumentServiceFactory {#createlocalodspdocumentservicefactory-Function}

<b>Signature:</b>

```typescript
export declare function createLocalOdspDocumentServiceFactory(localSnapshot: Uint8Array | string): IDocumentServiceFactory;
```

#### Parameters {#createlocalodspdocumentservicefactory-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>localSnapshot</td>
      <td>Uint8Array | string</td>
      <td></td>
    </tr>
  </tbody>
</table>

### createOdspCreateContainerRequest {#createodspcreatecontainerrequest-Function}

Create the request object with url and headers for creating a new file on OneDrive Sharepoint

<b>Signature:</b>

```typescript
export declare function createOdspCreateContainerRequest(siteUrl: string, driveId: string, filePath: string, fileName: string, createLinkType?: ShareLinkTypes): IRequest;
```

#### Parameters {#createodspcreatecontainerrequest-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>siteUrl</td>
      <td>string</td>
      <td>Base url for OneDrive</td>
    </tr>
    <tr>
      <td>driveId</td>
      <td>string</td>
      <td>drive identifier</td>
    </tr>
    <tr>
      <td>filePath</td>
      <td>string</td>
      <td>path where file needs to be created</td>
    </tr>
    <tr>
      <td>fileName</td>
      <td>string</td>
      <td>name of the new file to be created</td>
    </tr>
    <tr>
      <td>createLinkType</td>
      <td><a href='/docs/apis/odsp-driver-definitions#sharelinktypes-Enum'>ShareLinkTypes</a></td>
      <td>type of sharing link you would like to create for this file</td>
    </tr>
  </tbody>
</table>

### createOdspUrl {#createodspurl-Function}

Encodes ODC/SPO information into a URL format that can be handled by the Loader

<b>Signature:</b>

```typescript
export declare function createOdspUrl(l: OdspFluidDataStoreLocator): string;
```

#### Parameters {#createodspurl-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>l</td>
      <td><a href='/docs/apis/odsp-driver/odspfluiddatastorelocator'>OdspFluidDataStoreLocator</a></td>
      <td>The property bag of necessary properties to locate a Fluid data store and craft a url for it</td>
    </tr>
  </tbody>
</table>

### encodeOdspFluidDataStoreLocator {#encodeodspfluiddatastorelocator-Function}

Transforms given Fluid data store locator into string that can be embedded into url

<b>Signature:</b>

```typescript
export declare function encodeOdspFluidDataStoreLocator(locator: OdspFluidDataStoreLocator): string;
```

#### Parameters {#encodeodspfluiddatastorelocator-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>locator</td>
      <td><a href='/docs/apis/odsp-driver/odspfluiddatastorelocator'>OdspFluidDataStoreLocator</a></td>
      <td>describes Fluid data store locator info to be encoded</td>
    </tr>
  </tbody>
</table>

#### Returns {#encodeodspfluiddatastorelocator-Function-returns}


string representing encoded Fluid data store locator info

<b>Return type(s):</b> string

### getApiRoot {#getapiroot-Function}

Gets the correct API root for the given ODSP url, e.g. 'https://foo-my.sharepoint.com/\_api/v2.1'

<b>Signature:</b>

```typescript
export declare function getApiRoot(origin: string): string;
```

#### Parameters {#getapiroot-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>origin</td>
      <td>string</td>
      <td>The URL origin</td>
    </tr>
  </tbody>
</table>

### getHashedDocumentId {#gethasheddocumentid-Function}

<b>Signature:</b>

```typescript
export declare function getHashedDocumentId(driveId: string, itemId: string): Promise<string>;
```

#### Parameters {#gethasheddocumentid-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>driveId</td>
      <td>string</td>
      <td></td>
    </tr>
    <tr>
      <td>itemId</td>
      <td>string</td>
      <td></td>
    </tr>
  </tbody>
</table>

### getLocatorFromOdspUrl {#getlocatorfromodspurl-Function}

Extract ODSP Fluid data store locator object from given ODSP url. This extracts things like driveId, ItemId, siteUrl etc from a url where these are encoded in nav query param.

<b>Signature:</b>

```typescript
export declare function getLocatorFromOdspUrl(url: URL): OdspFluidDataStoreLocator | undefined;
```

#### Parameters {#getlocatorfromodspurl-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>url</td>
      <td>URL</td>
      <td>ODSP url representing Fluid file link</td>
    </tr>
  </tbody>
</table>

#### Returns {#getlocatorfromodspurl-Function-returns}


object representing Fluid data store location in ODSP terms

<b>Return type(s):</b> [OdspFluidDataStoreLocator](/docs/apis/odsp-driver/odspfluiddatastorelocator) \| undefined

### getOdspUrlParts {#getodspurlparts-Function}

Breaks an ODSP URL into its parts, extracting the site, drive ID, and item ID. Returns undefined for invalid/malformed URLs.

<b>Signature:</b>

```typescript
export declare function getOdspUrlParts(url: URL): Promise<IOdspUrlParts | undefined>;
```

#### Parameters {#getodspurlparts-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>url</td>
      <td>URL</td>
      <td>The (raw) URL to parse</td>
    </tr>
  </tbody>
</table>

### isOdcOrigin {#isodcorigin-Function}

Checks whether or not the given URL origin is an ODC origin

<b>Signature:</b>

```typescript
export declare function isOdcOrigin(origin: string): boolean;
```

#### Parameters {#isodcorigin-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>origin</td>
      <td>string</td>
      <td>The URL origin to check</td>
    </tr>
  </tbody>
</table>

### isOdcUrl {#isodcurl-Function}

Whether or not the given URL is a valid ODC URL

<b>Signature:</b>

```typescript
export declare function isOdcUrl(url: string | URL): boolean;
```

#### Parameters {#isodcurl-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>url</td>
      <td>string | URL</td>
      <td>The URL to check</td>
    </tr>
  </tbody>
</table>

### isSpoUrl {#isspourl-Function}

Whether or not the given URL is a valid SPO/ODB URL

<b>Signature:</b>

```typescript
export declare function isSpoUrl(url: string): boolean;
```

#### Parameters {#isspourl-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>url</td>
      <td>string</td>
      <td>The URL to check</td>
    </tr>
  </tbody>
</table>

### parseCompactSnapshotResponse {#parsecompactsnapshotresponse-Function}

Converts snapshot from binary compact representation to tree/blobs/ops.

<b>Signature:</b>

```typescript
export declare function parseCompactSnapshotResponse(buffer: ReadBuffer): ISnapshotContents;
```

#### Parameters {#parsecompactsnapshotresponse-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>buffer</td>
      <td><a href='/docs/apis/odsp-driver/readbuffer'>ReadBuffer</a></td>
      <td>Compact snapshot to be parsed into tree/blobs/ops.</td>
    </tr>
  </tbody>
</table>

#### Returns {#parsecompactsnapshotresponse-Function-returns}


- tree, blobs and ops from the snapshot.

<b>Return type(s):</b> [ISnapshotContents](/docs/apis/odsp-driver/isnapshotcontents)

### prefetchLatestSnapshot {#prefetchlatestsnapshot-Function}

{{% callout warning Deprecated %}}
- This will be replaced with snapshotFormatFetchType.

{{% /callout %}}

Function to prefetch the snapshot and cached it in the persistant cache, so that when the container is loaded the cached latest snapshot could be used and removes the network call from the critical path.

<b>Signature:</b>

```typescript
export declare function prefetchLatestSnapshot(resolvedUrl: IResolvedUrl, getStorageToken: TokenFetcher<OdspResourceTokenFetchOptions>, persistedCache: IPersistedCache, forceAccessTokenViaAuthorizationHeader: boolean, logger: ITelemetryBaseLogger, hostSnapshotFetchOptions: ISnapshotOptions | undefined, enableRedeemFallback?: boolean, fetchBinarySnapshotFormat?: boolean, snapshotFormatFetchType?: SnapshotFormatSupportType): Promise<boolean>;
```

#### Parameters {#prefetchlatestsnapshot-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>resolvedUrl</td>
      <td><a href='/docs/apis/driver-definitions#iresolvedurl-TypeAlias'>IResolvedUrl</a></td>
      <td>Resolved url to fetch the snapshot.</td>
    </tr>
    <tr>
      <td>getStorageToken</td>
      <td><a href='/docs/apis/odsp-driver-definitions#tokenfetcher-TypeAlias'>TokenFetcher</a><<a href='/docs/apis/odsp-driver-definitions/odspresourcetokenfetchoptions'>OdspResourceTokenFetchOptions</a>></td>
      <td>function that can provide the storage token for a given site. This is is also referred to as the "VROOM" token in SPO.</td>
    </tr>
    <tr>
      <td>persistedCache</td>
      <td><a href='/docs/apis/odsp-driver-definitions/ipersistedcache'>IPersistedCache</a></td>
      <td>Cache to store the fetched snapshot.</td>
    </tr>
    <tr>
      <td>forceAccessTokenViaAuthorizationHeader</td>
      <td>boolean</td>
      <td>whether to force passing given token via authorization header.</td>
    </tr>
    <tr>
      <td>logger</td>
      <td><a href='/docs/apis/common-definitions/itelemetrybaselogger'>ITelemetryBaseLogger</a></td>
      <td>Logger to have telemetry events.</td>
    </tr>
    <tr>
      <td>hostSnapshotFetchOptions</td>
      <td><a href='/docs/apis/odsp-driver-definitions/isnapshotoptions'>ISnapshotOptions</a> | undefined</td>
      <td>Options to fetch the snapshot if any. Otherwise default will be used.</td>
    </tr>
    <tr>
      <td>enableRedeemFallback</td>
      <td>boolean</td>
      <td>True to have the sharing link redeem fallback in case the Trees Latest/Redeem 1RT call fails with redeem error. During fallback it will first redeem the sharing link and then make the Trees latest call.</td>
    </tr>
    <tr>
      <td>fetchBinarySnapshotFormat</td>
      <td>boolean</td>
      <td>Control if we want to fetch binary format snapshot.</td>
    </tr>
    <tr>
      <td>snapshotFormatFetchType</td>
      <td>SnapshotFormatSupportType</td>
      <td>Snapshot format to fetch.</td>
    </tr>
  </tbody>
</table>

#### Returns {#prefetchlatestsnapshot-Function-returns}


- True if the snapshot is cached, false otherwise.

<b>Return type(s):</b> Promise&lt;boolean&gt;

### storeLocatorInOdspUrl {#storelocatorinodspurl-Function}

Embeds Fluid data store locator data into given ODSP url

<b>Signature:</b>

```typescript
export declare function storeLocatorInOdspUrl(url: URL, locator: OdspFluidDataStoreLocator): void;
```

#### Parameters {#storelocatorinodspurl-Function-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>url</td>
      <td>URL</td>
      <td>file url in ODSP format (can be either canonical or share link)</td>
    </tr>
    <tr>
      <td>locator</td>
      <td><a href='/docs/apis/odsp-driver/odspfluiddatastorelocator'>OdspFluidDataStoreLocator</a></td>
      <td>object representing Fluid data store location in ODSP terms</td>
    </tr>
  </tbody>
</table>


## Variable Details {#variables-details}

### currentReadVersion {#currentreadversion-Variable}

<b>Signature:</b>

```typescript
currentReadVersion = "1.0"
```

### locatorQueryParamName {#locatorqueryparamname-Variable}

<b>Signature:</b>

```typescript
locatorQueryParamName = "nav"
```

### OdcApiSiteOrigin {#odcapisiteorigin-Variable}

<b>Signature:</b>

```typescript
OdcApiSiteOrigin = "https://my.microsoftpersonalcontent.com"
```

### OdcFileSiteOrigin {#odcfilesiteorigin-Variable}

<b>Signature:</b>

```typescript
OdcFileSiteOrigin = "https://1drv.ms"
```

### snapshotMinReadVersion {#snapshotminreadversion-Variable}

<b>Signature:</b>

```typescript
snapshotMinReadVersion = "1.0"
```

</div>
