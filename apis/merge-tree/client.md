{"kind":"Class","title":"Client Class","members":{"Constructor":{"(constructor)":"/docs/apis/merge-tree/client#_constructor_-Constructor"},"Property":{"accumOps":"/docs/apis/merge-tree/client#accumops-Property","accumTime":"/docs/apis/merge-tree/client#accumtime-Property","accumWindow":"/docs/apis/merge-tree/client#accumwindow-Property","accumWindowTime":"/docs/apis/merge-tree/client#accumwindowtime-Property","localOps":"/docs/apis/merge-tree/client#localops-Property","localTime":"/docs/apis/merge-tree/client#localtime-Property","logger":"/docs/apis/merge-tree/client#logger-Property","longClientId":"/docs/apis/merge-tree/client#longclientid-Property","maxWindowTime":"/docs/apis/merge-tree/client#maxwindowtime-Property","measureOps":"/docs/apis/merge-tree/client#measureops-Property","mergeTreeDeltaCallback":"/docs/apis/merge-tree/client#mergetreedeltacallback-Property","mergeTreeMaintenanceCallback":"/docs/apis/merge-tree/client#mergetreemaintenancecallback-Property","specToSegment":"/docs/apis/merge-tree/client#spectosegment-Property"},"Method":{"addLongClientId":"/docs/apis/merge-tree/client#addlongclientid-Method","annotateMarker":"/docs/apis/merge-tree/client#annotatemarker-Method","annotateMarkerNotifyConsensus":"/docs/apis/merge-tree/client#annotatemarkernotifyconsensus-Method","annotateRangeLocal":"/docs/apis/merge-tree/client#annotaterangelocal-Method","applyMsg":"/docs/apis/merge-tree/client#applymsg-Method","applyStashedOp":"/docs/apis/merge-tree/client#applystashedop_2-Method","cloneFromSegments":"/docs/apis/merge-tree/client#clonefromsegments-Method","createLocalReferencePosition":"/docs/apis/merge-tree/client#createlocalreferenceposition-Method","createTextHelper":"/docs/apis/merge-tree/client#createtexthelper-Method","findReconnectionPosition":"/docs/apis/merge-tree/client#findreconnectionposition-Method","findTile":"/docs/apis/merge-tree/client#findtile-Method","getClientId":"/docs/apis/merge-tree/client#getclientid-Method","getCollabWindow":"/docs/apis/merge-tree/client#getcollabwindow-Method","getContainingSegment":"/docs/apis/merge-tree/client#getcontainingsegment-Method","getCurrentSeq":"/docs/apis/merge-tree/client#getcurrentseq-Method","getLength":"/docs/apis/merge-tree/client#getlength-Method","getLongClientId":"/docs/apis/merge-tree/client#getlongclientid-Method","getMarkerFromId":"/docs/apis/merge-tree/client#getmarkerfromid-Method","getOrAddShortClientId":"/docs/apis/merge-tree/client#getoraddshortclientid-Method","getPosition":"/docs/apis/merge-tree/client#getposition-Method","getPropertiesAtPosition":"/docs/apis/merge-tree/client#getpropertiesatposition-Method","getRangeExtentsOfPosition":"/docs/apis/merge-tree/client#getrangeextentsofposition-Method","getShortClientId":"/docs/apis/merge-tree/client#getshortclientid-Method","getSlideToSegment":"/docs/apis/merge-tree/client#getslidetosegment-Method","insertAtReferencePositionLocal":"/docs/apis/merge-tree/client#insertatreferencepositionlocal-Method","insertSegmentLocal":"/docs/apis/merge-tree/client#insertsegmentlocal-Method","load":"/docs/apis/merge-tree/client#load-Method","localReferencePositionToPosition":"/docs/apis/merge-tree/client#localreferencepositiontoposition-Method","localTransaction":"/docs/apis/merge-tree/client#localtransaction-Method","peekPendingSegmentGroups":"/docs/apis/merge-tree/client#peekpendingsegmentgroups-Method","posFromRelativePos":"/docs/apis/merge-tree/client#posfromrelativepos-Method","rebasePosition":"/docs/apis/merge-tree/client#rebaseposition-Method","regeneratePendingOp":"/docs/apis/merge-tree/client#regeneratependingop-Method","removeLocalReferencePosition":"/docs/apis/merge-tree/client#removelocalreferenceposition-Method","removeRangeLocal":"/docs/apis/merge-tree/client#removerangelocal-Method","resolveRemoteClientPosition":"/docs/apis/merge-tree/client#resolveremoteclientposition-Method","rollback":"/docs/apis/merge-tree/client#rollback-Method","serializeGCData":"/docs/apis/merge-tree/client#serializegcdata-Method","startOrUpdateCollaboration":"/docs/apis/merge-tree/client#startorupdatecollaboration-Method","summarize":"/docs/apis/merge-tree/client#summarize-Method","updateConsensusProperty":"/docs/apis/merge-tree/client#updateconsensusproperty-Method","updateMinSeq":"/docs/apis/merge-tree/client#updateminseq-Method","updateSeqNumbers":"/docs/apis/merge-tree/client#updateseqnumbers-Method","walkSegments":"/docs/apis/merge-tree/client#walksegments_1-Method"}},"package":"@fluidframework/merge-tree","unscopedPackageName":"merge-tree"}

[//]: # (Do not edit this file. It is automatically generated by API Documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/merge-tree](/docs/apis/merge-tree) &gt; [Client](/docs/apis/merge-tree/client)

<b>Signature:</b>

```typescript
export declare class Client 
```

## Constructors

<table class="table table-striped table-hover constructor-list">
<caption>List of constructors for this class</caption>
  <thead>
    <tr>
     <th scope="col">Constructor</th>
 <th scope="col">Modifiers</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#_constructor_-Constructor'>(constructor)(specToSegment, logger, options)</a></td>
      <td></td>
      <td>Constructs a new instance of the <code>Client</code> class</td>
    </tr>
  </tbody>
</table>

## Properties

<table class="table table-striped table-hover property-list">
<caption>List of properties on this class</caption>
  <thead>
    <tr>
     <th scope="col">Property</th>
 <th scope="col">Modifiers</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#accumops-Property'>accumOps</a></td>
      <td></td>
      <td>number</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#accumtime-Property'>accumTime</a></td>
      <td></td>
      <td>number</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#accumwindow-Property'>accumWindow</a></td>
      <td></td>
      <td>number</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#accumwindowtime-Property'>accumWindowTime</a></td>
      <td></td>
      <td>number</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#localops-Property'>localOps</a></td>
      <td></td>
      <td>number</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#localtime-Property'>localTime</a></td>
      <td></td>
      <td>number</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#logger-Property'>logger</a></td>
      <td></td>
      <td><a href='/docs/apis/common-definitions/itelemetrylogger'>ITelemetryLogger</a></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#longclientid-Property'>longClientId</a></td>
      <td></td>
      <td>string | undefined</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#maxwindowtime-Property'>maxWindowTime</a></td>
      <td></td>
      <td>number</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#measureops-Property'>measureOps</a></td>
      <td></td>
      <td>boolean</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#mergetreedeltacallback-Property'>mergeTreeDeltaCallback</a></td>
      <td></td>
      <td><a href='/docs/apis/merge-tree#mergetreedeltacallback-TypeAlias'>MergeTreeDeltaCallback</a> | undefined</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#mergetreemaintenancecallback-Property'>mergeTreeMaintenanceCallback</a></td>
      <td></td>
      <td><a href='/docs/apis/merge-tree#mergetreemaintenancecallback-TypeAlias'>MergeTreeMaintenanceCallback</a> | undefined</td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#spectosegment-Property'>specToSegment</a></td>
      <td></td>
      <td>(spec: <a href='/docs/apis/merge-tree/ijsonsegment'>IJSONSegment</a>) => <a href='/docs/apis/merge-tree/isegment'>ISegment</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover method-list">
<caption>List of methods on this class</caption>
  <thead>
    <tr>
     <th scope="col">Method</th>
 <th scope="col">Modifiers</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#addlongclientid-Method'>addLongClientId(longClientId)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#annotatemarker-Method'>annotateMarker(marker, props, combiningOp)</a></td>
      <td></td>
      <td>Annotates the markers with the provided properties</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#annotatemarkernotifyconsensus-Method'>annotateMarkerNotifyConsensus(marker, props, consensusCallback)</a></td>
      <td></td>
      <td>Annotate a marker and call the callback on consensus.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#annotaterangelocal-Method'>annotateRangeLocal(start, end, props, combiningOp)</a></td>
      <td></td>
      <td>Annotates the range with the provided properties</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#applymsg-Method'>applyMsg(msg, local)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#applystashedop-Method'>applyStashedOp(op)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#applystashedop_1-Method'>applyStashedOp(op)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#applystashedop_2-Method'>applyStashedOp(op)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#clonefromsegments-Method'>cloneFromSegments()</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#createlocalreferenceposition-Method'>createLocalReferencePosition(segment, offset, refType, properties)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#createtexthelper-Method'>createTextHelper()</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#findreconnectionposition-Method'>findReconnectionPosition(segment, localSeq)</a></td>
      <td></td>
      <td>During reconnect, we must find the positions to pending segments relative to other pending segments. This methods computes that position relative to a localSeq. Pending segments above the localSeq will be ignored.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#findtile-Method'>findTile(startPos, tileLabel, preceding)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#getclientid-Method'>getClientId()</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#getcollabwindow-Method'>getCollabWindow()</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#getcontainingsegment-Method'>getContainingSegment(pos, op)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#getcurrentseq-Method'>getCurrentSeq()</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#getlength-Method'>getLength()</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#getlongclientid-Method'>getLongClientId(shortClientId)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#getmarkerfromid-Method'>getMarkerFromId(id)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#getoraddshortclientid-Method'>getOrAddShortClientId(longClientId)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#getposition-Method'>getPosition(segment)</a></td>
      <td></td>
      <td>Returns the current position of a segment, and -1 if the segment does not exist in this merge tree</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#getpropertiesatposition-Method'>getPropertiesAtPosition(pos)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#getrangeextentsofposition-Method'>getRangeExtentsOfPosition(pos)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#getshortclientid-Method'>getShortClientId(longClientId)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#getslidetosegment-Method'>getSlideToSegment(segoff)</a></td>
      <td></td>
      <td>Returns the position to slide a reference to if a slide is required.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#insertatreferencepositionlocal-Method'>insertAtReferencePositionLocal(refPos, segment)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#insertsegmentlocal-Method'>insertSegmentLocal(pos, segment)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#load-Method'>load(runtime, storage, serializer)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#localreferencepositiontoposition-Method'>localReferencePositionToPosition(lref)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#localtransaction-Method'>localTransaction(groupOp)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#peekpendingsegmentgroups-Method'>peekPendingSegmentGroups(count)</a></td>
      <td></td>
      <td>The merge tree maintains a queue of segment groups for each local operation. These segment groups track segments modified by an operation. This method peeks the tail of that queue, and returns the segments groups there. It is used to get the segment group(s) for the previous operations.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#posfromrelativepos-Method'>posFromRelativePos(relativePos)</a></td>
      <td></td>
      <td>Given a position specified relative to a marker id, lookup the marker and convert the position to a character position.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#rebaseposition-Method'>rebasePosition(pos, seqNumberFrom, localSeq)</a></td>
      <td></td>
      <td>Rebases a (local) position from the perspective <code>{ seq: seqNumberFrom, localSeq }</code> to the perspective of the current sequence number. This is desirable when rebasing operations for reconnection.<!-- -->If the position refers to a segment/offset that was removed by some operation between <code>seqNumberFrom</code> and the current sequence number, the returned position will align with the position of a reference given <code>SlideOnRemove</code> semantics.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#regeneratependingop-Method'>regeneratePendingOp(resetOp, segmentGroup)</a></td>
      <td></td>
      <td>Given an pending operation and segment group, regenerate the op, so it can be resubmitted</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#removelocalreferenceposition-Method'>removeLocalReferencePosition(lref)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#removerangelocal-Method'>removeRangeLocal(start, end)</a></td>
      <td></td>
      <td>Removes the range</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#resolveremoteclientposition-Method'>resolveRemoteClientPosition(remoteClientPosition, remoteClientRefSeq, remoteClientId)</a></td>
      <td></td>
      <td>Resolves a remote client's position against the local sequence and returns the remote client's position relative to the local sequence</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#rollback-Method'>rollback(op, localOpMetadata)</a></td>
      <td></td>
      <td>Revert an op</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#serializegcdata-Method'>serializeGCData(handle, handleCollectingSerializer)</a></td>
      <td></td>
      <td>Serializes the data required for garbage collection. The IFluidHandles stored in all segments that haven't been removed represent routes to other objects. We serialize the data in these segments using the passed in serializer which keeps track of all serialized handles.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#startorupdatecollaboration-Method'>startOrUpdateCollaboration(longClientId, minSeq, currentSeq)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#summarize-Method'>summarize(runtime, handle, serializer, catchUpMsgs)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#updateconsensusproperty-Method'>updateConsensusProperty(op, msg)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#updateminseq-Method'>updateMinSeq(minSeq)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#updateseqnumbers-Method'>updateSeqNumbers(min, seq)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#walksegments-Method'>walkSegments(handler, start, end, accum, splitRange)</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/merge-tree/client#walksegments_1-Method'>walkSegments(handler, start, end, accum, splitRange)</a></td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>

<hr><div id=class-details>

## Constructor Details {#constructors-details}

### Client.(constructor) {#_constructor_-Constructor}

Constructs a new instance of the `Client` class

<b>Signature:</b>

```typescript
constructor(specToSegment: (spec: IJSONSegment) => ISegment, logger: ITelemetryLogger, options?: PropertySet);
```

#### Parameters {#_constructor_-Constructor-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>specToSegment</td>
      <td>(spec: <a href='/docs/apis/merge-tree/ijsonsegment'>IJSONSegment</a>) => <a href='/docs/apis/merge-tree/isegment'>ISegment</a></td>
      <td></td>
    </tr>
    <tr>
      <td>logger</td>
      <td><a href='/docs/apis/common-definitions/itelemetrylogger'>ITelemetryLogger</a></td>
      <td></td>
    </tr>
    <tr>
      <td>options</td>
      <td><a href='/docs/apis/merge-tree#propertyset-TypeAlias'>PropertySet</a></td>
      <td></td>
    </tr>
  </tbody>
</table>


## Property Details {#properties-details}

### accumOps {#accumops-Property}

<b>Signature:</b>

```typescript
accumOps: number;
```

### accumTime {#accumtime-Property}

<b>Signature:</b>

```typescript
accumTime: number;
```

### accumWindow {#accumwindow-Property}

<b>Signature:</b>

```typescript
accumWindow: number;
```

### accumWindowTime {#accumwindowtime-Property}

<b>Signature:</b>

```typescript
accumWindowTime: number;
```

### localOps {#localops-Property}

<b>Signature:</b>

```typescript
localOps: number;
```

### localTime {#localtime-Property}

<b>Signature:</b>

```typescript
localTime: number;
```

### logger {#logger-Property}

<b>Signature:</b>

```typescript
readonly logger: ITelemetryLogger;
```

### longClientId {#longclientid-Property}

<b>Signature:</b>

```typescript
longClientId: string | undefined;
```

### maxWindowTime {#maxwindowtime-Property}

<b>Signature:</b>

```typescript
maxWindowTime: number;
```

### measureOps {#measureops-Property}

<b>Signature:</b>

```typescript
measureOps: boolean;
```

### mergeTreeDeltaCallback {#mergetreedeltacallback-Property}

<b>Signature:</b>

```typescript
get mergeTreeDeltaCallback(): MergeTreeDeltaCallback | undefined;

set mergeTreeDeltaCallback(callback: MergeTreeDeltaCallback | undefined);
```

### mergeTreeMaintenanceCallback {#mergetreemaintenancecallback-Property}

<b>Signature:</b>

```typescript
get mergeTreeMaintenanceCallback(): MergeTreeMaintenanceCallback | undefined;

set mergeTreeMaintenanceCallback(callback: MergeTreeMaintenanceCallback | undefined);
```

### specToSegment {#spectosegment-Property}

<b>Signature:</b>

```typescript
readonly specToSegment: (spec: IJSONSegment) => ISegment;
```

## Method Details {#methods-details}

### addLongClientId {#addlongclientid-Method}

<b>Signature:</b>

```typescript
addLongClientId(longClientId: string): void;
```

#### Parameters {#addlongclientid-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>longClientId</td>
      <td>string</td>
      <td></td>
    </tr>
  </tbody>
</table>

### annotateMarker {#annotatemarker-Method}

Annotates the markers with the provided properties

<b>Signature:</b>

```typescript
annotateMarker(marker: Marker, props: PropertySet, combiningOp?: ICombiningOp): IMergeTreeAnnotateMsg | undefined;
```

#### Parameters {#annotatemarker-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>marker</td>
      <td><a href='/docs/apis/merge-tree/marker'>Marker</a></td>
      <td>The marker to annotate</td>
    </tr>
    <tr>
      <td>props</td>
      <td><a href='/docs/apis/merge-tree#propertyset-TypeAlias'>PropertySet</a></td>
      <td>The properties to annotate the marker with</td>
    </tr>
    <tr>
      <td>combiningOp</td>
      <td><a href='/docs/apis/merge-tree/icombiningop'>ICombiningOp</a></td>
      <td>Optional. Specifies how to combine values for the property, such as "incr" for increment.</td>
    </tr>
  </tbody>
</table>

#### Returns {#annotatemarker-Method-returns}


The annotate op if valid, otherwise undefined

<b>Return type(s):</b> [IMergeTreeAnnotateMsg](/docs/apis/merge-tree/imergetreeannotatemsg) \| undefined

### annotateMarkerNotifyConsensus {#annotatemarkernotifyconsensus-Method}

Annotate a marker and call the callback on consensus.

<b>Signature:</b>

```typescript
annotateMarkerNotifyConsensus(marker: Marker, props: PropertySet, consensusCallback: (m: Marker) => void): IMergeTreeAnnotateMsg | undefined;
```

#### Parameters {#annotatemarkernotifyconsensus-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>marker</td>
      <td><a href='/docs/apis/merge-tree/marker'>Marker</a></td>
      <td>The marker to annotate</td>
    </tr>
    <tr>
      <td>props</td>
      <td><a href='/docs/apis/merge-tree#propertyset-TypeAlias'>PropertySet</a></td>
      <td>The properties to annotate the marker with</td>
    </tr>
    <tr>
      <td>consensusCallback</td>
      <td>(m: <a href='/docs/apis/merge-tree/marker'>Marker</a>) => void</td>
      <td>The callback called when consensus is reached</td>
    </tr>
  </tbody>
</table>

#### Returns {#annotatemarkernotifyconsensus-Method-returns}


The annotate op if valid, otherwise undefined

<b>Return type(s):</b> [IMergeTreeAnnotateMsg](/docs/apis/merge-tree/imergetreeannotatemsg) \| undefined

### annotateRangeLocal {#annotaterangelocal-Method}

Annotates the range with the provided properties

<b>Signature:</b>

```typescript
annotateRangeLocal(start: number, end: number, props: PropertySet, combiningOp: ICombiningOp | undefined): IMergeTreeAnnotateMsg | undefined;
```

#### Parameters {#annotaterangelocal-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>start</td>
      <td>number</td>
      <td>The inclusive start position of the range to annotate</td>
    </tr>
    <tr>
      <td>end</td>
      <td>number</td>
      <td>The exclusive end position of the range to annotate</td>
    </tr>
    <tr>
      <td>props</td>
      <td><a href='/docs/apis/merge-tree#propertyset-TypeAlias'>PropertySet</a></td>
      <td>The properties to annotate the range with</td>
    </tr>
    <tr>
      <td>combiningOp</td>
      <td><a href='/docs/apis/merge-tree/icombiningop'>ICombiningOp</a> | undefined</td>
      <td>Specifies how to combine values for the property, such as "incr" for increment.</td>
    </tr>
  </tbody>
</table>

#### Returns {#annotaterangelocal-Method-returns}


The annotate op if valid, otherwise undefined

<b>Return type(s):</b> [IMergeTreeAnnotateMsg](/docs/apis/merge-tree/imergetreeannotatemsg) \| undefined

### applyMsg {#applymsg-Method}

<b>Signature:</b>

```typescript
applyMsg(msg: ISequencedDocumentMessage, local?: boolean): void;
```

#### Parameters {#applymsg-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>msg</td>
      <td><a href='/docs/apis/protocol-definitions/isequenceddocumentmessage'>ISequencedDocumentMessage</a></td>
      <td></td>
    </tr>
    <tr>
      <td>local</td>
      <td>boolean</td>
      <td></td>
    </tr>
  </tbody>
</table>

### applyStashedOp {#applystashedop-Method}

<b>Signature:</b>

```typescript
applyStashedOp(op: IMergeTreeDeltaOp): SegmentGroup;
```

#### Parameters {#applystashedop-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>op</td>
      <td><a href='/docs/apis/merge-tree#imergetreedeltaop-TypeAlias'>IMergeTreeDeltaOp</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### applyStashedOp {#applystashedop_1-Method}

<b>Signature:</b>

```typescript
applyStashedOp(op: IMergeTreeGroupMsg): SegmentGroup[];
```

#### Parameters {#applystashedop_1-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>op</td>
      <td><a href='/docs/apis/merge-tree/imergetreegroupmsg'>IMergeTreeGroupMsg</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### applyStashedOp {#applystashedop_2-Method}

<b>Signature:</b>

```typescript
applyStashedOp(op: IMergeTreeOp): SegmentGroup | SegmentGroup[];
```

#### Parameters {#applystashedop_2-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>op</td>
      <td><a href='/docs/apis/merge-tree#imergetreeop-TypeAlias'>IMergeTreeOp</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### cloneFromSegments {#clonefromsegments-Method}

<b>Signature:</b>

```typescript
cloneFromSegments(): Client;
```

### createLocalReferencePosition {#createlocalreferenceposition-Method}

<b>Signature:</b>

```typescript
createLocalReferencePosition(segment: ISegment, offset: number | undefined, refType: ReferenceType, properties: PropertySet | undefined): LocalReferencePosition;
```

#### Parameters {#createlocalreferenceposition-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>segment</td>
      <td><a href='/docs/apis/merge-tree/isegment'>ISegment</a></td>
      <td></td>
    </tr>
    <tr>
      <td>offset</td>
      <td>number | undefined</td>
      <td></td>
    </tr>
    <tr>
      <td>refType</td>
      <td><a href='/docs/apis/merge-tree#referencetype-Enum'>ReferenceType</a></td>
      <td></td>
    </tr>
    <tr>
      <td>properties</td>
      <td><a href='/docs/apis/merge-tree#propertyset-TypeAlias'>PropertySet</a> | undefined</td>
      <td></td>
    </tr>
  </tbody>
</table>

### createTextHelper {#createtexthelper-Method}

<b>Signature:</b>

```typescript
createTextHelper(): IMergeTreeTextHelper;
```

### findReconnectionPosition {#findreconnectionposition-Method}

During reconnect, we must find the positions to pending segments relative to other pending segments. This methods computes that position relative to a localSeq. Pending segments above the localSeq will be ignored.

<b>Signature:</b>

```typescript
protected findReconnectionPosition(segment: ISegment, localSeq: number): number;
```

#### Parameters {#findreconnectionposition-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>segment</td>
      <td><a href='/docs/apis/merge-tree/isegment'>ISegment</a></td>
      <td>The segment to find the position for</td>
    </tr>
    <tr>
      <td>localSeq</td>
      <td>number</td>
      <td>The localSeq to find the position of the segment at</td>
    </tr>
  </tbody>
</table>

### findTile {#findtile-Method}

<b>Signature:</b>

```typescript
findTile(startPos: number, tileLabel: string, preceding?: boolean): {
        tile: ReferencePosition;
        pos: number;
    } | undefined;
```

#### Parameters {#findtile-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>startPos</td>
      <td>number</td>
      <td></td>
    </tr>
    <tr>
      <td>tileLabel</td>
      <td>string</td>
      <td></td>
    </tr>
    <tr>
      <td>preceding</td>
      <td>boolean</td>
      <td></td>
    </tr>
  </tbody>
</table>

### getClientId {#getclientid-Method}

<b>Signature:</b>

```typescript
getClientId(): number;
```

### getCollabWindow {#getcollabwindow-Method}

<b>Signature:</b>

```typescript
getCollabWindow(): CollaborationWindow;
```

### getContainingSegment {#getcontainingsegment-Method}

<b>Signature:</b>

```typescript
getContainingSegment<T extends ISegment>(pos: number, op?: ISequencedDocumentMessage): {
        segment: T | undefined;
        offset: number | undefined;
    };
```

#### Parameters {#getcontainingsegment-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>pos</td>
      <td>number</td>
      <td></td>
    </tr>
    <tr>
      <td>op</td>
      <td><a href='/docs/apis/protocol-definitions/isequenceddocumentmessage'>ISequencedDocumentMessage</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### getCurrentSeq {#getcurrentseq-Method}

<b>Signature:</b>

```typescript
getCurrentSeq(): number;
```

### getLength {#getlength-Method}

<b>Signature:</b>

```typescript
getLength(): number;
```

### getLongClientId {#getlongclientid-Method}

<b>Signature:</b>

```typescript
getLongClientId(shortClientId: number): string;
```

#### Parameters {#getlongclientid-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>shortClientId</td>
      <td>number</td>
      <td></td>
    </tr>
  </tbody>
</table>

### getMarkerFromId {#getmarkerfromid-Method}

<b>Signature:</b>

```typescript
getMarkerFromId(id: string): ISegment | undefined;
```

#### Parameters {#getmarkerfromid-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>string</td>
      <td></td>
    </tr>
  </tbody>
</table>

### getOrAddShortClientId {#getoraddshortclientid-Method}

<b>Signature:</b>

```typescript
getOrAddShortClientId(longClientId: string): number;
```

#### Parameters {#getoraddshortclientid-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>longClientId</td>
      <td>string</td>
      <td></td>
    </tr>
  </tbody>
</table>

### getPosition {#getposition-Method}

Returns the current position of a segment, and -1 if the segment does not exist in this merge tree

<b>Signature:</b>

```typescript
getPosition(segment: ISegment): number;
```

#### Parameters {#getposition-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>segment</td>
      <td><a href='/docs/apis/merge-tree/isegment'>ISegment</a></td>
      <td>The segment to get the position of</td>
    </tr>
  </tbody>
</table>

### getPropertiesAtPosition {#getpropertiesatposition-Method}

<b>Signature:</b>

```typescript
getPropertiesAtPosition(pos: number): PropertySet | undefined;
```

#### Parameters {#getpropertiesatposition-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>pos</td>
      <td>number</td>
      <td></td>
    </tr>
  </tbody>
</table>

### getRangeExtentsOfPosition {#getrangeextentsofposition-Method}

<b>Signature:</b>

```typescript
getRangeExtentsOfPosition(pos: number): {
        posStart: number | undefined;
        posAfterEnd: number | undefined;
    };
```

#### Parameters {#getrangeextentsofposition-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>pos</td>
      <td>number</td>
      <td></td>
    </tr>
  </tbody>
</table>

### getShortClientId {#getshortclientid-Method}

<b>Signature:</b>

```typescript
getShortClientId(longClientId: string): number;
```

#### Parameters {#getshortclientid-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>longClientId</td>
      <td>string</td>
      <td></td>
    </tr>
  </tbody>
</table>

### getSlideToSegment {#getslidetosegment-Method}

Returns the position to slide a reference to if a slide is required.

<b>Signature:</b>

```typescript
getSlideToSegment(segoff: {
        segment: ISegment | undefined;
        offset: number | undefined;
    }): {
        segment: ISegment | undefined;
        offset: number | undefined;
    };
```

#### Parameters {#getslidetosegment-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>segoff</td>
      <td>{ segment: <a href='/docs/apis/merge-tree/isegment'>ISegment</a> | undefined; offset: number | undefined; }</td>
      <td>The segment and offset to slide from</td>
    </tr>
  </tbody>
</table>

#### Returns {#getslidetosegment-Method-returns}


- segment and offset to slide the reference to

<b>Return type(s):</b> { segment: [ISegment](/docs/apis/merge-tree/isegment) \| undefined; offset: number \| undefined; }

### insertAtReferencePositionLocal {#insertatreferencepositionlocal-Method}

<b>Signature:</b>

```typescript
insertAtReferencePositionLocal(refPos: ReferencePosition, segment: ISegment): IMergeTreeInsertMsg | undefined;
```

#### Parameters {#insertatreferencepositionlocal-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>refPos</td>
      <td><a href='/docs/apis/merge-tree/referenceposition'>ReferencePosition</a></td>
      <td>The reference position to insert the segment at</td>
    </tr>
    <tr>
      <td>segment</td>
      <td><a href='/docs/apis/merge-tree/isegment'>ISegment</a></td>
      <td>The segment to insert</td>
    </tr>
  </tbody>
</table>

### insertSegmentLocal {#insertsegmentlocal-Method}

<b>Signature:</b>

```typescript
insertSegmentLocal(pos: number, segment: ISegment): IMergeTreeInsertMsg | undefined;
```

#### Parameters {#insertsegmentlocal-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>pos</td>
      <td>number</td>
      <td>The position to insert the segment at</td>
    </tr>
    <tr>
      <td>segment</td>
      <td><a href='/docs/apis/merge-tree/isegment'>ISegment</a></td>
      <td>The segment to insert</td>
    </tr>
  </tbody>
</table>

### load {#load-Method}

<b>Signature:</b>

```typescript
load(runtime: IFluidDataStoreRuntime, storage: IChannelStorageService, serializer: IFluidSerializer): Promise<{
        catchupOpsP: Promise<ISequencedDocumentMessage[]>;
    }>;
```

#### Parameters {#load-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>runtime</td>
      <td><a href='/docs/apis/datastore-definitions/ifluiddatastoreruntime'>IFluidDataStoreRuntime</a></td>
      <td></td>
    </tr>
    <tr>
      <td>storage</td>
      <td><a href='/docs/apis/datastore-definitions/ichannelstorageservice'>IChannelStorageService</a></td>
      <td></td>
    </tr>
    <tr>
      <td>serializer</td>
      <td><a href='/docs/apis/shared-object-base/ifluidserializer'>IFluidSerializer</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### localReferencePositionToPosition {#localreferencepositiontoposition-Method}

<b>Signature:</b>

```typescript
localReferencePositionToPosition(lref: ReferencePosition): number;
```

#### Parameters {#localreferencepositiontoposition-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>lref</td>
      <td><a href='/docs/apis/merge-tree/referenceposition'>ReferencePosition</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### localTransaction {#localtransaction-Method}

<b>Signature:</b>

```typescript
localTransaction(groupOp: IMergeTreeGroupMsg): void;
```

#### Parameters {#localtransaction-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>groupOp</td>
      <td><a href='/docs/apis/merge-tree/imergetreegroupmsg'>IMergeTreeGroupMsg</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### peekPendingSegmentGroups {#peekpendingsegmentgroups-Method}

The merge tree maintains a queue of segment groups for each local operation. These segment groups track segments modified by an operation. This method peeks the tail of that queue, and returns the segments groups there. It is used to get the segment group(s) for the previous operations.

<b>Signature:</b>

```typescript
peekPendingSegmentGroups(count?: number): SegmentGroup | SegmentGroup[] | undefined;
```

#### Parameters {#peekpendingsegmentgroups-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>count</td>
      <td>number</td>
      <td>The number segment groups to get peek from the tail of the queue. Default 1.</td>
    </tr>
  </tbody>
</table>

### posFromRelativePos {#posfromrelativepos-Method}

Given a position specified relative to a marker id, lookup the marker and convert the position to a character position.

<b>Signature:</b>

```typescript
posFromRelativePos(relativePos: IRelativePosition): number;
```

#### Parameters {#posfromrelativepos-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>relativePos</td>
      <td><a href='/docs/apis/merge-tree/irelativeposition'>IRelativePosition</a></td>
      <td>Id of marker (may be indirect) and whether position is before or after marker.</td>
    </tr>
  </tbody>
</table>

### rebasePosition {#rebaseposition-Method}

Rebases a (local) position from the perspective `{ seq: seqNumberFrom, localSeq }` to the perspective of the current sequence number. This is desirable when rebasing operations for reconnection.

If the position refers to a segment/offset that was removed by some operation between `seqNumberFrom` and the current sequence number, the returned position will align with the position of a reference given `SlideOnRemove` semantics.

<b>Signature:</b>

```typescript
rebasePosition(pos: number, seqNumberFrom: number, localSeq: number): number;
```

#### Parameters {#rebaseposition-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>pos</td>
      <td>number</td>
      <td></td>
    </tr>
    <tr>
      <td>seqNumberFrom</td>
      <td>number</td>
      <td></td>
    </tr>
    <tr>
      <td>localSeq</td>
      <td>number</td>
      <td></td>
    </tr>
  </tbody>
</table>

### regeneratePendingOp {#regeneratependingop-Method}

Given an pending operation and segment group, regenerate the op, so it can be resubmitted

<b>Signature:</b>

```typescript
regeneratePendingOp(resetOp: IMergeTreeOp, segmentGroup: SegmentGroup | SegmentGroup[]): IMergeTreeOp;
```

#### Parameters {#regeneratependingop-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>resetOp</td>
      <td><a href='/docs/apis/merge-tree#imergetreeop-TypeAlias'>IMergeTreeOp</a></td>
      <td>The op to reset</td>
    </tr>
    <tr>
      <td>segmentGroup</td>
      <td><a href='/docs/apis/merge-tree/segmentgroup'>SegmentGroup</a> | <a href='/docs/apis/merge-tree/segmentgroup'>SegmentGroup</a>[]</td>
      <td>The segment group associated with the op</td>
    </tr>
  </tbody>
</table>

### removeLocalReferencePosition {#removelocalreferenceposition-Method}

<b>Signature:</b>

```typescript
removeLocalReferencePosition(lref: LocalReferencePosition): LocalReferencePosition | undefined;
```

#### Parameters {#removelocalreferenceposition-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>lref</td>
      <td><a href='/docs/apis/merge-tree/localreferenceposition'>LocalReferencePosition</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### removeRangeLocal {#removerangelocal-Method}

Removes the range

<b>Signature:</b>

```typescript
removeRangeLocal(start: number, end: number): IMergeTreeRemoveMsg | undefined;
```

#### Parameters {#removerangelocal-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>start</td>
      <td>number</td>
      <td>The inclusive start of the range to remove</td>
    </tr>
    <tr>
      <td>end</td>
      <td>number</td>
      <td>The exclusive end of the range to remove</td>
    </tr>
  </tbody>
</table>

### resolveRemoteClientPosition {#resolveremoteclientposition-Method}

Resolves a remote client's position against the local sequence and returns the remote client's position relative to the local sequence

<b>Signature:</b>

```typescript
resolveRemoteClientPosition(remoteClientPosition: number, remoteClientRefSeq: number, remoteClientId: string): number | undefined;
```

#### Parameters {#resolveremoteclientposition-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>remoteClientPosition</td>
      <td>number</td>
      <td>The remote client's position to resolve</td>
    </tr>
    <tr>
      <td>remoteClientRefSeq</td>
      <td>number</td>
      <td>The reference sequence number of the remote client</td>
    </tr>
    <tr>
      <td>remoteClientId</td>
      <td>string</td>
      <td>The client id of the remote client</td>
    </tr>
  </tbody>
</table>

### rollback {#rollback-Method}

Revert an op

<b>Signature:</b>

```typescript
rollback?(op: any, localOpMetadata: unknown): void;
```

#### Parameters {#rollback-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>op</td>
      <td>any</td>
      <td></td>
    </tr>
    <tr>
      <td>localOpMetadata</td>
      <td>unknown</td>
      <td></td>
    </tr>
  </tbody>
</table>

### serializeGCData {#serializegcdata-Method}

Serializes the data required for garbage collection. The IFluidHandles stored in all segments that haven't been removed represent routes to other objects. We serialize the data in these segments using the passed in serializer which keeps track of all serialized handles.

<b>Signature:</b>

```typescript
serializeGCData(handle: IFluidHandle, handleCollectingSerializer: IFluidSerializer): void;
```

#### Parameters {#serializegcdata-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>handle</td>
      <td><a href='/docs/apis/core-interfaces/ifluidhandle'>IFluidHandle</a></td>
      <td></td>
    </tr>
    <tr>
      <td>handleCollectingSerializer</td>
      <td><a href='/docs/apis/shared-object-base/ifluidserializer'>IFluidSerializer</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### startOrUpdateCollaboration {#startorupdatecollaboration-Method}

<b>Signature:</b>

```typescript
startOrUpdateCollaboration(longClientId: string | undefined, minSeq?: number, currentSeq?: number): void;
```

#### Parameters {#startorupdatecollaboration-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>longClientId</td>
      <td>string | undefined</td>
      <td></td>
    </tr>
    <tr>
      <td>minSeq</td>
      <td>number</td>
      <td></td>
    </tr>
    <tr>
      <td>currentSeq</td>
      <td>number</td>
      <td></td>
    </tr>
  </tbody>
</table>

### summarize {#summarize-Method}

<b>Signature:</b>

```typescript
summarize(runtime: IFluidDataStoreRuntime, handle: IFluidHandle, serializer: IFluidSerializer, catchUpMsgs: ISequencedDocumentMessage[]): ISummaryTreeWithStats;
```

#### Parameters {#summarize-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>runtime</td>
      <td><a href='/docs/apis/datastore-definitions/ifluiddatastoreruntime'>IFluidDataStoreRuntime</a></td>
      <td></td>
    </tr>
    <tr>
      <td>handle</td>
      <td><a href='/docs/apis/core-interfaces/ifluidhandle'>IFluidHandle</a></td>
      <td></td>
    </tr>
    <tr>
      <td>serializer</td>
      <td><a href='/docs/apis/shared-object-base/ifluidserializer'>IFluidSerializer</a></td>
      <td></td>
    </tr>
    <tr>
      <td>catchUpMsgs</td>
      <td><a href='/docs/apis/protocol-definitions/isequenceddocumentmessage'>ISequencedDocumentMessage</a>[]</td>
      <td></td>
    </tr>
  </tbody>
</table>

### updateConsensusProperty {#updateconsensusproperty-Method}

<b>Signature:</b>

```typescript
updateConsensusProperty(op: IMergeTreeAnnotateMsg, msg: ISequencedDocumentMessage): void;
```

#### Parameters {#updateconsensusproperty-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>op</td>
      <td><a href='/docs/apis/merge-tree/imergetreeannotatemsg'>IMergeTreeAnnotateMsg</a></td>
      <td></td>
    </tr>
    <tr>
      <td>msg</td>
      <td><a href='/docs/apis/protocol-definitions/isequenceddocumentmessage'>ISequencedDocumentMessage</a></td>
      <td></td>
    </tr>
  </tbody>
</table>

### updateMinSeq {#updateminseq-Method}

<b>Signature:</b>

```typescript
updateMinSeq(minSeq: number): void;
```

#### Parameters {#updateminseq-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>minSeq</td>
      <td>number</td>
      <td></td>
    </tr>
  </tbody>
</table>

### updateSeqNumbers {#updateseqnumbers-Method}

<b>Signature:</b>

```typescript
updateSeqNumbers(min: number, seq: number): void;
```

#### Parameters {#updateseqnumbers-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>min</td>
      <td>number</td>
      <td></td>
    </tr>
    <tr>
      <td>seq</td>
      <td>number</td>
      <td></td>
    </tr>
  </tbody>
</table>

### walkSegments {#walksegments-Method}

<b>Signature:</b>

```typescript
walkSegments<TClientData>(handler: ISegmentAction<TClientData>, start: number | undefined, end: number | undefined, accum: TClientData, splitRange?: boolean): void;
```

#### Parameters {#walksegments-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>handler</td>
      <td><a href='/docs/apis/merge-tree/isegmentaction'>ISegmentAction</a><TClientData></td>
      <td></td>
    </tr>
    <tr>
      <td>start</td>
      <td>number | undefined</td>
      <td></td>
    </tr>
    <tr>
      <td>end</td>
      <td>number | undefined</td>
      <td></td>
    </tr>
    <tr>
      <td>accum</td>
      <td>TClientData</td>
      <td></td>
    </tr>
    <tr>
      <td>splitRange</td>
      <td>boolean</td>
      <td></td>
    </tr>
  </tbody>
</table>

### walkSegments {#walksegments_1-Method}

<b>Signature:</b>

```typescript
walkSegments<undefined>(handler: ISegmentAction<undefined>, start?: number, end?: number, accum?: undefined, splitRange?: boolean): void;
```

#### Parameters {#walksegments_1-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>handler</td>
      <td><a href='/docs/apis/merge-tree/isegmentaction'>ISegmentAction</a><undefined></td>
      <td></td>
    </tr>
    <tr>
      <td>start</td>
      <td>number</td>
      <td></td>
    </tr>
    <tr>
      <td>end</td>
      <td>number</td>
      <td></td>
    </tr>
    <tr>
      <td>accum</td>
      <td>undefined</td>
      <td></td>
    </tr>
    <tr>
      <td>splitRange</td>
      <td>boolean</td>
      <td></td>
    </tr>
  </tbody>
</table>


</div>
