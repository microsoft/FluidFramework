{"kind":"Class","title":"Quorum Class","summary":"The Quorum distributed data structure provides key/value storage with a cautious conflict resolution strategy. This strategy optimizes for all clients being aware of the change prior to considering the value as accepted.\n\nIt is still experimental and under development. Please do try it out, but expect breaking changes in the future.","members":{"Constructor":{"(constructor)":"/docs/apis/quorum/quorum#_constructor_-Constructor"},"Method":{"applyStashedOp":"/docs/apis/quorum/quorum#applystashedop-Method","create":"/docs/apis/quorum/quorum#create-Method","delete":"/docs/apis/quorum/quorum#delete-Method","get":"/docs/apis/quorum/quorum#get-Method","getFactory":"/docs/apis/quorum/quorum#getfactory-Method","getPending":"/docs/apis/quorum/quorum#getpending-Method","has":"/docs/apis/quorum/quorum#has-Method","set":"/docs/apis/quorum/quorum#set-Method"}},"package":"@fluid-internal/quorum","unscopedPackageName":"quorum"}

[//]: # (Do not edit this file. It is automatically generated by API Documenter.)

[Packages](/docs/apis/) &gt; [@fluid-internal/quorum](/docs/apis/quorum) &gt; [Quorum](/docs/apis/quorum/quorum)

The Quorum distributed data structure provides key/value storage with a cautious conflict resolution strategy. This strategy optimizes for all clients being aware of the change prior to considering the value as accepted.

It is still experimental and under development. Please do try it out, but expect breaking changes in the future.

<b>Signature:</b>

```typescript
export declare class Quorum extends SharedObject<IQuorumEvents> implements IQuorum 
```
<b>Extends:</b> [SharedObject](/docs/apis/shared-object-base/sharedobject)<!-- -->&lt;[IQuorumEvents](/docs/apis/quorum/iquorumevents)

<b>Implements:</b> [IQuorum](/docs/apis/quorum/iquorum)

## Remarks

### Creation

To create a `Quorum`<!-- -->, call the static create method:

```typescript
const quorum = Quorum.create(this.runtime, id);
```
### Usage

Setting and reading values is somewhat similar to a `SharedMap`<!-- -->. However, because the acceptance strategy cannot be resolved until other clients have witnessed the set, the new value will only be reflected in the data after the consensus is reached.

```typescript
quorum.on("pending", (key: string) => {
    console.log(quorum.getPending(key));
});
quorum.on("accepted", (key: string) => {
    console.log(quorum.get(key));
});
quorum.set("myKey", "myValue");

// Reading from the quorum prior to the async operation's completion will still return the old value.
console.log(quorum.get("myKey"));
```
The acceptance process has two stages. When an op indicating a client's attempt to set a value is sequenced, we first verify that it was set with knowledge of the most recently accepted value (consensus-like FWW). If it meets this bar, then the value is "pending". During this time, clients may observe the pending value and act upon it, but should be aware that not all other clients may have witnessed the value yet. Once all clients that were connected at the time of the value being set have explicitly acknowledged the new value, the value becomes "accepted". Once the value is accepted, it once again becomes possible to set the value, again with consensus-like FWW resolution.

### Eventing

`Quorum` is an `EventEmitter`<!-- -->, and will emit events when a new value is accepted for a key.

```typescript
quorum.on("accept", (key: string) => {
    console.log(`New value was accepted for key: ${ key }, value: ${ quorum.get(key) }`);
});
```

## Constructors

<table class="table table-striped table-hover constructor-list">
<caption>List of constructors for this class</caption>
  <thead>
    <tr>
     <th scope="col">Constructor</th>
 <th scope="col">Modifiers</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/quorum/quorum#_constructor_-Constructor'>(constructor)(id, runtime, attributes)</a></td>
      <td></td>
      <td>Constructs a new quorum. If the object is non-local an id and service interfaces will be provided</td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover method-list">
<caption>List of methods on this class</caption>
  <thead>
    <tr>
     <th scope="col">Method</th>
 <th scope="col">Modifiers</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href='/docs/apis/quorum/quorum#applystashedop-Method'>applyStashedOp()</a></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><a href='/docs/apis/quorum/quorum#create-Method'>create(runtime, id)</a></td>
      <td><code>static</code></td>
      <td>Create a new Quorum</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/quorum/quorum#delete-Method'>delete(key)</a></td>
      <td></td>
      <td>Deletes the key/value pair at the given key. After issuing the delete, the delete is in "pending" state until all connected clients have ack'd the delete. The accepted value remains unchanged until that time.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/quorum/quorum#get-Method'>get(key)</a></td>
      <td></td>
      <td>Gets the accepted value for the given key.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/quorum/quorum#getfactory-Method'>getFactory()</a></td>
      <td><code>static</code></td>
      <td>Get a factory for Quorum to register with the data store.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/quorum/quorum#getpending-Method'>getPending(key)</a></td>
      <td></td>
      <td>Gets the pending value for the given key.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/quorum/quorum#has-Method'>has(key)</a></td>
      <td></td>
      <td>Checks if the quorum has an accepted value for the given key.</td>
    </tr>
    <tr>
      <td><a href='/docs/apis/quorum/quorum#set-Method'>set(key, value)</a></td>
      <td></td>
      <td>Sets the value for the given key. After setting the value, it will be in "pending" state until all connected clients have ack'd the set. The accepted value remains unchanged until that time.</td>
    </tr>
  </tbody>
</table>

<hr><div id=class-details>

## Constructor Details {#constructors-details}

### Quorum.(constructor) {#_constructor_-Constructor}

Constructs a new quorum. If the object is non-local an id and service interfaces will be provided

<b>Signature:</b>

```typescript
constructor(id: string, runtime: IFluidDataStoreRuntime, attributes: IChannelAttributes);
```

#### Parameters {#_constructor_-Constructor-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>string</td>
      <td>optional name of the quorum</td>
    </tr>
    <tr>
      <td>runtime</td>
      <td><a href='/docs/apis/datastore-definitions/ifluiddatastoreruntime'>IFluidDataStoreRuntime</a></td>
      <td>data store runtime the quorum belongs to</td>
    </tr>
    <tr>
      <td>attributes</td>
      <td><a href='/docs/apis/datastore-definitions/ichannelattributes'>IChannelAttributes</a></td>
      <td></td>
    </tr>
  </tbody>
</table>


## Method Details {#methods-details}

### applyStashedOp {#applystashedop-Method}

<b>Signature:</b>

```typescript
applyStashedOp(): void;
```

### create {#create-Method}

Create a new Quorum

<b>Signature:</b>

```typescript
static create(runtime: IFluidDataStoreRuntime, id?: string): Quorum;
```

#### Parameters {#create-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>runtime</td>
      <td><a href='/docs/apis/datastore-definitions/ifluiddatastoreruntime'>IFluidDataStoreRuntime</a></td>
      <td>data store runtime the new quorum belongs to</td>
    </tr>
    <tr>
      <td>id</td>
      <td>string</td>
      <td>optional name of the quorum</td>
    </tr>
  </tbody>
</table>

#### Returns {#create-Method-returns}


newly created quorum (but not attached yet)

<b>Return type(s):</b> [Quorum](/docs/apis/quorum/quorum)

### delete {#delete-Method}

Deletes the key/value pair at the given key. After issuing the delete, the delete is in "pending" state until all connected clients have ack'd the delete. The accepted value remains unchanged until that time.

<b>Signature:</b>

```typescript
delete(key: string): void;
```

#### Parameters {#delete-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key</td>
      <td>string</td>
      <td>the key to delete</td>
    </tr>
  </tbody>
</table>

### get {#get-Method}

Gets the accepted value for the given key.

<b>Signature:</b>

```typescript
get(key: string): any;
```

#### Parameters {#get-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key</td>
      <td>string</td>
      <td>The key to retrieve from</td>
    </tr>
  </tbody>
</table>

### getFactory {#getfactory-Method}

Get a factory for Quorum to register with the data store.

<b>Signature:</b>

```typescript
static getFactory(): IChannelFactory;
```

#### Returns {#getfactory-Method-returns}


a factory that creates and load Quorum

<b>Return type(s):</b> [IChannelFactory](/docs/apis/datastore-definitions/ichannelfactory)

### getPending {#getpending-Method}

Gets the pending value for the given key.

<b>Signature:</b>

```typescript
getPending(key: string): any;
```

#### Parameters {#getpending-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key</td>
      <td>string</td>
      <td>The key to retrieve from</td>
    </tr>
  </tbody>
</table>

### has {#has-Method}

Checks if the quorum has an accepted value for the given key.

<b>Signature:</b>

```typescript
has(key: string): boolean;
```

#### Parameters {#has-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key</td>
      <td>string</td>
      <td>The key to check</td>
    </tr>
  </tbody>
</table>

### set {#set-Method}

Sets the value for the given key. After setting the value, it will be in "pending" state until all connected clients have ack'd the set. The accepted value remains unchanged until that time.

<b>Signature:</b>

```typescript
set(key: string, value: unknown): void;
```

#### Parameters {#set-Method-parameters}


<table class="table table-striped table-hover param-list">
<caption>List of parameters</caption>
  <thead>
    <tr>
     <th scope="col">Parameter</th>
 <th scope="col">Type</th>
 <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key</td>
      <td>string</td>
      <td>The key to set</td>
    </tr>
    <tr>
      <td>value</td>
      <td>unknown</td>
      <td>The value to store</td>
    </tr>
  </tbody>
</table>


</div>
