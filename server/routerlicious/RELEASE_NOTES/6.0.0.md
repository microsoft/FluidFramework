<!-- THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY. -->

# Fluid Framework v6.0.0

## Contents

- [üö® Breaking Changes](#-breaking-changes)
  - [Deprecated bindCorrelationId middleware removed from Alfred and Riddler Express apps (#22109)](#deprecated-bindcorrelationid-middleware-removed-from-alfred-and-riddler-express-apps-22109)
- [‚ú® New Features](#-new-features)
  - [`.off()` instance method added to IProducer and IOrdererConnection types (#21948)](#off-instance-method-added-to-iproducer-and-iordererconnection-types-21948)
  - [`.off()` instance method added to IProducer and IOrdererConnection implementations (#21948)](#off-instance-method-added-to-iproducer-and-iordererconnection-implementations-21948)
  - [Adds a new property to track the source of the correlationId (#22280)](#adds-a-new-property-to-track-the-source-of-the-correlationid-22280)
  - [Added Collaboration Session Tracking Interfaces (#22381)](#added-collaboration-session-tracking-interfaces-22381)
  - [Optional session tracking added to Nexus Lambda (#22381)](#optional-session-tracking-added-to-nexus-lambda-22381)
  - [Added Collaboration Session Tracking implementations (#22381)](#added-collaboration-session-tracking-implementations-22381)
  - [Added support for health endpoints for HTTP services. (#22635)](#added-support-for-health-endpoints-for-http-services-22635)
  - [Added support for the creation of health-check endpoints - `/startup`, `/ready` and `/ping`. (#22635)](#added-support-for-the-creation-of-health-check-endpoints---startup-ready-and-ping-22635)
  - [Added interfaces to support readiness checks (#22635)](#added-interfaces-to-support-readiness-checks-22635)
  - [Added pause and resume methods for lambdas (#22730)](#added-pause-and-resume-methods-for-lambdas-22730)
  - [Added healthCheck for mongo database (#22730)](#added-healthcheck-for-mongo-database-22730)
  - [Added a new interface - IFluidAccessTokenGenerator (#22884)](#added-a-new-interface---ifluidaccesstokengenerator-22884)
  - [Adds a new resource type - IFluidAccessTokenGenerator (#22884)](#adds-a-new-resource-type---ifluidaccesstokengenerator-22884)
  - [Created a utility function for Redis connection handling (#23212)](#created-a-utility-function-for-redis-connection-handling-23212)
  - [Added a new event - `dispose` - which is triggered when `.dispose()` is called (#23212)](#added-a-new-event---dispose---which-is-triggered-when-dispose-is-called-23212)
  - [Added support for Redis graceful shutdown (#23212)](#added-support-for-redis-graceful-shutdown-23212)
  - [Adds support for a new token claim - `isKeylessAccessToken` (#23379)](#adds-support-for-a-new-token-claim---iskeylessaccesstoken-23379)
  - [Adds support for the tenant manager to use Riddler's new APIs (#23379)](#adds-support-for-the-tenant-manager-to-use-riddlers-new-apis-23379)
  - [Now Riddler supports using private keys to sign server access tokens (#23379)](#now-riddler-supports-using-private-keys-to-sign-server-access-tokens-23379)
  - [Adds new props to the tenant interface to support private key based access (#23379)](#adds-new-props-to-the-tenant-interface-to-support-private-key-based-access-23379)
  - [Adds support for making `/accesstoken` API calls (#23410)](#adds-support-for-making-accesstoken-api-calls-23410)
  - [Adds support to call the `/accesstoken` Riddler API (#23410)](#adds-support-to-call-the-accesstoken-riddler-api-23410)
  - [Riddler now has a new API to sign access tokens (#23410)](#riddler-now-has-a-new-api-to-sign-access-tokens-23410)
- [üêõ Bug Fixes](#-bug-fixes)
  - [Orderer Connection "error" listener disposed on disconnect (#21948)](#orderer-connection-error-listener-disposed-on-disconnect-21948)
  - [User input validation added in Nexus Lambda connect_document handler (#22381)](#user-input-validation-added-in-nexus-lambda-connect_document-handler-22381)
  - [Surface internal error codes correctly (#23681)](#surface-internal-error-codes-correctly-23681)
  - [Fix Signal Notifications API replacing `TypedEventEmitter` with `@socket.io/redis-emitter` (#23846)](#fix-signal-notifications-api-replacing-typedeventemitter-with-socketioredis-emitter-23846)
- [Other Changes](#other-changes)
  - [Cleanup underlying orderer connection when last socket disconnects from a session (#21528)](#cleanup-underlying-orderer-connection-when-last-socket-disconnects-from-a-session-21528)
  - [Default value for enableGlobalTelemetryContext config changed to true (#22109)](#default-value-for-enableglobaltelemetrycontext-config-changed-to-true-22109)
  - [Added the startup probe as a resource for Alfred, Nexus and Riddler (#22819)](#added-the-startup-probe-as-a-resource-for-alfred-nexus-and-riddler-22819)
  - [Startup probe not a singleton anymore (#22819)](#startup-probe-not-a-singleton-anymore-22819)
  - [Types altered to account for undefined and null values (#23054)](#types-altered-to-account-for-undefined-and-null-values-23054)
  - [Socket Latency Telemetry strategy changed to per-socket-connection (#23856)](#socket-latency-telemetry-strategy-changed-to-per-socket-connection-23856)

## üö® Breaking Changes

### Deprecated bindCorrelationId middleware removed from Alfred and Riddler Express apps ([#22109](https://github.com/microsoft/FluidFramework/issues/22109))

If enableGlobalTelemetryContext is set to false, retrieving correlationId via deprecated getCorrelationId will no longer work.

#### Change details

Commit: [`18b76b2`](https://github.com/microsoft/FluidFramework/commit/18b76b29ff92f2362fb3aaba09c82f13e8b2d7b3)

Affected packages:

- @fluidframework/server-routerlicious-base

[‚¨ÜÔ∏è Table of contents](#contents)

## ‚ú® New Features

### `.off()` instance method added to IProducer and IOrdererConnection types ([#21948](https://github.com/microsoft/FluidFramework/issues/21948))

In order to allow consumers of IProducer and IOrdererConnection implementations to cleanup event listeners added using the already-exposed `.once()` and `.on()` methods, a `.off()` method was added as a required property to both interfaces.

#### Change details

Commit: [`e924f4e`](https://github.com/microsoft/FluidFramework/commit/e924f4ec3a9f7d16b17da7551d9fc92a5a54372d)

Affected packages:

- @fluidframework/server-services-core

[‚¨ÜÔ∏è Table of contents](#contents)

### `.off()` instance method added to IProducer and IOrdererConnection implementations ([#21948](https://github.com/microsoft/FluidFramework/issues/21948))

In order to allow consumers of IProducer and IOrdererConnection implementations to cleanup event listeners added using the already-exposed `.once()` and `.on()` methods, a `.off()` method was added as a required property to both interfaces. All exported implementations of IProducer and IOrdererConnection have had a `.off()` method added, and all functions that take IProducer or IOrdererConnection params have had their types updated as well.

#### Change details

Commit: [`e924f4e`](https://github.com/microsoft/FluidFramework/commit/e924f4ec3a9f7d16b17da7551d9fc92a5a54372d)

Affected packages:

- @fluidframework/server-kafka-orderer
- @fluidframework/server-memory-orderer
- @fluidframework/server-routerlicious-base
- @fluidframework/server-services-ordering-kafkanode
- @fluidframework/server-test-utils

[‚¨ÜÔ∏è Table of contents](#contents)

### Adds a new property to track the source of the correlationId ([#22280](https://github.com/microsoft/FluidFramework/issues/22280))

A new property - correlationIdSource - is added to track the source of the correlationId. This source can be either the client or server based on where the correlationId was generated. The `x-telemetry-context` header is generated by the server while the `x-correlation-id` header can be generated by the client. Hence, all requests that have the `x-telemetry-context` header will have the source set to `server`.

#### Change details

Commit: [`7fd8c78`](https://github.com/microsoft/FluidFramework/commit/7fd8c786b339f2dabd93905c41dae8f8dda7bc4b)

Affected packages:

- @fluidframework/server-services-telemetry
- @fluidframework/server-services-utils

[‚¨ÜÔ∏è Table of contents](#contents)

### Added Collaboration Session Tracking Interfaces ([#22381](https://github.com/microsoft/FluidFramework/issues/22381))

Added `ICollaborationSessionClient`, `ICollaborationSession`, `ICollaborationSessionManager`, and `ICollaborationSessionTracker` interfaces to define dependency injection types for new collaboration session tracking functionality in the Nexus lambda.

#### Change details

Commit: [`9a932a6`](https://github.com/microsoft/FluidFramework/commit/9a932a638b701ad36fed8fd1b273e63bcb335878)

Affected packages:

- @fluidframework/server-services-core

[‚¨ÜÔ∏è Table of contents](#contents)

### Optional session tracking added to Nexus Lambda ([#22381](https://github.com/microsoft/FluidFramework/issues/22381))

An optional `ICollaborationSessionTracker` param was added to `configureWebSocketServices` in the Nexus Lambda. When provided, this tracker is used to output telemetry when a collaboration session for a document/container ends. The telemetry includes helpful information such as session duration, max concurrent clients, whether there were any writer clients involved, etc.

#### Change details

Commit: [`9a932a6`](https://github.com/microsoft/FluidFramework/commit/9a932a638b701ad36fed8fd1b273e63bcb335878)

Affected packages:

- @fluidframework/server-lambdas

[‚¨ÜÔ∏è Table of contents](#contents)

### Added Collaboration Session Tracking implementations ([#22381](https://github.com/microsoft/FluidFramework/issues/22381))

Added `CollaborationSessionTracker` implementation of `ICollaborationSessionTracker` and `RedisCollaborationSessionManager` implementation of `ICollaborationSessionManager`. These are used internally within the Nexus lambda to track session information for telemetry purposes.

#### Change details

Commit: [`9a932a6`](https://github.com/microsoft/FluidFramework/commit/9a932a638b701ad36fed8fd1b273e63bcb335878)

Affected packages:

- @fluidframework/server-services

[‚¨ÜÔ∏è Table of contents](#contents)

### Added support for health endpoints for HTTP services. ([#22635](https://github.com/microsoft/FluidFramework/issues/22635))

This adds health endpoints - `/startup`, `/ping` and `/ready` - for Alfred, Riddler and Nexus. Alfred still uses its old ping endpoint - `/api/v1/ping`. It also adds a request listener to the Nexus HTTP server to allow for these endpoints.

#### Change details

Commit: [`9d41303`](https://github.com/microsoft/FluidFramework/commit/9d41303ccfcda161426eabf2aa88befbe7b09034)

Affected packages:

- @fluidframework/server-routerlicious-base

[‚¨ÜÔ∏è Table of contents](#contents)

### Added support for the creation of health-check endpoints - `/startup`, `/ready` and `/ping`. ([#22635](https://github.com/microsoft/FluidFramework/issues/22635))

The endpoints will be consumed by all HTTP services. These can be used by Kubernetes health probes to monitor container health. It also maintains backward compatability for services like Alfred which already have an existing `/ping` endpoint. It also adds a singleton service to monitor startup status.

#### Change details

Commit: [`9d41303`](https://github.com/microsoft/FluidFramework/commit/9d41303ccfcda161426eabf2aa88befbe7b09034)

Affected packages:

- @fluidframework/server-services-shared

[‚¨ÜÔ∏è Table of contents](#contents)

### Added interfaces to support readiness checks ([#22635](https://github.com/microsoft/FluidFramework/issues/22635))

This PR adds an interface which can implemented to have readiness checks for a service. This can be used by kubernetes to check the readiness of an instance.

#### Change details

Commit: [`9d41303`](https://github.com/microsoft/FluidFramework/commit/9d41303ccfcda161426eabf2aa88befbe7b09034)

Affected packages:

- @fluidframework/server-services-core

[‚¨ÜÔ∏è Table of contents](#contents)

### Added pause and resume methods for lambdas ([#22730](https://github.com/microsoft/FluidFramework/issues/22730))

Added pause and resume methods for context, documentContext, partition, partitionManager, kakfaRunner, rdKafkaConsumer, and lambda. They are used to pause/resume the incoming messages during various circuitBreaker states.

#### Change details

Commit: [`256bf08`](https://github.com/microsoft/FluidFramework/commit/256bf0899c041914da3236b3a1c9d8ecc85d3b34)

Affected packages:

- @fluidframework/server-lambdas
- @fluidframework/server-lambdas-driver
- @fluidframework/server-memory-orderer
- @fluidframework/server-services-core
- @fluidframework/server-services-ordering-rdkafka
- @fluidframework/server-test-utils

[‚¨ÜÔ∏è Table of contents](#contents)

### Added healthCheck for mongo database ([#22730](https://github.com/microsoft/FluidFramework/issues/22730))

Exposed a healthCheck property from MongoManager class, and added a healthCheck method to the MongoDb class.

#### Change details

Commit: [`256bf08`](https://github.com/microsoft/FluidFramework/commit/256bf0899c041914da3236b3a1c9d8ecc85d3b34)

Affected packages:

- @fluidframework/server-routerlicious-base
- @fluidframework/server-services
- @fluidframework/server-services-core

[‚¨ÜÔ∏è Table of contents](#contents)

### Added a new interface - IFluidAccessTokenGenerator ([#22884](https://github.com/microsoft/FluidFramework/issues/22884))

The `IFluidAccessTokenGenerator` interface can be implemented to create an access token for the service.

#### Change details

Commit: [`b621e4a`](https://github.com/microsoft/FluidFramework/commit/b621e4a25ddcddebcd5fa952dfa60eb759550f7b)

Affected packages:

- @fluidframework/server-services-core

[‚¨ÜÔ∏è Table of contents](#contents)

### Adds a new resource type - IFluidAccessTokenGenerator ([#22884](https://github.com/microsoft/FluidFramework/issues/22884))

This resource type can be used by a new endpoint, `/api/v1/tenants/:tenantId/accesstoken`, to generate an access token for the service. This resource is customizable and can be injected into the endpoint.

#### Change details

Commit: [`b621e4a`](https://github.com/microsoft/FluidFramework/commit/b621e4a25ddcddebcd5fa952dfa60eb759550f7b)

Affected packages:

- @fluidframework/server-routerlicious-base

[‚¨ÜÔ∏è Table of contents](#contents)

### Created a utility function for Redis connection handling ([#23212](https://github.com/microsoft/FluidFramework/issues/23212))

Exported a new function - `closeRedisClientConnections` - that helps shut down Redis connections using the `quit()` command.

#### Change details

Commit: [`807f880`](https://github.com/microsoft/FluidFramework/commit/807f880dfebe0e0716f9de178bda6b6529e473ba)

Affected packages:

- @fluidframework/server-services-shared

[‚¨ÜÔ∏è Table of contents](#contents)

### Added a new event - `dispose` - which is triggered when `.dispose()` is called ([#23212](https://github.com/microsoft/FluidFramework/issues/23212))

This event is triggered when disposing factory resources. It can be used to trigger other graceful shutdown methods.

#### Change details

Commit: [`807f880`](https://github.com/microsoft/FluidFramework/commit/807f880dfebe0e0716f9de178bda6b6529e473ba)

Affected packages:

- @fluidframework/server-lambdas

[‚¨ÜÔ∏è Table of contents](#contents)

### Added support for Redis graceful shutdown ([#23212](https://github.com/microsoft/FluidFramework/issues/23212))

Now there's a way to ensure that Redis connections are gracefully shut down when disposing service factory resources. There is a new required param, `redisClientConnectionManagers`, in the Nexus, Alfred, and Riddler RunnerFactories. This is scoped to r11s-base.

#### Change details

Commit: [`807f880`](https://github.com/microsoft/FluidFramework/commit/807f880dfebe0e0716f9de178bda6b6529e473ba)

Affected packages:

- @fluidframework/server-routerlicious-base

[‚¨ÜÔ∏è Table of contents](#contents)

### Adds support for a new token claim - `isKeylessAccessToken` ([#23379](https://github.com/microsoft/FluidFramework/issues/23379))

The added support for this new claim would allow the server to know what keys to use to validate an access token. This value will only be added for tokens signed by the server. It is not exposed to the client API.

#### Change details

Commit: [`87c92ca`](https://github.com/microsoft/FluidFramework/commit/87c92ca185dcb128553ae183bd6bfc2a6c487c77)

Affected packages:

- @fluidframework/server-services-utils

[‚¨ÜÔ∏è Table of contents](#contents)

### Adds support for the tenant manager to use Riddler's new APIs ([#23379](https://github.com/microsoft/FluidFramework/issues/23379))

Now the tenant manager used by Alfred can fetch the new private keys exposed by Riddler. The `getKeys` API can be called with the `usePrivateKeys` flag set to true. This is currently only used for one Alfred to Riddler API call to fetch tenant keys when signing a document creation token.

#### Change details

Commit: [`87c92ca`](https://github.com/microsoft/FluidFramework/commit/87c92ca185dcb128553ae183bd6bfc2a6c487c77)

Affected packages:

- @fluidframework/server-services

[‚¨ÜÔ∏è Table of contents](#contents)

### Now Riddler supports using private keys to sign server access tokens ([#23379](https://github.com/microsoft/FluidFramework/issues/23379))

Riddler's tenant manager now exposes two new properties - `enablePrivateKeyAccess` and `enableSharedKeyAccess`. These respectively indicate whether a tenant can be accessed using hidden private keys and whether a tenant can be accessed using shared secrets. APIs now support toggling the `enablePrivateKeyAccess` prop. They also support fetching these new keys and refreshing these new keys. All calls to manipulate private keys should be made from within the server.

#### Change details

Commit: [`87c92ca`](https://github.com/microsoft/FluidFramework/commit/87c92ca185dcb128553ae183bd6bfc2a6c487c77)

Affected packages:

- @fluidframework/server-routerlicious-base

[‚¨ÜÔ∏è Table of contents](#contents)

### Adds new props to the tenant interface to support private key based access ([#23379](https://github.com/microsoft/FluidFramework/issues/23379))

Now tenants have two new properties - `enablePrivateKeyAccess` and `enableSharedKeyAccess`. These are used by Riddler to determine whether a tenant allows just shared key access, private key access or both.

#### Change details

Commit: [`87c92ca`](https://github.com/microsoft/FluidFramework/commit/87c92ca185dcb128553ae183bd6bfc2a6c487c77)

Affected packages:

- @fluidframework/server-services-core

[‚¨ÜÔ∏è Table of contents](#contents)

### Adds support for making `/accesstoken` API calls ([#23410](https://github.com/microsoft/FluidFramework/issues/23410))

This change replaces the `getKey` API call with the `signToken` Riddler API call. This is done to decouple internal service calls from the Riddler keys. Now Riddler will send back an access token to these services based on the tenant's configuration.

#### Change details

Commit: [`0630c39`](https://github.com/microsoft/FluidFramework/commit/0630c3946cba67ab77adaf9159f809ef113e8f7e)

Affected packages:

- @fluidframework/server-services-utils

[‚¨ÜÔ∏è Table of contents](#contents)

### Adds support to call the `/accesstoken` Riddler API ([#23410](https://github.com/microsoft/FluidFramework/issues/23410))

Introduces a new interface method in `ITenantManager` - `signToken`. This allows all classes implementing this interface to ask Riddler to sign access tokens.

#### Change details

Commit: [`0630c39`](https://github.com/microsoft/FluidFramework/commit/0630c3946cba67ab77adaf9159f809ef113e8f7e)

Affected packages:

- @fluidframework/server-services-core

[‚¨ÜÔ∏è Table of contents](#contents)

### Riddler now has a new API to sign access tokens ([#23410](https://github.com/microsoft/FluidFramework/issues/23410))

Adds a new Riddler API - `/accesstoken`. This is used to sign access tokens based on the tenant's configuration. This change also enables disabling shared key access for a tenant using the `/keyaccess` API. Lastly, it removes support to fetch private keys using the `/keys` API. For Alfred `DocumentManager`, this change removes the `getKey` call and replaces it with the `signToken` API call.

#### Change details

Commit: [`0630c39`](https://github.com/microsoft/FluidFramework/commit/0630c3946cba67ab77adaf9159f809ef113e8f7e)

Affected packages:

- @fluidframework/server-routerlicious-base

[‚¨ÜÔ∏è Table of contents](#contents)

## üêõ Bug Fixes

### Orderer Connection "error" listener disposed on disconnect ([#21948](https://github.com/microsoft/FluidFramework/issues/21948))

The Nexus lambda's per-socket-orderer-connection error listener is now removed when the socket connection ends.

#### Change details

Commit: [`e924f4e`](https://github.com/microsoft/FluidFramework/commit/e924f4ec3a9f7d16b17da7551d9fc92a5a54372d)

Affected packages:

- @fluidframework/server-lambdas

[‚¨ÜÔ∏è Table of contents](#contents)

### User input validation added in Nexus Lambda connect_document handler ([#22381](https://github.com/microsoft/FluidFramework/issues/22381))

Nexus Lambda was making a lot of unsafe assumptions about the user's input for the connect_document message handler. To simplify type checking within Nexus and make accessing input properties safer, Nexus lambda now specifically emits a 400 error when the connect_document message input is malformed.

#### Change details

Commit: [`9a932a6`](https://github.com/microsoft/FluidFramework/commit/9a932a638b701ad36fed8fd1b273e63bcb335878)

Affected packages:

- @fluidframework/server-lambdas

[‚¨ÜÔ∏è Table of contents](#contents)

### Surface internal error codes correctly ([#23681](https://github.com/microsoft/FluidFramework/issues/23681))

Previously, handleResponse() would override internal error codes with a default status of 500. This change ensures that we only fall back to 500 when no valid internal error code is present. This specifically impacts the getDeltas API, where certain cases incorrectly returned 500 instead of 404.

#### Change details

Commit: [`14bcca9`](https://github.com/microsoft/FluidFramework/commit/14bcca9b7fd3c542d6f28f406c1e95a4eea7892f)

Affected packages:

- @fluidframework/server-routerlicious-base
- @fluidframework/server-services-shared

[‚¨ÜÔ∏è Table of contents](#contents)

### Fix Signal Notifications API replacing `TypedEventEmitter` with `@socket.io/redis-emitter` ([#23846](https://github.com/microsoft/FluidFramework/issues/23846))

Some breaking changes were introduced by replacing `TypedEventEmitter` with `@socket.io/redis-emitter` (`RedisEmitter`). All of the changes modfify the signature of existing functions, used to create Alfred instances. The type of `collaborationSessionEventEmitter` was changed from `TypedEventEmitter` to `RedisEmitter`.

Here is a list of the changes:

- Modified type `collaborationSessionEventEmitter` from `TypedEventEmitter` to `RedisEmitter` in Alfred. This parameter was modified in the following functions:
  - `create` in `server/routerlicious/packages/routerlicious-base/src/alfred/app.ts`
  - `create` in `server/routerlicious/packages/routerlicious-base/src/alfred/routes/api/api.ts`
  - `create` in `server/routerlicious/packages/routerlicious-base/src/alfred/routes/api/index.ts`
  - `create` in `server/routerlicious/packages/routerlicious-base/src/alfred/routes/index.ts`
  - `AlfredRunner` constructor in `server/routerlicious/packages/routerlicious-base/src/alfred/runner.ts`
  - `AlfredResources` constructor in `server/routerlicious/packages/routerlicious-base/src/alfred/runnerFactory.ts`

#### Change details

Commit: [`6f0e62d`](https://github.com/microsoft/FluidFramework/commit/6f0e62d0f34d3ecd96c2dd6dd941f6d459efc1d5)

Affected packages:

- @fluidframework/server-routerlicious-base

[‚¨ÜÔ∏è Table of contents](#contents)

## Other Changes

### Cleanup underlying orderer connection when last socket disconnects from a session ([#21528](https://github.com/microsoft/FluidFramework/issues/21528))

When a websocket disconnect occurs in the Nexus lambda, the underlying Orderer (Kafka or Local) connection will be closed and removed if it was the last connection open for a given tenantId/documentId. Various classes and types were updated to enable connection cleanup: added IOrdererManager.removeOrderer, changed KafkaOrdererFactory.delete to return a Promise due to internal orderer connection close, added removeOrderer to OrdererManager and LocalOrdererManager.

#### Change details

Commit: [`3c6bfc3`](https://github.com/microsoft/FluidFramework/commit/3c6bfc3d429285b568bdfae417accfcaa5e0e190)

Affected packages:

- @fluidframework/server-kafka-orderer
- @fluidframework/server-lambdas
- @fluidframework/server-local-server
- @fluidframework/server-routerlicious-base
- @fluidframework/server-services-core

[‚¨ÜÔ∏è Table of contents](#contents)

### Default value for enableGlobalTelemetryContext config changed to true ([#22109](https://github.com/microsoft/FluidFramework/issues/22109))

Global TelemetryContext is replacing deprecated correlationId tracking. TelemetryContext is now defaulted to enabled, which will automatically output correlationId, tenantId, and documentId in service telemetry.

#### Change details

Commit: [`18b76b2`](https://github.com/microsoft/FluidFramework/commit/18b76b29ff92f2362fb3aaba09c82f13e8b2d7b3)

Affected packages:

- @fluidframework/server-services-telemetry
- @fluidframework/server-services-utils

[‚¨ÜÔ∏è Table of contents](#contents)

### Added the startup probe as a resource for Alfred, Nexus and Riddler ([#22819](https://github.com/microsoft/FluidFramework/issues/22819))

The startup probe was intended to be a singleton. However, this caused issues between Historian and Routerlicious. To ensure no weird compatability issues arise, this singleton implementation has been removed.

#### Change details

Commit: [`c5d7bde`](https://github.com/microsoft/FluidFramework/commit/c5d7bde895e5cc35e985b5d3d58d9059a26a95b2)

Affected packages:

- @fluidframework/server-routerlicious-base

[‚¨ÜÔ∏è Table of contents](#contents)

### Startup probe not a singleton anymore ([#22819](https://github.com/microsoft/FluidFramework/issues/22819))

Singleton implementation of this module caused bugs to surface in Historian. Hence, reverted the singleton implementation to a regular one.

#### Change details

Commit: [`c5d7bde`](https://github.com/microsoft/FluidFramework/commit/c5d7bde895e5cc35e985b5d3d58d9059a26a95b2)

Affected packages:

- @fluidframework/server-services-shared

[‚¨ÜÔ∏è Table of contents](#contents)

### Types altered to account for undefined and null values ([#23054](https://github.com/microsoft/FluidFramework/issues/23054))

Many types updated to reflect implementations that can return null or undefined, but did not call that out in type definitions. Internal functionality only changed to handle existing null/undefined cases that are now known at compiletime.

#### Change details

Commit: [`09b7299`](https://github.com/microsoft/FluidFramework/commit/09b7299e1cbf1d800d4bea2bef6b7d0bc657ddb6)

Affected packages:

- @fluidframework/server-lambdas
- @fluidframework/server-lambdas-driver
- @fluidframework/server-memory-orderer
- @fluidframework/server-routerlicious
- @fluidframework/server-routerlicious-base
- @fluidframework/server-services
- @fluidframework/server-services-client
- @fluidframework/server-services-core
- @fluidframework/server-services-ordering-kafkanode
- @fluidframework/server-services-ordering-zookeeper
- @fluidframework/server-services-shared
- @fluidframework/server-services-utils
- @fluidframework/server-test-utils
- tinylicious

[‚¨ÜÔ∏è Table of contents](#contents)

### Socket Latency Telemetry strategy changed to per-socket-connection ([#23856](https://github.com/microsoft/FluidFramework/issues/23856))

Socket latency tracking strategy was changed to a per-socket strategy for better telemetry granularity. With this, a new config was added (`nexus.socketIo.pingPongLatencyTrackingAggregationThreshold`) and an old config was removed (`nexus.socketIo.pingPongLatencyTrackingIntervalMs`).

#### Change details

Commit: [`6ab8453`](https://github.com/microsoft/FluidFramework/commit/6ab8453fe6208e9b1215b6688b39cbb94c1a453a)

Affected packages:

- @fluidframework/server-routerlicious

[‚¨ÜÔ∏è Table of contents](#contents)

### üõ†Ô∏è Start Building Today!

Please continue to engage with us on GitHub [Discussion](https://github.com/microsoft/FluidFramework/discussions) and [Issue](https://github.com/microsoft/FluidFramework/issues) pages as you adopt Fluid Framework!
