{
  "title": "@fluidframework/odsp-driver Package",
  "kind": "Package",
  "members": {
    "Function": {
      "checkUrl": "/docs/apis/odsp-driver#checkurl-function",
      "createLocalOdspDocumentServiceFactory": "/docs/apis/odsp-driver#createlocalodspdocumentservicefactory-function",
      "createOdspCreateContainerRequest": "/docs/apis/odsp-driver#createodspcreatecontainerrequest-function",
      "createOdspUrl": "/docs/apis/odsp-driver#createodspurl-function",
      "encodeOdspFluidDataStoreLocator": "/docs/apis/odsp-driver#encodeodspfluiddatastorelocator-function",
      "getHashedDocumentId": "/docs/apis/odsp-driver#gethasheddocumentid-function",
      "getLocatorFromOdspUrl": "/docs/apis/odsp-driver#getlocatorfromodspurl-function",
      "prefetchLatestSnapshot": "/docs/apis/odsp-driver#prefetchlatestsnapshot-function",
      "storeLocatorInOdspUrl": "/docs/apis/odsp-driver#storelocatorinodspurl-function"
    },
    "Class": {
      "EpochTracker": "/docs/apis/odsp-driver/epochtracker-class",
      "OdspDocumentServiceFactory": "/docs/apis/odsp-driver/odspdocumentservicefactory-class",
      "OdspDocumentServiceFactoryCore": "/docs/apis/odsp-driver/odspdocumentservicefactorycore-class",
      "OdspDriverUrlResolver": "/docs/apis/odsp-driver/odspdriverurlresolver-class",
      "OdspDriverUrlResolverForShareLink": "/docs/apis/odsp-driver/odspdriverurlresolverforsharelink-class"
    },
    "TypeAlias": {
      "FetchType": "/docs/apis/odsp-driver#fetchtype-typealias",
      "FetchTypeInternal": "/docs/apis/odsp-driver#fetchtypeinternal-typealias"
    },
    "Interface": {
      "ICacheAndTracker": "/docs/apis/odsp-driver/icacheandtracker-interface",
      "INonPersistentCache": "/docs/apis/odsp-driver/inonpersistentcache-interface",
      "IOdspCache": "/docs/apis/odsp-driver/iodspcache-interface",
      "IOdspResponse": "/docs/apis/odsp-driver/iodspresponse-interface",
      "IPersistedFileCache": "/docs/apis/odsp-driver/ipersistedfilecache-interface",
      "IPrefetchSnapshotContents": "/docs/apis/odsp-driver/iprefetchsnapshotcontents-interface",
      "ISnapshotContents": "/docs/apis/odsp-driver/isnapshotcontents-interface",
      "OdspFluidDataStoreLocator": "/docs/apis/odsp-driver/odspfluiddatastorelocator-interface",
      "ShareLinkFetcherProps": "/docs/apis/odsp-driver/sharelinkfetcherprops-interface"
    },
    "Variable": {
      "locatorQueryParamName": "/docs/apis/odsp-driver#locatorqueryparamname-variable",
      "OdcApiSiteOrigin": "/docs/apis/odsp-driver#odcapisiteorigin-variable",
      "OdcFileSiteOrigin": "/docs/apis/odsp-driver#odcfilesiteorigin-variable"
    },
    "Enum": {
      "SnapshotFormatSupportType": "/docs/apis/odsp-driver/snapshotformatsupporttype-enum"
    }
  },
  "package": "@fluidframework/odsp-driver",
  "unscopedPackageName": "odsp-driver"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

## Interfaces

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Interface
      </th>
      <th>
        Alerts
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/icacheandtracker-interface'>ICacheAndTracker</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/inonpersistentcache-interface'>INonPersistentCache</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        Internal cache interface used within driver only
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/iodspcache-interface'>IOdspCache</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        Internal cache interface used within driver only
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/iodspresponse-interface'>IOdspResponse</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/ipersistedfilecache-interface'>IPersistedFileCache</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        Similar to IPersistedCache, but exposes cache interface for single file
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/iprefetchsnapshotcontents-interface'>IPrefetchSnapshotContents</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/isnapshotcontents-interface'>ISnapshotContents</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/odspfluiddatastorelocator-interface'>OdspFluidDataStoreLocator</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/sharelinkfetcherprops-interface'>ShareLinkFetcherProps</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        Properties passed to the code responsible for fetching share link for a file.
      </td>
    </tr>
  </tbody>
</table>

## Classes

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Class
      </th>
      <th>
        Alerts
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/epochtracker-class'>EpochTracker</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <p>
          In ODSP, the concept of &quot;epoch&quot; refers to binary updates to files. For example, this might include using version restore, or if the user downloads a Fluid file and then uploads it again. These result in the epoch value being incremented.
        </p>
        <p>
          The implications of these binary updates is that the Fluid state is disrupted: the sequence number might go backwards, the data might be inconsistent with the latest state of collaboration, etc. As a result, it's not safe to continue collaboration across an epoch change. We need to detect these epoch changes and error out from the collaboration.
        </p>
        <p>
          This class is a wrapper around fetch calls. It adds epoch to the request made so that the server can match it with its epoch value in order to match the version. It also validates the epoch value received in response of fetch calls. If the epoch does not match, then it also clears all the cached entries for the given container.
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/odspdocumentservicefactory-class'>OdspDocumentServiceFactory</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        Factory for creating the sharepoint document service. Use this if you want to use the sharepoint implementation.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/odspdocumentservicefactorycore-class'>OdspDocumentServiceFactoryCore</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <p>
          Factory for creating the sharepoint document service. Use this if you want to use the sharepoint implementation.
        </p>
        <p>
          This constructor should be used by environments that support dynamic imports and that wish to leverage code splitting as a means to keep bundles as small as possible.
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/odspdriverurlresolver-class'>OdspDriverUrlResolver</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        Resolver to resolve urls like the ones created by createOdspUrl which is driver inner url format. Ex: <code>${siteUrl}?driveId=${driveId}&amp;itemId=${itemId}&amp;path=${path}</code>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/odspdriverurlresolverforsharelink-class'>OdspDriverUrlResolverForShareLink</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        Resolver to resolve urls like the ones created by createOdspUrl which is driver inner url format and the ones which have things like driveId, siteId, itemId etc encoded in nav param. This resolver also handles share links and try to generate one for the use by the app.
      </td>
    </tr>
  </tbody>
</table>

## Enumerations

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Enum
      </th>
      <th>
        Alerts
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/snapshotformatsupporttype-enum'>SnapshotFormatSupportType</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        Enum to support different types of snapshot formats.
      </td>
    </tr>
  </tbody>
</table>

## Types

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        TypeAlias
      </th>
      <th>
        Alerts
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#fetchtype-typealias'>FetchType</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#fetchtypeinternal-typealias'>FetchTypeInternal</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Functions

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Function
      </th>
      <th>
        Alerts
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#checkurl-function'>checkUrl(documentUrl)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span><a href='/docs/apis/driver-definitions/driverprecheckinfo-interface'>DriverPreCheckInfo</a> &#124; undefined</span>
      </td>
      <td>
        A check that returns DriverPreCheckInfo if the URL format is likely supported by this driver. Note that returning information here is NOT a full guarantee that resolve will ultimately be successful. Instead, this should be used as a lightweight check that can filter out easily detectable unsupported URLs before the entire Fluid loading process needs to be kicked off.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#createlocalodspdocumentservicefactory-function'>createLocalOdspDocumentServiceFactory(localSnapshot)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span><a href='/docs/apis/driver-definitions/idocumentservicefactory-interface'>IDocumentServiceFactory</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#createodspcreatecontainerrequest-function'>createOdspCreateContainerRequest(siteUrl, driveId, filePath, fileName, createShareLinkType)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span><a href='/docs/apis/core-interfaces/irequest-interface'>IRequest</a></span>
      </td>
      <td>
        Create the request object with url and headers for creating a new file on OneDrive Sharepoint
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#createodspurl-function'>createOdspUrl(l)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Encodes ODC/SPO information into a URL format that can be handled by the Loader
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#encodeodspfluiddatastorelocator-function'>encodeOdspFluidDataStoreLocator(locator)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Transforms given Fluid data store locator into string that can be embedded into url
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#gethasheddocumentid-function'>getHashedDocumentId(driveId, itemId)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>Promise&lt;string&gt;</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#getlocatorfromodspurl-function'>getLocatorFromOdspUrl(url, requireFluidSignature)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver/odspfluiddatastorelocator-interface'>OdspFluidDataStoreLocator</a> &#124; undefined</span>
      </td>
      <td>
        Extract ODSP Fluid data store locator object from given ODSP url. This extracts things like driveId, ItemId, siteUrl etc from a url where these are encoded in nav query param.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#prefetchlatestsnapshot-function'>prefetchLatestSnapshot(resolvedUrl, getStorageToken, persistedCache, forceAccessTokenViaAuthorizationHeader, logger, hostSnapshotFetchOptions, enableRedeemFallback, fetchBinarySnapshotFormat, snapshotFormatFetchType, odspDocumentServiceFactory)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>Promise&lt;boolean&gt;</span>
      </td>
      <td>
        Function to prefetch the snapshot and cached it in the persistant cache, so that when the container is loaded the cached latest snapshot could be used and removes the network call from the critical path.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#storelocatorinodspurl-function'>storeLocatorInOdspUrl(url, locator)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Embeds Fluid data store locator data into given ODSP url
      </td>
    </tr>
  </tbody>
</table>

## Variables

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Variable
      </th>
      <th>
        Alerts
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#locatorqueryparamname-variable'>locatorQueryParamName</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        This parameter is provided by host in the resolve request and it contains information about the file like driveId, itemId, siteUrl, datastorePath, packageName etc.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#odcapisiteorigin-variable'>OdcApiSiteOrigin</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#odcfilesiteorigin-variable'>OdcFileSiteOrigin</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Type Details

### FetchType (ALPHA) {#fetchtype-typealias}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#fetchtype-signature}

```typescript
export type FetchType = "blob" | "createBlob" | "createFile" | "joinSession" | "ops" | "test" | "snapshotTree" | "treesLatest" | "uploadSummary" | "push" | "versions";
```

### FetchTypeInternal (ALPHA) {#fetchtypeinternal-typealias}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#fetchtypeinternal-signature}

```typescript
export type FetchTypeInternal = FetchType | "cache";
```

## Function Details

### checkUrl (ALPHA) {#checkurl-function}

A check that returns DriverPreCheckInfo if the URL format is likely supported by this driver. Note that returning information here is NOT a full guarantee that resolve will ultimately be successful. Instead, this should be used as a lightweight check that can filter out easily detectable unsupported URLs before the entire Fluid loading process needs to be kicked off.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#checkurl-signature}

```typescript
export declare function checkUrl(documentUrl: URL): DriverPreCheckInfo | undefined;
```

#### Parameters {#checkurl-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        documentUrl
      </td>
      <td>
        <span>URL</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#checkurl-returns}

**Return type:** [DriverPreCheckInfo](/docs/apis/driver-definitions/driverprecheckinfo-interface) \| undefined

### createLocalOdspDocumentServiceFactory (ALPHA) {#createlocalodspdocumentservicefactory-function}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#createlocalodspdocumentservicefactory-signature}

```typescript
export declare function createLocalOdspDocumentServiceFactory(localSnapshot: Uint8Array | string): IDocumentServiceFactory;
```

#### Parameters {#createlocalodspdocumentservicefactory-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        localSnapshot
      </td>
      <td>
        <span>Uint8Array &#124; string</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#createlocalodspdocumentservicefactory-returns}

**Return type:** [IDocumentServiceFactory](/docs/apis/driver-definitions/idocumentservicefactory-interface)

### createOdspCreateContainerRequest (ALPHA) {#createodspcreatecontainerrequest-function}

Create the request object with url and headers for creating a new file on OneDrive Sharepoint

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#createodspcreatecontainerrequest-signature}

```typescript
export declare function createOdspCreateContainerRequest(siteUrl: string, driveId: string, filePath: string, fileName: string, createShareLinkType?: ShareLinkTypes | ISharingLinkKind): IRequest;
```

#### Parameters {#createodspcreatecontainerrequest-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        siteUrl
      </td>
      <td>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Base url for OneDrive
      </td>
    </tr>
    <tr>
      <td>
        driveId
      </td>
      <td>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        drive identifier
      </td>
    </tr>
    <tr>
      <td>
        filePath
      </td>
      <td>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        path where file needs to be created
      </td>
    </tr>
    <tr>
      <td>
        fileName
      </td>
      <td>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        name of the new file to be created
      </td>
    </tr>
    <tr>
      <td>
        createShareLinkType
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver-definitions/sharelinktypes-enum'>ShareLinkTypes</a> &#124; <a href='/docs/apis/odsp-driver-definitions/isharinglinkkind-interface'>ISharingLinkKind</a></span>
      </td>
      <td>
        type of sharing link you would like to create for this file. ShareLinkTypes will be deprecated soon, so for any new implementation please provide createShareLinkType of type ShareLink
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#createodspcreatecontainerrequest-returns}

**Return type:** [IRequest](/docs/apis/core-interfaces/irequest-interface)

### createOdspUrl (ALPHA) {#createodspurl-function}

Encodes ODC/SPO information into a URL format that can be handled by the Loader

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#createodspurl-signature}

```typescript
export declare function createOdspUrl(l: OdspFluidDataStoreLocator): string;
```

#### Parameters {#createodspurl-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        l
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver/odspfluiddatastorelocator-interface'>OdspFluidDataStoreLocator</a></span>
      </td>
      <td>
        The property bag of necessary properties to locate a Fluid data store and craft a url for it
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#createodspurl-returns}

**Return type:** string

### encodeOdspFluidDataStoreLocator (ALPHA) {#encodeodspfluiddatastorelocator-function}

Transforms given Fluid data store locator into string that can be embedded into url

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#encodeodspfluiddatastorelocator-signature}

```typescript
export declare function encodeOdspFluidDataStoreLocator(locator: OdspFluidDataStoreLocator): string;
```

#### Parameters {#encodeodspfluiddatastorelocator-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        locator
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver/odspfluiddatastorelocator-interface'>OdspFluidDataStoreLocator</a></span>
      </td>
      <td>
        describes Fluid data store locator info to be encoded
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#encodeodspfluiddatastorelocator-returns}

string representing encoded Fluid data store locator info

**Return type:** string

### getHashedDocumentId (ALPHA) {#gethasheddocumentid-function}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#gethasheddocumentid-signature}

```typescript
export declare function getHashedDocumentId(driveId: string, itemId: string): Promise<string>;
```

#### Parameters {#gethasheddocumentid-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        driveId
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        itemId
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#gethasheddocumentid-returns}

**Return type:** Promise&lt;string&gt;

### getLocatorFromOdspUrl (ALPHA) {#getlocatorfromodspurl-function}

Extract ODSP Fluid data store locator object from given ODSP url. This extracts things like driveId, ItemId, siteUrl etc from a url where these are encoded in nav query param.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#getlocatorfromodspurl-signature}

```typescript
export declare function getLocatorFromOdspUrl(url: URL, requireFluidSignature?: boolean): OdspFluidDataStoreLocator | undefined;
```

#### Parameters {#getlocatorfromodspurl-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        url
      </td>
      <td>
      </td>
      <td>
        <span>URL</span>
      </td>
      <td>
        ODSP url representing Fluid file link
      </td>
    </tr>
    <tr>
      <td>
        requireFluidSignature
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        flag representing if the Fluid signature is expected in the url, default true
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getlocatorfromodspurl-returns}

object representing Fluid data store location in ODSP terms

**Return type:** [OdspFluidDataStoreLocator](/docs/apis/odsp-driver/odspfluiddatastorelocator-interface) \| undefined

### prefetchLatestSnapshot (ALPHA) {#prefetchlatestsnapshot-function}

Function to prefetch the snapshot and cached it in the persistant cache, so that when the container is loaded the cached latest snapshot could be used and removes the network call from the critical path.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#prefetchlatestsnapshot-signature}

```typescript
export declare function prefetchLatestSnapshot(resolvedUrl: IResolvedUrl, getStorageToken: TokenFetcher<OdspResourceTokenFetchOptions>, persistedCache: IPersistedCache, forceAccessTokenViaAuthorizationHeader: boolean, logger: ITelemetryBaseLogger, hostSnapshotFetchOptions: ISnapshotOptions | undefined, enableRedeemFallback?: boolean, fetchBinarySnapshotFormat?: boolean, snapshotFormatFetchType?: SnapshotFormatSupportType, odspDocumentServiceFactory?: OdspDocumentServiceFactory): Promise<boolean>;
```

#### Parameters {#prefetchlatestsnapshot-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        resolvedUrl
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/driver-definitions/iresolvedurl-interface'>IResolvedUrl</a></span>
      </td>
      <td>
        Resolved url to fetch the snapshot.
      </td>
    </tr>
    <tr>
      <td>
        getStorageToken
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver-definitions#tokenfetcher-typealias'>TokenFetcher</a>&lt;<a href='/docs/apis/odsp-driver-definitions/odspresourcetokenfetchoptions-interface'>OdspResourceTokenFetchOptions</a>&gt;</span>
      </td>
      <td>
        function that can provide the storage token for a given site. This is is also referred to as the &quot;VROOM&quot; token in SPO.
      </td>
    </tr>
    <tr>
      <td>
        persistedCache
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver-definitions/ipersistedcache-interface'>IPersistedCache</a></span>
      </td>
      <td>
        Cache to store the fetched snapshot.
      </td>
    </tr>
    <tr>
      <td>
        forceAccessTokenViaAuthorizationHeader
      </td>
      <td>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        whether to force passing given token via authorization header.
      </td>
    </tr>
    <tr>
      <td>
        logger
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/core-interfaces/itelemetrybaselogger-interface'>ITelemetryBaseLogger</a></span>
      </td>
      <td>
        Logger to have telemetry events.
      </td>
    </tr>
    <tr>
      <td>
        hostSnapshotFetchOptions
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver-definitions/isnapshotoptions-interface'>ISnapshotOptions</a> &#124; undefined</span>
      </td>
      <td>
        Options to fetch the snapshot if any. Otherwise default will be used.
      </td>
    </tr>
    <tr>
      <td>
        enableRedeemFallback
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        True to have the sharing link redeem fallback in case the Trees Latest/Redeem 1RT call fails with redeem error. During fallback it will first redeem the sharing link and then make the Trees latest call. Note: this can be considered deprecated - it will be replaced with <code>snapshotFormatFetchType</code>.
      </td>
    </tr>
    <tr>
      <td>
        fetchBinarySnapshotFormat
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Control if we want to fetch binary format snapshot.
      </td>
    </tr>
    <tr>
      <td>
        snapshotFormatFetchType
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver/snapshotformatsupporttype-enum'>SnapshotFormatSupportType</a></span>
      </td>
      <td>
        Snapshot format to fetch.
      </td>
    </tr>
    <tr>
      <td>
        odspDocumentServiceFactory
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver/odspdocumentservicefactory-class'>OdspDocumentServiceFactory</a></span>
      </td>
      <td>
        factory to access the non persistent cache and store the prefetch promise.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#prefetchlatestsnapshot-returns}

`true` if the snapshot is cached, `false` otherwise.

**Return type:** Promise&lt;boolean&gt;

### storeLocatorInOdspUrl (ALPHA) {#storelocatorinodspurl-function}

Embeds Fluid data store locator data into given ODSP url

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#storelocatorinodspurl-signature}

```typescript
export declare function storeLocatorInOdspUrl(url: URL, locator: OdspFluidDataStoreLocator): void;
```

#### Parameters {#storelocatorinodspurl-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        url
      </td>
      <td>
        <span>URL</span>
      </td>
      <td>
        file url in ODSP format (can be either canonical or share link)
      </td>
    </tr>
    <tr>
      <td>
        locator
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver/odspfluiddatastorelocator-interface'>OdspFluidDataStoreLocator</a></span>
      </td>
      <td>
        object representing Fluid data store location in ODSP terms
      </td>
    </tr>
  </tbody>
</table>

## Variable Details

### locatorQueryParamName (ALPHA) {#locatorqueryparamname-variable}

This parameter is provided by host in the resolve request and it contains information about the file like driveId, itemId, siteUrl, datastorePath, packageName etc.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#locatorqueryparamname-signature}

```typescript
locatorQueryParamName = "nav"
```

### OdcApiSiteOrigin (ALPHA) {#odcapisiteorigin-variable}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#odcapisiteorigin-signature}

```typescript
OdcApiSiteOrigin = "https://my.microsoftpersonalcontent.com"
```

### OdcFileSiteOrigin (ALPHA) {#odcfilesiteorigin-variable}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#odcfilesiteorigin-signature}

```typescript
OdcFileSiteOrigin = "https://1drv.ms"
```
