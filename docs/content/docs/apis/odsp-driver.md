{
  "title": "@fluidframework/odsp-driver Package",
  "kind": "Package",
  "members": {
    "Function": {
      "checkUrl": "/docs/apis/odsp-driver#checkurl-function",
      "createLocalOdspDocumentServiceFactory": "/docs/apis/odsp-driver#createlocalodspdocumentservicefactory-function",
      "createOdspCreateContainerRequest": "/docs/apis/odsp-driver#createodspcreatecontainerrequest-function",
      "createOdspUrl": "/docs/apis/odsp-driver#createodspurl-function",
      "encodeOdspFluidDataStoreLocator": "/docs/apis/odsp-driver#encodeodspfluiddatastorelocator-function",
      "getApiRoot": "/docs/apis/odsp-driver#getapiroot-function",
      "getHashedDocumentId": "/docs/apis/odsp-driver#gethasheddocumentid-function",
      "getLocatorFromOdspUrl": "/docs/apis/odsp-driver#getlocatorfromodspurl-function",
      "getOdspUrlParts": "/docs/apis/odsp-driver#getodspurlparts-function",
      "isOdcOrigin": "/docs/apis/odsp-driver#isodcorigin-function",
      "isOdcUrl": "/docs/apis/odsp-driver#isodcurl-function",
      "isSpoUrl": "/docs/apis/odsp-driver#isspourl-function",
      "parseCompactSnapshotResponse": "/docs/apis/odsp-driver#parsecompactsnapshotresponse-function",
      "prefetchLatestSnapshot": "/docs/apis/odsp-driver#prefetchlatestsnapshot-function",
      "storeLocatorInOdspUrl": "/docs/apis/odsp-driver#storelocatorinodspurl-function"
    },
    "Enum": {
      "ClpCompliantAppHeader": "/docs/apis/odsp-driver#clpcompliantappheader-enum",
      "SharingLinkHeader": "/docs/apis/odsp-driver#sharinglinkheader-enum"
    },
    "Interface": {
      "IClpCompliantAppHeader": "/docs/apis/odsp-driver/iclpcompliantappheader-interface",
      "ISharingLinkHeader": "/docs/apis/odsp-driver/isharinglinkheader-interface",
      "ISnapshotContents": "/docs/apis/odsp-driver/isnapshotcontents-interface",
      "OdspFluidDataStoreLocator": "/docs/apis/odsp-driver/odspfluiddatastorelocator-interface",
      "ShareLinkFetcherProps": "/docs/apis/odsp-driver/sharelinkfetcherprops-interface"
    },
    "Variable": {
      "locatorQueryParamName": "/docs/apis/odsp-driver#locatorqueryparamname-variable",
      "OdcApiSiteOrigin": "/docs/apis/odsp-driver#odcapisiteorigin-variable",
      "OdcFileSiteOrigin": "/docs/apis/odsp-driver#odcfilesiteorigin-variable"
    },
    "Class": {
      "OdspDocumentServiceFactory": "/docs/apis/odsp-driver/odspdocumentservicefactory-class",
      "OdspDocumentServiceFactoryCore": "/docs/apis/odsp-driver/odspdocumentservicefactorycore-class",
      "OdspDocumentServiceFactoryWithCodeSplit": "/docs/apis/odsp-driver/odspdocumentservicefactorywithcodesplit-class",
      "OdspDriverUrlResolver": "/docs/apis/odsp-driver/odspdriverurlresolver-class",
      "OdspDriverUrlResolverForShareLink": "/docs/apis/odsp-driver/odspdriverurlresolverforsharelink-class"
    }
  },
  "package": "@fluidframework/odsp-driver",
  "unscopedPackageName": "odsp-driver"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/odsp-driver](/docs/apis/odsp-driver)

## Interfaces

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Interface
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/iclpcompliantappheader-interface'>IClpCompliantAppHeader</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/isharinglinkheader-interface'>ISharingLinkHeader</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/isnapshotcontents-interface'>ISnapshotContents</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/odspfluiddatastorelocator-interface'>OdspFluidDataStoreLocator</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/sharelinkfetcherprops-interface'>ShareLinkFetcherProps</a>
      </td>
      <td>
        Properties passed to the code responsible for fetching share link for a file.
      </td>
    </tr>
  </tbody>
</table>

## Classes

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Class
      </th>
      <th>
        Alerts
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/odspdocumentservicefactory-class'>OdspDocumentServiceFactory</a>
      </td>
      <td>
      </td>
      <td>
        Factory for creating the sharepoint document service. Use this if you want to use the sharepoint implementation.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/odspdocumentservicefactorycore-class'>OdspDocumentServiceFactoryCore</a>
      </td>
      <td>
      </td>
      <td>
        <p>
          Factory for creating the sharepoint document service. Use this if you want to use the sharepoint implementation.
        </p>
        <p>
          This constructor should be used by environments that support dynamic imports and that wish to leverage code splitting as a means to keep bundles as small as possible.
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/odspdocumentservicefactorywithcodesplit-class'>OdspDocumentServiceFactoryWithCodeSplit</a>
      </td>
      <td>
        <code>DEPRECATED</code>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/odspdriverurlresolver-class'>OdspDriverUrlResolver</a>
      </td>
      <td>
      </td>
      <td>
        Resolver to resolve urls like the ones created by createOdspUrl which is driver inner url format. Ex: <code>${siteUrl}?driveId=${driveId}&amp;itemId=${itemId}&amp;path=${path}</code>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/odspdriverurlresolverforsharelink-class'>OdspDriverUrlResolverForShareLink</a>
      </td>
      <td>
      </td>
      <td>
        Resolver to resolve urls like the ones created by createOdspUrl which is driver inner url format and the ones which have things like driveId, siteId, itemId etc encoded in nav param. This resolver also handles share links and try to generate one for the use by the app.
      </td>
    </tr>
  </tbody>
</table>

## Enumerations

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Enum
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#clpcompliantappheader-enum'>ClpCompliantAppHeader</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#sharinglinkheader-enum'>SharingLinkHeader</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Functions

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Function
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#checkurl-function'>checkUrl</a>
      </td>
      <td>
        <span><a href='/docs/apis/driver-definitions/driverprecheckinfo-interface'>DriverPreCheckInfo</a> &#124; undefined</span>
      </td>
      <td>
        A check that returns DriverPreCheckInfo if the URL format is likely supported by this driver. Note that returning information here is NOT a full guarantee that resolve will ultimately be successful. Instead, this should be used as a lightweight check that can filter out easily detectable unsupported URLs before the entire Fluid loading process needs to be kicked off.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#createlocalodspdocumentservicefactory-function'>createLocalOdspDocumentServiceFactory</a>
      </td>
      <td>
        <span><a href='/docs/apis/driver-definitions/idocumentservicefactory-interface'>IDocumentServiceFactory</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#createodspcreatecontainerrequest-function'>createOdspCreateContainerRequest</a>
      </td>
      <td>
        <span><a href='/docs/apis/core-interfaces/irequest-interface'>IRequest</a></span>
      </td>
      <td>
        Create the request object with url and headers for creating a new file on OneDrive Sharepoint
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#createodspurl-function'>createOdspUrl</a>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Encodes ODC/SPO information into a URL format that can be handled by the Loader
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#encodeodspfluiddatastorelocator-function'>encodeOdspFluidDataStoreLocator</a>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Transforms given Fluid data store locator into string that can be embedded into url
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#getapiroot-function'>getApiRoot</a>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Gets the correct API root for the given ODSP url, e.g. 'https://foo-my.sharepoint.com/_api/v2.1'
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#gethasheddocumentid-function'>getHashedDocumentId</a>
      </td>
      <td>
        <span>Promise&lt;string&gt;</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#getlocatorfromodspurl-function'>getLocatorFromOdspUrl</a>
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver/odspfluiddatastorelocator-interface'>OdspFluidDataStoreLocator</a> &#124; undefined</span>
      </td>
      <td>
        Extract ODSP Fluid data store locator object from given ODSP url. This extracts things like driveId, ItemId, siteUrl etc from a url where these are encoded in nav query param.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#getodspurlparts-function'>getOdspUrlParts</a>
      </td>
      <td>
        <span>Promise&lt;<a href='/docs/apis/odsp-driver-definitions/iodspurlparts-interface'>IOdspUrlParts</a> &#124; undefined&gt;</span>
      </td>
      <td>
        Breaks an ODSP URL into its parts, extracting the site, drive ID, and item ID. Returns undefined for invalid/malformed URLs.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#isodcorigin-function'>isOdcOrigin</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Checks whether or not the given URL origin is an ODC origin
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#isodcurl-function'>isOdcUrl</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Whether or not the given URL is a valid ODC URL
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#isspourl-function'>isSpoUrl</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Whether or not the given URL is a valid SPO/ODB URL
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#parsecompactsnapshotresponse-function'>parseCompactSnapshotResponse</a>
      </td>
      <td>
        <span>ISnapshotContentsWithProps</span>
      </td>
      <td>
        Converts snapshot from binary compact representation to tree/blobs/ops.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#prefetchlatestsnapshot-function'>prefetchLatestSnapshot</a>
      </td>
      <td>
        <span>Promise&lt;boolean&gt;</span>
      </td>
      <td>
        Function to prefetch the snapshot and cached it in the persistant cache, so that when the container is loaded the cached latest snapshot could be used and removes the network call from the critical path.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#storelocatorinodspurl-function'>storeLocatorInOdspUrl</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Embeds Fluid data store locator data into given ODSP url
      </td>
    </tr>
  </tbody>
</table>

## Variables

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Variable
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#locatorqueryparamname-variable'>locatorQueryParamName</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#odcapisiteorigin-variable'>OdcApiSiteOrigin</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#odcfilesiteorigin-variable'>OdcFileSiteOrigin</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Enumeration Details

### ClpCompliantAppHeader {#clpcompliantappheader-enum}

#### Signature {#clpcompliantappheader-signature}

```typescript
export declare enum ClpCompliantAppHeader
```

#### Flags

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Flag
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#clpcompliantappheader-isclpcompliantapp-enummember'>isClpCompliantApp</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

##### isClpCompliantApp {#clpcompliantappheader-isclpcompliantapp-enummember}

###### Signature {#isclpcompliantapp-signature}

```typescript
isClpCompliantApp = "X-CLP-Compliant-App"
```

### SharingLinkHeader {#sharinglinkheader-enum}

#### Signature {#sharinglinkheader-signature}

```typescript
export declare enum SharingLinkHeader
```

#### Flags

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Flag
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver#sharinglinkheader-issharinglinktoredeem-enummember'>isSharingLinkToRedeem</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

##### isSharingLinkToRedeem {#sharinglinkheader-issharinglinktoredeem-enummember}

###### Signature {#issharinglinktoredeem-signature}

```typescript
isSharingLinkToRedeem = "isSharingLinkToRedeem"
```

## Function Details

### checkUrl {#checkurl-function}

A check that returns DriverPreCheckInfo if the URL format is likely supported by this driver. Note that returning information here is NOT a full guarantee that resolve will ultimately be successful. Instead, this should be used as a lightweight check that can filter out easily detectable unsupported URLs before the entire Fluid loading process needs to be kicked off.

#### Signature {#checkurl-signature}

```typescript
export declare function checkUrl(documentUrl: URL): DriverPreCheckInfo | undefined;
```

#### Parameters {#checkurl-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        documentUrl
      </td>
      <td>
        <span>URL</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#checkurl-returns}

**Return type:** [DriverPreCheckInfo](/docs/apis/driver-definitions/driverprecheckinfo-interface) \| undefined

### createLocalOdspDocumentServiceFactory {#createlocalodspdocumentservicefactory-function}

#### Signature {#createlocalodspdocumentservicefactory-signature}

```typescript
export declare function createLocalOdspDocumentServiceFactory(localSnapshot: Uint8Array | string): IDocumentServiceFactory;
```

#### Parameters {#createlocalodspdocumentservicefactory-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        localSnapshot
      </td>
      <td>
        <span>Uint8Array &#124; string</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#createlocalodspdocumentservicefactory-returns}

**Return type:** [IDocumentServiceFactory](/docs/apis/driver-definitions/idocumentservicefactory-interface)

### createOdspCreateContainerRequest {#createodspcreatecontainerrequest-function}

Create the request object with url and headers for creating a new file on OneDrive Sharepoint

#### Signature {#createodspcreatecontainerrequest-signature}

```typescript
export declare function createOdspCreateContainerRequest(siteUrl: string, driveId: string, filePath: string, fileName: string, createShareLinkType?: ShareLinkTypes | ISharingLinkKind): IRequest;
```

#### Parameters {#createodspcreatecontainerrequest-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        siteUrl
      </td>
      <td>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Base url for OneDrive
      </td>
    </tr>
    <tr>
      <td>
        driveId
      </td>
      <td>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        drive identifier
      </td>
    </tr>
    <tr>
      <td>
        filePath
      </td>
      <td>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        path where file needs to be created
      </td>
    </tr>
    <tr>
      <td>
        fileName
      </td>
      <td>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        name of the new file to be created
      </td>
    </tr>
    <tr>
      <td>
        createShareLinkType
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver-definitions#sharelinktypes-enum'>ShareLinkTypes</a> &#124; <a href='/docs/apis/odsp-driver-definitions/isharinglinkkind-interface'>ISharingLinkKind</a></span>
      </td>
      <td>
        type of sharing link you would like to create for this file. ShareLinkTypes will be deprecated soon, so for any new implementation please provide createShareLinkType of type ShareLink
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#createodspcreatecontainerrequest-returns}

**Return type:** [IRequest](/docs/apis/core-interfaces/irequest-interface)

### createOdspUrl {#createodspurl-function}

Encodes ODC/SPO information into a URL format that can be handled by the Loader

#### Signature {#createodspurl-signature}

```typescript
export declare function createOdspUrl(l: OdspFluidDataStoreLocator): string;
```

#### Parameters {#createodspurl-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        l
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver/odspfluiddatastorelocator-interface'>OdspFluidDataStoreLocator</a></span>
      </td>
      <td>
        The property bag of necessary properties to locate a Fluid data store and craft a url for it
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#createodspurl-returns}

**Return type:** string

### encodeOdspFluidDataStoreLocator {#encodeodspfluiddatastorelocator-function}

Transforms given Fluid data store locator into string that can be embedded into url

#### Signature {#encodeodspfluiddatastorelocator-signature}

```typescript
export declare function encodeOdspFluidDataStoreLocator(locator: OdspFluidDataStoreLocator): string;
```

#### Parameters {#encodeodspfluiddatastorelocator-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        locator
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver/odspfluiddatastorelocator-interface'>OdspFluidDataStoreLocator</a></span>
      </td>
      <td>
        describes Fluid data store locator info to be encoded
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#encodeodspfluiddatastorelocator-returns}

string representing encoded Fluid data store locator info

**Return type:** string

### getApiRoot {#getapiroot-function}

Gets the correct API root for the given ODSP url, e.g. 'https://foo-my.sharepoint.com/\_api/v2.1'

#### Signature {#getapiroot-signature}

```typescript
export declare function getApiRoot(origin: string): string;
```

#### Parameters {#getapiroot-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        origin
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        The URL origin
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getapiroot-returns}

**Return type:** string

### getHashedDocumentId {#gethasheddocumentid-function}

#### Signature {#gethasheddocumentid-signature}

```typescript
export declare function getHashedDocumentId(driveId: string, itemId: string): Promise<string>;
```

#### Parameters {#gethasheddocumentid-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        driveId
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        itemId
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#gethasheddocumentid-returns}

**Return type:** Promise&lt;string&gt;

### getLocatorFromOdspUrl {#getlocatorfromodspurl-function}

Extract ODSP Fluid data store locator object from given ODSP url. This extracts things like driveId, ItemId, siteUrl etc from a url where these are encoded in nav query param.

#### Signature {#getlocatorfromodspurl-signature}

```typescript
export declare function getLocatorFromOdspUrl(url: URL): OdspFluidDataStoreLocator | undefined;
```

#### Parameters {#getlocatorfromodspurl-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        url
      </td>
      <td>
        <span>URL</span>
      </td>
      <td>
        ODSP url representing Fluid file link
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getlocatorfromodspurl-returns}

object representing Fluid data store location in ODSP terms

**Return type:** [OdspFluidDataStoreLocator](/docs/apis/odsp-driver/odspfluiddatastorelocator-interface) \| undefined

### getOdspUrlParts {#getodspurlparts-function}

Breaks an ODSP URL into its parts, extracting the site, drive ID, and item ID. Returns undefined for invalid/malformed URLs.

#### Signature {#getodspurlparts-signature}

```typescript
export declare function getOdspUrlParts(url: URL): Promise<IOdspUrlParts | undefined>;
```

#### Parameters {#getodspurlparts-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        url
      </td>
      <td>
        <span>URL</span>
      </td>
      <td>
        The (raw) URL to parse
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getodspurlparts-returns}

**Return type:** Promise&lt;[IOdspUrlParts](/docs/apis/odsp-driver-definitions/iodspurlparts-interface) \| undefined&gt;

### isOdcOrigin {#isodcorigin-function}

Checks whether or not the given URL origin is an ODC origin

#### Signature {#isodcorigin-signature}

```typescript
export declare function isOdcOrigin(origin: string): boolean;
```

#### Parameters {#isodcorigin-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        origin
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        The URL origin to check
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#isodcorigin-returns}

**Return type:** boolean

### isOdcUrl {#isodcurl-function}

Whether or not the given URL is a valid ODC URL

#### Signature {#isodcurl-signature}

```typescript
export declare function isOdcUrl(url: string | URL): boolean;
```

#### Parameters {#isodcurl-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        url
      </td>
      <td>
        <span>string &#124; URL</span>
      </td>
      <td>
        The URL to check
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#isodcurl-returns}

**Return type:** boolean

### isSpoUrl {#isspourl-function}

Whether or not the given URL is a valid SPO/ODB URL

#### Signature {#isspourl-signature}

```typescript
export declare function isSpoUrl(url: string): boolean;
```

#### Parameters {#isspourl-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        url
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        The URL to check
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#isspourl-returns}

**Return type:** boolean

### parseCompactSnapshotResponse {#parsecompactsnapshotresponse-function}

Converts snapshot from binary compact representation to tree/blobs/ops.

#### Signature {#parsecompactsnapshotresponse-signature}

```typescript
export declare function parseCompactSnapshotResponse(buffer: Uint8Array, logger: ITelemetryLoggerExt): ISnapshotContentsWithProps;
```

#### Parameters {#parsecompactsnapshotresponse-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        buffer
      </td>
      <td>
        <span>Uint8Array</span>
      </td>
      <td>
        Compact snapshot to be parsed into tree/blobs/ops.
      </td>
    </tr>
    <tr>
      <td>
        logger
      </td>
      <td>
        <span><a href='/docs/apis/telemetry-utils/itelemetryloggerext-interface'>ITelemetryLoggerExt</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#parsecompactsnapshotresponse-returns}

- tree, blobs and ops from the snapshot.

**Return type:** ISnapshotContentsWithProps

### prefetchLatestSnapshot {#prefetchlatestsnapshot-function}

Function to prefetch the snapshot and cached it in the persistant cache, so that when the container is loaded the cached latest snapshot could be used and removes the network call from the critical path.

#### Signature {#prefetchlatestsnapshot-signature}

```typescript
export declare function prefetchLatestSnapshot(resolvedUrl: IResolvedUrl, getStorageToken: TokenFetcher<OdspResourceTokenFetchOptions>, persistedCache: IPersistedCache, forceAccessTokenViaAuthorizationHeader: boolean, logger: ITelemetryBaseLogger, hostSnapshotFetchOptions: ISnapshotOptions | undefined, enableRedeemFallback?: boolean, fetchBinarySnapshotFormat?: boolean, snapshotFormatFetchType?: SnapshotFormatSupportType, odspDocumentServiceFactory?: OdspDocumentServiceFactory): Promise<boolean>;
```

#### Parameters {#prefetchlatestsnapshot-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        resolvedUrl
      </td>
      <td>
      </td>
      <td>
        <span>IResolvedUrl</span>
      </td>
      <td>
        Resolved url to fetch the snapshot.
      </td>
    </tr>
    <tr>
      <td>
        getStorageToken
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver-definitions#tokenfetcher-typealias'>TokenFetcher</a>&lt;<a href='/docs/apis/odsp-driver-definitions/odspresourcetokenfetchoptions-interface'>OdspResourceTokenFetchOptions</a>&gt;</span>
      </td>
      <td>
        function that can provide the storage token for a given site. This is is also referred to as the &quot;VROOM&quot; token in SPO.
      </td>
    </tr>
    <tr>
      <td>
        persistedCache
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver-definitions/ipersistedcache-interface'>IPersistedCache</a></span>
      </td>
      <td>
        Cache to store the fetched snapshot.
      </td>
    </tr>
    <tr>
      <td>
        forceAccessTokenViaAuthorizationHeader
      </td>
      <td>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        whether to force passing given token via authorization header.
      </td>
    </tr>
    <tr>
      <td>
        logger
      </td>
      <td>
      </td>
      <td>
        <span>ITelemetryBaseLogger</span>
      </td>
      <td>
        Logger to have telemetry events.
      </td>
    </tr>
    <tr>
      <td>
        hostSnapshotFetchOptions
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver-definitions/isnapshotoptions-interface'>ISnapshotOptions</a> &#124; undefined</span>
      </td>
      <td>
        Options to fetch the snapshot if any. Otherwise default will be used.
      </td>
    </tr>
    <tr>
      <td>
        enableRedeemFallback
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        True to have the sharing link redeem fallback in case the Trees Latest/Redeem 1RT call fails with redeem error. During fallback it will first redeem the sharing link and then make the Trees latest call. Note: this can be considered deprecated - it will be replaced with <code>snapshotFormatFetchType</code>.
      </td>
    </tr>
    <tr>
      <td>
        fetchBinarySnapshotFormat
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Control if we want to fetch binary format snapshot.
      </td>
    </tr>
    <tr>
      <td>
        snapshotFormatFetchType
      </td>
      <td>
        optional
      </td>
      <td>
        <span>SnapshotFormatSupportType</span>
      </td>
      <td>
        Snapshot format to fetch.
      </td>
    </tr>
    <tr>
      <td>
        odspDocumentServiceFactory
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver/odspdocumentservicefactory-class'>OdspDocumentServiceFactory</a></span>
      </td>
      <td>
        factory to access the non persistent cache and store the prefetch promise.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#prefetchlatestsnapshot-returns}

- True if the snapshot is cached, false otherwise.

**Return type:** Promise&lt;boolean&gt;

### storeLocatorInOdspUrl {#storelocatorinodspurl-function}

Embeds Fluid data store locator data into given ODSP url

#### Signature {#storelocatorinodspurl-signature}

```typescript
export declare function storeLocatorInOdspUrl(url: URL, locator: OdspFluidDataStoreLocator): void;
```

#### Parameters {#storelocatorinodspurl-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        url
      </td>
      <td>
        <span>URL</span>
      </td>
      <td>
        file url in ODSP format (can be either canonical or share link)
      </td>
    </tr>
    <tr>
      <td>
        locator
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver/odspfluiddatastorelocator-interface'>OdspFluidDataStoreLocator</a></span>
      </td>
      <td>
        object representing Fluid data store location in ODSP terms
      </td>
    </tr>
  </tbody>
</table>

## Variable Details

### locatorQueryParamName {#locatorqueryparamname-variable}

#### Signature {#locatorqueryparamname-signature}

```typescript
locatorQueryParamName = "nav"
```

### OdcApiSiteOrigin {#odcapisiteorigin-variable}

#### Signature {#odcapisiteorigin-signature}

```typescript
OdcApiSiteOrigin = "https://my.microsoftpersonalcontent.com"
```

### OdcFileSiteOrigin {#odcfilesiteorigin-variable}

#### Signature {#odcfilesiteorigin-signature}

```typescript
OdcFileSiteOrigin = "https://1drv.ms"
```
