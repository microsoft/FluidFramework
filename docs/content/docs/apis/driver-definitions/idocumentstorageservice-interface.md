{
  "title": "IDocumentStorageService Interface",
  "summary": "Interface to provide access to snapshots saved for a shared object",
  "kind": "Interface",
  "members": {
    "MethodSignature": {
      "createBlob": "/docs/apis/driver-definitions/idocumentstorageservice-interface#createblob-methodsignature",
      "downloadSummary": "/docs/apis/driver-definitions/idocumentstorageservice-interface#downloadsummary-methodsignature",
      "getSnapshotTree": "/docs/apis/driver-definitions/idocumentstorageservice-interface#getsnapshottree-methodsignature",
      "getVersions": "/docs/apis/driver-definitions/idocumentstorageservice-interface#getversions-methodsignature",
      "readBlob": "/docs/apis/driver-definitions/idocumentstorageservice-interface#readblob-methodsignature",
      "uploadSummaryWithContext": "/docs/apis/driver-definitions/idocumentstorageservice-interface#uploadsummarywithcontext-methodsignature"
    },
    "PropertySignature": {
      "policies": "/docs/apis/driver-definitions/idocumentstorageservice-interface#policies-propertysignature",
      "repositoryUrl": "/docs/apis/driver-definitions/idocumentstorageservice-interface#repositoryurl-propertysignature"
    }
  },
  "package": "@fluidframework/driver-definitions",
  "unscopedPackageName": "driver-definitions"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

Interface to provide access to snapshots saved for a shared object

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

## Signature {#idocumentstorageservice-signature}

```typescript
export interface IDocumentStorageService extends Partial<IDisposable>
```

**Extends:** Partial&lt;[IDisposable](/docs/apis/core-interfaces/idisposable-interface)&gt;

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Alerts
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/driver-definitions/idocumentstorageservice-interface#policies-propertysignature'>policies</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>optional</code>, <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/driver-definitions/idocumentstorageservicepolicies-interface'>IDocumentStorageServicePolicies</a></span>
      </td>
      <td>
        Policies implemented/instructed by driver.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/driver-definitions/idocumentstorageservice-interface#repositoryurl-propertysignature'>repositoryUrl</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Alerts
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/driver-definitions/idocumentstorageservice-interface#createblob-methodsignature'>createBlob(file)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>Promise&lt;ICreateBlobResponse&gt;</span>
      </td>
      <td>
        Creates a blob out of the given buffer
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/driver-definitions/idocumentstorageservice-interface#downloadsummary-methodsignature'>downloadSummary(handle)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>Promise&lt;ISummaryTree&gt;</span>
      </td>
      <td>
        Retrieves the commit that matches the packfile handle. If the packfile has already been committed and the server has deleted it this call may result in a broken promise.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/driver-definitions/idocumentstorageservice-interface#getsnapshottree-methodsignature'>getSnapshotTree(version, scenarioName)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>Promise&lt;ISnapshotTree &#124; null&gt;</span>
      </td>
      <td>
        Returns the snapshot tree.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/driver-definitions/idocumentstorageservice-interface#getversions-methodsignature'>getVersions(versionId, count, scenarioName, fetchSource)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>Promise&lt;IVersion[]&gt;</span>
      </td>
      <td>
        Retrieves all versions of the document starting at the specified versionId - or null if from the head
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/driver-definitions/idocumentstorageservice-interface#readblob-methodsignature'>readBlob(id)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>Promise&lt;ArrayBufferLike&gt;</span>
      </td>
      <td>
        Reads the object with the given ID, returns content in arrayBufferLike
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/driver-definitions/idocumentstorageservice-interface#uploadsummarywithcontext-methodsignature'>uploadSummaryWithContext(summary, context)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>Promise&lt;string&gt;</span>
      </td>
      <td>
        Uploads a summary tree to storage using the given context for reference of previous summary handle. The ISummaryHandles in the uploaded tree should have paths to indicate which summary object they are referencing from the previously acked summary. Returns the uploaded summary handle.
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### policies (ALPHA) {#policies-propertysignature}

Policies implemented/instructed by driver.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#policies-signature}

```typescript
readonly policies?: IDocumentStorageServicePolicies;
```

### repositoryUrl (ALPHA) {#repositoryurl-propertysignature}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#repositoryurl-signature}

```typescript
repositoryUrl: string;
```

## Method Details

### createBlob (ALPHA) {#createblob-methodsignature}

Creates a blob out of the given buffer

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#createblob-signature}

```typescript
createBlob(file: ArrayBufferLike): Promise<ICreateBlobResponse>;
```

#### Parameters {#createblob-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        file
      </td>
      <td>
        <span>ArrayBufferLike</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#createblob-returns}

**Return type:** Promise&lt;ICreateBlobResponse&gt;

### downloadSummary (ALPHA) {#downloadsummary-methodsignature}

Retrieves the commit that matches the packfile handle. If the packfile has already been committed and the server has deleted it this call may result in a broken promise.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#downloadsummary-signature}

```typescript
downloadSummary(handle: ISummaryHandle): Promise<ISummaryTree>;
```

#### Parameters {#downloadsummary-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        handle
      </td>
      <td>
        <span>ISummaryHandle</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#downloadsummary-returns}

**Return type:** Promise&lt;ISummaryTree&gt;

### getSnapshotTree (ALPHA) {#getsnapshottree-methodsignature}

Returns the snapshot tree.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#getsnapshottree-signature}

```typescript
getSnapshotTree(version?: IVersion, scenarioName?: string): Promise<ISnapshotTree | null>;
```

#### Parameters {#getsnapshottree-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        version
      </td>
      <td>
        optional
      </td>
      <td>
        <span>IVersion</span>
      </td>
      <td>
        Version of the snapshot to be fetched.
      </td>
    </tr>
    <tr>
      <td>
        scenarioName
      </td>
      <td>
        optional
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        scenario in which this api is called. This will be recorded by server and would help in debugging purposes to see why this call was made.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getsnapshottree-returns}

**Return type:** Promise&lt;ISnapshotTree \| null&gt;

### getVersions (ALPHA) {#getversions-methodsignature}

Retrieves all versions of the document starting at the specified versionId - or null if from the head

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#getversions-signature}

```typescript
getVersions(versionId: string | null, count: number, scenarioName?: string, fetchSource?: FetchSource): Promise<IVersion[]>;
```

#### Parameters {#getversions-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        versionId
      </td>
      <td>
      </td>
      <td>
        <span>string &#124; null</span>
      </td>
      <td>
        Version id of the requested version.
      </td>
    </tr>
    <tr>
      <td>
        count
      </td>
      <td>
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
        Number of the versions to be fetched.
      </td>
    </tr>
    <tr>
      <td>
        scenarioName
      </td>
      <td>
        optional
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        scenario in which this api is called. This will be recorded by server and would help in debugging purposes to see why this call was made.
      </td>
    </tr>
    <tr>
      <td>
        fetchSource
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/driver-definitions/fetchsource-enum'>FetchSource</a></span>
      </td>
      <td>
        Callers can specify the source of the response. For ex. Driver may choose to cache requests and serve data from cache. That will result in stale info returned. Callers can disable this functionality by passing fetchSource = noCache and ensuring that driver will return latest information from storage.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getversions-returns}

**Return type:** Promise&lt;IVersion\[\]&gt;

### readBlob (ALPHA) {#readblob-methodsignature}

Reads the object with the given ID, returns content in arrayBufferLike

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#readblob-signature}

```typescript
readBlob(id: string): Promise<ArrayBufferLike>;
```

#### Parameters {#readblob-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        id
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#readblob-returns}

**Return type:** Promise&lt;ArrayBufferLike&gt;

### uploadSummaryWithContext (ALPHA) {#uploadsummarywithcontext-methodsignature}

Uploads a summary tree to storage using the given context for reference of previous summary handle. The ISummaryHandles in the uploaded tree should have paths to indicate which summary object they are referencing from the previously acked summary. Returns the uploaded summary handle.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#uploadsummarywithcontext-signature}

```typescript
uploadSummaryWithContext(summary: ISummaryTree, context: ISummaryContext): Promise<string>;
```

#### Parameters {#uploadsummarywithcontext-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        summary
      </td>
      <td>
        <span>ISummaryTree</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        context
      </td>
      <td>
        <span><a href='/docs/apis/driver-definitions/isummarycontext-interface'>ISummaryContext</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#uploadsummarywithcontext-returns}

**Return type:** Promise&lt;string&gt;
