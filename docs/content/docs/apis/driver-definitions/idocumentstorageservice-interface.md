{
  "title": "IDocumentStorageService Interface",
  "summary": "Interface to provide access to snapshots saved for a shared object",
  "kind": "Interface",
  "members": {
    "MethodSignature": {
      "createBlob": "/docs/apis/driver-definitions/idocumentstorageservice-interface#createblob-methodsignature",
      "downloadSummary": "/docs/apis/driver-definitions/idocumentstorageservice-interface#downloadsummary-methodsignature",
      "getSnapshotTree": "/docs/apis/driver-definitions/idocumentstorageservice-interface#getsnapshottree-methodsignature",
      "getVersions": "/docs/apis/driver-definitions/idocumentstorageservice-interface#getversions-methodsignature",
      "readBlob": "/docs/apis/driver-definitions/idocumentstorageservice-interface#readblob-methodsignature",
      "uploadSummaryWithContext": "/docs/apis/driver-definitions/idocumentstorageservice-interface#uploadsummarywithcontext-methodsignature"
    },
    "PropertySignature": {
      "policies": "/docs/apis/driver-definitions/idocumentstorageservice-interface#policies-propertysignature",
      "repositoryUrl": "/docs/apis/driver-definitions/idocumentstorageservice-interface#repositoryurl-propertysignature"
    }
  },
  "package": "@fluidframework/driver-definitions",
  "unscopedPackageName": "driver-definitions"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/driver-definitions](/docs/apis/driver-definitions) &gt; [IDocumentStorageService](/docs/apis/driver-definitions/idocumentstorageservice-interface)

Interface to provide access to snapshots saved for a shared object

## Signature {#idocumentstorageservice-signature}

```typescript
export interface IDocumentStorageService extends Partial<IDisposable>
```

**Extends:** Partial&lt;[IDisposable](/docs/apis/common-definitions/idisposable-interface)

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/driver-definitions/idocumentstorageservice-interface#policies-propertysignature'>policies</a>
      </td>
      <td>
        <code>optional</code>
      </td>
      <td>
        <span><a href='/docs/apis/driver-definitions/idocumentstorageservicepolicies-interface'>IDocumentStorageServicePolicies</a></span>
      </td>
      <td>
        Policies implemented/instructed by driver.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/driver-definitions/idocumentstorageservice-interface#repositoryurl-propertysignature'>repositoryUrl</a>
      </td>
      <td>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/driver-definitions/idocumentstorageservice-interface#createblob-methodsignature'>createBlob</a>
      </td>
      <td>
        <span>Promise&lt;<a href='/docs/apis/protocol-definitions/icreateblobresponse-interface'>ICreateBlobResponse</a>&gt;</span>
      </td>
      <td>
        Creates a blob out of the given buffer
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/driver-definitions/idocumentstorageservice-interface#downloadsummary-methodsignature'>downloadSummary</a>
      </td>
      <td>
        <span>Promise&lt;<a href='/docs/apis/protocol-definitions/isummarytree-interface'>ISummaryTree</a>&gt;</span>
      </td>
      <td>
        Retrieves the commit that matches the packfile handle. If the packfile has already been committed and the server has deleted it this call may result in a broken promise.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/driver-definitions/idocumentstorageservice-interface#getsnapshottree-methodsignature'>getSnapshotTree</a>
      </td>
      <td>
        <span>Promise&lt;<a href='/docs/apis/protocol-definitions/isnapshottree-interface'>ISnapshotTree</a> &#124; null&gt;</span>
      </td>
      <td>
        Returns the snapshot tree.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/driver-definitions/idocumentstorageservice-interface#getversions-methodsignature'>getVersions</a>
      </td>
      <td>
        <span>Promise&lt;<a href='/docs/apis/protocol-definitions/iversion-interface'>IVersion</a>[]&gt;</span>
      </td>
      <td>
        Retrieves all versions of the document starting at the specified versionId - or null if from the head
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/driver-definitions/idocumentstorageservice-interface#readblob-methodsignature'>readBlob</a>
      </td>
      <td>
        <span>Promise&lt;ArrayBufferLike&gt;</span>
      </td>
      <td>
        Reads the object with the given ID, returns content in arrayBufferLike
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/driver-definitions/idocumentstorageservice-interface#uploadsummarywithcontext-methodsignature'>uploadSummaryWithContext</a>
      </td>
      <td>
        <span>Promise&lt;string&gt;</span>
      </td>
      <td>
        Uploads a summary tree to storage using the given context for reference of previous summary handle. The ISummaryHandles in the uploaded tree should have paths to indicate which summary object they are referencing from the previously acked summary. Returns the uploaded summary handle.
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### policies {#policies-propertysignature}

Policies implemented/instructed by driver.

#### Signature {#policies-signature}

```typescript
readonly policies?: IDocumentStorageServicePolicies;
```

### repositoryUrl {#repositoryurl-propertysignature}

#### Signature {#repositoryurl-signature}

```typescript
repositoryUrl: string;
```

## Method Details

### createBlob {#createblob-methodsignature}

Creates a blob out of the given buffer

#### Signature {#createblob-signature}

```typescript
createBlob(file: ArrayBufferLike): Promise<ICreateBlobResponse>;
```

#### Parameters {#createblob-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        file
      </td>
      <td>
        <span>ArrayBufferLike</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#createblob-returns}

**Return type:** Promise&lt;[ICreateBlobResponse](/docs/apis/protocol-definitions/icreateblobresponse-interface)&gt;

### downloadSummary {#downloadsummary-methodsignature}

Retrieves the commit that matches the packfile handle. If the packfile has already been committed and the server has deleted it this call may result in a broken promise.

#### Signature {#downloadsummary-signature}

```typescript
downloadSummary(handle: ISummaryHandle): Promise<ISummaryTree>;
```

#### Parameters {#downloadsummary-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        handle
      </td>
      <td>
        <span><a href='/docs/apis/protocol-definitions/isummaryhandle-interface'>ISummaryHandle</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#downloadsummary-returns}

**Return type:** Promise&lt;[ISummaryTree](/docs/apis/protocol-definitions/isummarytree-interface)&gt;

### getSnapshotTree {#getsnapshottree-methodsignature}

Returns the snapshot tree.

#### Signature {#getsnapshottree-signature}

```typescript
getSnapshotTree(version?: IVersion): Promise<ISnapshotTree | null>;
```

#### Parameters {#getsnapshottree-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        version
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/protocol-definitions/iversion-interface'>IVersion</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getsnapshottree-returns}

**Return type:** Promise&lt;[ISnapshotTree](/docs/apis/protocol-definitions/isnapshottree-interface) \| null&gt;

### getVersions {#getversions-methodsignature}

Retrieves all versions of the document starting at the specified versionId - or null if from the head

#### Signature {#getversions-signature}

```typescript
getVersions(versionId: string | null, count: number): Promise<IVersion[]>;
```

#### Parameters {#getversions-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        versionId
      </td>
      <td>
        <span>string &#124; null</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        count
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getversions-returns}

**Return type:** Promise&lt;[IVersion](/docs/apis/protocol-definitions/iversion-interface)\[\]&gt;

### readBlob {#readblob-methodsignature}

Reads the object with the given ID, returns content in arrayBufferLike

#### Signature {#readblob-signature}

```typescript
readBlob(id: string): Promise<ArrayBufferLike>;
```

#### Parameters {#readblob-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        id
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#readblob-returns}

**Return type:** Promise&lt;ArrayBufferLike&gt;

### uploadSummaryWithContext {#uploadsummarywithcontext-methodsignature}

Uploads a summary tree to storage using the given context for reference of previous summary handle. The ISummaryHandles in the uploaded tree should have paths to indicate which summary object they are referencing from the previously acked summary. Returns the uploaded summary handle.

#### Signature {#uploadsummarywithcontext-signature}

```typescript
uploadSummaryWithContext(summary: ISummaryTree, context: ISummaryContext): Promise<string>;
```

#### Parameters {#uploadsummarywithcontext-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        summary
      </td>
      <td>
        <span><a href='/docs/apis/protocol-definitions/isummarytree-interface'>ISummaryTree</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        context
      </td>
      <td>
        <span><a href='/docs/apis/driver-definitions/isummarycontext-interface'>ISummaryContext</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#uploadsummarywithcontext-returns}

**Return type:** Promise&lt;string&gt;
