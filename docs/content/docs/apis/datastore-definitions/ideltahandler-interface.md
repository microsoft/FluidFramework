{
  "title": "IDeltaHandler Interface",
  "summary": "Handler provided by shared data structure to process requests from the runtime.",
  "kind": "Interface",
  "members": {
    "MethodSignature": {
      "applyStashedOp": "/docs/apis/datastore-definitions/ideltahandler-interface#applystashedop-methodsignature",
      "reSubmit": "/docs/apis/datastore-definitions/ideltahandler-interface#resubmit-methodsignature",
      "rollback": "/docs/apis/datastore-definitions/ideltahandler-interface#rollback-methodsignature",
      "setConnectionState": "/docs/apis/datastore-definitions/ideltahandler-interface#setconnectionstate-methodsignature"
    },
    "PropertySignature": {
      "process": "/docs/apis/datastore-definitions/ideltahandler-interface#process-propertysignature"
    }
  },
  "package": "@fluidframework/datastore-definitions",
  "unscopedPackageName": "datastore-definitions"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

Handler provided by shared data structure to process requests from the runtime.

## Signature {#ideltahandler-signature}

```typescript
export interface IDeltaHandler
```

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/datastore-definitions/ideltahandler-interface#process-propertysignature'>process</a>
      </td>
      <td>
        <span>(message: ISequencedDocumentMessage, local: boolean, localOpMetadata: unknown) =&gt; void</span>
      </td>
      <td>
        Processes the op.
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/datastore-definitions/ideltahandler-interface#applystashedop-methodsignature'>applyStashedOp(message)</a>
      </td>
      <td>
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
        Apply changes from an op. Used when rehydrating an attached container with pending changes. This prepares the SharedObject for seeing an ACK for the op or resubmitting the op upon reconnection.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/datastore-definitions/ideltahandler-interface#resubmit-methodsignature'>reSubmit(message, localOpMetadata)</a>
      </td>
      <td>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Called when the runtime asks the client to resubmit an op. This may be because the Container reconnected and this op was not acked. The client can choose to resubmit the same message, submit different / multiple messages or not submit anything at all.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/datastore-definitions/ideltahandler-interface#rollback-methodsignature'>rollback(message, localOpMetadata)</a>
      </td>
      <td>
        <code>optional</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Revert a local op.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/datastore-definitions/ideltahandler-interface#setconnectionstate-methodsignature'>setConnectionState(connected)</a>
      </td>
      <td>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        State change events to indicate changes to the delta connection
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### process {#process-propertysignature}

Processes the op.

#### Signature {#process-signature}

```typescript
process: (message: ISequencedDocumentMessage, local: boolean, localOpMetadata: unknown) => void;
```

## Method Details

### applyStashedOp {#applystashedop-methodsignature}

Apply changes from an op. Used when rehydrating an attached container with pending changes. This prepares the SharedObject for seeing an ACK for the op or resubmitting the op upon reconnection.

#### Signature {#applystashedop-signature}

```typescript
applyStashedOp(message: any): unknown;
```

#### Parameters {#applystashedop-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        message
      </td>
      <td>
        <span>any</span>
      </td>
      <td>
        Contents of a stashed op.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#applystashedop-returns}

localMetadata of the op, to be passed to process() or resubmit() when the op is ACKed or resubmitted, respectively

**Return type:** unknown

### reSubmit {#resubmit-methodsignature}

Called when the runtime asks the client to resubmit an op. This may be because the Container reconnected and this op was not acked. The client can choose to resubmit the same message, submit different / multiple messages or not submit anything at all.

#### Signature {#resubmit-signature}

```typescript
reSubmit(message: any, localOpMetadata: unknown): void;
```

#### Parameters {#resubmit-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        message
      </td>
      <td>
        <span>any</span>
      </td>
      <td>
        The original message that was submitted.
      </td>
    </tr>
    <tr>
      <td>
        localOpMetadata
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
        The local metadata associated with the original message.
      </td>
    </tr>
  </tbody>
</table>

### rollback {#rollback-methodsignature}

Revert a local op.

#### Signature {#rollback-signature}

```typescript
rollback?(message: any, localOpMetadata: unknown): void;
```

#### Parameters {#rollback-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        message
      </td>
      <td>
        <span>any</span>
      </td>
      <td>
        The original message that was submitted.
      </td>
    </tr>
    <tr>
      <td>
        localOpMetadata
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
        The local metadata associated with the original message.
      </td>
    </tr>
  </tbody>
</table>

### setConnectionState {#setconnectionstate-methodsignature}

State change events to indicate changes to the delta connection

#### Signature {#setconnectionstate-signature}

```typescript
setConnectionState(connected: boolean): void;
```

#### Parameters {#setconnectionstate-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        connected
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        true if connected, false otherwise
      </td>
    </tr>
  </tbody>
</table>
