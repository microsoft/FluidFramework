{
  "title": "SharedObjectCore Class",
  "summary": "Base class from which all shared objects derive.",
  "kind": "Class",
  "members": {
    "Constructor": {
      "(constructor)": "/docs/apis/shared-object-base/sharedobjectcore-class#_constructor_-constructor"
    },
    "Method": {
      "applyStashedOp": "/docs/apis/shared-object-base/sharedobjectcore-class#applystashedop-method",
      "bindToContext": "/docs/apis/shared-object-base/sharedobjectcore-class#bindtocontext-method",
      "connect": "/docs/apis/shared-object-base/sharedobjectcore-class#connect-method",
      "didAttach": "/docs/apis/shared-object-base/sharedobjectcore-class#didattach-method",
      "dirty": "/docs/apis/shared-object-base/sharedobjectcore-class#dirty-method",
      "emit": "/docs/apis/shared-object-base/sharedobjectcore-class#emit-method",
      "getAttachSummary": "/docs/apis/shared-object-base/sharedobjectcore-class#getattachsummary-method",
      "getGCData": "/docs/apis/shared-object-base/sharedobjectcore-class#getgcdata-method",
      "handleDecoded": "/docs/apis/shared-object-base/sharedobjectcore-class#handledecoded-method",
      "initializeLocal": "/docs/apis/shared-object-base/sharedobjectcore-class#initializelocal-method",
      "initializeLocalCore": "/docs/apis/shared-object-base/sharedobjectcore-class#initializelocalcore-method",
      "isAttached": "/docs/apis/shared-object-base/sharedobjectcore-class#isattached-method",
      "load": "/docs/apis/shared-object-base/sharedobjectcore-class#load-method",
      "loadCore": "/docs/apis/shared-object-base/sharedobjectcore-class#loadcore-method",
      "newAckBasedPromise": "/docs/apis/shared-object-base/sharedobjectcore-class#newackbasedpromise-method",
      "onConnect": "/docs/apis/shared-object-base/sharedobjectcore-class#onconnect-method",
      "onDisconnect": "/docs/apis/shared-object-base/sharedobjectcore-class#ondisconnect-method",
      "processCore": "/docs/apis/shared-object-base/sharedobjectcore-class#processcore-method",
      "reSubmitCore": "/docs/apis/shared-object-base/sharedobjectcore-class#resubmitcore-method",
      "rollback": "/docs/apis/shared-object-base/sharedobjectcore-class#rollback-method",
      "submitLocalMessage": "/docs/apis/shared-object-base/sharedobjectcore-class#submitlocalmessage-method",
      "summarize": "/docs/apis/shared-object-base/sharedobjectcore-class#summarize-method"
    },
    "Property": {
      "attributes": "/docs/apis/shared-object-base/sharedobjectcore-class#attributes-property",
      "connected": "/docs/apis/shared-object-base/sharedobjectcore-class#connected-property",
      "handle": "/docs/apis/shared-object-base/sharedobjectcore-class#handle-property",
      "id": "/docs/apis/shared-object-base/sharedobjectcore-class#id-property",
      "IFluidLoadable": "/docs/apis/shared-object-base/sharedobjectcore-class#ifluidloadable-property",
      "logger": "/docs/apis/shared-object-base/sharedobjectcore-class#logger-property",
      "runtime": "/docs/apis/shared-object-base/sharedobjectcore-class#runtime-property"
    }
  },
  "package": "@fluidframework/shared-object-base",
  "unscopedPackageName": "shared-object-base"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

Base class from which all shared objects derive.

## Signature {#sharedobjectcore-signature}

```typescript
export declare abstract class SharedObjectCore<TEvent extends ISharedObjectEvents = ISharedObjectEvents> extends EventEmitterWithErrorHandling<TEvent> implements ISharedObject<TEvent>
```

**Extends:** [EventEmitterWithErrorHandling](/docs/apis/telemetry-utils/eventemitterwitherrorhandling-class)&lt;TEvent&gt;

**Implements:** [ISharedObject](/docs/apis/shared-object-base/isharedobject-interface)&lt;TEvent&gt;

### Type Parameters

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        TEvent
      </td>
      <td>
        optional
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Constructors

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Constructor
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#_constructor_-constructor'>(constructor)(id, runtime, attributes)</a>
      </td>
      <td>
        Constructs a new instance of the <code>SharedObjectCore</code> class
      </td>
    </tr>
  </tbody>
</table>

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#attributes-property'>attributes</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ichannelattributes-interface'>IChannelAttributes</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#connected-property'>connected</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Gets the connection state
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#handle-property'>handle</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/core-interfaces/ifluidhandle-interface'>IFluidHandle</a></span>
      </td>
      <td>
        The handle referring to this SharedObject
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#id-property'>id</a>
      </td>
      <td>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#ifluidloadable-property'>IFluidLoadable</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>this</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#logger-property'>logger</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/telemetry-utils/itelemetryloggerext-interface'>ITelemetryLoggerExt</a></span>
      </td>
      <td>
        Telemetry logger for the shared object
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#runtime-property'>runtime</a>
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ifluiddatastoreruntime-interface'>IFluidDataStoreRuntime</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#applystashedop-method'>applyStashedOp(content)</a>
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
        Apply changes from an op. Used when rehydrating an attached container with pending changes. This prepares the SharedObject for seeing an ACK for the op or resubmitting the op upon reconnection.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#bindtocontext-method'>bindToContext()</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Binds the given shared object to its containing data store runtime, causing it to attach once the runtime attaches.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#connect-method'>connect(services)</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Enables the channel to send and receive ops.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#didattach-method'>didAttach()</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Allows the distributive data type the ability to perform custom processing once an attach has happened. Also called after non-local data type get loaded.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#dirty-method'>dirty()</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Marks this object as dirty so that it is part of the next summary. It is called by a SharedSummaryBlock that want to be part of summary but does not generate ops.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#emit-method'>emit(event, args)</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Emit an event. This function is only intended for use by DDS classes that extend SharedObject/SharedObjectCore, specifically to emit events that are part of the public interface of the DDS (i.e. those that can have listeners attached to them by the consumers of the DDS). It should not be called from outside the class or to emit events which are only internal to the DDS. Support for calling it from outside the DDS instance might be removed in the future.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#getattachsummary-method'>getAttachSummary(fullTree, trackState, telemetryContext)</a>
      </td>
      <td>
        <span><a href='/docs/apis/runtime-definitions/isummarytreewithstats-interface'>ISummaryTreeWithStats</a></span>
      </td>
      <td>
        Generates summary of the channel synchronously. It is called when an <code>attach message</code> for a local channel is generated. In other words, when the channel is being attached to make it visible to other clients.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#getgcdata-method'>getGCData(fullGC)</a>
      </td>
      <td>
        <span><a href='/docs/apis/runtime-definitions/igarbagecollectiondata-interface'>IGarbageCollectionData</a></span>
      </td>
      <td>
        Returns the GC data for this shared object. It contains a list of GC nodes that contains references to other GC nodes.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#handledecoded-method'>handleDecoded(decodedHandle)</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Called when a handle is decoded by this object. A handle in the object's data represents an outbound reference to another object in the container.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#initializelocal-method'>initializeLocal()</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Initializes the object as a local, non-shared object. This object can become shared after it is attached to the document.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#initializelocalcore-method'>initializeLocalCore()</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Allows the distributed data type to perform custom local loading.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#isattached-method'>isAttached()</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Checks if the channel is attached to storage.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#load-method'>load(services)</a>
      </td>
      <td>
        <span>Promise&lt;void&gt;</span>
      </td>
      <td>
        A shared object, after construction, can either be loaded in the case that it is already part of a shared document. Or later attached if it is being newly added.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#loadcore-method'>loadCore(services)</a>
      </td>
      <td>
        <span>Promise&lt;void&gt;</span>
      </td>
      <td>
        Allows the distributed data type to perform custom loading
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#newackbasedpromise-method'>newAckBasedPromise(executor)</a>
      </td>
      <td>
        <span>Promise&lt;T&gt;</span>
      </td>
      <td>
        Promises that are waiting for an ack from the server before resolving should use this instead of new Promise. It ensures that if something changes that will interrupt that ack (e.g. the FluidDataStoreRuntime disposes), the Promise will reject. If runtime is disposed when this call is made, executor is not run and promise is rejected right away.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#onconnect-method'>onConnect()</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Called when the object has fully connected to the delta stream Default implementation for DDS, override if different behavior is required.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#ondisconnect-method'>onDisconnect()</a>
      </td>
      <td>
        <span>any</span>
      </td>
      <td>
        Called when the object has disconnected from the delta stream.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#processcore-method'>processCore(message, local, localOpMetadata)</a>
      </td>
      <td>
        <span>any</span>
      </td>
      <td>
        Derived classes must override this to do custom processing on a remote message.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#resubmitcore-method'>reSubmitCore(content, localOpMetadata)</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Called when a message has to be resubmitted. This typically happens after a reconnection for unacked messages. The default implementation here is to resubmit the same message. The client can override if different behavior is required. It can choose to resubmit the same message, submit different / multiple messages or not submit anything at all.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#rollback-method'>rollback(content, localOpMetadata)</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Revert an op
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#submitlocalmessage-method'>submitLocalMessage(content, localOpMetadata)</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Submits a message by the local client to the runtime.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobjectcore-class#summarize-method'>summarize(fullTree, trackState, telemetryContext)</a>
      </td>
      <td>
        <span>Promise&lt;<a href='/docs/apis/runtime-definitions/isummarytreewithstats-interface'>ISummaryTreeWithStats</a>&gt;</span>
      </td>
      <td>
        Generates summary of the channel asynchronously. This should not be called where the channel can be modified while summarization is in progress.
      </td>
    </tr>
  </tbody>
</table>

## Constructor Details

### (constructor) {#_constructor_-constructor}

Constructs a new instance of the `SharedObjectCore` class

#### Signature {#_constructor_-signature}

```typescript
constructor(id: string, runtime: IFluidDataStoreRuntime, attributes: IChannelAttributes);
```

#### Parameters {#_constructor_-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        id
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        The id of the shared object
      </td>
    </tr>
    <tr>
      <td>
        runtime
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ifluiddatastoreruntime-interface'>IFluidDataStoreRuntime</a></span>
      </td>
      <td>
        The IFluidDataStoreRuntime which contains the shared object
      </td>
    </tr>
    <tr>
      <td>
        attributes
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ichannelattributes-interface'>IChannelAttributes</a></span>
      </td>
      <td>
        Attributes of the shared object
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### attributes {#attributes-property}

#### Signature {#attributes-signature}

```typescript
readonly attributes: IChannelAttributes;
```

### connected {#connected-property}

Gets the connection state

#### Signature {#connected-signature}

```typescript
get connected(): boolean;
```

### handle {#handle-property}

The handle referring to this SharedObject

#### Signature {#handle-signature}

```typescript
readonly handle: IFluidHandle;
```

### id {#id-property}

#### Signature {#id-signature}

```typescript
id: string;
```

### IFluidLoadable {#ifluidloadable-property}

#### Signature {#ifluidloadable-signature}

```typescript
get IFluidLoadable(): this;
```

### logger {#logger-property}

Telemetry logger for the shared object

#### Signature {#logger-signature}

```typescript
protected readonly logger: ITelemetryLoggerExt;
```

### runtime {#runtime-property}

#### Signature {#runtime-signature}

```typescript
protected runtime: IFluidDataStoreRuntime;
```

## Method Details

### applyStashedOp {#applystashedop-method}

Apply changes from an op. Used when rehydrating an attached container with pending changes. This prepares the SharedObject for seeing an ACK for the op or resubmitting the op upon reconnection.

#### Signature {#applystashedop-signature}

```typescript
protected abstract applyStashedOp(content: any): unknown;
```

#### Parameters {#applystashedop-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        content
      </td>
      <td>
        <span>any</span>
      </td>
      <td>
        Contents of a stashed op.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#applystashedop-returns}

localMetadata of the op, to be passed to process() or resubmit() when the op is ACKed or resubmitted, respectively

**Return type:** unknown

### bindToContext {#bindtocontext-method}

Binds the given shared object to its containing data store runtime, causing it to attach once the runtime attaches.

#### Signature {#bindtocontext-signature}

```typescript
bindToContext(): void;
```

### connect {#connect-method}

Enables the channel to send and receive ops.

#### Signature {#connect-signature}

```typescript
connect(services: IChannelServices): void;
```

#### Parameters {#connect-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        services
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ichannelservices-interface'>IChannelServices</a></span>
      </td>
      <td>
        The services to connect to.
      </td>
    </tr>
  </tbody>
</table>

### didAttach {#didattach-method}

Allows the distributive data type the ability to perform custom processing once an attach has happened. Also called after non-local data type get loaded.

#### Signature {#didattach-signature}

```typescript
protected didAttach(): void;
```

### dirty {#dirty-method}

Marks this object as dirty so that it is part of the next summary. It is called by a SharedSummaryBlock that want to be part of summary but does not generate ops.

#### Signature {#dirty-signature}

```typescript
protected dirty(): void;
```

### emit {#emit-method}

Emit an event. This function is only intended for use by DDS classes that extend SharedObject/SharedObjectCore, specifically to emit events that are part of the public interface of the DDS (i.e. those that can have listeners attached to them by the consumers of the DDS). It should not be called from outside the class or to emit events which are only internal to the DDS. Support for calling it from outside the DDS instance might be removed in the future.

#### Signature {#emit-signature}

```typescript
emit(event: EventEmitterEventType, ...args: any[]): boolean;
```

#### Parameters {#emit-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        event
      </td>
      <td>
        <span><a href='/docs/apis/client-utils#eventemittereventtype-typealias'>EventEmitterEventType</a></span>
      </td>
      <td>
        The event to emit.
      </td>
    </tr>
    <tr>
      <td>
        args
      </td>
      <td>
        <span>any[]</span>
      </td>
      <td>
        Arguments to pass to the event listeners.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#emit-returns}

`true` if the event had listeners, `false` otherwise.

**Return type:** boolean

### getAttachSummary {#getattachsummary-method}

Generates summary of the channel synchronously. It is called when an `attach message` for a local channel is generated. In other words, when the channel is being attached to make it visible to other clients.

#### Signature {#getattachsummary-signature}

```typescript
abstract getAttachSummary(fullTree?: boolean, trackState?: boolean, telemetryContext?: ITelemetryContext): ISummaryTreeWithStats;
```

#### Remarks {#getattachsummary-remarks}

Note: Since the Attach Summary is generated for local channels when making them visible to remote clients, they don't have any previous summaries to compare against. For this reason, the attach summary cannot contain summary handles (paths to sub-trees or blobs). It can, however, contain _@fluidframework/protocol-definitions\#ISummaryAttachment_ (handles to blobs uploaded async via the blob manager).

#### Parameters {#getattachsummary-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        fullTree
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        <p>
          A flag indicating whether the attempt should generate a full summary tree without any handles for unchanged subtrees.
        </p>
        <p>
          Default: <code>false</code>
        </p>
      </td>
    </tr>
    <tr>
      <td>
        trackState
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        <p>
          An optimization for tracking state of objects across summaries. If the state of an object did not change since last successful summary, an <span><i>@fluidframework/protocol-definitions#ISummaryHandle</i></span> can be used instead of re-summarizing it. If this is <code>false</code>, the expectation is that you should never send an <code>ISummaryHandle</code>, since you are not expected to track state.
        </p>
        <p>
          Note: The goal is to remove the trackState and automatically decided whether the handles will be used or not: <a href='https://github.com/microsoft/FluidFramework/issues/10455'>https://github.com/microsoft/FluidFramework/issues/10455</a>
        </p>
        <p>
          Default: <code>false</code>
        </p>
      </td>
    </tr>
    <tr>
      <td>
        telemetryContext
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/runtime-definitions/itelemetrycontext-interface'>ITelemetryContext</a></span>
      </td>
      <td>
        See <a href='/docs/apis/runtime-definitions/itelemetrycontext-interface'>ITelemetryContext</a>.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getattachsummary-returns}

A summary capturing the current state of the channel.

**Return type:** [ISummaryTreeWithStats](/docs/apis/runtime-definitions/isummarytreewithstats-interface)

### getGCData {#getgcdata-method}

Returns the GC data for this shared object. It contains a list of GC nodes that contains references to other GC nodes.

#### Signature {#getgcdata-signature}

```typescript
abstract getGCData(fullGC?: boolean): IGarbageCollectionData;
```

#### Parameters {#getgcdata-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        fullGC
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        true to bypass optimizations and force full generation of GC data.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getgcdata-returns}

**Return type:** [IGarbageCollectionData](/docs/apis/runtime-definitions/igarbagecollectiondata-interface)

### handleDecoded {#handledecoded-method}

Called when a handle is decoded by this object. A handle in the object's data represents an outbound reference to another object in the container.

#### Signature {#handledecoded-signature}

```typescript
protected handleDecoded(decodedHandle: IFluidHandle): void;
```

#### Parameters {#handledecoded-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        decodedHandle
      </td>
      <td>
        <span><a href='/docs/apis/core-interfaces/ifluidhandle-interface'>IFluidHandle</a></span>
      </td>
      <td>
        The handle of the Fluid object that is decoded.
      </td>
    </tr>
  </tbody>
</table>

### initializeLocal {#initializelocal-method}

Initializes the object as a local, non-shared object. This object can become shared after it is attached to the document.

#### Signature {#initializelocal-signature}

```typescript
initializeLocal(): void;
```

### initializeLocalCore {#initializelocalcore-method}

Allows the distributed data type to perform custom local loading.

#### Signature {#initializelocalcore-signature}

```typescript
protected initializeLocalCore(): void;
```

### isAttached {#isattached-method}

Checks if the channel is attached to storage.

#### Signature {#isattached-signature}

```typescript
isAttached(): boolean;
```

#### Returns {#isattached-returns}

True iff the channel is attached.

**Return type:** boolean

### load {#load-method}

A shared object, after construction, can either be loaded in the case that it is already part of a shared document. Or later attached if it is being newly added.

#### Signature {#load-signature}

```typescript
load(services: IChannelServices): Promise<void>;
```

#### Parameters {#load-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        services
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ichannelservices-interface'>IChannelServices</a></span>
      </td>
      <td>
        Services used by the shared object
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#load-returns}

**Return type:** Promise&lt;void&gt;

### loadCore {#loadcore-method}

Allows the distributed data type to perform custom loading

#### Signature {#loadcore-signature}

```typescript
protected abstract loadCore(services: IChannelStorageService): Promise<void>;
```

#### Parameters {#loadcore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        services
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ichannelstorageservice-interface'>IChannelStorageService</a></span>
      </td>
      <td>
        Storage used by the shared object
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#loadcore-returns}

**Return type:** Promise&lt;void&gt;

### newAckBasedPromise {#newackbasedpromise-method}

Promises that are waiting for an ack from the server before resolving should use this instead of new Promise. It ensures that if something changes that will interrupt that ack (e.g. the FluidDataStoreRuntime disposes), the Promise will reject. If runtime is disposed when this call is made, executor is not run and promise is rejected right away.

#### Signature {#newackbasedpromise-signature}

```typescript
protected newAckBasedPromise<T>(executor: (resolve: (value: T | PromiseLike<T>) => void, reject: (reason?: any) => void) => void): Promise<T>;
```

#### Parameters {#newackbasedpromise-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        executor
      </td>
      <td>
        <span>(resolve: (value: T &#124; PromiseLike&lt;T&gt;) =&gt; void, reject: (reason?: any) =&gt; void) =&gt; void</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#newackbasedpromise-returns}

**Return type:** Promise&lt;T&gt;

### onConnect {#onconnect-method}

Called when the object has fully connected to the delta stream Default implementation for DDS, override if different behavior is required.

#### Signature {#onconnect-signature}

```typescript
protected onConnect(): void;
```

### onDisconnect {#ondisconnect-method}

Called when the object has disconnected from the delta stream.

#### Signature {#ondisconnect-signature}

```typescript
protected abstract onDisconnect(): any;
```

#### Returns {#ondisconnect-returns}

**Return type:** any

### processCore {#processcore-method}

Derived classes must override this to do custom processing on a remote message.

#### Signature {#processcore-signature}

```typescript
protected abstract processCore(message: ISequencedDocumentMessage, local: boolean, localOpMetadata: unknown): any;
```

#### Parameters {#processcore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        message
      </td>
      <td>
        <span>ISequencedDocumentMessage</span>
      </td>
      <td>
        The message to process
      </td>
    </tr>
    <tr>
      <td>
        local
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        True if the shared object is local
      </td>
    </tr>
    <tr>
      <td>
        localOpMetadata
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
        For local client messages, this is the metadata that was submitted with the message. For messages from a remote client, this will be undefined.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#processcore-returns}

**Return type:** any

### reSubmitCore {#resubmitcore-method}

Called when a message has to be resubmitted. This typically happens after a reconnection for unacked messages. The default implementation here is to resubmit the same message. The client can override if different behavior is required. It can choose to resubmit the same message, submit different / multiple messages or not submit anything at all.

#### Signature {#resubmitcore-signature}

```typescript
protected reSubmitCore(content: any, localOpMetadata: unknown): void;
```

#### Parameters {#resubmitcore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        content
      </td>
      <td>
        <span>any</span>
      </td>
      <td>
        The content of the original message.
      </td>
    </tr>
    <tr>
      <td>
        localOpMetadata
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
        The local metadata associated with the original message.
      </td>
    </tr>
  </tbody>
</table>

### rollback {#rollback-method}

Revert an op

#### Signature {#rollback-signature}

```typescript
protected rollback(content: any, localOpMetadata: unknown): void;
```

#### Parameters {#rollback-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        content
      </td>
      <td>
        <span>any</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        localOpMetadata
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### submitLocalMessage {#submitlocalmessage-method}

Submits a message by the local client to the runtime.

#### Signature {#submitlocalmessage-signature}

```typescript
protected submitLocalMessage(content: any, localOpMetadata?: unknown): void;
```

#### Parameters {#submitlocalmessage-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        content
      </td>
      <td>
      </td>
      <td>
        <span>any</span>
      </td>
      <td>
        Content of the message
      </td>
    </tr>
    <tr>
      <td>
        localOpMetadata
      </td>
      <td>
        optional
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
        The local metadata associated with the message. This is kept locally by the runtime and not sent to the server. This will be sent back when this message is received back from the server. This is also sent if we are asked to resubmit the message.
      </td>
    </tr>
  </tbody>
</table>

### summarize {#summarize-method}

Generates summary of the channel asynchronously. This should not be called where the channel can be modified while summarization is in progress.

#### Signature {#summarize-signature}

```typescript
abstract summarize(fullTree?: boolean, trackState?: boolean, telemetryContext?: ITelemetryContext): Promise<ISummaryTreeWithStats>;
```

#### Parameters {#summarize-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        fullTree
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        <p>
          flag indicating whether the attempt should generate a full summary tree without any handles for unchanged subtrees. It should only be set to true when generating a summary from the entire container.
        </p>
        <p>
          Default: <code>false</code>
        </p>
      </td>
    </tr>
    <tr>
      <td>
        trackState
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        <p>
          An optimization for tracking state of objects across summaries. If the state of an object did not change since last successful summary, an <span><i>@fluidframework/protocol-definitions#ISummaryHandle</i></span> can be used instead of re-summarizing it. If this is <code>false</code>, the expectation is that you should never send an <code>ISummaryHandle</code>, since you are not expected to track state.
        </p>
        <p>
          Default: <code>false</code>
        </p>
        <p>
          Note: The goal is to remove the trackState and automatically decided whether the handles will be used or not: <a href='https://github.com/microsoft/FluidFramework/issues/10455'>https://github.com/microsoft/FluidFramework/issues/10455</a>
        </p>
      </td>
    </tr>
    <tr>
      <td>
        telemetryContext
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/runtime-definitions/itelemetrycontext-interface'>ITelemetryContext</a></span>
      </td>
      <td>
        See <a href='/docs/apis/runtime-definitions/itelemetrycontext-interface'>ITelemetryContext</a>.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#summarize-returns}

A summary capturing the current state of the channel.

**Return type:** Promise&lt;[ISummaryTreeWithStats](/docs/apis/runtime-definitions/isummarytreewithstats-interface)&gt;
