{
  "title": "SharedObject Class",
  "summary": "SharedObject with simplified, synchronous summarization and GC. DDS implementations with async and incremental summarization should extend SharedObjectCore directly instead.",
  "kind": "Class",
  "members": {
    "Constructor": {
      "(constructor)": "/docs/apis/shared-object-base/sharedobject-class#_constructor_-constructor"
    },
    "Method": {
      "getAttachSummary": "/docs/apis/shared-object-base/sharedobject-class#getattachsummary-method",
      "getGCData": "/docs/apis/shared-object-base/sharedobject-class#getgcdata-method",
      "processGCDataCore": "/docs/apis/shared-object-base/sharedobject-class#processgcdatacore-method",
      "summarize": "/docs/apis/shared-object-base/sharedobject-class#summarize-method",
      "summarizeCore": "/docs/apis/shared-object-base/sharedobject-class#summarizecore-method"
    },
    "Property": {
      "serializer": "/docs/apis/shared-object-base/sharedobject-class#serializer-property"
    }
  },
  "package": "@fluidframework/shared-object-base",
  "unscopedPackageName": "shared-object-base"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

SharedObject with simplified, synchronous summarization and GC. DDS implementations with async and incremental summarization should extend SharedObjectCore directly instead.

## Signature {#sharedobject-signature}

```typescript
export declare abstract class SharedObject<TEvent extends ISharedObjectEvents = ISharedObjectEvents> extends SharedObjectCore<TEvent>
```

**Extends:** [SharedObjectCore](/docs/apis/shared-object-base/sharedobjectcore-class)&lt;TEvent&gt;

### Type Parameters

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        TEvent
      </td>
      <td>
        optional
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Constructors

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Constructor
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobject-class#_constructor_-constructor'>(constructor)(id, runtime, attributes, telemetryContextPrefix)</a>
      </td>
      <td>
        Constructs a new instance of the <code>SharedObject</code> class
      </td>
    </tr>
  </tbody>
</table>

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobject-class#serializer-property'>serializer</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/shared-object-base/ifluidserializer-interface'>IFluidSerializer</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobject-class#getattachsummary-method'>getAttachSummary(fullTree, trackState, telemetryContext)</a>
      </td>
      <td>
        <span><a href='/docs/apis/runtime-definitions/isummarytreewithstats-interface'>ISummaryTreeWithStats</a></span>
      </td>
      <td>
        Generates summary of the channel synchronously. It is called when an <code>attach message</code> for a local channel is generated. In other words, when the channel is being attached to make it visible to other clients.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobject-class#getgcdata-method'>getGCData(fullGC)</a>
      </td>
      <td>
        <span><a href='/docs/apis/runtime-definitions/igarbagecollectiondata-interface'>IGarbageCollectionData</a></span>
      </td>
      <td>
        Returns the GC data for this shared object. It contains a list of GC nodes that contains references to other GC nodes.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobject-class#processgcdatacore-method'>processGCDataCore(serializer)</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Calls the serializer over all data in this object that reference other GC nodes. Derived classes must override this to provide custom list of references to other GC nodes.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobject-class#summarize-method'>summarize(fullTree, trackState, telemetryContext, incrementalSummaryContext)</a>
      </td>
      <td>
        <span>Promise&lt;<a href='/docs/apis/runtime-definitions/isummarytreewithstats-interface'>ISummaryTreeWithStats</a>&gt;</span>
      </td>
      <td>
        Generates summary of the channel asynchronously. This should not be called where the channel can be modified while summarization is in progress.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/shared-object-base/sharedobject-class#summarizecore-method'>summarizeCore(serializer, telemetryContext, incrementalSummaryContext)</a>
      </td>
      <td>
        <span><a href='/docs/apis/runtime-definitions/isummarytreewithstats-interface'>ISummaryTreeWithStats</a></span>
      </td>
      <td>
        Gets a form of the object that can be serialized.
      </td>
    </tr>
  </tbody>
</table>

## Constructor Details

### (constructor) {#_constructor_-constructor}

Constructs a new instance of the `SharedObject` class

#### Signature {#_constructor_-signature}

```typescript
constructor(id: string, runtime: IFluidDataStoreRuntime, attributes: IChannelAttributes, telemetryContextPrefix: string);
```

#### Parameters {#_constructor_-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        id
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        The id of the shared object
      </td>
    </tr>
    <tr>
      <td>
        runtime
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ifluiddatastoreruntime-interface'>IFluidDataStoreRuntime</a></span>
      </td>
      <td>
        The IFluidDataStoreRuntime which contains the shared object
      </td>
    </tr>
    <tr>
      <td>
        attributes
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ichannelattributes-interface'>IChannelAttributes</a></span>
      </td>
      <td>
        Attributes of the shared object
      </td>
    </tr>
    <tr>
      <td>
        telemetryContextPrefix
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### serializer {#serializer-property}

#### Signature {#serializer-signature}

```typescript
protected get serializer(): IFluidSerializer;
```

## Method Details

### getAttachSummary {#getattachsummary-method}

Generates summary of the channel synchronously. It is called when an `attach message` for a local channel is generated. In other words, when the channel is being attached to make it visible to other clients.

#### Signature {#getattachsummary-signature}

```typescript
getAttachSummary(fullTree?: boolean, trackState?: boolean, telemetryContext?: ITelemetryContext): ISummaryTreeWithStats;
```

#### Remarks {#getattachsummary-remarks}

Note: Since the Attach Summary is generated for local channels when making them visible to remote clients, they don't have any previous summaries to compare against. For this reason, the attach summary cannot contain summary handles (paths to sub-trees or blobs). It can, however, contain _@fluidframework/protocol-definitions\#ISummaryAttachment_ (handles to blobs uploaded async via the blob manager).

#### Parameters {#getattachsummary-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        fullTree
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        <p>
          A flag indicating whether the attempt should generate a full summary tree without any handles for unchanged subtrees.
        </p>
        <p>
          Default: <code>false</code>
        </p>
      </td>
    </tr>
    <tr>
      <td>
        trackState
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        <p>
          An optimization for tracking state of objects across summaries. If the state of an object did not change since last successful summary, an <span><i>@fluidframework/protocol-definitions#ISummaryHandle</i></span> can be used instead of re-summarizing it. If this is <code>false</code>, the expectation is that you should never send an <code>ISummaryHandle</code>, since you are not expected to track state.
        </p>
        <p>
          Note: The goal is to remove the trackState and automatically decided whether the handles will be used or not: <a href='https://github.com/microsoft/FluidFramework/issues/10455'>https://github.com/microsoft/FluidFramework/issues/10455</a>
        </p>
        <p>
          Default: <code>false</code>
        </p>
      </td>
    </tr>
    <tr>
      <td>
        telemetryContext
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/runtime-definitions/itelemetrycontext-interface'>ITelemetryContext</a></span>
      </td>
      <td>
        See <a href='/docs/apis/runtime-definitions/itelemetrycontext-interface'>ITelemetryContext</a>.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getattachsummary-returns}

A summary capturing the current state of the channel.

**Return type:** [ISummaryTreeWithStats](/docs/apis/runtime-definitions/isummarytreewithstats-interface)

### getGCData {#getgcdata-method}

Returns the GC data for this shared object. It contains a list of GC nodes that contains references to other GC nodes.

#### Signature {#getgcdata-signature}

```typescript
getGCData(fullGC?: boolean): IGarbageCollectionData;
```

#### Parameters {#getgcdata-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        fullGC
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        true to bypass optimizations and force full generation of GC data.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getgcdata-returns}

**Return type:** [IGarbageCollectionData](/docs/apis/runtime-definitions/igarbagecollectiondata-interface)

### processGCDataCore {#processgcdatacore-method}

Calls the serializer over all data in this object that reference other GC nodes. Derived classes must override this to provide custom list of references to other GC nodes.

#### Signature {#processgcdatacore-signature}

```typescript
protected processGCDataCore(serializer: IFluidSerializer): void;
```

#### Parameters {#processgcdatacore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        serializer
      </td>
      <td>
        <span><a href='/docs/apis/shared-object-base/ifluidserializer-interface'>IFluidSerializer</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### summarize {#summarize-method}

Generates summary of the channel asynchronously. This should not be called where the channel can be modified while summarization is in progress.

#### Signature {#summarize-signature}

```typescript
summarize(fullTree?: boolean, trackState?: boolean, telemetryContext?: ITelemetryContext, incrementalSummaryContext?: IExperimentalIncrementalSummaryContext): Promise<ISummaryTreeWithStats>;
```

#### Parameters {#summarize-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        fullTree
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        <p>
          flag indicating whether the attempt should generate a full summary tree without any handles for unchanged subtrees. It should only be set to true when generating a summary from the entire container.
        </p>
        <p>
          Default: <code>false</code>
        </p>
      </td>
    </tr>
    <tr>
      <td>
        trackState
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        <p>
          An optimization for tracking state of objects across summaries. If the state of an object did not change since last successful summary, an <span><i>@fluidframework/protocol-definitions#ISummaryHandle</i></span> can be used instead of re-summarizing it. If this is <code>false</code>, the expectation is that you should never send an <code>ISummaryHandle</code>, since you are not expected to track state.
        </p>
        <p>
          Default: <code>false</code>
        </p>
        <p>
          Note: The goal is to remove the trackState and automatically decided whether the handles will be used or not: <a href='https://github.com/microsoft/FluidFramework/issues/10455'>https://github.com/microsoft/FluidFramework/issues/10455</a>
        </p>
      </td>
    </tr>
    <tr>
      <td>
        telemetryContext
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/runtime-definitions/itelemetrycontext-interface'>ITelemetryContext</a></span>
      </td>
      <td>
        See <a href='/docs/apis/runtime-definitions/itelemetrycontext-interface'>ITelemetryContext</a>.
      </td>
    </tr>
    <tr>
      <td>
        incrementalSummaryContext
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/runtime-definitions/iexperimentalincrementalsummarycontext-interface'>IExperimentalIncrementalSummaryContext</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#summarize-returns}

A summary capturing the current state of the channel.

**Return type:** Promise&lt;[ISummaryTreeWithStats](/docs/apis/runtime-definitions/isummarytreewithstats-interface)&gt;

### summarizeCore {#summarizecore-method}

Gets a form of the object that can be serialized.

#### Signature {#summarizecore-signature}

```typescript
protected abstract summarizeCore(serializer: IFluidSerializer, telemetryContext?: ITelemetryContext, incrementalSummaryContext?: IExperimentalIncrementalSummaryContext): ISummaryTreeWithStats;
```

#### Parameters {#summarizecore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        serializer
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/shared-object-base/ifluidserializer-interface'>IFluidSerializer</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        telemetryContext
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/runtime-definitions/itelemetrycontext-interface'>ITelemetryContext</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        incrementalSummaryContext
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/runtime-definitions/iexperimentalincrementalsummarycontext-interface'>IExperimentalIncrementalSummaryContext</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#summarizecore-returns}

A tree representing the snapshot of the shared object.

**Return type:** [ISummaryTreeWithStats](/docs/apis/runtime-definitions/isummarytreewithstats-interface)
