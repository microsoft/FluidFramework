{
  "title": "ITransaction Interface",
  "summary": "A collection of functions for managing transactions. Transactions allow edits to be batched into atomic units. Edits made during a transaction will update the local state of the tree immediately, but will be squashed into a single edit when the transaction is committed. If the transaction is aborted, the local state will be reset to what it was before the transaction began. Transactions may nest, meaning that a transaction may be started while a transaction is already ongoing.\n\nTo avoid updating observers of the view state with intermediate results during a transaction, use _ITreeCheckout\\#fork_ and _ISharedTreeFork\\#merge_.",
  "kind": "Interface",
  "members": {
    "MethodSignature": {
      "abort": "/docs/apis/tree2/itransaction-interface#abort-methodsignature",
      "commit": "/docs/apis/tree2/itransaction-interface#commit-methodsignature",
      "inProgress": "/docs/apis/tree2/itransaction-interface#inprogress-methodsignature",
      "start": "/docs/apis/tree2/itransaction-interface#start-methodsignature"
    }
  },
  "package": "@fluid-experimental/tree2",
  "unscopedPackageName": "tree2"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

A collection of functions for managing transactions. Transactions allow edits to be batched into atomic units. Edits made during a transaction will update the local state of the tree immediately, but will be squashed into a single edit when the transaction is committed. If the transaction is aborted, the local state will be reset to what it was before the transaction began. Transactions may nest, meaning that a transaction may be started while a transaction is already ongoing.

To avoid updating observers of the view state with intermediate results during a transaction, use _ITreeCheckout\#fork_ and _ISharedTreeFork\#merge_.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

## Signature {#itransaction-signature}

```typescript
export interface ITransaction
```

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Alerts
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree2/itransaction-interface#abort-methodsignature'>abort()</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2/transactionresult-enum#abort-enummember'>TransactionResult.Abort</a></span>
      </td>
      <td>
        Close this transaction and revert the state of the tree to what it was before this transaction began.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/itransaction-interface#commit-methodsignature'>commit()</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2/transactionresult-enum#commit-enummember'>TransactionResult.Commit</a></span>
      </td>
      <td>
        Close this transaction by squashing its edits and committing them as a single edit. If this is the root checkout and there are no ongoing transactions remaining, the squashed edit will be submitted to Fluid.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/itransaction-interface#inprogress-methodsignature'>inProgress()</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        True if there is at least one transaction currently in progress on this view, otherwise false.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/itransaction-interface#start-methodsignature'>start()</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Start a new transaction. If a transaction is already in progress when this new transaction starts, then this transaction will be &quot;nested&quot; inside of it, i.e. the outer transaction will still be in progress after this new transaction is committed or aborted.
      </td>
    </tr>
  </tbody>
</table>

## Method Details

### abort (ALPHA) {#abort-methodsignature}

Close this transaction and revert the state of the tree to what it was before this transaction began.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#abort-signature}

```typescript
abort(): TransactionResult.Abort;
```

#### Returns {#abort-returns}

**Return type:** [TransactionResult.Abort](/docs/apis/tree2/transactionresult-enum#abort-enummember)

### commit (ALPHA) {#commit-methodsignature}

Close this transaction by squashing its edits and committing them as a single edit. If this is the root checkout and there are no ongoing transactions remaining, the squashed edit will be submitted to Fluid.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#commit-signature}

```typescript
commit(): TransactionResult.Commit;
```

#### Returns {#commit-returns}

**Return type:** [TransactionResult.Commit](/docs/apis/tree2/transactionresult-enum#commit-enummember)

### inProgress (ALPHA) {#inprogress-methodsignature}

True if there is at least one transaction currently in progress on this view, otherwise false.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#inprogress-signature}

```typescript
inProgress(): boolean;
```

#### Returns {#inprogress-returns}

**Return type:** boolean

### start (ALPHA) {#start-methodsignature}

Start a new transaction. If a transaction is already in progress when this new transaction starts, then this transaction will be "nested" inside of it, i.e. the outer transaction will still be in progress after this new transaction is committed or aborted.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#start-signature}

```typescript
start(): void;
```

#### Remarks {#start-remarks}

- Asynchronous transactions are not supported on the root checkout, since it is always kept up-to-date with the latest remote edits and the results of this rebasing (which might invalidate the transaction) is not visible to the application author. Instead,

1. fork the root checkout 2. run the transaction on the fork 3. merge the fork back into the root checkout
