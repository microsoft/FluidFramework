{
  "title": "EditableTreeEvents Interface",
  "summary": "A collection of events that can be raised by a [FlexTreeNode](/docs/apis/tree2/flextreenode-interface). These events are triggered while the internal data structures are being updated. Thus these events must not trigger reading of the anchorSet or forest.\n\nTODO: - Design how events should be ordered. - Include sub-deltas in events. - Add more events. - Have some events (or a way to defer events) until the tree can be read.",
  "kind": "Interface",
  "members": {
    "MethodSignature": {
      "afterChange": "/docs/apis/tree2/editabletreeevents-interface#afterchange-methodsignature",
      "beforeChange": "/docs/apis/tree2/editabletreeevents-interface#beforechange-methodsignature",
      "changing": "/docs/apis/tree2/editabletreeevents-interface#changing-methodsignature",
      "subtreeChanging": "/docs/apis/tree2/editabletreeevents-interface#subtreechanging-methodsignature"
    }
  },
  "package": "@fluid-experimental/tree2",
  "unscopedPackageName": "tree2"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

A collection of events that can be raised by a [FlexTreeNode](/docs/apis/tree2/flextreenode-interface). These events are triggered while the internal data structures are being updated. Thus these events must not trigger reading of the anchorSet or forest.

TODO: - Design how events should be ordered. - Include sub-deltas in events. - Add more events. - Have some events (or a way to defer events) until the tree can be read.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

## Signature {#editabletreeevents-signature}

```typescript
export interface EditableTreeEvents
```

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Alerts
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree2/editabletreeevents-interface#afterchange-methodsignature'>afterChange(event)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Raised on a node right after a change is applied to one of its fields or the fields of a descendant node.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/editabletreeevents-interface#beforechange-methodsignature'>beforeChange(event)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Raised on a node right before a change is applied to one of its fields or the fields of a descendant node.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/editabletreeevents-interface#changing-methodsignature'>changing(upPath)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Raised when a specific EditableTree node is changing. This includes its fields.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/editabletreeevents-interface#subtreechanging-methodsignature'>subtreeChanging(upPath)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2/pathvisitor-interface'>PathVisitor</a> &#124; void</span>
      </td>
      <td>
        Raised when something in the tree is changing, including this node and its descendants. The event can optionally return a <a href='/docs/apis/tree2/pathvisitor-interface'>PathVisitor</a> to traverse the subtree This event is called on every parent (transitively) when a change is occurring. Includes changes to this node itself.
      </td>
    </tr>
  </tbody>
</table>

## Method Details

### afterChange (ALPHA) {#afterchange-methodsignature}

Raised on a node right after a change is applied to one of its fields or the fields of a descendant node.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#afterchange-signature}

```typescript
afterChange(event: TreeEvent): void;
```

#### Remarks {#afterchange-remarks}

What exactly qualifies as a change that triggers this event (or [beforeChange(event)](/docs/apis/tree2/editabletreeevents-interface#beforechange-methodsignature)) is dependent on the implementation of SharedTree. In general, these events will fire once for every atomic editing operation supported by SharedTree; [beforeChange(event)](/docs/apis/tree2/editabletreeevents-interface#beforechange-methodsignature) before the change is applied, and [afterChange(event)](/docs/apis/tree2/editabletreeevents-interface#afterchange-methodsignature) after it is.

_FieldKinds.sequence_ present two exceptions:

The first one is that events will fire separately for each node involved in the operation (when inserting, removing, or moving more than one node at a time). This means that, for example, when inserting two nodes into a _FieldKinds.sequence_ field the following will happen: - [beforeChange(event)](/docs/apis/tree2/editabletreeevents-interface#beforechange-methodsignature) will fire once before either new node is present in the tree. - [afterChange(event)](/docs/apis/tree2/editabletreeevents-interface#afterchange-methodsignature) will fire once after the first node is present in the tree, but the second one isn't. - [beforeChange(event)](/docs/apis/tree2/editabletreeevents-interface#beforechange-methodsignature) will fire once before the second node is present in the tree, but the first one already is. - [afterChange(event)](/docs/apis/tree2/editabletreeevents-interface#afterchange-methodsignature) will fire once after the second node is present in the tree (so at this point both nodes are). Something similar applies to removing nodes from a sequence, and moving them to another sequence.

The second one is that for an operation to move nodes, events will fire \*twice\* for each node being moved; once while they are being detached from their source location, and once when they are being attached at the target location.

#### Parameters {#afterchange-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        event
      </td>
      <td>
        <span><a href='/docs/apis/tree2/treeevent-interface'>TreeEvent</a></span>
      </td>
      <td>
        The event object. See <a href='/docs/apis/tree2/treeevent-interface'>TreeEvent</a> for details.
      </td>
    </tr>
  </tbody>
</table>

### beforeChange (ALPHA) {#beforechange-methodsignature}

Raised on a node right before a change is applied to one of its fields or the fields of a descendant node.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#beforechange-signature}

```typescript
beforeChange(event: TreeEvent): void;
```

#### Remarks {#beforechange-remarks}

What exactly qualifies as a change that triggers this event (or [afterChange(event)](/docs/apis/tree2/editabletreeevents-interface#afterchange-methodsignature)) is dependent on the implementation of SharedTree. In general, these events will fire once for every atomic editing operation supported by SharedTree; [beforeChange(event)](/docs/apis/tree2/editabletreeevents-interface#beforechange-methodsignature) before the change is applied, and [afterChange(event)](/docs/apis/tree2/editabletreeevents-interface#afterchange-methodsignature) after it is.

_FieldKinds.sequence_ fields present two exceptions:

The first one is that events will fire separately for each node involved in the operation (when inserting, removing, or moving more than one node at a time). This means that, for example, when inserting two nodes into a _FieldKinds.sequence_ field the following will happen: - [beforeChange(event)](/docs/apis/tree2/editabletreeevents-interface#beforechange-methodsignature) will fire once before either new node is present in the tree. - [afterChange(event)](/docs/apis/tree2/editabletreeevents-interface#afterchange-methodsignature) will fire once after the first node is present in the tree, but the second one isn't. - [beforeChange(event)](/docs/apis/tree2/editabletreeevents-interface#beforechange-methodsignature) will fire once before the second node is present in the tree, but the first one already is. - [afterChange(event)](/docs/apis/tree2/editabletreeevents-interface#afterchange-methodsignature) will fire once after the second node is present in the tree (so at this point both nodes are). Something similar applies to removing nodes from a sequence, and moving them to another sequence.

The second one is that for an operation to move nodes, events will fire \*twice\* for each node being moved; once while they are being detached from their source location, and once when they are being attached at the target location.

#### Parameters {#beforechange-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        event
      </td>
      <td>
        <span><a href='/docs/apis/tree2/treeevent-interface'>TreeEvent</a></span>
      </td>
      <td>
        The event object. See <a href='/docs/apis/tree2/treeevent-interface'>TreeEvent</a> for details.
      </td>
    </tr>
  </tbody>
</table>

### changing (ALPHA) {#changing-methodsignature}

Raised when a specific EditableTree node is changing. This includes its fields.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#changing-signature}

```typescript
changing(upPath: UpPath): void;
```

#### Parameters {#changing-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        upPath
      </td>
      <td>
        <span><a href='/docs/apis/tree2/uppath-interface'>UpPath</a></span>
      </td>
      <td>
        the path corresponding to the location of the node being changed, upward.
      </td>
    </tr>
  </tbody>
</table>

### subtreeChanging (ALPHA) {#subtreechanging-methodsignature}

Raised when something in the tree is changing, including this node and its descendants. The event can optionally return a [PathVisitor](/docs/apis/tree2/pathvisitor-interface) to traverse the subtree This event is called on every parent (transitively) when a change is occurring. Includes changes to this node itself.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#subtreechanging-signature}

```typescript
subtreeChanging(upPath: UpPath): PathVisitor | void;
```

#### Parameters {#subtreechanging-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        upPath
      </td>
      <td>
        <span><a href='/docs/apis/tree2/uppath-interface'>UpPath</a></span>
      </td>
      <td>
        the path corresponding to the location of the node being changed, upward.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#subtreechanging-returns}

a visitor to traverse the subtree or `void`.

**Return type:** [PathVisitor](/docs/apis/tree2/pathvisitor-interface) \| void
