{
  "title": "PathVisitor Interface",
  "summary": "Delta visitor for the path tree.\n\nFor any of these events, the paths are guaranteed to be valid at the time of the event, and it is valid to read from the Forest at that path.",
  "kind": "Interface",
  "members": {
    "MethodSignature": {
      "afterAttach": "/docs/apis/tree2/pathvisitor-interface#afterattach-methodsignature",
      "afterCreate": "/docs/apis/tree2/pathvisitor-interface#aftercreate-methodsignature",
      "afterDetach": "/docs/apis/tree2/pathvisitor-interface#afterdetach-methodsignature",
      "afterReplace": "/docs/apis/tree2/pathvisitor-interface#afterreplace-methodsignature",
      "beforeAttach": "/docs/apis/tree2/pathvisitor-interface#beforeattach-methodsignature",
      "beforeDestroy": "/docs/apis/tree2/pathvisitor-interface#beforedestroy-methodsignature",
      "beforeDetach": "/docs/apis/tree2/pathvisitor-interface#beforedetach-methodsignature",
      "beforeReplace": "/docs/apis/tree2/pathvisitor-interface#beforereplace-methodsignature",
      "onDelete": "/docs/apis/tree2/pathvisitor-interface#ondelete-methodsignature",
      "onInsert": "/docs/apis/tree2/pathvisitor-interface#oninsert-methodsignature"
    }
  },
  "package": "@fluid-experimental/tree2",
  "unscopedPackageName": "tree2"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

Delta visitor for the path tree.

For any of these events, the paths are guaranteed to be valid at the time of the event, and it is valid to read from the Forest at that path.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

## Signature {#pathvisitor-signature}

```typescript
export interface PathVisitor
```

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Alerts
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree2/pathvisitor-interface#afterattach-methodsignature'>afterAttach(source, destination)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Invoked after the attaching of a range of nodes. Not invoked for replacements.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/pathvisitor-interface#aftercreate-methodsignature'>afterCreate(content)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Invoked after the creation of a range of nodes.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/pathvisitor-interface#afterdetach-methodsignature'>afterDetach(source, destination)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Invoked after the detaching of a range of nodes. Not invoked for replacements.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/pathvisitor-interface#afterreplace-methodsignature'>afterReplace(newContentSource, newContent, oldContent)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        <p>
          Invoked after the replacement of a range of nodes.
        </p>
        <p>
          Note that the <code>newContent</code> range length will always match the <code>oldContent</code> range length. A replace might actually be separate detaches and attaches which have been coalesced.
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/pathvisitor-interface#beforeattach-methodsignature'>beforeAttach(source, destination)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Invoked before the attaching of a range of nodes. Not invoked for replacements.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/pathvisitor-interface#beforedestroy-methodsignature'>beforeDestroy(content)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Invoked before content is destroyed.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/pathvisitor-interface#beforedetach-methodsignature'>beforeDetach(source, destination)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Invoked before the detaching of a range of nodes. Not invoked for replacements.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/pathvisitor-interface#beforereplace-methodsignature'>beforeReplace(newContent, oldContent, oldContentDestination)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        <p>
          Invoked before the replacement of a range of nodes.
        </p>
        <p>
          Note that the <code>newContent</code> range length will always match the <code>oldContent</code> range length. A replace might actually be separate detaches and attaches which have been coalesced.
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/pathvisitor-interface#ondelete-methodsignature'>onDelete(path, count)</a>
      </td>
      <td>
        <code>ALPHA</code>, <code>DEPRECATED</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        <p>
          A sequence of nodes of length <code>count</code> is being deleted starting with <code>path</code>. Called when these nodes are no longer parented under their previous parent, and do not have a new parent. It is possible they may be un-deleted in the future (for example by a conflicted merge or undo).
        </p>
        <p>
          Not called for children of deleted nodes.
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/pathvisitor-interface#oninsert-methodsignature'>onInsert(path, content)</a>
      </td>
      <td>
        <code>ALPHA</code>, <code>DEPRECATED</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Method Details

### afterAttach (ALPHA) {#afterattach-methodsignature}

Invoked after the attaching of a range of nodes. Not invoked for replacements.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#afterattach-signature}

```typescript
afterAttach(source: DetachedPlaceUpPath, destination: RangeUpPath): void;
```

#### Parameters {#afterattach-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        source
      </td>
      <td>
        <span><a href='/docs/apis/tree2#detachedplaceuppath-typealias'>DetachedPlaceUpPath</a></span>
      </td>
      <td>
        The location where the content originated.
      </td>
    </tr>
    <tr>
      <td>
        destination
      </td>
      <td>
        <span><a href='/docs/apis/tree2/rangeuppath-interface'>RangeUpPath</a></span>
      </td>
      <td>
        The content that was attached.
      </td>
    </tr>
  </tbody>
</table>

### afterCreate (ALPHA) {#aftercreate-methodsignature}

Invoked after the creation of a range of nodes.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#aftercreate-signature}

```typescript
afterCreate(content: DetachedRangeUpPath): void;
```

#### Parameters {#aftercreate-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        content
      </td>
      <td>
        <span><a href='/docs/apis/tree2#detachedrangeuppath-typealias'>DetachedRangeUpPath</a></span>
      </td>
      <td>
        The content that was created.
      </td>
    </tr>
  </tbody>
</table>

### afterDetach (ALPHA) {#afterdetach-methodsignature}

Invoked after the detaching of a range of nodes. Not invoked for replacements.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#afterdetach-signature}

```typescript
afterDetach(source: PlaceUpPath, destination: DetachedRangeUpPath): void;
```

#### Parameters {#afterdetach-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        source
      </td>
      <td>
        <span><a href='/docs/apis/tree2/placeuppath-interface'>PlaceUpPath</a></span>
      </td>
      <td>
        The content that was detached.
      </td>
    </tr>
    <tr>
      <td>
        destination
      </td>
      <td>
        <span><a href='/docs/apis/tree2#detachedrangeuppath-typealias'>DetachedRangeUpPath</a></span>
      </td>
      <td>
        The location where the content will be attached.
      </td>
    </tr>
  </tbody>
</table>

### afterReplace (ALPHA) {#afterreplace-methodsignature}

Invoked after the replacement of a range of nodes.

Note that the `newContent` range length will always match the `oldContent` range length. A replace might actually be separate detaches and attaches which have been coalesced.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#afterreplace-signature}

```typescript
afterReplace(newContentSource: DetachedPlaceUpPath, newContent: RangeUpPath, oldContent: DetachedRangeUpPath): void;
```

#### Parameters {#afterreplace-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        newContentSource
      </td>
      <td>
        <span><a href='/docs/apis/tree2#detachedplaceuppath-typealias'>DetachedPlaceUpPath</a></span>
      </td>
      <td>
        The place that the new content came from.
      </td>
    </tr>
    <tr>
      <td>
        newContent
      </td>
      <td>
        <span><a href='/docs/apis/tree2/rangeuppath-interface'>RangeUpPath</a></span>
      </td>
      <td>
        The new content.
      </td>
    </tr>
    <tr>
      <td>
        oldContent
      </td>
      <td>
        <span><a href='/docs/apis/tree2#detachedrangeuppath-typealias'>DetachedRangeUpPath</a></span>
      </td>
      <td>
        The content that was replaced.
      </td>
    </tr>
  </tbody>
</table>

### beforeAttach (ALPHA) {#beforeattach-methodsignature}

Invoked before the attaching of a range of nodes. Not invoked for replacements.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#beforeattach-signature}

```typescript
beforeAttach(source: DetachedRangeUpPath, destination: PlaceUpPath): void;
```

#### Parameters {#beforeattach-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        source
      </td>
      <td>
        <span><a href='/docs/apis/tree2#detachedrangeuppath-typealias'>DetachedRangeUpPath</a></span>
      </td>
      <td>
        The content that will be attached.
      </td>
    </tr>
    <tr>
      <td>
        destination
      </td>
      <td>
        <span><a href='/docs/apis/tree2/placeuppath-interface'>PlaceUpPath</a></span>
      </td>
      <td>
        The location where the content will be attached.
      </td>
    </tr>
  </tbody>
</table>

### beforeDestroy (ALPHA) {#beforedestroy-methodsignature}

Invoked before content is destroyed.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#beforedestroy-signature}

```typescript
beforeDestroy(content: DetachedRangeUpPath): void;
```

#### Parameters {#beforedestroy-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        content
      </td>
      <td>
        <span><a href='/docs/apis/tree2#detachedrangeuppath-typealias'>DetachedRangeUpPath</a></span>
      </td>
      <td>
        The content that will be destroyed
      </td>
    </tr>
  </tbody>
</table>

### beforeDetach (ALPHA) {#beforedetach-methodsignature}

Invoked before the detaching of a range of nodes. Not invoked for replacements.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#beforedetach-signature}

```typescript
beforeDetach(source: RangeUpPath, destination: DetachedPlaceUpPath): void;
```

#### Parameters {#beforedetach-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        source
      </td>
      <td>
        <span><a href='/docs/apis/tree2/rangeuppath-interface'>RangeUpPath</a></span>
      </td>
      <td>
        The content that will be detached.
      </td>
    </tr>
    <tr>
      <td>
        destination
      </td>
      <td>
        <span><a href='/docs/apis/tree2#detachedplaceuppath-typealias'>DetachedPlaceUpPath</a></span>
      </td>
      <td>
        The location where the content will be sent to.
      </td>
    </tr>
  </tbody>
</table>

### beforeReplace (ALPHA) {#beforereplace-methodsignature}

Invoked before the replacement of a range of nodes.

Note that the `newContent` range length will always match the `oldContent` range length. A replace might actually be separate detaches and attaches which have been coalesced.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#beforereplace-signature}

```typescript
beforeReplace(newContent: DetachedRangeUpPath, oldContent: RangeUpPath, oldContentDestination: DetachedPlaceUpPath): void;
```

#### Parameters {#beforereplace-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        newContent
      </td>
      <td>
        <span><a href='/docs/apis/tree2#detachedrangeuppath-typealias'>DetachedRangeUpPath</a></span>
      </td>
      <td>
        The content that will be attached in place of the old.
      </td>
    </tr>
    <tr>
      <td>
        oldContent
      </td>
      <td>
        <span><a href='/docs/apis/tree2/rangeuppath-interface'>RangeUpPath</a></span>
      </td>
      <td>
        The old that will be replaced.
      </td>
    </tr>
    <tr>
      <td>
        oldContentDestination
      </td>
      <td>
        <span><a href='/docs/apis/tree2#detachedplaceuppath-typealias'>DetachedPlaceUpPath</a></span>
      </td>
      <td>
        The destination of the old content.
      </td>
    </tr>
  </tbody>
</table>

### onDelete (ALPHA) {#ondelete-methodsignature}

A sequence of nodes of length `count` is being deleted starting with `path`. Called when these nodes are no longer parented under their previous parent, and do not have a new parent. It is possible they may be un-deleted in the future (for example by a conflicted merge or undo).

Not called for children of deleted nodes.

{{% callout warning This API is deprecated and will be removed in a future release. %}}
Migrate to using the other events.

{{% /callout %}}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#ondelete-signature}

```typescript
onDelete(path: UpPath, count: number): void;
```

#### Parameters {#ondelete-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        path
      </td>
      <td>
        <span><a href='/docs/apis/tree2/uppath-interface'>UpPath</a></span>
      </td>
      <td>
        first node in the deleted range.
      </td>
    </tr>
    <tr>
      <td>
        count
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
        length of deleted range.
      </td>
    </tr>
  </tbody>
</table>

### onInsert (ALPHA) {#oninsert-methodsignature}

{{% callout warning This API is deprecated and will be removed in a future release. %}}
Migrate to using the other events.

{{% /callout %}}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#oninsert-signature}

```typescript
onInsert(path: UpPath, content: ProtoNodes): void;
```

#### Parameters {#oninsert-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        path
      </td>
      <td>
        <span><a href='/docs/apis/tree2/uppath-interface'>UpPath</a></span>
      </td>
      <td>
        location which first node of inserted range will have after insert. Any nodes at this index (or after it) will be moved to the right (have their indexes increased by <code>content.length</code>).
      </td>
    </tr>
    <tr>
      <td>
        content
      </td>
      <td>
        <span><a href='/docs/apis/tree2#protonodes-typealias'>ProtoNodes</a></span>
      </td>
      <td>
        content which is being inserted.
      </td>
    </tr>
  </tbody>
</table>
