{
  "title": "SchemaFactory Class",
  "summary": "Builds schema libraries, and the schema within them.",
  "kind": "Class",
  "members": {
    "Constructor": {
      "(constructor)": "/docs/apis/tree2/schemafactory-class#_constructor_-constructor"
    },
    "Method": {
      "array": "/docs/apis/tree2/schemafactory-class#array_1-method",
      "fixRecursiveReference": "/docs/apis/tree2/schemafactory-class#fixrecursivereference-method",
      "map": "/docs/apis/tree2/schemafactory-class#map_1-method",
      "namedArray": "/docs/apis/tree2/schemafactory-class#namedarray-method",
      "namedMap": "/docs/apis/tree2/schemafactory-class#namedmap-method",
      "object": "/docs/apis/tree2/schemafactory-class#object-method",
      "optional": "/docs/apis/tree2/schemafactory-class#optional-method"
    },
    "Property": {
      "boolean": "/docs/apis/tree2/schemafactory-class#boolean-property",
      "handle": "/docs/apis/tree2/schemafactory-class#handle-property",
      "null": "/docs/apis/tree2/schemafactory-class#null-property",
      "number": "/docs/apis/tree2/schemafactory-class#number-property",
      "scope": "/docs/apis/tree2/schemafactory-class#scope-property",
      "string": "/docs/apis/tree2/schemafactory-class#string-property"
    }
  },
  "package": "@fluid-experimental/tree2",
  "unscopedPackageName": "tree2"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

Builds schema libraries, and the schema within them.

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

## Signature {#schemafactory-signature}

```typescript
/** @sealed */
export declare class SchemaFactory<TScope extends string = string, TName extends number | string = string>
```

### Type Parameters

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        TScope
      </td>
      <td>
        optional
      </td>
      <td>
        Scope added as a prefix to the name of every schema produced by this factory.
      </td>
    </tr>
    <tr>
      <td>
        TName
      </td>
      <td>
        optional
      </td>
      <td>
        Type of names used to identify each schema produced in this factory. Typically this is just <code>string</code> but it is also possible to use <code>string</code> or <code>number</code> based enums if you prefer to identify your types that way.
        <br>
      </td>
    </tr>
  </tbody>
</table>

## Constructors

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Constructor
      </th>
      <th>
        Alerts
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree2/schemafactory-class#_constructor_-constructor'>(constructor)(scope)</a>
      </td>
      <td>
        <code>BETA</code>
      </td>
      <td>
        Constructs a new instance of the <code>SchemaFactory</code> class
      </td>
    </tr>
  </tbody>
</table>

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Alerts
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree2/schemafactory-class#boolean-property'>boolean</a>
      </td>
      <td>
        <code>BETA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a>&lt;&quot;com.fluidframework.leaf.boolean&quot;, <a href='/docs/apis/tree2/internaltypes/nodekind-enum#leaf-enummember'>NodeKind.Leaf</a>, boolean, boolean&gt;</span>
      </td>
      <td>
        <a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a> for holding a boolean.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/schemafactory-class#handle-property'>handle</a>
      </td>
      <td>
        <code>BETA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a>&lt;&quot;com.fluidframework.leaf.handle&quot;, <a href='/docs/apis/tree2/internaltypes/nodekind-enum#leaf-enummember'>NodeKind.Leaf</a>, import(&quot;@fluidframework/core-interfaces&quot;).<a href='/docs/apis/core-interfaces/ifluidhandle-interface'>IFluidHandle</a>&lt;import(&quot;@fluidframework/core-interfaces&quot;).<a href='/docs/apis/core-interfaces#fluidobject-typealias'>FluidObject</a> &amp; import(&quot;@fluidframework/core-interfaces&quot;).<a href='/docs/apis/core-interfaces/ifluidloadable-interface'>IFluidLoadable</a>&gt;, import(&quot;@fluidframework/core-interfaces&quot;).<a href='/docs/apis/core-interfaces/ifluidhandle-interface'>IFluidHandle</a>&lt;import(&quot;@fluidframework/core-interfaces&quot;).<a href='/docs/apis/core-interfaces#fluidobject-typealias'>FluidObject</a> &amp; import(&quot;@fluidframework/core-interfaces&quot;).<a href='/docs/apis/core-interfaces/ifluidloadable-interface'>IFluidLoadable</a>&gt;&gt;</span>
      </td>
      <td>
        <a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a> for holding an <span><i>@fluidframework/core-interfaces#IFluidHandle</i></span>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/schemafactory-class#null-property'>null</a>
      </td>
      <td>
        <code>BETA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a>&lt;&quot;com.fluidframework.leaf.null&quot;, <a href='/docs/apis/tree2/internaltypes/nodekind-enum#leaf-enummember'>NodeKind.Leaf</a>, null, null&gt;</span>
      </td>
      <td>
        <a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a> for JavaScript <code>null</code>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/schemafactory-class#number-property'>number</a>
      </td>
      <td>
        <code>BETA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a>&lt;&quot;com.fluidframework.leaf.number&quot;, <a href='/docs/apis/tree2/internaltypes/nodekind-enum#leaf-enummember'>NodeKind.Leaf</a>, number, number&gt;</span>
      </td>
      <td>
        <a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a> for holding a JavaScript <code>number</code>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/schemafactory-class#scope-property'>scope</a>
      </td>
      <td>
        <code>BETA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>TScope</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/schemafactory-class#string-property'>string</a>
      </td>
      <td>
        <code>BETA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a>&lt;&quot;com.fluidframework.leaf.string&quot;, <a href='/docs/apis/tree2/internaltypes/nodekind-enum#leaf-enummember'>NodeKind.Leaf</a>, string, string&gt;</span>
      </td>
      <td>
        <a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a> for holding a JavaScript <code>string</code>.
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Alerts
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree2/schemafactory-class#array-method'>array(allowedTypes)</a>
      </td>
      <td>
        <code>BETA</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a>&lt;`${TScope}.List&lt;${string}&gt;`, <a href='/docs/apis/tree2/internaltypes/nodekind-enum#array-enummember'>NodeKind.Array</a>, <a href='/docs/apis/tree2/treearraynode-interface'>TreeArrayNode</a>&lt;T&gt;, Iterable&lt;<a href='/docs/apis/tree2#insertabletreenodefromimplicitallowedtypes-typealias'>InsertableTreeNodeFromImplicitAllowedTypes</a>&lt;T&gt;&gt;, true&gt;</span>
      </td>
      <td>
        Define a structurally typed <a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a> for a <a href='/docs/apis/tree2/treearraynode-interface'>TreeArrayNode</a>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/schemafactory-class#array_1-method'>array(name, allowedTypes)</a>
      </td>
      <td>
        <code>BETA</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2/internaltypes/treenodeschemaclass-interface'>TreeNodeSchemaClass</a>&lt;`${TScope}.${Name}`, <a href='/docs/apis/tree2/internaltypes/nodekind-enum#array-enummember'>NodeKind.Array</a>, <a href='/docs/apis/tree2/treearraynode-interface'>TreeArrayNode</a>&lt;T&gt;, Iterable&lt;<a href='/docs/apis/tree2#insertabletreenodefromimplicitallowedtypes-typealias'>InsertableTreeNodeFromImplicitAllowedTypes</a>&lt;T&gt;&gt;, true&gt;</span>
      </td>
      <td>
        Define (and add to this library) a <a href='/docs/apis/tree2/fieldnodeschema-class'>FieldNodeSchema</a> for a <a href='/docs/apis/tree2/treearraynode-interface'>TreeArrayNode</a>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/schemafactory-class#fixrecursivereference-method'>fixRecursiveReference(types)</a>
      </td>
      <td>
        <code>BETA</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Function which can be used for its compile time side-effects to tweak the evaluation order of recursive types to make them compile.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/schemafactory-class#map-method'>map(allowedTypes)</a>
      </td>
      <td>
        <code>BETA</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a>&lt;`${TScope}.Map&lt;${string}&gt;`, <a href='/docs/apis/tree2/internaltypes/nodekind-enum#map-enummember'>NodeKind.Map</a>, <a href='/docs/apis/tree2/treemapnode-interface'>TreeMapNode</a>&lt;T&gt;, ReadonlyMap&lt;string, <a href='/docs/apis/tree2/internaltypes/internalclasstreetypes-namespace#treenodefromimplicitallowedtypes-typealias'>TreeNodeFromImplicitAllowedTypes</a>&lt;T&gt;&gt;, true&gt;</span>
      </td>
      <td>
        Define a structurally typed <a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a> for a <a href='/docs/apis/tree2/treemapnodebase-interface'>TreeMapNodeBase</a>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/schemafactory-class#map_1-method'>map(name, allowedTypes)</a>
      </td>
      <td>
        <code>BETA</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2/internaltypes/treenodeschemaclass-interface'>TreeNodeSchemaClass</a>&lt;`${TScope}.${Name}`, <a href='/docs/apis/tree2/internaltypes/nodekind-enum#map-enummember'>NodeKind.Map</a>, <a href='/docs/apis/tree2/treemapnode-interface'>TreeMapNode</a>&lt;T&gt;, ReadonlyMap&lt;string, <a href='/docs/apis/tree2#insertabletreenodefromimplicitallowedtypes-typealias'>InsertableTreeNodeFromImplicitAllowedTypes</a>&lt;T&gt;&gt;, true&gt;</span>
      </td>
      <td>
        Define a <a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a> for a <a href='/docs/apis/tree2/treemapnodebase-interface'>TreeMapNodeBase</a>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/schemafactory-class#namedarray-method'>namedArray(name, allowedTypes, customizable, implicitlyConstructable)</a>
      </td>
      <td>
        <code>BETA</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2/internaltypes/treenodeschemaclass-interface'>TreeNodeSchemaClass</a>&lt;`${TScope}.${Name}`, <a href='/docs/apis/tree2/internaltypes/nodekind-enum#array-enummember'>NodeKind.Array</a>, <a href='/docs/apis/tree2/treearraynode-interface'>TreeArrayNode</a>&lt;T&gt;, Iterable&lt;<a href='/docs/apis/tree2#insertabletreenodefromimplicitallowedtypes-typealias'>InsertableTreeNodeFromImplicitAllowedTypes</a>&lt;T&gt;&gt;, ImplicitlyConstructable&gt;</span>
      </td>
      <td>
        Define a <a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a> for a <a href='/docs/apis/tree2/treearraynode-interface'>TreeArrayNode</a>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/schemafactory-class#namedmap-method'>namedMap(name, allowedTypes, customizable, implicitlyConstructable)</a>
      </td>
      <td>
        <code>BETA</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2/internaltypes/treenodeschemaclass-interface'>TreeNodeSchemaClass</a>&lt;`${TScope}.${Name}`, <a href='/docs/apis/tree2/internaltypes/nodekind-enum#map-enummember'>NodeKind.Map</a>, <a href='/docs/apis/tree2/treemapnode-interface'>TreeMapNode</a>&lt;T&gt;, ReadonlyMap&lt;string, <a href='/docs/apis/tree2#insertabletreenodefromimplicitallowedtypes-typealias'>InsertableTreeNodeFromImplicitAllowedTypes</a>&lt;T&gt;&gt;, ImplicitlyConstructable&gt;</span>
      </td>
      <td>
        Define a <a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a> for a <a href='/docs/apis/tree2/treemapnode-interface'>TreeMapNode</a>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/schemafactory-class#object-method'>object(name, t)</a>
      </td>
      <td>
        <code>BETA</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2/internaltypes/treenodeschemaclass-interface'>TreeNodeSchemaClass</a>&lt;`${TScope}.${Name}`, <a href='/docs/apis/tree2/internaltypes/nodekind-enum#object-enummember'>NodeKind.Object</a>, <a href='/docs/apis/tree2/internaltypes/internalclasstreetypes-namespace#objectfromschemarecord-typealias'>ObjectFromSchemaRecord</a>&lt;T&gt;, <a href='/docs/apis/tree2/internaltypes/internalclasstreetypes-namespace#insertableobjectfromschemarecord-typealias'>InsertableObjectFromSchemaRecord</a>&lt;T&gt;, true&gt;</span>
      </td>
      <td>
        Define a <a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a> for an object node.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/schemafactory-class#optional-method'>optional(t)</a>
      </td>
      <td>
        <code>BETA</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2/internaltypes/internalclasstreetypes/fieldschema-class'>FieldSchema</a>&lt;FieldKind.Optional, T&gt;</span>
      </td>
      <td>
        Make a field optional instead of the default which is required.
      </td>
    </tr>
  </tbody>
</table>

## Constructor Details

### (constructor) (BETA) {#_constructor_-constructor}

Constructs a new instance of the `SchemaFactory` class

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

#### Signature {#_constructor_-signature}

```typescript
constructor(scope: TScope);
```

#### Parameters {#_constructor_-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        scope
      </td>
      <td>
        <span>TScope</span>
      </td>
      <td>
        Prefix appended to the identifiers of all <a href='/docs/apis/tree2#treenodeschema-typealias'>TreeNodeSchema</a> produced by this builder. Use of [Reverse domain name notation](https://en.wikipedia.org/wiki/Reverse_domain_name_notation) or a UUIDv4 is recommended to avoid collisions.
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### boolean (BETA) {#boolean-property}

[TreeNodeSchema](/docs/apis/tree2#treenodeschema-typealias) for holding a boolean.

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

#### Signature {#boolean-signature}

```typescript
readonly boolean: TreeNodeSchema<"com.fluidframework.leaf.boolean", NodeKind.Leaf, boolean, boolean>;
```

### handle (BETA) {#handle-property}

[TreeNodeSchema](/docs/apis/tree2#treenodeschema-typealias) for holding an _@fluidframework/core-interfaces\#IFluidHandle_.

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

#### Signature {#handle-signature}

```typescript
readonly handle: TreeNodeSchema<"com.fluidframework.leaf.handle", NodeKind.Leaf, import("@fluidframework/core-interfaces").IFluidHandle<import("@fluidframework/core-interfaces").FluidObject & import("@fluidframework/core-interfaces").IFluidLoadable>, import("@fluidframework/core-interfaces").IFluidHandle<import("@fluidframework/core-interfaces").FluidObject & import("@fluidframework/core-interfaces").IFluidLoadable>>;
```

### null (BETA) {#null-property}

[TreeNodeSchema](/docs/apis/tree2#treenodeschema-typealias) for JavaScript `null`.

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

#### Signature {#null-signature}

```typescript
readonly null: TreeNodeSchema<"com.fluidframework.leaf.null", NodeKind.Leaf, null, null>;
```

#### Remarks {#null-remarks}

There are good \[reasons to avoid using null\](https://www.npmjs.com/package/%40rushstack/eslint-plugin\#rushstackno-new-null) in JavaScript, however sometimes it is desired. This [TreeNodeSchema](/docs/apis/tree2#treenodeschema-typealias) node provides the option to include nulls in trees when desired. Unless directly inter-operating with existing data using null, consider other approaches, like wrapping the value in an optional field, or using a more specifically named empty object node.

### number (BETA) {#number-property}

[TreeNodeSchema](/docs/apis/tree2#treenodeschema-typealias) for holding a JavaScript `number`.

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

#### Signature {#number-signature}

```typescript
readonly number: TreeNodeSchema<"com.fluidframework.leaf.number", NodeKind.Leaf, number, number>;
```

#### Remarks {#number-remarks}

The number is a \[double-precision 64-bit binary format IEEE 754\](https://en.wikipedia.org/wiki/Double-precision\_floating-point\_format) value, however there are some exceptions: - `NaN`, and the infinities are converted to `null` (and may therefore only be used where `null` is allowed by the schema). - `-0` may be converted to `0` in some cases.

These limitations match the limitations of JSON.

### scope (BETA) {#scope-property}

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

#### Signature {#scope-signature}

```typescript
readonly scope: TScope;
```

### string (BETA) {#string-property}

[TreeNodeSchema](/docs/apis/tree2#treenodeschema-typealias) for holding a JavaScript `string`.

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

#### Signature {#string-signature}

```typescript
readonly string: TreeNodeSchema<"com.fluidframework.leaf.string", NodeKind.Leaf, string, string>;
```

#### Remarks {#string-remarks}

Strings containing unpaired UTF-16 surrogate pair code units may not be handled correctly.

These limitations come from the use of UTF-8 encoding of the strings, which requires them to be valid unicode. JavaScript does not make this requirement for its strings so not all possible JavaScript strings are supported.

## Method Details

### array (BETA) {#array-method}

Define a structurally typed [TreeNodeSchema](/docs/apis/tree2#treenodeschema-typealias) for a [TreeArrayNode](/docs/apis/tree2/treearraynode-interface).

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

#### Signature {#array-signature}

```typescript
array<const T extends TreeNodeSchema | readonly TreeNodeSchema[]>(allowedTypes: T): TreeNodeSchema<`${TScope}.List<${string}>`, NodeKind.Array, TreeArrayNode<T>, Iterable<InsertableTreeNodeFromImplicitAllowedTypes<T>>, true>;
```

#### Remarks {#array-remarks}

The identifier for this List is defined as a function of the provided types. It is still scoped to this SchemaFactory, but multiple calls with the same arguments will return the same schema object, providing somewhat structural typing. This does not support recursive types.

If using these structurally named lists, other types in this schema builder should avoid names of the form `List<${string}>`.

#### Example {#array-example}

The returned schema should be used as a schema directly:

```typescript
const MyList = factory.list(factory.number);
type MyList = NodeFromSchema<typeof MyList>;
```

Or inline:

```typescript
factory.object("Foo", {myList: factory.list(factory.number)});
```

#### Parameters {#array-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        allowedTypes
      </td>
      <td>
        <span>T</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#array-returns}

**Return type:** [TreeNodeSchema](/docs/apis/tree2#treenodeschema-typealias)&lt;\`${TScope}.List&lt;${string}&gt;\`, [NodeKind.Array](/docs/apis/tree2/internaltypes/nodekind-enum#array-enummember), [TreeArrayNode](/docs/apis/tree2/treearraynode-interface)&lt;T&gt;, Iterable&lt;[InsertableTreeNodeFromImplicitAllowedTypes](/docs/apis/tree2#insertabletreenodefromimplicitallowedtypes-typealias)&lt;T&gt;&gt;, true&gt;

### array (BETA) {#array_1-method}

Define (and add to this library) a [FieldNodeSchema](/docs/apis/tree2/fieldnodeschema-class) for a [TreeArrayNode](/docs/apis/tree2/treearraynode-interface).

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

#### Signature {#array_1-signature}

```typescript
array<const Name extends TName, const T extends ImplicitAllowedTypes>(name: Name, allowedTypes: T): TreeNodeSchemaClass<`${TScope}.${Name}`, NodeKind.Array, TreeArrayNode<T>, Iterable<InsertableTreeNodeFromImplicitAllowedTypes<T>>, true>;
```

#### Example {#array_1-example}

```typescript
class NamedList extends factory.list("name", factory.number) {}
```

#### Parameters {#array_1-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        name
      </td>
      <td>
        <span>Name</span>
      </td>
      <td>
        Unique identifier for this schema within this factory's scope.
      </td>
    </tr>
    <tr>
      <td>
        allowedTypes
      </td>
      <td>
        <span>T</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#array_1-returns}

**Return type:** [TreeNodeSchemaClass](/docs/apis/tree2/internaltypes/treenodeschemaclass-interface)&lt;\`${TScope}.${Name}\`, [NodeKind.Array](/docs/apis/tree2/internaltypes/nodekind-enum#array-enummember), [TreeArrayNode](/docs/apis/tree2/treearraynode-interface)&lt;T&gt;, Iterable&lt;[InsertableTreeNodeFromImplicitAllowedTypes](/docs/apis/tree2#insertabletreenodefromimplicitallowedtypes-typealias)&lt;T&gt;&gt;, true&gt;

### fixRecursiveReference (BETA) {#fixrecursivereference-method}

Function which can be used for its compile time side-effects to tweak the evaluation order of recursive types to make them compile.

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

#### Signature {#fixrecursivereference-signature}

```typescript
fixRecursiveReference<T extends AllowedTypes>(...types: T): void;
```

#### Remarks {#fixrecursivereference-remarks}

Some related information in https://github.com/microsoft/TypeScript/issues/55758.

Also be aware that code which relies on this tends to break VSCode's IntelliSense every time anything related to that code (even comments) is edited. Running the command `TypeScript: Restart TS Server` with the schema file focused should fix it. Sometimes this does not work: closing all open files except the schema before running the command can help. Real compile errors (for example elsewhere in the file) can also cause the IntelliSense to not work correctly ever after `TypeScript: Restart TS Server`.

Intellisense has also shown problems when schema files with recursive types are part of a cyclic file dependency. Splitting the schema into its own file with minimal dependencies can help with this.

Ensure `"noImplicitAny": true` is set in the `tsconfig.json`. Without it, recursive types that are not working properly can infer `any` and give very non-type-safe results instead of erroring.

#### Example {#fixrecursivereference-example}

```typescript
const factory = new SchemaFactory("example");
const recursiveReference = () => RecursiveObject;
factory.fixRecursiveReference(recursiveReference);
export class RecursiveObject extends factory.object("exampleObject", {
	recursive: [recursiveReference],
}) {}
```

#### Parameters {#fixrecursivereference-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        types
      </td>
      <td>
        <span>T</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### map (BETA) {#map-method}

Define a structurally typed [TreeNodeSchema](/docs/apis/tree2#treenodeschema-typealias) for a [TreeMapNodeBase](/docs/apis/tree2/treemapnodebase-interface).

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

#### Signature {#map-signature}

```typescript
map<const T extends TreeNodeSchema | readonly TreeNodeSchema[]>(allowedTypes: T): TreeNodeSchema<`${TScope}.Map<${string}>`, NodeKind.Map, TreeMapNode<T>, ReadonlyMap<string, TreeNodeFromImplicitAllowedTypes<T>>, true>;
```

#### Remarks {#map-remarks}

The [TreeNodeSchemaIdentifier](/docs/apis/tree2#treenodeschemaidentifier-typealias) for this Map is defined as a function of the provided types. It is still scoped to this SchemaBuilder, but multiple calls with the same arguments will return the same schema object, providing somewhat structural typing. This does not support recursive types.

If using these structurally named maps, other types in this schema builder should avoid names of the form `Map<${string}>`.

#### Example {#map-example}

The returned schema should be used as a schema directly:

```typescript
const MyMap = factory.map(factory.number);
type MyMap = NodeFromSchema<typeof MyMap>;
```

Or inline:

```typescript
factory.object("Foo", {myMap: factory.map(factory.number)});
```

#### Parameters {#map-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        allowedTypes
      </td>
      <td>
        <span>T</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#map-returns}

**Return type:** [TreeNodeSchema](/docs/apis/tree2#treenodeschema-typealias)&lt;\`${TScope}.Map&lt;${string}&gt;\`, [NodeKind.Map](/docs/apis/tree2/internaltypes/nodekind-enum#map-enummember), [TreeMapNode](/docs/apis/tree2/treemapnode-interface)&lt;T&gt;, ReadonlyMap&lt;string, [TreeNodeFromImplicitAllowedTypes](/docs/apis/tree2/internaltypes/internalclasstreetypes-namespace#treenodefromimplicitallowedtypes-typealias)&lt;T&gt;&gt;, true&gt;

### map (BETA) {#map_1-method}

Define a [TreeNodeSchema](/docs/apis/tree2#treenodeschema-typealias) for a [TreeMapNodeBase](/docs/apis/tree2/treemapnodebase-interface).

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

#### Signature {#map_1-signature}

```typescript
map<Name extends TName, const T extends ImplicitAllowedTypes>(name: Name, allowedTypes: T): TreeNodeSchemaClass<`${TScope}.${Name}`, NodeKind.Map, TreeMapNode<T>, ReadonlyMap<string, InsertableTreeNodeFromImplicitAllowedTypes<T>>, true>;
```

#### Example {#map_1-example}

```typescript
class NamedMap extends factory.map("name", factory.number) {}
```

#### Parameters {#map_1-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        name
      </td>
      <td>
        <span>Name</span>
      </td>
      <td>
        Unique identifier for this schema within this factory's scope.
      </td>
    </tr>
    <tr>
      <td>
        allowedTypes
      </td>
      <td>
        <span>T</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#map_1-returns}

**Return type:** [TreeNodeSchemaClass](/docs/apis/tree2/internaltypes/treenodeschemaclass-interface)&lt;\`${TScope}.${Name}\`, [NodeKind.Map](/docs/apis/tree2/internaltypes/nodekind-enum#map-enummember), [TreeMapNode](/docs/apis/tree2/treemapnode-interface)&lt;T&gt;, ReadonlyMap&lt;string, [InsertableTreeNodeFromImplicitAllowedTypes](/docs/apis/tree2#insertabletreenodefromimplicitallowedtypes-typealias)&lt;T&gt;&gt;, true&gt;

### namedArray (BETA) {#namedarray-method}

Define a [TreeNodeSchema](/docs/apis/tree2#treenodeschema-typealias) for a [TreeArrayNode](/docs/apis/tree2/treearraynode-interface).

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

#### Signature {#namedarray-signature}

```typescript
namedArray<Name extends TName | string, const T extends ImplicitAllowedTypes, const ImplicitlyConstructable extends boolean>(name: Name, allowedTypes: T, customizable: boolean, implicitlyConstructable: ImplicitlyConstructable): TreeNodeSchemaClass<`${TScope}.${Name}`, NodeKind.Array, TreeArrayNode<T>, Iterable<InsertableTreeNodeFromImplicitAllowedTypes<T>>, ImplicitlyConstructable>;
```

#### Remarks {#namedarray-remarks}

This is not intended to be used directly, use the overload of `list` which takes a name instead. This is only public to work around a compiler limitation.

#### Parameters {#namedarray-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        name
      </td>
      <td>
        <span>Name</span>
      </td>
      <td>
        Unique identifier for this schema within this factory's scope.
      </td>
    </tr>
    <tr>
      <td>
        allowedTypes
      </td>
      <td>
        <span>T</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        customizable
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        implicitlyConstructable
      </td>
      <td>
        <span>ImplicitlyConstructable</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#namedarray-returns}

**Return type:** [TreeNodeSchemaClass](/docs/apis/tree2/internaltypes/treenodeschemaclass-interface)&lt;\`${TScope}.${Name}\`, [NodeKind.Array](/docs/apis/tree2/internaltypes/nodekind-enum#array-enummember), [TreeArrayNode](/docs/apis/tree2/treearraynode-interface)&lt;T&gt;, Iterable&lt;[InsertableTreeNodeFromImplicitAllowedTypes](/docs/apis/tree2#insertabletreenodefromimplicitallowedtypes-typealias)&lt;T&gt;&gt;, ImplicitlyConstructable&gt;

### namedMap (BETA) {#namedmap-method}

Define a [TreeNodeSchema](/docs/apis/tree2#treenodeschema-typealias) for a [TreeMapNode](/docs/apis/tree2/treemapnode-interface).

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

#### Signature {#namedmap-signature}

```typescript
namedMap<Name extends TName | string, const T extends ImplicitAllowedTypes, const ImplicitlyConstructable extends boolean>(name: Name, allowedTypes: T, customizable: boolean, implicitlyConstructable: ImplicitlyConstructable): TreeNodeSchemaClass<`${TScope}.${Name}`, NodeKind.Map, TreeMapNode<T>, ReadonlyMap<string, InsertableTreeNodeFromImplicitAllowedTypes<T>>, ImplicitlyConstructable>;
```

#### Remarks {#namedmap-remarks}

See remarks on [namedArray(name, allowedTypes, customizable, implicitlyConstructable)](/docs/apis/tree2/schemafactory-class#namedarray-method).

#### Parameters {#namedmap-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        name
      </td>
      <td>
        <span>Name</span>
      </td>
      <td>
        Unique identifier for this schema within this factory's scope.
      </td>
    </tr>
    <tr>
      <td>
        allowedTypes
      </td>
      <td>
        <span>T</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        customizable
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        implicitlyConstructable
      </td>
      <td>
        <span>ImplicitlyConstructable</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#namedmap-returns}

**Return type:** [TreeNodeSchemaClass](/docs/apis/tree2/internaltypes/treenodeschemaclass-interface)&lt;\`${TScope}.${Name}\`, [NodeKind.Map](/docs/apis/tree2/internaltypes/nodekind-enum#map-enummember), [TreeMapNode](/docs/apis/tree2/treemapnode-interface)&lt;T&gt;, ReadonlyMap&lt;string, [InsertableTreeNodeFromImplicitAllowedTypes](/docs/apis/tree2#insertabletreenodefromimplicitallowedtypes-typealias)&lt;T&gt;&gt;, ImplicitlyConstructable&gt;

### object (BETA) {#object-method}

Define a [TreeNodeSchema](/docs/apis/tree2#treenodeschema-typealias) for an object node.

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

#### Signature {#object-signature}

```typescript
object<const Name extends TName, const T extends RestrictiveReadonlyRecord<string, ImplicitFieldSchema>>(name: Name, t: T): TreeNodeSchemaClass<`${TScope}.${Name}`, NodeKind.Object, ObjectFromSchemaRecord<T>, InsertableObjectFromSchemaRecord<T>, true>;
```

#### Parameters {#object-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        name
      </td>
      <td>
        <span>Name</span>
      </td>
      <td>
        Unique identifier for this schema within this factory's scope.
      </td>
    </tr>
    <tr>
      <td>
        t
      </td>
      <td>
        <span>T</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#object-returns}

**Return type:** [TreeNodeSchemaClass](/docs/apis/tree2/internaltypes/treenodeschemaclass-interface)&lt;\`${TScope}.${Name}\`, [NodeKind.Object](/docs/apis/tree2/internaltypes/nodekind-enum#object-enummember), [ObjectFromSchemaRecord](/docs/apis/tree2/internaltypes/internalclasstreetypes-namespace#objectfromschemarecord-typealias)&lt;T&gt;, [InsertableObjectFromSchemaRecord](/docs/apis/tree2/internaltypes/internalclasstreetypes-namespace#insertableobjectfromschemarecord-typealias)&lt;T&gt;, true&gt;

### optional (BETA) {#optional-method}

Make a field optional instead of the default which is required.

WARNING: This API is provided as a beta preview and may change without notice. Use at your own risk.

#### Signature {#optional-signature}

```typescript
optional<const T extends ImplicitAllowedTypes>(t: T): FieldSchema<FieldKind.Optional, T>;
```

#### Parameters {#optional-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        t
      </td>
      <td>
        <span>T</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#optional-returns}

**Return type:** [FieldSchema](/docs/apis/tree2/internaltypes/internalclasstreetypes/fieldschema-class)&lt;FieldKind.Optional, T&gt;
