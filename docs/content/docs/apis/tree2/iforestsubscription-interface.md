{
  "title": "IForestSubscription Interface",
  "summary": "Invalidates whenever the tree content changes. For now (might change later) downloading new parts of the forest counts as a change. Not invalidated when schema changes.\n\nWhen invalidating, all outstanding cursors must be freed or cleared.",
  "kind": "Interface",
  "members": {
    "MethodSignature": {
      "allocateCursor": "/docs/apis/tree2/iforestsubscription-interface#allocatecursor-methodsignature",
      "clone": "/docs/apis/tree2/iforestsubscription-interface#clone-methodsignature",
      "forgetAnchor": "/docs/apis/tree2/iforestsubscription-interface#forgetanchor-methodsignature",
      "getCursorAboveDetachedFields": "/docs/apis/tree2/iforestsubscription-interface#getcursorabovedetachedfields-methodsignature",
      "moveCursorToPath": "/docs/apis/tree2/iforestsubscription-interface#movecursortopath-methodsignature",
      "tryMoveCursorToField": "/docs/apis/tree2/iforestsubscription-interface#trymovecursortofield-methodsignature",
      "tryMoveCursorToNode": "/docs/apis/tree2/iforestsubscription-interface#trymovecursortonode-methodsignature"
    },
    "PropertySignature": {
      "anchors": "/docs/apis/tree2/iforestsubscription-interface#anchors-propertysignature",
      "isEmpty": "/docs/apis/tree2/iforestsubscription-interface#isempty-propertysignature"
    }
  },
  "package": "@fluid-experimental/tree2",
  "unscopedPackageName": "tree2"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

Invalidates whenever the tree content changes. For now (might change later) downloading new parts of the forest counts as a change. Not invalidated when schema changes.

When invalidating, all outstanding cursors must be freed or cleared.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

## Signature {#iforestsubscription-signature}

```typescript
export interface IForestSubscription extends ISubscribable<ForestEvents>
```

**Extends:** [ISubscribable](/docs/apis/tree2/isubscribable-interface)&lt;[ForestEvents](/docs/apis/tree2/forestevents-interface)&gt;

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Alerts
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree2/iforestsubscription-interface#anchors-propertysignature'>anchors</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2/anchorset-class'>AnchorSet</a></span>
      </td>
      <td>
        <p>
          Set of anchors this forest is tracking.
        </p>
        <p>
          To keep these anchors usable, this AnchorSet must be updated / rebased for any changes made to the forest. It is the responsibility of the caller of the forest-editing methods to do this, not the forest itself. The caller performs these updates because it has more semantic knowledge about the edits, which can be needed to update the anchors in a semantically optimal way.
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/iforestsubscription-interface#isempty-propertysignature'>isEmpty</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        True if there are no nodes in the forest at all.
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Alerts
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree2/iforestsubscription-interface#allocatecursor-methodsignature'>allocateCursor()</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2/itreesubscriptioncursor-interface'>ITreeSubscriptionCursor</a></span>
      </td>
      <td>
        Allocates a cursor in the &quot;cleared&quot; state.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/iforestsubscription-interface#clone-methodsignature'>clone(schema, anchors)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2/ieditableforest-interface'>IEditableForest</a></span>
      </td>
      <td>
        <p>
          Create an independent copy of this forest, that uses the provided schema and anchors.
        </p>
        <p>
          The new copy will not invalidate observers (dependents) of the old one.
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/iforestsubscription-interface#forgetanchor-methodsignature'>forgetAnchor(anchor)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Frees an Anchor, stopping tracking its position across edits.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/iforestsubscription-interface#getcursorabovedetachedfields-methodsignature'>getCursorAboveDetachedFields()</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2/itreecursorsynchronous-interface'>ITreeCursorSynchronous</a></span>
      </td>
      <td>
        The cursor is moved to a special dummy node above the detached fields. This dummy node can be used to read the detached fields, but other operations (such as inspecting the dummy node's type or path) should not be relied upon. While this method does not return an <a href='/docs/apis/tree2/itreesubscriptioncursor-interface'>ITreeSubscriptionCursor</a>, similar restrictions apply to its use: the returned cursor must not used after any edits are made to the forest.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/iforestsubscription-interface#movecursortopath-methodsignature'>moveCursorToPath(destination, cursorToMove)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Set <code>cursorToMove</code> to location described by path. This is NOT a relative move: current position is discarded. Path must point to existing node.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/iforestsubscription-interface#trymovecursortofield-methodsignature'>tryMoveCursorToField(destination, cursorToMove)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2/treenavigationresult-enum'>TreeNavigationResult</a></span>
      </td>
      <td>
        It is an error not to free <code>cursorToMove</code> before the next edit. Must provide a <code>cursorToMove</code> from this subscription (acquired via <code>allocateCursor</code>).
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/iforestsubscription-interface#trymovecursortonode-methodsignature'>tryMoveCursorToNode(destination, cursorToMove)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2/treenavigationresult-enum'>TreeNavigationResult</a></span>
      </td>
      <td>
        It is an error not to free <code>cursorToMove</code> before the next edit. Must provide a <code>cursorToMove</code> from this subscription (acquired via <code>allocateCursor</code>).
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### anchors (ALPHA) {#anchors-propertysignature}

Set of anchors this forest is tracking.

To keep these anchors usable, this AnchorSet must be updated / rebased for any changes made to the forest. It is the responsibility of the caller of the forest-editing methods to do this, not the forest itself. The caller performs these updates because it has more semantic knowledge about the edits, which can be needed to update the anchors in a semantically optimal way.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#anchors-signature}

```typescript
readonly anchors: AnchorSet;
```

### isEmpty (ALPHA) {#isempty-propertysignature}

True if there are no nodes in the forest at all.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#isempty-signature}

```typescript
readonly isEmpty: boolean;
```

#### Remarks {#isempty-remarks}

This means no nodes under any detached field, not just the special document root one.

## Method Details

### allocateCursor (ALPHA) {#allocatecursor-methodsignature}

Allocates a cursor in the "cleared" state.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#allocatecursor-signature}

```typescript
allocateCursor(): ITreeSubscriptionCursor;
```

#### Returns {#allocatecursor-returns}

**Return type:** [ITreeSubscriptionCursor](/docs/apis/tree2/itreesubscriptioncursor-interface)

### clone (ALPHA) {#clone-methodsignature}

Create an independent copy of this forest, that uses the provided schema and anchors.

The new copy will not invalidate observers (dependents) of the old one.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#clone-signature}

```typescript
clone(schema: StoredSchemaRepository, anchors: AnchorSet): IEditableForest;
```

#### Parameters {#clone-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        schema
      </td>
      <td>
        <span><a href='/docs/apis/tree2/storedschemarepository-interface'>StoredSchemaRepository</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        anchors
      </td>
      <td>
        <span><a href='/docs/apis/tree2/anchorset-class'>AnchorSet</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#clone-returns}

**Return type:** [IEditableForest](/docs/apis/tree2/ieditableforest-interface)

### forgetAnchor (ALPHA) {#forgetanchor-methodsignature}

Frees an Anchor, stopping tracking its position across edits.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#forgetanchor-signature}

```typescript
forgetAnchor(anchor: Anchor): void;
```

#### Parameters {#forgetanchor-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        anchor
      </td>
      <td>
        <span><a href='/docs/apis/tree2#anchor-typealias'>Anchor</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### getCursorAboveDetachedFields (ALPHA) {#getcursorabovedetachedfields-methodsignature}

The cursor is moved to a special dummy node above the detached fields. This dummy node can be used to read the detached fields, but other operations (such as inspecting the dummy node's type or path) should not be relied upon. While this method does not return an [ITreeSubscriptionCursor](/docs/apis/tree2/itreesubscriptioncursor-interface), similar restrictions apply to its use: the returned cursor must not used after any edits are made to the forest.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#getcursorabovedetachedfields-signature}

```typescript
getCursorAboveDetachedFields(): ITreeCursorSynchronous;
```

#### Returns {#getcursorabovedetachedfields-returns}

**Return type:** [ITreeCursorSynchronous](/docs/apis/tree2/itreecursorsynchronous-interface)

### moveCursorToPath (ALPHA) {#movecursortopath-methodsignature}

Set `cursorToMove` to location described by path. This is NOT a relative move: current position is discarded. Path must point to existing node.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#movecursortopath-signature}

```typescript
moveCursorToPath(destination: UpPath, cursorToMove: ITreeSubscriptionCursor): void;
```

#### Parameters {#movecursortopath-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        destination
      </td>
      <td>
        <span><a href='/docs/apis/tree2/uppath-interface'>UpPath</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        cursorToMove
      </td>
      <td>
        <span><a href='/docs/apis/tree2/itreesubscriptioncursor-interface'>ITreeSubscriptionCursor</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### tryMoveCursorToField (ALPHA) {#trymovecursortofield-methodsignature}

It is an error not to free `cursorToMove` before the next edit. Must provide a `cursorToMove` from this subscription (acquired via `allocateCursor`).

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#trymovecursortofield-signature}

```typescript
tryMoveCursorToField(destination: FieldAnchor, cursorToMove: ITreeSubscriptionCursor): TreeNavigationResult;
```

#### Parameters {#trymovecursortofield-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        destination
      </td>
      <td>
        <span><a href='/docs/apis/tree2/fieldanchor-interface'>FieldAnchor</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        cursorToMove
      </td>
      <td>
        <span><a href='/docs/apis/tree2/itreesubscriptioncursor-interface'>ITreeSubscriptionCursor</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#trymovecursortofield-returns}

**Return type:** [TreeNavigationResult](/docs/apis/tree2/treenavigationresult-enum)

### tryMoveCursorToNode (ALPHA) {#trymovecursortonode-methodsignature}

It is an error not to free `cursorToMove` before the next edit. Must provide a `cursorToMove` from this subscription (acquired via `allocateCursor`).

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#trymovecursortonode-signature}

```typescript
tryMoveCursorToNode(destination: Anchor, cursorToMove: ITreeSubscriptionCursor): TreeNavigationResult;
```

#### Parameters {#trymovecursortonode-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        destination
      </td>
      <td>
        <span><a href='/docs/apis/tree2#anchor-typealias'>Anchor</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        cursorToMove
      </td>
      <td>
        <span><a href='/docs/apis/tree2/itreesubscriptioncursor-interface'>ITreeSubscriptionCursor</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#trymovecursortonode-returns}

**Return type:** [TreeNavigationResult](/docs/apis/tree2/treenavigationresult-enum)
