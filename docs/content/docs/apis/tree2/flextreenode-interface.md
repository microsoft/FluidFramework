{
  "title": "FlexTreeNode Interface",
  "summary": "Generic tree node API.\n\nNodes are (shallowly) immutable and have a logical identity, a type and either a value or fields under string keys.\n\nThis 'logical identity' is exposed as the object identity: if a node is moved within a document, the same [FlexTreeNode](/docs/apis/tree2/flextreenode-interface) instance will be used in the new location. Similarly, edits applied to a node's sub-tree concurrently with the move of the node will still be applied to its subtree in its new location.",
  "kind": "Interface",
  "members": {
    "MethodSignature": {
      "[boxedIterator]": "/docs/apis/tree2/flextreenode-interface#_boxediterator_-methodsignature",
      "[onNextChange]": "/docs/apis/tree2/flextreenode-interface#_onnextchange_-methodsignature",
      "is": "/docs/apis/tree2/flextreenode-interface#is-methodsignature",
      "on": "/docs/apis/tree2/flextreenode-interface#on-methodsignature",
      "tryGetField": "/docs/apis/tree2/flextreenode-interface#trygetfield-methodsignature"
    },
    "PropertySignature": {
      "[flexTreeMarker]": "/docs/apis/tree2/flextreenode-interface#_flextreemarker_-propertysignature",
      "parentField": "/docs/apis/tree2/flextreenode-interface#parentfield-propertysignature",
      "type": "/docs/apis/tree2/flextreenode-interface#type-propertysignature",
      "value": "/docs/apis/tree2/flextreenode-interface#value-propertysignature"
    }
  },
  "package": "@fluid-experimental/tree2",
  "unscopedPackageName": "tree2"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

Generic tree node API.

Nodes are (shallowly) immutable and have a logical identity, a type and either a value or fields under string keys.

This "logical identity" is exposed as the object identity: if a node is moved within a document, the same [FlexTreeNode](/docs/apis/tree2/flextreenode-interface) instance will be used in the new location. Similarly, edits applied to a node's sub-tree concurrently with the move of the node will still be applied to its subtree in its new location.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

## Signature {#flextreenode-signature}

```typescript
export interface FlexTreeNode extends FlexTreeEntity<TreeNodeSchema>
```

**Extends:** [FlexTreeEntity](/docs/apis/tree2/flextreeentity-interface)&lt;[TreeNodeSchema](/docs/apis/tree2#flextreenodeschema-typealias)&gt;

## Remarks {#flextreenode-remarks}

Down-casting (via _FlexTreeNode\#is_) is required to access Schema-Aware APIs, including editing. All content in the tree is accessible without down-casting, but if the schema is known, the schema aware API may be more ergonomic. All editing is actually done via [FlexTreeField](/docs/apis/tree2/flextreefield-interface)s: the nodes are immutable other than that they contain mutable fields.

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Alerts
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree2/flextreenode-interface#_flextreemarker_-propertysignature'>[flexTreeMarker]</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2/flextreeentitykind-enum#node-enummember'>FlexTreeEntityKind.Node</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/flextreenode-interface#parentfield-propertysignature'>parentField</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>{         readonly parent: <a href='/docs/apis/tree2/flextreefield-interface'>FlexTreeField</a>;         readonly index: number;     }</span>
      </td>
      <td>
        The field this tree is in, and the index within that field.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/flextreenode-interface#type-propertysignature'>type</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2#treenodeschemaidentifier-typealias'>TreeNodeSchemaIdentifier</a></span>
      </td>
      <td>
        Same as <code>this.schema.name</code>. This is provided as an enumerable own property to aid with JavaScript object traversals of this data-structure. See [ReadMe](./README.md) for details.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/flextreenode-interface#value-propertysignature'>value</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>optional</code>, <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree2#treevalue-typealias'>TreeValue</a></span>
      </td>
      <td>
        Value stored on this node.
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Alerts
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree2/flextreenode-interface#_boxediterator_-methodsignature'>[boxedIterator]()</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>IterableIterator&lt;<a href='/docs/apis/tree2/flextreefield-interface'>FlexTreeField</a>&gt;</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/flextreenode-interface#_onnextchange_-methodsignature'>[onNextChange](fn)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>() =&gt; void</span>
      </td>
      <td>
        Subscribe to the next change that affects this node's children.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/flextreenode-interface#is-methodsignature'>is(schema)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>this is <a href='/docs/apis/tree2#flextreetypednode-typealias'>FlexTreeTypedNode</a>&lt;TSchema&gt;</span>
      </td>
      <td>
        Type guard for narrowing / down-casting to a specific schema.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/flextreenode-interface#on-methodsignature'>on(eventName, listener)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>() =&gt; void</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree2/flextreenode-interface#trygetfield-methodsignature'>tryGetField(key)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>undefined &#124; <a href='/docs/apis/tree2/flextreefield-interface'>FlexTreeField</a></span>
      </td>
      <td>
        Gets a field of this node, if it is not empty.
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### \[flexTreeMarker\] (ALPHA) {#_flextreemarker_-propertysignature}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#_flextreemarker_-signature}

```typescript
readonly [flexTreeMarker]: FlexTreeEntityKind.Node;
```

### parentField (ALPHA) {#parentfield-propertysignature}

The field this tree is in, and the index within that field.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#parentfield-signature}

```typescript
readonly parentField: {
        readonly parent: FlexTreeField;
        readonly index: number;
    };
```

### type (ALPHA) {#type-propertysignature}

Same as `this.schema.name`. This is provided as an enumerable own property to aid with JavaScript object traversals of this data-structure. See \[ReadMe\](./README.md) for details.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#type-signature}

```typescript
readonly type: TreeNodeSchemaIdentifier;
```

### value (ALPHA) {#value-propertysignature}

Value stored on this node.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#value-signature}

```typescript
readonly value?: TreeValue;
```

## Method Details

### \[boxedIterator\] (ALPHA) {#_boxediterator_-methodsignature}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#_boxediterator_-signature}

```typescript
[boxedIterator](): IterableIterator<FlexTreeField>;
```

#### Returns {#_boxediterator_-returns}

**Return type:** IterableIterator&lt;[FlexTreeField](/docs/apis/tree2/flextreefield-interface)&gt;

### \[onNextChange\] (ALPHA) {#_onnextchange_-methodsignature}

Subscribe to the next change that affects this node's children.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#_onnextchange_-signature}

```typescript
[onNextChange](fn: (node: FlexTreeNode) => void): () => void;
```

#### Remarks {#_onnextchange_-remarks}

The given function will be run the next time that this node's direct children change. It will only be run once, and thereafter automatically deregistered. It does not run in response to changes beneath this node's direct children. This event fires after the tree has been mutated but before [afterChange(event)](/docs/apis/tree2/editabletreeevents-interface#afterchange-methodsignature). Only one subscriber may register to this event at the same time.

#### Parameters {#_onnextchange_-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        fn
      </td>
      <td>
        <span>(node: <a href='/docs/apis/tree2/flextreenode-interface'>FlexTreeNode</a>) =&gt; void</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#_onnextchange_-returns}

a function which will deregister the registered event. It has no effect if the event was already deregistered.

**Return type:** () =&gt; void

### is (ALPHA) {#is-methodsignature}

Type guard for narrowing / down-casting to a specific schema.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#is-signature}

```typescript
is<TSchema extends TreeNodeSchema>(schema: TSchema): this is FlexTreeTypedNode<TSchema>;
```

#### Parameters {#is-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        schema
      </td>
      <td>
        <span>TSchema</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#is-returns}

**Return type:** this is [FlexTreeTypedNode](/docs/apis/tree2#flextreetypednode-typealias)&lt;TSchema&gt;

### on (ALPHA) {#on-methodsignature}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#on-signature}

```typescript
on<K extends keyof EditableTreeEvents>(eventName: K, listener: EditableTreeEvents[K]): () => void;
```

#### Parameters {#on-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        eventName
      </td>
      <td>
        <span>K</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        listener
      </td>
      <td>
        <span><a href='/docs/apis/tree2/editabletreeevents-interface'>EditableTreeEvents</a>[K]</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#on-returns}

**Return type:** () =&gt; void

### tryGetField (ALPHA) {#trygetfield-methodsignature}

Gets a field of this node, if it is not empty.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#trygetfield-signature}

```typescript
tryGetField(key: FieldKey): undefined | FlexTreeField;
```

#### Parameters {#trygetfield-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        key
      </td>
      <td>
        <span><a href='/docs/apis/tree2#fieldkey-typealias'>FieldKey</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#trygetfield-returns}

**Return type:** undefined \| [FlexTreeField](/docs/apis/tree2/flextreefield-interface)
