{
  "title": "ITokenProvider Interface",
  "summary": "Abstracts the token fetching mechanism for a hosting application. The hosting application is responsible for providing an implementation.",
  "kind": "Interface",
  "members": {
    "MethodSignature": {
      "documentPostCreateCallback": "/docs/apis/routerlicious-driver/itokenprovider-interface#documentpostcreatecallback-methodsignature",
      "fetchOrdererToken": "/docs/apis/routerlicious-driver/itokenprovider-interface#fetchorderertoken-methodsignature",
      "fetchStorageToken": "/docs/apis/routerlicious-driver/itokenprovider-interface#fetchstoragetoken-methodsignature"
    }
  },
  "package": "@fluidframework/routerlicious-driver",
  "unscopedPackageName": "routerlicious-driver"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

Abstracts the token fetching mechanism for a hosting application. The hosting application is responsible for providing an implementation.

## Signature {#itokenprovider-signature}

```typescript
export interface ITokenProvider
```

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/routerlicious-driver/itokenprovider-interface#documentpostcreatecallback-methodsignature'>documentPostCreateCallback(documentId, creationToken)</a>
      </td>
      <td>
        <code>optional</code>
      </td>
      <td>
        <span>Promise&lt;void&gt;</span>
      </td>
      <td>
        A callback triggered directly after creating the document. In this callback the client has the opportunity, to verify against an authorization service, if the user who claims to create the document is the same user who created it.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/routerlicious-driver/itokenprovider-interface#fetchorderertoken-methodsignature'>fetchOrdererToken(tenantId, documentId, refresh)</a>
      </td>
      <td>
      </td>
      <td>
        <span>Promise&lt;<a href='/docs/apis/routerlicious-driver/itokenresponse-interface'>ITokenResponse</a>&gt;</span>
      </td>
      <td>
        Fetches the orderer token from host.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/routerlicious-driver/itokenprovider-interface#fetchstoragetoken-methodsignature'>fetchStorageToken(tenantId, documentId, refresh)</a>
      </td>
      <td>
      </td>
      <td>
        <span>Promise&lt;<a href='/docs/apis/routerlicious-driver/itokenresponse-interface'>ITokenResponse</a>&gt;</span>
      </td>
      <td>
        Fetches the storage token from host.
      </td>
    </tr>
  </tbody>
</table>

## Method Details

### documentPostCreateCallback {#documentpostcreatecallback-methodsignature}

A callback triggered directly after creating the document. In this callback the client has the opportunity, to verify against an authorization service, if the user who claims to create the document is the same user who created it.

#### Signature {#documentpostcreatecallback-signature}

```typescript
documentPostCreateCallback?(documentId: string, creationToken: string): Promise<void>;
```

#### Remarks {#documentpostcreatecallback-remarks}

Notes:

\* Using the callback may have performance impact on the document creation process.

\* Any exceptions thrown in the callback would fail the creation workflow (see _RouterliciousDocumentServiceFactory.createContainer_ for more details).

#### Parameters {#documentpostcreatecallback-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        documentId
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Document ID.
      </td>
    </tr>
    <tr>
      <td>
        creationToken
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        A special token that doesn't provide any kind of access, but it has the user's payload and document id. It can be used to validate the identity of the document creator.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#documentpostcreatecallback-returns}

**Return type:** Promise&lt;void&gt;

### fetchOrdererToken {#fetchorderertoken-methodsignature}

Fetches the orderer token from host.

#### Signature {#fetchorderertoken-signature}

```typescript
fetchOrdererToken(tenantId: string, documentId?: string, refresh?: boolean): Promise<ITokenResponse>;
```

#### Parameters {#fetchorderertoken-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        tenantId
      </td>
      <td>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Tenant ID.
      </td>
    </tr>
    <tr>
      <td>
        documentId
      </td>
      <td>
        optional
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Optional. Document ID is only required for document-scoped requests.
      </td>
    </tr>
    <tr>
      <td>
        refresh
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        <p>
          Optional flag indicating whether token fetch must bypass local cache. This likely indicates that some previous request failed authorization due to an expired token, and so a fresh token is required.
        </p>
        <p>
          Default: <code>false</code>.
        </p>
        <p>
          NOTE: This parameter will be made required in the future.
        </p>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#fetchorderertoken-returns}

**Return type:** Promise&lt;[ITokenResponse](/docs/apis/routerlicious-driver/itokenresponse-interface)&gt;

### fetchStorageToken {#fetchstoragetoken-methodsignature}

Fetches the storage token from host.

#### Signature {#fetchstoragetoken-signature}

```typescript
fetchStorageToken(tenantId: string, documentId: string, refresh?: boolean): Promise<ITokenResponse>;
```

#### Parameters {#fetchstoragetoken-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        tenantId
      </td>
      <td>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Tenant ID.
      </td>
    </tr>
    <tr>
      <td>
        documentId
      </td>
      <td>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Document ID.
      </td>
    </tr>
    <tr>
      <td>
        refresh
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        <p>
          Optional flag indicating whether token fetch must bypass local cache. This likely indicates that some previous request failed authorization due to an expired token, and so a fresh token is required.
        </p>
        <p>
          Default: <code>false</code>.
        </p>
        <p>
          NOTE: This parameter will be made required in the future.
        </p>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#fetchstoragetoken-returns}

**Return type:** Promise&lt;[ITokenResponse](/docs/apis/routerlicious-driver/itokenresponse-interface)&gt;
