{
  "title": "MockContainerRuntimeFactory Class",
  "summary": "Factory to create MockContainerRuntime for testing basic submitting and processing of messages. This also acts as a very basic server that stores the messages from all the MockContainerRuntimes and processes them when asked. If test specific logic is required, extend this class and add the logic there. For an example, take a look at MockContainerRuntimeFactoryForReconnection.",
  "kind": "Class",
  "members": {
    "Constructor": {
      "(constructor)": "/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#_constructor_-constructor"
    },
    "Method": {
      "createContainerRuntime": "/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#createcontainerruntime-method",
      "getMinSeq": "/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#getminseq-method",
      "processAllMessages": "/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#processallmessages-method",
      "processOneMessage": "/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#processonemessage-method",
      "processSomeMessages": "/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#processsomemessages-method",
      "pushMessage": "/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#pushmessage-method"
    },
    "Property": {
      "messages": "/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#messages-property",
      "minSeq": "/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#minseq-property",
      "outstandingMessageCount": "/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#outstandingmessagecount-property",
      "quorum": "/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#quorum-property",
      "runtimeOptions": "/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#runtimeoptions-property",
      "runtimes": "/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#runtimes-property",
      "sequenceNumber": "/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#sequencenumber-property"
    }
  },
  "package": "@fluidframework/test-runtime-utils",
  "unscopedPackageName": "test-runtime-utils"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/test-runtime-utils](/docs/apis/test-runtime-utils) &gt; [MockContainerRuntimeFactory](/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class)

Factory to create MockContainerRuntime for testing basic submitting and processing of messages. This also acts as a very basic server that stores the messages from all the MockContainerRuntimes and processes them when asked. If test specific logic is required, extend this class and add the logic there. For an example, take a look at MockContainerRuntimeFactoryForReconnection.

## Signature {#mockcontainerruntimefactory-signature}

```typescript
export declare class MockContainerRuntimeFactory
```

## Constructors

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Constructor
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#_constructor_-constructor'>(constructor)</a>
      </td>
      <td>
        Constructs a new instance of the <code>MockContainerRuntimeFactory</code> class
      </td>
    </tr>
  </tbody>
</table>

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#messages-property'>messages</a>
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/protocol-definitions/isequenceddocumentmessage-interface'>ISequencedDocumentMessage</a>[]</span>
      </td>
      <td>
        The MockContainerRuntimes we produce will push messages into this queue as they are submitted. This is playing the role of the orderer, establishing a single universal order for the messages generated. They are held in this queue until we explicitly choose to process them, at which time they are &quot;broadcast&quot; to each of the runtimes.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#minseq-property'>minSeq</a>
      </td>
      <td>
      </td>
      <td>
        <span>Map&lt;string, number&gt;</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#outstandingmessagecount-property'>outstandingMessageCount</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#quorum-property'>quorum</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/test-runtime-utils/mockquorumclients-class'>MockQuorumClients</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#runtimeoptions-property'>runtimeOptions</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>Required&lt;<a href='/docs/apis/test-runtime-utils/imockcontainerruntimeoptions-interface'>IMockContainerRuntimeOptions</a>&gt;</span>
      </td>
      <td>
        <p>
          The container runtime options which will be provided to the all runtimes created by this factory and also drive the way the ops are processed.
        </p>
        <p>
          See <a href='/docs/apis/test-runtime-utils/imockcontainerruntimeoptions-interface'>IMockContainerRuntimeOptions</a>
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#runtimes-property'>runtimes</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/test-runtime-utils/mockcontainerruntime-class'>MockContainerRuntime</a>[]</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#sequencenumber-property'>sequenceNumber</a>
      </td>
      <td>
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#createcontainerruntime-method'>createContainerRuntime</a>
      </td>
      <td>
        <span><a href='/docs/apis/test-runtime-utils/mockcontainerruntime-class'>MockContainerRuntime</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#getminseq-method'>getMinSeq</a>
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#processallmessages-method'>processAllMessages</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Process all remaining messages in the queue.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#processonemessage-method'>processOneMessage</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Process one of the queued messages. Throws if no messages are queued.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#processsomemessages-method'>processSomeMessages</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Process a given number of queued messages. Throws if there are fewer messages queued than requested.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/test-runtime-utils/mockcontainerruntimefactory-class#pushmessage-method'>pushMessage</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Constructor Details

### (constructor) {#_constructor_-constructor}

Constructs a new instance of the `MockContainerRuntimeFactory` class

#### Signature {#_constructor_-signature}

```typescript
constructor(mockContainerRuntimeOptions?: IMockContainerRuntimeOptions);
```

#### Parameters {#_constructor_-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        mockContainerRuntimeOptions
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/test-runtime-utils/imockcontainerruntimeoptions-interface'>IMockContainerRuntimeOptions</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### messages {#messages-property}

The MockContainerRuntimes we produce will push messages into this queue as they are submitted. This is playing the role of the orderer, establishing a single universal order for the messages generated. They are held in this queue until we explicitly choose to process them, at which time they are "broadcast" to each of the runtimes.

#### Signature {#messages-signature}

```typescript
protected messages: ISequencedDocumentMessage[];
```

### minSeq {#minseq-property}

#### Signature {#minseq-signature}

```typescript
minSeq: Map<string, number>;
```

### outstandingMessageCount {#outstandingmessagecount-property}

#### Signature {#outstandingmessagecount-signature}

```typescript
get outstandingMessageCount(): number;
```

### quorum {#quorum-property}

#### Signature {#quorum-signature}

```typescript
readonly quorum: MockQuorumClients;
```

### runtimeOptions {#runtimeoptions-property}

The container runtime options which will be provided to the all runtimes created by this factory and also drive the way the ops are processed.

See [IMockContainerRuntimeOptions](/docs/apis/test-runtime-utils/imockcontainerruntimeoptions-interface)

#### Signature {#runtimeoptions-signature}

```typescript
protected readonly runtimeOptions: Required<IMockContainerRuntimeOptions>;
```

### runtimes {#runtimes-property}

#### Signature {#runtimes-signature}

```typescript
protected readonly runtimes: MockContainerRuntime[];
```

### sequenceNumber {#sequencenumber-property}

#### Signature {#sequencenumber-signature}

```typescript
sequenceNumber: number;
```

## Method Details

### createContainerRuntime {#createcontainerruntime-method}

#### Signature {#createcontainerruntime-signature}

```typescript
createContainerRuntime(dataStoreRuntime: MockFluidDataStoreRuntime): MockContainerRuntime;
```

#### Parameters {#createcontainerruntime-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        dataStoreRuntime
      </td>
      <td>
        <span><a href='/docs/apis/test-runtime-utils/mockfluiddatastoreruntime-class'>MockFluidDataStoreRuntime</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#createcontainerruntime-returns}

**Return type:** [MockContainerRuntime](/docs/apis/test-runtime-utils/mockcontainerruntime-class)

### getMinSeq {#getminseq-method}

#### Signature {#getminseq-signature}

```typescript
getMinSeq(): number;
```

#### Returns {#getminseq-returns}

a minimum sequence number for all connected clients.

**Return type:** number

### processAllMessages {#processallmessages-method}

Process all remaining messages in the queue.

#### Signature {#processallmessages-signature}

```typescript
processAllMessages(): void;
```

### processOneMessage {#processonemessage-method}

Process one of the queued messages. Throws if no messages are queued.

#### Signature {#processonemessage-signature}

```typescript
processOneMessage(): void;
```

### processSomeMessages {#processsomemessages-method}

Process a given number of queued messages. Throws if there are fewer messages queued than requested.

#### Signature {#processsomemessages-signature}

```typescript
processSomeMessages(count: number): void;
```

#### Parameters {#processsomemessages-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        count
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
        the number of messages to process
      </td>
    </tr>
  </tbody>
</table>

### pushMessage {#pushmessage-method}

#### Signature {#pushmessage-signature}

```typescript
pushMessage(msg: Partial<ISequencedDocumentMessage>): void;
```

#### Parameters {#pushmessage-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        msg
      </td>
      <td>
        <span>Partial&lt;<a href='/docs/apis/protocol-definitions/isequenceddocumentmessage-interface'>ISequencedDocumentMessage</a>&gt;</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>
