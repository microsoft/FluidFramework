{
  "title": "ISegment Interface",
  "summary": "A segment representing a portion of the merge tree. Segments are leaf nodes of the merge tree and contain data.",
  "kind": "Interface",
  "members": {
    "MethodSignature": {
      "ack": "/docs/apis/merge-tree/isegment-interface#ack-methodsignature",
      "addProperties": "/docs/apis/merge-tree/isegment-interface#addproperties-methodsignature",
      "append": "/docs/apis/merge-tree/isegment-interface#append-methodsignature",
      "canAppend": "/docs/apis/merge-tree/isegment-interface#canappend-methodsignature",
      "clone": "/docs/apis/merge-tree/isegment-interface#clone-methodsignature",
      "splitAt": "/docs/apis/merge-tree/isegment-interface#splitat-methodsignature",
      "toJSONObject": "/docs/apis/merge-tree/isegment-interface#tojsonobject-methodsignature"
    },
    "PropertySignature": {
      "cachedLength": "/docs/apis/merge-tree/isegment-interface#cachedlength-propertysignature",
      "clientId": "/docs/apis/merge-tree/isegment-interface#clientid-propertysignature",
      "localRefs": "/docs/apis/merge-tree/isegment-interface#localrefs-propertysignature",
      "localRemovedSeq": "/docs/apis/merge-tree/isegment-interface#localremovedseq-propertysignature",
      "localSeq": "/docs/apis/merge-tree/isegment-interface#localseq-propertysignature",
      "properties": "/docs/apis/merge-tree/isegment-interface#properties-propertysignature",
      "propertyManager": "/docs/apis/merge-tree/isegment-interface#propertymanager-propertysignature",
      "segmentGroups": "/docs/apis/merge-tree/isegment-interface#segmentgroups-propertysignature",
      "seq": "/docs/apis/merge-tree/isegment-interface#seq-propertysignature",
      "trackingCollection": "/docs/apis/merge-tree/isegment-interface#trackingcollection-propertysignature",
      "type": "/docs/apis/merge-tree/isegment-interface#type-propertysignature"
    }
  },
  "package": "@fluidframework/merge-tree",
  "unscopedPackageName": "merge-tree"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/merge-tree](/docs/apis/merge-tree) &gt; [ISegment](/docs/apis/merge-tree/isegment-interface)

A segment representing a portion of the merge tree. Segments are leaf nodes of the merge tree and contain data.

## Signature {#isegment-signature}

```typescript
export interface ISegment extends IMergeNodeCommon, Partial<IRemovalInfo>
```

**Extends:** [IMergeNodeCommon](/docs/apis/merge-tree/imergenodecommon-interface), Partial&lt;[IRemovalInfo](/docs/apis/merge-tree/iremovalinfo-interface)&gt;

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#cachedlength-propertysignature'>cachedLength</a>
      </td>
      <td>
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
        The length of the contents of the node.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#clientid-propertysignature'>clientId</a>
      </td>
      <td>
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
        Short clientId for the client that inserted this segment.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#localrefs-propertysignature'>localRefs</a>
      </td>
      <td>
        <code>optional</code>
      </td>
      <td>
        <span><a href='/docs/apis/merge-tree/localreferencecollection-class'>LocalReferenceCollection</a></span>
      </td>
      <td>
        Local references added to this segment.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#localremovedseq-propertysignature'>localRemovedSeq</a>
      </td>
      <td>
        <code>optional</code>
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
        <p>
          Local seq at which this segment was removed. If this is defined, <code>removedSeq</code> will initially be set to UnassignedSequenceNumber. However, if another client concurrently removes the same segment, <code>removedSeq</code> will be updated to the seq at which that client removed this segment.
        </p>
        <p>
          Like <code>localSeq</code>, this field is cleared once the local removal of the segment is acked.
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#localseq-propertysignature'>localSeq</a>
      </td>
      <td>
        <code>optional</code>
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
        Local seq at which this segment was inserted. If this is defined, <code>seq</code> will be UnassignedSequenceNumber. Once the segment is acked, this field is cleared.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#properties-propertysignature'>properties</a>
      </td>
      <td>
        <code>optional</code>
      </td>
      <td>
        <span><a href='/docs/apis/merge-tree#propertyset-typealias'>PropertySet</a></span>
      </td>
      <td>
        Properties that have been added to this segment via annotation.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#propertymanager-propertysignature'>propertyManager</a>
      </td>
      <td>
        <code>optional</code>
      </td>
      <td>
        <span><a href='/docs/apis/merge-tree/propertiesmanager-class'>PropertiesManager</a></span>
      </td>
      <td>
        Manages pending local state for properties on this segment.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#segmentgroups-propertysignature'>segmentGroups</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/merge-tree/segmentgroupcollection-class'>SegmentGroupCollection</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#seq-propertysignature'>seq</a>
      </td>
      <td>
        <code>optional</code>
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
        Seq at which this segment was inserted. If undefined, it is assumed the segment was inserted prior to the collab window's minimum sequence number.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#trackingcollection-propertysignature'>trackingCollection</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/merge-tree/trackinggroupcollection-class'>TrackingGroupCollection</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#type-propertysignature'>type</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#ack-methodsignature'>ack</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Acks the current segment against the segment group, op, and merge tree.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#addproperties-methodsignature'>addProperties</a>
      </td>
      <td>
        <span><a href='/docs/apis/merge-tree#propertyset-typealias'>PropertySet</a> &#124; undefined</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#append-methodsignature'>append</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#canappend-methodsignature'>canAppend</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#clone-methodsignature'>clone</a>
      </td>
      <td>
        <span><a href='/docs/apis/merge-tree/isegment-interface'>ISegment</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#splitat-methodsignature'>splitAt</a>
      </td>
      <td>
        <span><a href='/docs/apis/merge-tree/isegment-interface'>ISegment</a> &#124; undefined</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/merge-tree/isegment-interface#tojsonobject-methodsignature'>toJSONObject</a>
      </td>
      <td>
        <span>any</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### cachedLength {#cachedlength-propertysignature}

The length of the contents of the node.

#### Signature {#cachedlength-signature}

```typescript
cachedLength: number;
```

### clientId {#clientid-propertysignature}

Short clientId for the client that inserted this segment.

#### Signature {#clientid-signature}

```typescript
clientId: number;
```

### localRefs {#localrefs-propertysignature}

Local references added to this segment.

#### Signature {#localrefs-signature}

```typescript
localRefs?: LocalReferenceCollection;
```

### localRemovedSeq {#localremovedseq-propertysignature}

Local seq at which this segment was removed. If this is defined, `removedSeq` will initially be set to UnassignedSequenceNumber. However, if another client concurrently removes the same segment, `removedSeq` will be updated to the seq at which that client removed this segment.

Like `localSeq`, this field is cleared once the local removal of the segment is acked.

#### Signature {#localremovedseq-signature}

```typescript
localRemovedSeq?: number;
```

### localSeq {#localseq-propertysignature}

Local seq at which this segment was inserted. If this is defined, `seq` will be UnassignedSequenceNumber. Once the segment is acked, this field is cleared.

#### Signature {#localseq-signature}

```typescript
localSeq?: number;
```

### properties {#properties-propertysignature}

Properties that have been added to this segment via annotation.

#### Signature {#properties-signature}

```typescript
properties?: PropertySet;
```

### propertyManager {#propertymanager-propertysignature}

Manages pending local state for properties on this segment.

#### Signature {#propertymanager-signature}

```typescript
propertyManager?: PropertiesManager;
```

### segmentGroups {#segmentgroups-propertysignature}

#### Signature {#segmentgroups-signature}

```typescript
readonly segmentGroups: SegmentGroupCollection;
```

### seq {#seq-propertysignature}

Seq at which this segment was inserted. If undefined, it is assumed the segment was inserted prior to the collab window's minimum sequence number.

#### Signature {#seq-signature}

```typescript
seq?: number;
```

### trackingCollection {#trackingcollection-propertysignature}

#### Signature {#trackingcollection-signature}

```typescript
readonly trackingCollection: TrackingGroupCollection;
```

### type {#type-propertysignature}

#### Signature {#type-signature}

```typescript
readonly type: string;
```

## Method Details

### ack {#ack-methodsignature}

Acks the current segment against the segment group, op, and merge tree.

#### Signature {#ack-signature}

```typescript
ack(segmentGroup: SegmentGroup, opArgs: IMergeTreeDeltaOpArgs): boolean;
```

#### Parameters {#ack-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        segmentGroup
      </td>
      <td>
        <span><a href='/docs/apis/merge-tree/segmentgroup-interface'>SegmentGroup</a></span>
      </td>
      <td>
        Pending segment group associated with this op.
      </td>
    </tr>
    <tr>
      <td>
        opArgs
      </td>
      <td>
        <span><a href='/docs/apis/merge-tree/imergetreedeltaopargs-interface'>IMergeTreeDeltaOpArgs</a></span>
      </td>
      <td>
        Information about the op that was acked
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#ack-returns}

- true if the op modifies the segment, otherwise false. The only current false case is overlapping remove, where a segment is removed by a previously sequenced operation before the current operation is acked.

**Return type:** boolean

#### Throws {#ack-throws}

- error if the segment state doesn't match segment group or op. E.g. if the segment group is not first in the pending queue, or an inserted segment does not have unassigned sequence number.

### addProperties {#addproperties-methodsignature}

#### Signature {#addproperties-signature}

```typescript
addProperties(newProps: PropertySet, op?: ICombiningOp, seq?: number, collabWindow?: CollaborationWindow, rollback?: PropertiesRollback): PropertySet | undefined;
```

#### Parameters {#addproperties-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        newProps
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/merge-tree#propertyset-typealias'>PropertySet</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        op
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/merge-tree/icombiningop-interface'>ICombiningOp</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        seq
      </td>
      <td>
        optional
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        collabWindow
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/merge-tree/collaborationwindow-class'>CollaborationWindow</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        rollback
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/merge-tree#propertiesrollback-enum'>PropertiesRollback</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#addproperties-returns}

**Return type:** [PropertySet](/docs/apis/merge-tree#propertyset-typealias) \| undefined

### append {#append-methodsignature}

#### Signature {#append-signature}

```typescript
append(segment: ISegment): void;
```

#### Parameters {#append-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        segment
      </td>
      <td>
        <span><a href='/docs/apis/merge-tree/isegment-interface'>ISegment</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### canAppend {#canappend-methodsignature}

#### Signature {#canappend-signature}

```typescript
canAppend(segment: ISegment): boolean;
```

#### Parameters {#canappend-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        segment
      </td>
      <td>
        <span><a href='/docs/apis/merge-tree/isegment-interface'>ISegment</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#canappend-returns}

**Return type:** boolean

### clone {#clone-methodsignature}

#### Signature {#clone-signature}

```typescript
clone(): ISegment;
```

#### Returns {#clone-returns}

**Return type:** [ISegment](/docs/apis/merge-tree/isegment-interface)

### splitAt {#splitat-methodsignature}

#### Signature {#splitat-signature}

```typescript
splitAt(pos: number): ISegment | undefined;
```

#### Parameters {#splitat-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        pos
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#splitat-returns}

**Return type:** [ISegment](/docs/apis/merge-tree/isegment-interface) \| undefined

### toJSONObject {#tojsonobject-methodsignature}

#### Signature {#tojsonobject-signature}

```typescript
toJSONObject(): any;
```

#### Returns {#tojsonobject-returns}

**Return type:** any
