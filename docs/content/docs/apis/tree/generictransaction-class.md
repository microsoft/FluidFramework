{
  "title": "GenericTransaction Class",
  "summary": "A mutable transaction for applying sequences of changes to a TreeView. Allows viewing the intermediate states.\n\nContains necessary state to apply changes within an edit to a TreeView.\n\nMay have any number of changes applied to make up the edit. Use `close` to complete the transaction, returning the array of changes and an EditingResult showing the results of applying the changes as an Edit to the initial TreeView (passed to the constructor).\n\nNo data outside the Transaction is modified by Transaction: the results from `close` must be used to actually submit an `Edit`.",
  "kind": "Class",
  "members": {
    "Constructor": {
      "(constructor)": "/docs/apis/tree/generictransaction-class#_constructor_-constructor"
    },
    "Method": {
      "applyChange": "/docs/apis/tree/generictransaction-class#applychange-method",
      "applyChanges": "/docs/apis/tree/generictransaction-class#applychanges-method",
      "close": "/docs/apis/tree/generictransaction-class#close-method"
    },
    "Property": {
      "before": "/docs/apis/tree/generictransaction-class#before-property",
      "changes": "/docs/apis/tree/generictransaction-class#changes-property",
      "failure": "/docs/apis/tree/generictransaction-class#failure-property",
      "isOpen": "/docs/apis/tree/generictransaction-class#isopen-property",
      "status": "/docs/apis/tree/generictransaction-class#status-property",
      "steps": "/docs/apis/tree/generictransaction-class#steps-property",
      "view": "/docs/apis/tree/generictransaction-class#view-property"
    }
  },
  "package": "@fluid-experimental/tree",
  "unscopedPackageName": "tree"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

[Packages](/docs/apis/) &gt; [@fluid-experimental/tree](/docs/apis/tree) &gt; [GenericTransaction](/docs/apis/tree/generictransaction-class)

A mutable transaction for applying sequences of changes to a TreeView. Allows viewing the intermediate states.

Contains necessary state to apply changes within an edit to a TreeView.

May have any number of changes applied to make up the edit. Use `close` to complete the transaction, returning the array of changes and an EditingResult showing the results of applying the changes as an Edit to the initial TreeView (passed to the constructor).

No data outside the Transaction is modified by Transaction: the results from `close` must be used to actually submit an `Edit`.

## Signature {#generictransaction-signature}

```typescript
export declare class GenericTransaction
```

## Constructors

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Constructor
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree/generictransaction-class#_constructor_-constructor'>(constructor)</a>
      </td>
      <td>
        Create and open an edit of the provided <code>TreeView</code>. After applying 0 or more changes, this editor should be closed via <code>close()</code>.
      </td>
    </tr>
  </tbody>
</table>

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree/generictransaction-class#before-property'>before</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree/revisionview-class'>RevisionView</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/generictransaction-class#changes-property'>changes</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>readonly <a href='/docs/apis/tree#changeinternal-typealias'>ChangeInternal</a>[]</span>
      </td>
      <td>
        The status code of the most recent attempted change.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/generictransaction-class#failure-property'>failure</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree/transactioninternal-namespace#failure-typealias'>TransactionInternal.Failure</a> &#124; undefined</span>
      </td>
      <td>
        Information about why the transaction failed. Defined if and only if <code>status</code> is invalid or malformed.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/generictransaction-class#isopen-property'>isOpen</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Whether or not this transaction has been closed via <code>close()</code>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/generictransaction-class#status-property'>status</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree#editstatus-enum'>EditStatus</a></span>
      </td>
      <td>
        The status code of the most recent attempted change.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/generictransaction-class#steps-property'>steps</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>readonly <a href='/docs/apis/tree/reconciliationchange-interface'>ReconciliationChange</a>[]</span>
      </td>
      <td>
        The status code of the most recent attempted change.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/generictransaction-class#view-property'>view</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree/transactionview-class'>TransactionView</a></span>
      </td>
      <td>
        The most up-to-date <code>TreeView</code> for this edit. This is the state of the tree after all changes applied so far.
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree/generictransaction-class#applychange-method'>applyChange</a>
      </td>
      <td>
        <span>this</span>
      </td>
      <td>
        Attempt to apply the given change as part of this edit. This method should not be called if a previous change in this edit failed to apply.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/generictransaction-class#applychanges-method'>applyChanges</a>
      </td>
      <td>
        <span>this</span>
      </td>
      <td>
        A helper to apply a sequence of changes. Changes will be applied one after the other. If a change fails to apply, the remaining changes in <code>changes</code> will be ignored.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/generictransaction-class#close-method'>close</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree#editingresult-typealias'>EditingResult</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Constructor Details

### (constructor) {#_constructor_-constructor}

Create and open an edit of the provided `TreeView`. After applying 0 or more changes, this editor should be closed via `close()`.

#### Signature {#_constructor_-signature}

```typescript
constructor(view: RevisionView, policy: GenericTransactionPolicy);
```

#### Parameters {#_constructor_-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        view
      </td>
      <td>
        <span><a href='/docs/apis/tree/revisionview-class'>RevisionView</a></span>
      </td>
      <td>
        the <code>TreeView</code> at which this edit begins. The first change will be applied against this view.
      </td>
    </tr>
    <tr>
      <td>
        policy
      </td>
      <td>
        <span><a href='/docs/apis/tree/generictransactionpolicy-interface'>GenericTransactionPolicy</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### before {#before-property}

#### Signature {#before-signature}

```typescript
protected readonly before: RevisionView;
```

### changes {#changes-property}

The status code of the most recent attempted change.

#### Signature {#changes-signature}

```typescript
get changes(): readonly ChangeInternal[];
```

### failure {#failure-property}

Information about why the transaction failed. Defined if and only if `status` is invalid or malformed.

#### Signature {#failure-signature}

```typescript
get failure(): TransactionInternal.Failure | undefined;
```

### isOpen {#isopen-property}

Whether or not this transaction has been closed via `close()`

#### Signature {#isopen-signature}

```typescript
get isOpen(): boolean;
```

### status {#status-property}

The status code of the most recent attempted change.

#### Signature {#status-signature}

```typescript
get status(): EditStatus;
```

### steps {#steps-property}

The status code of the most recent attempted change.

#### Signature {#steps-signature}

```typescript
get steps(): readonly ReconciliationChange[];
```

### view {#view-property}

The most up-to-date `TreeView` for this edit. This is the state of the tree after all changes applied so far.

#### Signature {#view-signature}

```typescript
get view(): TransactionView;
```

## Method Details

### applyChange {#applychange-method}

Attempt to apply the given change as part of this edit. This method should not be called if a previous change in this edit failed to apply.

#### Signature {#applychange-signature}

```typescript
applyChange(change: ChangeInternal, path?: ReconciliationPath): this;
```

#### Parameters {#applychange-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        change
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/tree#changeinternal-typealias'>ChangeInternal</a></span>
      </td>
      <td>
        the change to apply
      </td>
    </tr>
    <tr>
      <td>
        path
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/tree/reconciliationpath-interface'>ReconciliationPath</a></span>
      </td>
      <td>
        the reconciliation path for the change.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#applychange-returns}

this

**Return type:** this

### applyChanges {#applychanges-method}

A helper to apply a sequence of changes. Changes will be applied one after the other. If a change fails to apply, the remaining changes in `changes` will be ignored.

#### Signature {#applychanges-signature}

```typescript
applyChanges(changes: Iterable<ChangeInternal>, path?: ReconciliationPath): this;
```

#### Parameters {#applychanges-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        changes
      </td>
      <td>
      </td>
      <td>
        <span>Iterable&lt;<a href='/docs/apis/tree#changeinternal-typealias'>ChangeInternal</a>&gt;</span>
      </td>
      <td>
        the sequence of changes to apply.
      </td>
    </tr>
    <tr>
      <td>
        path
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/tree/reconciliationpath-interface'>ReconciliationPath</a></span>
      </td>
      <td>
        the reconciliation path for the first change.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#applychanges-returns}

this

**Return type:** this

### close {#close-method}

#### Signature {#close-signature}

```typescript
close(): EditingResult;
```

#### Returns {#close-returns}

the final `EditStatus` and `TreeView` after all changes are applied.

**Return type:** [EditingResult](/docs/apis/tree#editingresult-typealias)
