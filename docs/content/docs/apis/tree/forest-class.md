{
  "title": "Forest Class",
  "summary": "An immutable forest of ForestNode. Enforces single parenting, and allows querying the parent.",
  "kind": "Class",
  "members": {
    "Method": {
      "add": "/docs/apis/tree/forest-class#add-method",
      "assertConsistent": "/docs/apis/tree/forest-class#assertconsistent-method",
      "attachRangeOfChildren": "/docs/apis/tree/forest-class#attachrangeofchildren-method",
      "create": "/docs/apis/tree/forest-class#create-method",
      "delete": "/docs/apis/tree/forest-class#delete-method",
      "delta": "/docs/apis/tree/forest-class#delta-method",
      "detachRangeOfChildren": "/docs/apis/tree/forest-class#detachrangeofchildren-method",
      "equals": "/docs/apis/tree/forest-class#equals-method",
      "get": "/docs/apis/tree/forest-class#get-method",
      "getParent": "/docs/apis/tree/forest-class#getparent-method",
      "has": "/docs/apis/tree/forest-class#has-method",
      "setValue": "/docs/apis/tree/forest-class#setvalue-method",
      "tryGet": "/docs/apis/tree/forest-class#tryget-method",
      "tryGetParent": "/docs/apis/tree/forest-class#trygetparent-method"
    },
    "Property": {
      "size": "/docs/apis/tree/forest-class#size-property"
    }
  },
  "package": "@fluid-experimental/tree",
  "unscopedPackageName": "tree"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

[Packages](/docs/apis/) &gt; [@fluid-experimental/tree](/docs/apis/tree) &gt; [Forest](/docs/apis/tree/forest-class)

An immutable forest of ForestNode. Enforces single parenting, and allows querying the parent.

## Signature {#forest-signature}

```typescript
export declare class Forest
```

## Static Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree/forest-class#create-method'>create</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/forest-class'>Forest</a></span>
      </td>
      <td>
        Creates a new Forest.
      </td>
    </tr>
  </tbody>
</table>

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree/forest-class#size-property'>size</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
        Returns the number of nodes in the forest.
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree/forest-class#add-method'>add</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/forest-class'>Forest</a></span>
      </td>
      <td>
        Adds the supplied nodes to the forest. The nodes' IDs must be unique in the forest.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/forest-class#assertconsistent-method'>assertConsistent</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Checks that the metadata is correct, and the items form a forest. This is an expensive O(map size) operation.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/forest-class#attachrangeofchildren-method'>attachRangeOfChildren</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/forest-class'>Forest</a></span>
      </td>
      <td>
        Parents a set of nodes already in the forest at a specified location within a trait.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/forest-class#delete-method'>delete</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/forest-class'>Forest</a></span>
      </td>
      <td>
        Deletes every node in ids (each of which must be unparented)
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/forest-class#delta-method'>delta</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/delta-interface'>Delta</a>&lt;<a href='/docs/apis/tree#nodeid-typealias'>NodeId</a>&gt;</span>
      </td>
      <td>
        Calculate the difference between two forests.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/forest-class#detachrangeofchildren-method'>detachRangeOfChildren</a>
      </td>
      <td>
        <span>{         forest: <a href='/docs/apis/tree/forest-class'>Forest</a>;         detached: readonly <a href='/docs/apis/tree#nodeid-typealias'>NodeId</a>[];     }</span>
      </td>
      <td>
        Detaches a range of nodes from their parent. The detached nodes remain in the <code>Forest</code>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/forest-class#equals-method'>equals</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Compares two forests for equality.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/forest-class#get-method'>get</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/forestnode-interface'>ForestNode</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/forest-class#getparent-method'>getParent</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/parentdata-interface'>ParentData</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/forest-class#has-method'>has</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/forest-class#setvalue-method'>setValue</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/forest-class'>Forest</a></span>
      </td>
      <td>
        Replaces a node's value. The node must exist in this <code>Forest</code>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/forest-class#tryget-method'>tryGet</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/forestnode-interface'>ForestNode</a> &#124; undefined</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/forest-class#trygetparent-method'>tryGetParent</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/parentdata-interface'>ParentData</a> &#124; undefined</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### size {#size-property}

Returns the number of nodes in the forest.

#### Signature {#size-signature}

```typescript
get size(): number;
```

## Method Details

### add {#add-method}

Adds the supplied nodes to the forest. The nodes' IDs must be unique in the forest.

#### Signature {#add-signature}

```typescript
add(nodes: Iterable<ForestNode>): Forest;
```

#### Parameters {#add-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        nodes
      </td>
      <td>
        <span>Iterable&lt;<a href='/docs/apis/tree/forestnode-interface'>ForestNode</a>&gt;</span>
      </td>
      <td>
        the sequence of nodes to add to the forest. If any of them have children which exist in the forest already, those children will be parented. Any trait arrays present in a node must be non-empty. The nodes may be provided in any order.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#add-returns}

**Return type:** [Forest](/docs/apis/tree/forest-class)

### assertConsistent {#assertconsistent-method}

Checks that the metadata is correct, and the items form a forest. This is an expensive O(map size) operation.

#### Signature {#assertconsistent-signature}

```typescript
assertConsistent(): void;
```

### attachRangeOfChildren {#attachrangeofchildren-method}

Parents a set of nodes already in the forest at a specified location within a trait.

#### Signature {#attachrangeofchildren-signature}

```typescript
attachRangeOfChildren(parentId: NodeId, label: TraitLabel, index: number, childIds: readonly NodeId[]): Forest;
```

#### Parameters {#attachrangeofchildren-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        parentId
      </td>
      <td>
        <span><a href='/docs/apis/tree#nodeid-typealias'>NodeId</a></span>
      </td>
      <td>
        the id of the parent under which to insert the new nodes
      </td>
    </tr>
    <tr>
      <td>
        label
      </td>
      <td>
        <span><a href='/docs/apis/tree#traitlabel-typealias'>TraitLabel</a></span>
      </td>
      <td>
        the label of the trait under which to insert the new nodes
      </td>
    </tr>
    <tr>
      <td>
        index
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
        the index in the trait after which to insert the new nodes
      </td>
    </tr>
    <tr>
      <td>
        childIds
      </td>
      <td>
        <span>readonly <a href='/docs/apis/tree#nodeid-typealias'>NodeId</a>[]</span>
      </td>
      <td>
        the ids of the nodes to insert
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#attachrangeofchildren-returns}

**Return type:** [Forest](/docs/apis/tree/forest-class)

### create {#create-method}

Creates a new Forest.

#### Signature {#create-signature}

```typescript
static create(expensiveValidation?: boolean): Forest;
```

#### Parameters {#create-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        expensiveValidation
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#create-returns}

**Return type:** [Forest](/docs/apis/tree/forest-class)

### delete {#delete-method}

Deletes every node in ids (each of which must be unparented)

#### Signature {#delete-signature}

```typescript
delete(ids: Iterable<NodeId>, deleteChildren: boolean): Forest;
```

#### Parameters {#delete-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        ids
      </td>
      <td>
        <span>Iterable&lt;<a href='/docs/apis/tree#nodeid-typealias'>NodeId</a>&gt;</span>
      </td>
      <td>
        The IDs of the nodes to delete.
      </td>
    </tr>
    <tr>
      <td>
        deleteChildren
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        If true, recursively deletes descendants. Otherwise, leaves children unparented.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#delete-returns}

**Return type:** [Forest](/docs/apis/tree/forest-class)

### delta {#delta-method}

Calculate the difference between two forests.

#### Signature {#delta-signature}

```typescript
delta(forest: Forest): Delta<NodeId>;
```

#### Parameters {#delta-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        forest
      </td>
      <td>
        <span><a href='/docs/apis/tree/forest-class'>Forest</a></span>
      </td>
      <td>
        the other forest to compare to this one
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#delta-returns}

A [Delta](/docs/apis/tree/delta-interface) listing which nodes must be changed, added, and removed to get from `this` to `forest`.

**Return type:** [Delta](/docs/apis/tree/delta-interface)&lt;[NodeId](/docs/apis/tree#nodeid-typealias)&gt;

### detachRangeOfChildren {#detachrangeofchildren-method}

Detaches a range of nodes from their parent. The detached nodes remain in the `Forest`.

#### Signature {#detachrangeofchildren-signature}

```typescript
detachRangeOfChildren(parentId: NodeId, label: TraitLabel, startIndex: number, endIndex: number): {
        forest: Forest;
        detached: readonly NodeId[];
    };
```

#### Parameters {#detachrangeofchildren-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        parentId
      </td>
      <td>
        <span><a href='/docs/apis/tree#nodeid-typealias'>NodeId</a></span>
      </td>
      <td>
        the id of the parent from which to detach the nodes
      </td>
    </tr>
    <tr>
      <td>
        label
      </td>
      <td>
        <span><a href='/docs/apis/tree#traitlabel-typealias'>TraitLabel</a></span>
      </td>
      <td>
        the label of the trait from which to detach the nodes
      </td>
    </tr>
    <tr>
      <td>
        startIndex
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
        the index of the first node in the range to detach
      </td>
    </tr>
    <tr>
      <td>
        endIndex
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
        the index after the last node in the range to detach
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#detachrangeofchildren-returns}

a new `Forest` with the nodes detached, and a list of the ids of the nodes that were detached

**Return type:** {         forest: [Forest](/docs/apis/tree/forest-class);         detached: readonly [NodeId](/docs/apis/tree#nodeid-typealias)\[\];     }

### equals {#equals-method}

Compares two forests for equality.

#### Signature {#equals-signature}

```typescript
equals(forest: Forest): boolean;
```

#### Parameters {#equals-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        forest
      </td>
      <td>
        <span><a href='/docs/apis/tree/forest-class'>Forest</a></span>
      </td>
      <td>
        the other forest to compare to this one
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#equals-returns}

true iff the forests are equal.

**Return type:** boolean

### get {#get-method}

#### Signature {#get-signature}

```typescript
get(id: NodeId): ForestNode;
```

#### Parameters {#get-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        id
      </td>
      <td>
        <span><a href='/docs/apis/tree#nodeid-typealias'>NodeId</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#get-returns}

the node associated with `id`. Should not be used if there is no node with the provided id.

**Return type:** [ForestNode](/docs/apis/tree/forestnode-interface)

### getParent {#getparent-method}

#### Signature {#getparent-signature}

```typescript
getParent(id: NodeId): ParentData;
```

#### Parameters {#getparent-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        id
      </td>
      <td>
        <span><a href='/docs/apis/tree#nodeid-typealias'>NodeId</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getparent-returns}

the parent of `id`. Should not be used if there is no node with id or if id refers to the root node.

**Return type:** [ParentData](/docs/apis/tree/parentdata-interface)

### has {#has-method}

#### Signature {#has-signature}

```typescript
has(id: NodeId): boolean;
```

#### Parameters {#has-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        id
      </td>
      <td>
        <span><a href='/docs/apis/tree#nodeid-typealias'>NodeId</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#has-returns}

true if the node associated with `id` exists in this forest, otherwise false

**Return type:** boolean

### setValue {#setvalue-method}

Replaces a node's value. The node must exist in this `Forest`.

#### Signature {#setvalue-signature}

```typescript
setValue(nodeId: NodeId, value: Payload | null): Forest;
```

#### Parameters {#setvalue-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        nodeId
      </td>
      <td>
        <span><a href='/docs/apis/tree#nodeid-typealias'>NodeId</a></span>
      </td>
      <td>
        the id of the node
      </td>
    </tr>
    <tr>
      <td>
        value
      </td>
      <td>
        <span><a href='/docs/apis/tree#payload-typealias'>Payload</a> &#124; null</span>
      </td>
      <td>
        the new value
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#setvalue-returns}

**Return type:** [Forest](/docs/apis/tree/forest-class)

### tryGet {#tryget-method}

#### Signature {#tryget-signature}

```typescript
tryGet(id: NodeId): ForestNode | undefined;
```

#### Parameters {#tryget-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        id
      </td>
      <td>
        <span><a href='/docs/apis/tree#nodeid-typealias'>NodeId</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#tryget-returns}

the node associated with `id`, or undefined if there is none

**Return type:** [ForestNode](/docs/apis/tree/forestnode-interface) \| undefined

### tryGetParent {#trygetparent-method}

#### Signature {#trygetparent-signature}

```typescript
tryGetParent(id: NodeId): ParentData | undefined;
```

#### Parameters {#trygetparent-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        id
      </td>
      <td>
        <span><a href='/docs/apis/tree#nodeid-typealias'>NodeId</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#trygetparent-returns}

undefined iff root, otherwise the parent of `id`.

**Return type:** [ParentData](/docs/apis/tree/parentdata-interface) \| undefined
