{
  "title": "Transaction Class",
  "summary": "Buffers changes to be applied to an isolated view of a `SharedTree` over time before applying them directly to the tree itself as a single edit",
  "kind": "Class",
  "members": {
    "Constructor": {
      "(constructor)": "/docs/apis/tree/transaction-class#_constructor_-constructor"
    },
    "Method": {
      "apply": "/docs/apis/tree/transaction-class#apply_1-method",
      "closeAndCommit": "/docs/apis/tree/transaction-class#closeandcommit-method"
    },
    "Property": {
      "currentView": "/docs/apis/tree/transaction-class#currentview-property",
      "isOpen": "/docs/apis/tree/transaction-class#isopen-property",
      "startingView": "/docs/apis/tree/transaction-class#startingview-property",
      "status": "/docs/apis/tree/transaction-class#status-property",
      "tree": "/docs/apis/tree/transaction-class#tree-property"
    }
  },
  "package": "@fluid-experimental/tree",
  "unscopedPackageName": "tree"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

[Packages](/docs/apis/) &gt; [@fluid-experimental/tree](/docs/apis/tree) &gt; [Transaction](/docs/apis/tree/transaction-class)

Buffers changes to be applied to an isolated view of a `SharedTree` over time before applying them directly to the tree itself as a single edit

## Signature {#transaction-signature}

```typescript
export declare class Transaction extends TypedEventEmitter<TransactionEvents>
```

**Extends:** [TypedEventEmitter](/docs/apis/common-utils/typedeventemitter-class)&lt;[TransactionEvents](/docs/apis/tree/transactionevents-interface)&gt;

## Constructors

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Constructor
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree/transaction-class#_constructor_-constructor'>(constructor)</a>
      </td>
      <td>
        Create a new transaction over the given tree. The tree's <code>currentView</code> at this time will become the <code>startingView</code> for this transaction.
      </td>
    </tr>
  </tbody>
</table>

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree/transaction-class#currentview-property'>currentView</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree/treeview-class'>TreeView</a></span>
      </td>
      <td>
        The state of the tree following the most change that was successfully applied. If no changes have been applied, this is the same as <code>startingView</code>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/transaction-class#isopen-property'>isOpen</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        True if this transaction is open, false if it is closed. A transaction may be closed manually via <code>closeAndApplyEdit()</code>, or may be automatically closed by a change in this transaction failing to apply (see <code>applyChange()</code>).
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/transaction-class#startingview-property'>startingView</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree/treeview-class'>TreeView</a></span>
      </td>
      <td>
        The view of the tree when this transaction was created
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/transaction-class#status-property'>status</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree#editstatus-enum'>EditStatus</a></span>
      </td>
      <td>
        The status of the most recently applied change in this transaction
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/transaction-class#tree-property'>tree</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree/sharedtree-class'>SharedTree</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree/transaction-class#apply-method'>apply</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree#editstatus-enum'>EditStatus</a></span>
      </td>
      <td>
        Attempt to apply a sequence of changes in this transaction. The <code>currentView</code> will be updated to reflect the new tree state after all applied changes. If any change fails to apply, the remaining changes will be ignored and this transaction will be automatically closed (see <code>isOpen</code>). If this transaction is already closed, this method has no effect. This method will emit a <code>TransactionEvent.ViewChange</code> event at most once per call.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/transaction-class#apply_1-method'>apply</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree#editstatus-enum'>EditStatus</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/transaction-class#closeandcommit-method'>closeAndCommit</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Close this transaction and apply its changes to the <code>SharedTree</code>. If this transaction is already closed, this method has no effect.
      </td>
    </tr>
  </tbody>
</table>

## Constructor Details

### (constructor) {#_constructor_-constructor}

Create a new transaction over the given tree. The tree's `currentView` at this time will become the `startingView` for this transaction.

#### Signature {#_constructor_-signature}

```typescript
constructor(tree: SharedTree);
```

#### Parameters {#_constructor_-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        tree
      </td>
      <td>
        <span><a href='/docs/apis/tree/sharedtree-class'>SharedTree</a></span>
      </td>
      <td>
        the <code>SharedTree</code> that this transaction applies changes to
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### currentView {#currentview-property}

The state of the tree following the most change that was successfully applied. If no changes have been applied, this is the same as `startingView`.

#### Signature {#currentview-signature}

```typescript
get currentView(): TreeView;
```

### isOpen {#isopen-property}

True if this transaction is open, false if it is closed. A transaction may be closed manually via `closeAndApplyEdit()`, or may be automatically closed by a change in this transaction failing to apply (see `applyChange()`).

#### Signature {#isopen-signature}

```typescript
get isOpen(): boolean;
```

### startingView {#startingview-property}

The view of the tree when this transaction was created

#### Signature {#startingview-signature}

```typescript
readonly startingView: TreeView;
```

### status {#status-property}

The status of the most recently applied change in this transaction

#### Signature {#status-signature}

```typescript
get status(): EditStatus;
```

### tree {#tree-property}

#### Signature {#tree-signature}

```typescript
readonly tree: SharedTree;
```

## Method Details

### apply {#apply-method}

Attempt to apply a sequence of changes in this transaction. The `currentView` will be updated to reflect the new tree state after all applied changes. If any change fails to apply, the remaining changes will be ignored and this transaction will be automatically closed (see `isOpen`). If this transaction is already closed, this method has no effect. This method will emit a `TransactionEvent.ViewChange` event at most once per call.

#### Signature {#apply-signature}

```typescript
apply(...changes: readonly Change[]): EditStatus;
```

#### Parameters {#apply-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        changes
      </td>
      <td>
        <span>readonly <a href='/docs/apis/tree#change-typealias'>Change</a>[]</span>
      </td>
      <td>
        the changes to apply
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#apply-returns}

either the `EditStatus` of the given changes or the `EditStatus` of the last change before the transaction was closed

**Return type:** [EditStatus](/docs/apis/tree#editstatus-enum)

### apply {#apply_1-method}

#### Signature {#apply_1-signature}

```typescript
apply(changes: readonly Change[]): EditStatus;
```

#### Parameters {#apply_1-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        changes
      </td>
      <td>
        <span>readonly <a href='/docs/apis/tree#change-typealias'>Change</a>[]</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#apply_1-returns}

**Return type:** [EditStatus](/docs/apis/tree#editstatus-enum)

### closeAndCommit {#closeandcommit-method}

Close this transaction and apply its changes to the `SharedTree`. If this transaction is already closed, this method has no effect.

#### Signature {#closeandcommit-signature}

```typescript
closeAndCommit(): void;
```
