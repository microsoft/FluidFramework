{
  "title": "SharedTree Class",
  "summary": "A \\[distributed tree\\](../Readme.md).",
  "kind": "Class",
  "members": {
    "Constructor": {
      "(constructor)": "/docs/apis/tree/sharedtree-class#_constructor__1-constructor"
    },
    "Method": {
      "applyEdit": "/docs/apis/tree/sharedtree-class#applyedit_1-method",
      "applyStashedOp": "/docs/apis/tree/sharedtree-class#applystashedop-method",
      "attributeNodeId": "/docs/apis/tree/sharedtree-class#attributenodeid-method",
      "convertToNodeId": "/docs/apis/tree/sharedtree-class#converttonodeid-method",
      "convertToStableNodeId": "/docs/apis/tree/sharedtree-class#converttostablenodeid-method",
      "create": "/docs/apis/tree/sharedtree-class#create-method",
      "generateNodeId": "/docs/apis/tree/sharedtree-class#generatenodeid-method",
      "getFactory": "/docs/apis/tree/sharedtree-class#getfactory_2-method",
      "getRuntime": "/docs/apis/tree/sharedtree-class#getruntime-method",
      "getWriteFormat": "/docs/apis/tree/sharedtree-class#getwriteformat-method",
      "loadCore": "/docs/apis/tree/sharedtree-class#loadcore-method",
      "mergeEditsFrom": "/docs/apis/tree/sharedtree-class#mergeeditsfrom-method",
      "onDisconnect": "/docs/apis/tree/sharedtree-class#ondisconnect-method",
      "processCore": "/docs/apis/tree/sharedtree-class#processcore-method",
      "registerCore": "/docs/apis/tree/sharedtree-class#registercore-method",
      "reSubmitCore": "/docs/apis/tree/sharedtree-class#resubmitcore-method",
      "revert": "/docs/apis/tree/sharedtree-class#revert-method",
      "summarizeCore": "/docs/apis/tree/sharedtree-class#summarizecore-method",
      "tryConvertToNodeId": "/docs/apis/tree/sharedtree-class#tryconverttonodeid-method",
      "tryConvertToStableNodeId": "/docs/apis/tree/sharedtree-class#tryconverttostablenodeid-method"
    },
    "Property": {
      "attributionId": "/docs/apis/tree/sharedtree-class#attributionid-property",
      "currentView": "/docs/apis/tree/sharedtree-class#currentview-property",
      "edits": "/docs/apis/tree/sharedtree-class#edits-property",
      "logger": "/docs/apis/tree/sharedtree-class#logger-property",
      "logViewer": "/docs/apis/tree/sharedtree-class#logviewer-property"
    }
  },
  "package": "@fluid-experimental/tree",
  "unscopedPackageName": "tree"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

[Packages](/docs/apis/) &gt; [@fluid-experimental/tree](/docs/apis/tree) &gt; [SharedTree](/docs/apis/tree/sharedtree-class)

A \[distributed tree\](../Readme.md).

## Signature {#sharedtree-signature}

```typescript
export declare class SharedTree extends SharedObject<ISharedTreeEvents> implements NodeIdContext
```

**Extends:** [SharedObject](/docs/apis/shared-object-base/sharedobject-class)&lt;[ISharedTreeEvents](/docs/apis/tree/isharedtreeevents-interface)&gt;

**Implements:** [NodeIdContext](/docs/apis/tree/nodeidcontext-interface)

## Constructors

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Constructor
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#_constructor_-constructor'>(constructor)</a>
      </td>
      <td>
        Create a new SharedTree.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#_constructor__1-constructor'>(constructor)</a>
      </td>
      <td>
        Constructs a new instance of the <code>SharedTree</code> class
      </td>
    </tr>
  </tbody>
</table>

## Static Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#create-method'>create</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/sharedtree-class'>SharedTree</a></span>
      </td>
      <td>
        Create a new SharedTree. It will contain the default value (see initialTree).
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#getfactory-method'>getFactory</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/sharedtreefactory-class'>SharedTreeFactory</a></span>
      </td>
      <td>
        Get a factory for SharedTree to register with the data store.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#getfactory_1-method'>getFactory</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/sharedtreefactory-class'>SharedTreeFactory</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#getfactory_2-method'>getFactory</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/sharedtreefactory-class'>SharedTreeFactory</a></span>
      </td>
      <td>
        Get a factory for SharedTree to register with the data store, using the latest write version and default options.
      </td>
    </tr>
  </tbody>
</table>

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#attributionid-property'>attributionId</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree#attributionid-typealias'>AttributionId</a></span>
      </td>
      <td>
        The UUID used for attribution of nodes created by this SharedTree. All shared trees with a write format of 0.1.1 or greater have a unique attribution ID which may be configured in the constructor. All other shared trees (i.e. those with a write format of 0.0.2) use the nil UUID as their attribution ID.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#currentview-property'>currentView</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree/revisionview-class'>RevisionView</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#edits-property'>edits</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree/orderededitset-interface'>OrderedEditSet</a>&lt;<a href='/docs/apis/tree/internalizedchange-interface'>InternalizedChange</a>&gt;</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#logger-property'>logger</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/telemetry-utils/itelemetryloggerext-interface'>ITelemetryLoggerExt</a></span>
      </td>
      <td>
        logger for SharedTree events.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#logviewer-property'>logViewer</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/tree/logviewer-interface'>LogViewer</a></span>
      </td>
      <td>
        Viewer for trees defined by editLog. This allows access to views of the tree at different revisions (various points in time).
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#applyedit-method'>applyEdit</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/edit-interface'>Edit</a>&lt;<a href='/docs/apis/tree/internalizedchange-interface'>InternalizedChange</a>&gt;</span>
      </td>
      <td>
        Applies a set of changes to this tree. The result will be reflected in <code>SharedTree.currentView</code>. This method does not allow for snapshot isolation, as the changes are always applied to the most recent revision. If it is desireable to read from and apply changes to a fixed view that does not change when remote changes arrive, <code>Checkout</code> should be used instead.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#applyedit_1-method'>applyEdit</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/edit-interface'>Edit</a>&lt;<a href='/docs/apis/tree/internalizedchange-interface'>InternalizedChange</a>&gt;</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#applystashedop-method'>applyStashedOp</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree/stashedlocalopmetadata-interface'>StashedLocalOpMetadata</a></span>
      </td>
      <td>
        &quot;Pending local state&quot; refers to ops submitted to the runtime that have not yet been acked. When closing a container, hosts have the option to stash this pending local state somewhere to be reapplied later (to avoid data loss). If a host then loads a container using that stashed state, this function is called for each stashed op, and is expected to: 1. Update this DDS to reflect that state locally. 2. Return any <code>localOpMetadata</code> that would have been associated with this op.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#attributenodeid-method'>attributeNodeId</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree#attributionid-typealias'>AttributionId</a></span>
      </td>
      <td>
        Returns the attribution ID associated with the SharedTree that generated the given node ID. This is generally only useful for clients with a write format of 0.1.1 or greater since older clients cannot be given an attribution ID and will always use the default <code>attributionId</code> of the tree.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#converttonodeid-method'>convertToNodeId</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree#nodeid-typealias'>NodeId</a></span>
      </td>
      <td>
        Given a stable ID, return the corresponding NodeId or throws if the supplied stable ID was never generated with this tree, either as a UUID corresponding to a <code>NodeId</code> or as an override passed to <code>generateNodeId</code>. If a stable ID is returned, this does not imply that there is a node with <code>id</code> in the current revision of the tree, only that <code>id</code> was at some point generated by an instance of this SharedTree.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#converttostablenodeid-method'>convertToStableNodeId</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree#stablenodeid-typealias'>StableNodeId</a></span>
      </td>
      <td>
        Given a NodeId, returns the corresponding stable ID or throws if the supplied node ID was not generated with this tree (<code>NodeId</code>s may not be used across SharedTree instances, see <code>generateNodeId</code> for more). The returned value will be a UUID, unless the creation of <code>id</code> used an override string (see <code>generateNodeId</code> for more). The result is safe to persist and re-use across <code>SharedTree</code> instances, unlike <code>NodeId</code>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#generatenodeid-method'>generateNodeId</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree#nodeid-typealias'>NodeId</a></span>
      </td>
      <td>
        Generates a node identifier. The returned IDs may be used as the identifier of a node in the SharedTree. <code>NodeId</code>s are *always* unique and stable within the scope of the tree and session that generated them. They are *not* unique within a Fluid container, and *cannot* be compared across instances of a SharedTree. They are *not* stable across sessions/lifetimes of a SharedTree, and *cannot* be persisted (e.g. stored in payloads, uploaded in blobs, etc.). If stable persistence is needed, NodeIdConverter.convertToStableNodeId may be used to return a corresponding UUID that is globally unique and stable.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#getruntime-method'>getRuntime</a>
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ifluiddatastoreruntime-interface'>IFluidDataStoreRuntime</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#getwriteformat-method'>getWriteFormat</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree#writeformat-enum'>WriteFormat</a></span>
      </td>
      <td>
        The write format version currently used by this <code>SharedTree</code>. This is always initialized to the write format passed to the tree's constructor, but it may automatically upgrade over time (e.g. when connected to another SharedTree with a higher write format, or when loading a summary with a higher write format).
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#loadcore-method'>loadCore</a>
      </td>
      <td>
        <span>Promise&lt;void&gt;</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#mergeeditsfrom-method'>mergeEditsFrom</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree#editid-typealias'>EditId</a>[]</span>
      </td>
      <td>
        Merges <code>edits</code> from <code>other</code> into this SharedTree.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#ondisconnect-method'>onDisconnect</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#processcore-method'>processCore</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#registercore-method'>registerCore</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#resubmitcore-method'>reSubmitCore</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#revert-method'>revert</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree#editid-typealias'>EditId</a> &#124; undefined</span>
      </td>
      <td>
        Reverts a previous edit by applying a new edit containing the inverse of the original edit's changes.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#summarizecore-method'>summarizeCore</a>
      </td>
      <td>
        <span><a href='/docs/apis/runtime-definitions/isummarytreewithstats-interface'>ISummaryTreeWithStats</a></span>
      </td>
      <td>
        Gets a form of the object that can be serialized.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#tryconverttonodeid-method'>tryConvertToNodeId</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree#nodeid-typealias'>NodeId</a> &#124; undefined</span>
      </td>
      <td>
        Given a stable ID, return the corresponding NodeId or return undefined if the supplied stable ID was never generated with this tree, either as a UUID corresponding to a <code>NodeId</code> or as an override passed to <code>generateNodeId</code>. If a stable ID is returned, this does not imply that there is a node with <code>id</code> in the current revision of the tree, only that <code>id</code> was at some point generated by an instance of this SharedTree.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/sharedtree-class#tryconverttostablenodeid-method'>tryConvertToStableNodeId</a>
      </td>
      <td>
        <span><a href='/docs/apis/tree#stablenodeid-typealias'>StableNodeId</a> &#124; undefined</span>
      </td>
      <td>
        Given a NodeId, attempt to return the corresponding stable ID. The returned value will be a UUID, unless the creation of <code>id</code> used an override string (see <code>generateNodeId</code> for more). The returned stable ID is undefined if <code>id</code> was never created with this SharedTree. If a stable ID is returned, this does not imply that there is a node with <code>id</code> in the current revision of the tree, only that <code>id</code> was at some point generated by some instance of this tree.
      </td>
    </tr>
  </tbody>
</table>

## Constructor Details

### (constructor) {#_constructor_-constructor}

Create a new SharedTree.

#### Signature {#_constructor_-signature}

```typescript
constructor(runtime: IFluidDataStoreRuntime, id: string, ...args: SharedTreeArgs<WriteFormat.v0_0_2>);
```

#### Parameters {#_constructor_-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        runtime
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ifluiddatastoreruntime-interface'>IFluidDataStoreRuntime</a></span>
      </td>
      <td>
        The runtime the SharedTree will be associated with
      </td>
    </tr>
    <tr>
      <td>
        id
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Unique ID for the SharedTree
      </td>
    </tr>
    <tr>
      <td>
        args
      </td>
      <td>
        <span><a href='/docs/apis/tree#sharedtreeargs-typealias'>SharedTreeArgs</a>&lt;<a href='/docs/apis/tree#writeformat-v0_0_2-enummember'>WriteFormat.v0_0_2</a>&gt;</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### (constructor) {#_constructor__1-constructor}

Constructs a new instance of the `SharedTree` class

#### Signature {#_constructor__1-signature}

```typescript
constructor(runtime: IFluidDataStoreRuntime, id: string, ...args: SharedTreeArgs<WriteFormat.v0_1_1>);
```

#### Parameters {#_constructor__1-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        runtime
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ifluiddatastoreruntime-interface'>IFluidDataStoreRuntime</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        id
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        args
      </td>
      <td>
        <span><a href='/docs/apis/tree#sharedtreeargs-typealias'>SharedTreeArgs</a>&lt;<a href='/docs/apis/tree#writeformat-v0_1_1-enummember'>WriteFormat.v0_1_1</a>&gt;</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### attributionId {#attributionid-property}

The UUID used for attribution of nodes created by this SharedTree. All shared trees with a write format of 0.1.1 or greater have a unique attribution ID which may be configured in the constructor. All other shared trees (i.e. those with a write format of 0.0.2) use the nil UUID as their attribution ID.

#### Signature {#attributionid-signature}

```typescript
get attributionId(): AttributionId;
```

### currentView {#currentview-property}

#### Signature {#currentview-signature}

```typescript
get currentView(): RevisionView;
```

### edits {#edits-property}

#### Signature {#edits-signature}

```typescript
get edits(): OrderedEditSet<InternalizedChange>;
```

### logger {#logger-property}

logger for SharedTree events.

#### Signature {#logger-signature}

```typescript
readonly logger: ITelemetryLoggerExt;
```

### logViewer {#logviewer-property}

Viewer for trees defined by editLog. This allows access to views of the tree at different revisions (various points in time).

#### Signature {#logviewer-signature}

```typescript
get logViewer(): LogViewer;
```

## Method Details

### applyEdit {#applyedit-method}

Applies a set of changes to this tree. The result will be reflected in `SharedTree.currentView`. This method does not allow for snapshot isolation, as the changes are always applied to the most recent revision. If it is desireable to read from and apply changes to a fixed view that does not change when remote changes arrive, `Checkout` should be used instead.

#### Signature {#applyedit-signature}

```typescript
applyEdit(...changes: readonly Change[]): Edit<InternalizedChange>;
```

#### Parameters {#applyedit-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        changes
      </td>
      <td>
        <span>readonly <a href='/docs/apis/tree#change-typealias'>Change</a>[]</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#applyedit-returns}

**Return type:** [Edit](/docs/apis/tree/edit-interface)&lt;[InternalizedChange](/docs/apis/tree/internalizedchange-interface)&gt;

### applyEdit {#applyedit_1-method}

#### Signature {#applyedit_1-signature}

```typescript
applyEdit(changes: readonly Change[]): Edit<InternalizedChange>;
```

#### Parameters {#applyedit_1-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        changes
      </td>
      <td>
        <span>readonly <a href='/docs/apis/tree#change-typealias'>Change</a>[]</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#applyedit_1-returns}

**Return type:** [Edit](/docs/apis/tree/edit-interface)&lt;[InternalizedChange](/docs/apis/tree/internalizedchange-interface)&gt;

### applyStashedOp {#applystashedop-method}

"Pending local state" refers to ops submitted to the runtime that have not yet been acked. When closing a container, hosts have the option to stash this pending local state somewhere to be reapplied later (to avoid data loss). If a host then loads a container using that stashed state, this function is called for each stashed op, and is expected to: 1. Update this DDS to reflect that state locally. 2. Return any `localOpMetadata` that would have been associated with this op.

#### Signature {#applystashedop-signature}

```typescript
protected applyStashedOp(op: unknown): StashedLocalOpMetadata;
```

#### Parameters {#applystashedop-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        op
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#applystashedop-returns}

**Return type:** [StashedLocalOpMetadata](/docs/apis/tree/stashedlocalopmetadata-interface)

### attributeNodeId {#attributenodeid-method}

Returns the attribution ID associated with the SharedTree that generated the given node ID. This is generally only useful for clients with a write format of 0.1.1 or greater since older clients cannot be given an attribution ID and will always use the default `attributionId` of the tree.

#### Signature {#attributenodeid-signature}

```typescript
attributeNodeId(id: NodeId): AttributionId;
```

#### Parameters {#attributenodeid-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        id
      </td>
      <td>
        <span><a href='/docs/apis/tree#nodeid-typealias'>NodeId</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#attributenodeid-returns}

**Return type:** [AttributionId](/docs/apis/tree#attributionid-typealias)

### convertToNodeId {#converttonodeid-method}

Given a stable ID, return the corresponding NodeId or throws if the supplied stable ID was never generated with this tree, either as a UUID corresponding to a `NodeId` or as an override passed to `generateNodeId`. If a stable ID is returned, this does not imply that there is a node with `id` in the current revision of the tree, only that `id` was at some point generated by an instance of this SharedTree.

#### Signature {#converttonodeid-signature}

```typescript
convertToNodeId(id: StableNodeId): NodeId;
```

#### Parameters {#converttonodeid-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        id
      </td>
      <td>
        <span><a href='/docs/apis/tree#stablenodeid-typealias'>StableNodeId</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#converttonodeid-returns}

**Return type:** [NodeId](/docs/apis/tree#nodeid-typealias)

### convertToStableNodeId {#converttostablenodeid-method}

Given a NodeId, returns the corresponding stable ID or throws if the supplied node ID was not generated with this tree (`NodeId`s may not be used across SharedTree instances, see `generateNodeId` for more). The returned value will be a UUID, unless the creation of `id` used an override string (see `generateNodeId` for more). The result is safe to persist and re-use across `SharedTree` instances, unlike `NodeId`.

#### Signature {#converttostablenodeid-signature}

```typescript
convertToStableNodeId(id: NodeId): StableNodeId;
```

#### Parameters {#converttostablenodeid-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        id
      </td>
      <td>
        <span><a href='/docs/apis/tree#nodeid-typealias'>NodeId</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#converttostablenodeid-returns}

**Return type:** [StableNodeId](/docs/apis/tree#stablenodeid-typealias)

### create {#create-method}

Create a new SharedTree. It will contain the default value (see initialTree).

#### Signature {#create-signature}

```typescript
static create(runtime: IFluidDataStoreRuntime, id?: string): SharedTree;
```

#### Parameters {#create-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        runtime
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ifluiddatastoreruntime-interface'>IFluidDataStoreRuntime</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        id
      </td>
      <td>
        optional
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#create-returns}

**Return type:** [SharedTree](/docs/apis/tree/sharedtree-class)

### generateNodeId {#generatenodeid-method}

Generates a node identifier. The returned IDs may be used as the identifier of a node in the SharedTree. `NodeId`s are \*always\* unique and stable within the scope of the tree and session that generated them. They are \*not\* unique within a Fluid container, and \*cannot\* be compared across instances of a SharedTree. They are \*not\* stable across sessions/lifetimes of a SharedTree, and \*cannot\* be persisted (e.g. stored in payloads, uploaded in blobs, etc.). If stable persistence is needed, NodeIdConverter.convertToStableNodeId may be used to return a corresponding UUID that is globally unique and stable.

#### Signature {#generatenodeid-signature}

```typescript
generateNodeId(override?: string): NodeId;
```

#### Parameters {#generatenodeid-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        override
      </td>
      <td>
        optional
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        if supplied, calls to <code>convertToStableNodeId</code> using the returned node ID will return the override instead of the UUID. Calls to <code>generateNodeId</code> with the same override always return the same ID. Performance note: passing an override string incurs a storage cost that is significantly higher that a node ID without one, and should be avoided if possible.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#generatenodeid-returns}

**Return type:** [NodeId](/docs/apis/tree#nodeid-typealias)

### getFactory {#getfactory-method}

Get a factory for SharedTree to register with the data store.

#### Signature {#getfactory-signature}

```typescript
static getFactory(...args: SharedTreeArgs<WriteFormat.v0_0_2>): SharedTreeFactory;
```

#### Parameters {#getfactory-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        args
      </td>
      <td>
        <span><a href='/docs/apis/tree#sharedtreeargs-typealias'>SharedTreeArgs</a>&lt;<a href='/docs/apis/tree#writeformat-v0_0_2-enummember'>WriteFormat.v0_0_2</a>&gt;</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getfactory-returns}

A factory that creates `SharedTree`s and loads them from storage.

**Return type:** [SharedTreeFactory](/docs/apis/tree/sharedtreefactory-class)

### getFactory {#getfactory_1-method}

#### Signature {#getfactory_1-signature}

```typescript
static getFactory(...args: SharedTreeArgs<WriteFormat.v0_1_1>): SharedTreeFactory;
```

#### Parameters {#getfactory_1-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        args
      </td>
      <td>
        <span><a href='/docs/apis/tree#sharedtreeargs-typealias'>SharedTreeArgs</a>&lt;<a href='/docs/apis/tree#writeformat-v0_1_1-enummember'>WriteFormat.v0_1_1</a>&gt;</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#getfactory_1-returns}

**Return type:** [SharedTreeFactory](/docs/apis/tree/sharedtreefactory-class)

### getFactory {#getfactory_2-method}

Get a factory for SharedTree to register with the data store, using the latest write version and default options.

#### Signature {#getfactory_2-signature}

```typescript
static getFactory(): SharedTreeFactory;
```

#### Returns {#getfactory_2-returns}

**Return type:** [SharedTreeFactory](/docs/apis/tree/sharedtreefactory-class)

### getRuntime {#getruntime-method}

#### Signature {#getruntime-signature}

```typescript
getRuntime(): IFluidDataStoreRuntime;
```

#### Returns {#getruntime-returns}

**Return type:** [IFluidDataStoreRuntime](/docs/apis/datastore-definitions/ifluiddatastoreruntime-interface)

### getWriteFormat {#getwriteformat-method}

The write format version currently used by this `SharedTree`. This is always initialized to the write format passed to the tree's constructor, but it may automatically upgrade over time (e.g. when connected to another SharedTree with a higher write format, or when loading a summary with a higher write format).

#### Signature {#getwriteformat-signature}

```typescript
getWriteFormat(): WriteFormat;
```

#### Returns {#getwriteformat-returns}

**Return type:** [WriteFormat](/docs/apis/tree#writeformat-enum)

### loadCore {#loadcore-method}

#### Signature {#loadcore-signature}

```typescript
protected loadCore(storage: IChannelStorageService): Promise<void>;
```

#### Parameters {#loadcore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        storage
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ichannelstorageservice-interface'>IChannelStorageService</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#loadcore-returns}

**Return type:** Promise&lt;void&gt;

### mergeEditsFrom {#mergeeditsfrom-method}

Merges `edits` from `other` into this SharedTree.

#### Signature {#mergeeditsfrom-signature}

```typescript
mergeEditsFrom(other: SharedTree, edits: Iterable<Edit<InternalizedChange>>, stableIdRemapper?: (id: StableNodeId) => StableNodeId): EditId[];
```

#### Parameters {#mergeeditsfrom-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        other
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/tree/sharedtree-class'>SharedTree</a></span>
      </td>
      <td>
        Tree containing the edits that should be applied to this one.
      </td>
    </tr>
    <tr>
      <td>
        edits
      </td>
      <td>
      </td>
      <td>
        <span>Iterable&lt;<a href='/docs/apis/tree/edit-interface'>Edit</a>&lt;<a href='/docs/apis/tree/internalizedchange-interface'>InternalizedChange</a>&gt;&gt;</span>
      </td>
      <td>
        Iterable of edits from <code>other</code> to apply.
      </td>
    </tr>
    <tr>
      <td>
        stableIdRemapper
      </td>
      <td>
        optional
      </td>
      <td>
        <span>(id: <a href='/docs/apis/tree#stablenodeid-typealias'>StableNodeId</a>) =&gt; <a href='/docs/apis/tree#stablenodeid-typealias'>StableNodeId</a></span>
      </td>
      <td>
        <p>
          Optional remapper to translate stable identities from <code>other</code> into stable identities on this tree. Any references that <code>other</code> contains to a stable id <code>foo</code> will be replaced with references to the id <code>stableIdRemapper(foo)</code>.
        </p>
        <p>
          Payloads on the edits are left intact.
        </p>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#mergeeditsfrom-returns}

a list containing `EditId`s for all applied edits.

**Return type:** [EditId](/docs/apis/tree#editid-typealias)\[\]

### onDisconnect {#ondisconnect-method}

#### Signature {#ondisconnect-signature}

```typescript
protected onDisconnect(): void;
```

### processCore {#processcore-method}

#### Signature {#processcore-signature}

```typescript
protected processCore(message: unknown, local: boolean): void;
```

#### Parameters {#processcore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        message
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        local
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### registerCore {#registercore-method}

#### Signature {#registercore-signature}

```typescript
protected registerCore(): void;
```

### reSubmitCore {#resubmitcore-method}

#### Signature {#resubmitcore-signature}

```typescript
protected reSubmitCore(op: unknown, localOpMetadata?: StashedLocalOpMetadata): void;
```

#### Parameters {#resubmitcore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        op
      </td>
      <td>
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        localOpMetadata
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/tree/stashedlocalopmetadata-interface'>StashedLocalOpMetadata</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### revert {#revert-method}

Reverts a previous edit by applying a new edit containing the inverse of the original edit's changes.

#### Signature {#revert-signature}

```typescript
revert(editId: EditId): EditId | undefined;
```

#### Parameters {#revert-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        editId
      </td>
      <td>
        <span><a href='/docs/apis/tree#editid-typealias'>EditId</a></span>
      </td>
      <td>
        the edit to revert
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#revert-returns}

the id of the new edit, or undefined if the original edit could not be inverted given the current tree state.

**Return type:** [EditId](/docs/apis/tree#editid-typealias) \| undefined

### summarizeCore {#summarizecore-method}

Gets a form of the object that can be serialized.

#### Signature {#summarizecore-signature}

```typescript
summarizeCore(serializer: IFluidSerializer): ISummaryTreeWithStats;
```

#### Parameters {#summarizecore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        serializer
      </td>
      <td>
        <span><a href='/docs/apis/shared-object-base/ifluidserializer-interface'>IFluidSerializer</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#summarizecore-returns}

A tree representing the snapshot of the shared object.

**Return type:** [ISummaryTreeWithStats](/docs/apis/runtime-definitions/isummarytreewithstats-interface)

### tryConvertToNodeId {#tryconverttonodeid-method}

Given a stable ID, return the corresponding NodeId or return undefined if the supplied stable ID was never generated with this tree, either as a UUID corresponding to a `NodeId` or as an override passed to `generateNodeId`. If a stable ID is returned, this does not imply that there is a node with `id` in the current revision of the tree, only that `id` was at some point generated by an instance of this SharedTree.

#### Signature {#tryconverttonodeid-signature}

```typescript
tryConvertToNodeId(id: StableNodeId): NodeId | undefined;
```

#### Parameters {#tryconverttonodeid-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        id
      </td>
      <td>
        <span><a href='/docs/apis/tree#stablenodeid-typealias'>StableNodeId</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#tryconverttonodeid-returns}

**Return type:** [NodeId](/docs/apis/tree#nodeid-typealias) \| undefined

### tryConvertToStableNodeId {#tryconverttostablenodeid-method}

Given a NodeId, attempt to return the corresponding stable ID. The returned value will be a UUID, unless the creation of `id` used an override string (see `generateNodeId` for more). The returned stable ID is undefined if `id` was never created with this SharedTree. If a stable ID is returned, this does not imply that there is a node with `id` in the current revision of the tree, only that `id` was at some point generated by some instance of this tree.

#### Signature {#tryconverttostablenodeid-signature}

```typescript
tryConvertToStableNodeId(id: NodeId): StableNodeId | undefined;
```

#### Parameters {#tryconverttostablenodeid-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        id
      </td>
      <td>
        <span><a href='/docs/apis/tree#nodeid-typealias'>NodeId</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#tryconverttostablenodeid-returns}

**Return type:** [StableNodeId](/docs/apis/tree#stablenodeid-typealias) \| undefined
