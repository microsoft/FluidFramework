{
  "title": "@fluidframework/common-utils Package",
  "summary": "This library contains common utility functions and classes used by the Fluid Framework.",
  "kind": "Package",
  "members": {
    "Function": {
      "assert": "/docs/apis/common-utils#assert-function",
      "doIfNotDisposed": "/docs/apis/common-utils#doifnotdisposed-function",
      "gitHashFile": "/docs/apis/common-utils#githashfile-function",
      "hashFile": "/docs/apis/common-utils#hashfile-function",
      "safelyParseJSON": "/docs/apis/common-utils#safelyparsejson-function",
      "setLongTimeout": "/docs/apis/common-utils#setlongtimeout-function",
      "stringToBuffer": "/docs/apis/common-utils#stringtobuffer-function",
      "Uint8ArrayToArrayBuffer": "/docs/apis/common-utils#uint8arraytoarraybuffer-function",
      "Uint8ArrayToString": "/docs/apis/common-utils#uint8arraytostring-function",
      "unreachableCase": "/docs/apis/common-utils#unreachablecase-function"
    },
    "Class": {
      "BaseTelemetryNullLogger": "/docs/apis/common-utils/basetelemetrynulllogger-class",
      "Buffer": "/docs/apis/common-utils/buffer-class",
      "Deferred": "/docs/apis/common-utils/deferred-class",
      "EventForwarder": "/docs/apis/common-utils/eventforwarder-class",
      "Heap": "/docs/apis/common-utils/heap-class",
      "Lazy": "/docs/apis/common-utils/lazy-class",
      "LazyPromise": "/docs/apis/common-utils/lazypromise-class",
      "PromiseCache": "/docs/apis/common-utils/promisecache-class",
      "PromiseTimer": "/docs/apis/common-utils/promisetimer-class",
      "RangeTracker": "/docs/apis/common-utils/rangetracker-class",
      "RateLimiter": "/docs/apis/common-utils/ratelimiter-class",
      "TelemetryNullLogger": "/docs/apis/common-utils/telemetrynulllogger-class",
      "Timer": "/docs/apis/common-utils/timer-class",
      "Trace": "/docs/apis/common-utils/trace-class",
      "TypedEventEmitter": "/docs/apis/common-utils/typedeventemitter-class"
    },
    "Variable": {
      "bufferToString": "/docs/apis/common-utils#buffertostring-variable",
      "delay": "/docs/apis/common-utils#delay-variable",
      "fromBase64ToUtf8": "/docs/apis/common-utils#frombase64toutf8-variable",
      "fromUtf8ToBase64": "/docs/apis/common-utils#fromutf8tobase64-variable",
      "IsoBuffer": "/docs/apis/common-utils#isobuffer-variable",
      "NumberComparer": "/docs/apis/common-utils#numbercomparer-variable",
      "performance_2": "/docs/apis/common-utils#performance_2-variable",
      "toUtf8": "/docs/apis/common-utils#toutf8-variable"
    },
    "TypeAlias": {
      "EventEmitterEventType": "/docs/apis/common-utils#eventemittereventtype-typealias",
      "IsoBuffer": "/docs/apis/common-utils#isobuffer-typealias",
      "IsomorphicPerformance": "/docs/apis/common-utils#isomorphicperformance-typealias",
      "PromiseCacheExpiry": "/docs/apis/common-utils#promisecacheexpiry-typealias",
      "TypedEventTransform": "/docs/apis/common-utils#typedeventtransform-typealias"
    },
    "Interface": {
      "IComparer": "/docs/apis/common-utils/icomparer-interface",
      "IHeapNode": "/docs/apis/common-utils/iheapnode-interface",
      "IPromiseTimer": "/docs/apis/common-utils/ipromisetimer-interface",
      "IPromiseTimerResult": "/docs/apis/common-utils/ipromisetimerresult-interface",
      "IRange": "/docs/apis/common-utils/irange-interface",
      "IRangeTrackerSnapshot": "/docs/apis/common-utils/irangetrackersnapshot-interface",
      "ITimer": "/docs/apis/common-utils/itimer-interface",
      "ITraceEvent": "/docs/apis/common-utils/itraceevent-interface",
      "PromiseCacheOptions": "/docs/apis/common-utils/promisecacheoptions-interface"
    }
  },
  "package": "@fluidframework/common-utils",
  "unscopedPackageName": "common-utils"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/common-utils](/docs/apis/common-utils)

This library contains common utility functions and classes used by the Fluid Framework.

## Interfaces

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Interface
      </th>
      <th>
        Alerts
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/icomparer-interface'>IComparer</a>
      </td>
      <td>
      </td>
      <td>
        Interface for a comparer.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/iheapnode-interface'>IHeapNode</a>
      </td>
      <td>
      </td>
      <td>
        Interface to a node in <a href='/docs/apis/common-utils/heap-class'>Heap</a>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/ipromisetimer-interface'>IPromiseTimer</a>
      </td>
      <td>
      </td>
      <td>
        Timer which offers a promise that fulfills when the timer completes.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/ipromisetimerresult-interface'>IPromiseTimerResult</a>
      </td>
      <td>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/irange-interface'>IRange</a>
      </td>
      <td>
      </td>
      <td>
        A range in the <a href='/docs/apis/common-utils/rangetracker-class'>RangeTracker</a>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/irangetrackersnapshot-interface'>IRangeTrackerSnapshot</a>
      </td>
      <td>
      </td>
      <td>
        A serialized version of the <a href='/docs/apis/common-utils/rangetracker-class'>RangeTracker</a>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/itimer-interface'>ITimer</a>
      </td>
      <td>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/itraceevent-interface'>ITraceEvent</a>
      </td>
      <td>
      </td>
      <td>
        Event in a performance trace including time elapsed.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/promisecacheoptions-interface'>PromiseCacheOptions</a>
      </td>
      <td>
        <code>DEPRECATED</code>
      </td>
      <td>
        Options for configuring the <a href='/docs/apis/common-utils/promisecache-class'>PromiseCache</a>
      </td>
    </tr>
  </tbody>
</table>

## Classes

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Class
      </th>
      <th>
        Alerts
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/basetelemetrynulllogger-class'>BaseTelemetryNullLogger</a>
      </td>
      <td>
        <code>DEPRECATED</code>
      </td>
      <td>
        Null logger It can be used in places where logger instance is required, but events should be not send over.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/buffer-class'>Buffer</a>
      </td>
      <td>
      </td>
      <td>
        Declare the subset of Buffer functionality we want to make available instead of exposing the entirely of Node's typings. This should match the public interface of the browser implementation, so any changes made in one should be made in both.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/deferred-class'>Deferred</a>
      </td>
      <td>
      </td>
      <td>
        A deferred creates a promise and the ability to resolve or reject it
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/eventforwarder-class'>EventForwarder</a>
      </td>
      <td>
      </td>
      <td>
        Base class used for forwarding events from a source EventEmitter. This can be useful when all arbitrary listeners need to be removed, but the primary source needs to stay intact.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/heap-class'>Heap</a>
      </td>
      <td>
      </td>
      <td>
        Ordered <a href='https://en.wikipedia.org/wiki/Heap_(data_structure)'>Heap</a> data structure implementation.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/lazy-class'>Lazy</a>
      </td>
      <td>
        <code>DEPRECATED</code>
      </td>
      <td>
        Helper class for lazy initialized values. Ensures the value is only generated once, and remain immutable.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/lazypromise-class'>LazyPromise</a>
      </td>
      <td>
        <code>DEPRECATED</code>
      </td>
      <td>
        A lazy evaluated promise. The execute function is delayed until the promise is used, e.g. await, then, catch ... The execute function is only called once. All calls are then proxied to the promise returned by the execute method.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/promisecache-class'>PromiseCache</a>
      </td>
      <td>
        <code>DEPRECATED</code>
      </td>
      <td>
        A specialized cache for async work, allowing you to safely cache the promised result of some async work without fear of running it multiple times or losing track of errors.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/promisetimer-class'>PromiseTimer</a>
      </td>
      <td>
      </td>
      <td>
        This class is a wrapper over setTimeout and clearTimeout which makes it simpler to keep track of recurring timeouts with the same handlers and timeouts, while also providing a promise that resolves when it times out.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/rangetracker-class'>RangeTracker</a>
      </td>
      <td>
      </td>
      <td>
        <p>
          Helper class that keeps track of the relation between two ranges in a 1:N fashion. Primary is continuous and always maps to a single value in secondary above the base value. The range defines an increasing step function.
        </p>
        <p>
          Used by deli to keep track of the branch map
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/ratelimiter-class'>RateLimiter</a>
      </td>
      <td>
        <code>DEPRECATED</code>
      </td>
      <td>
        A rate limiter to make sure that a client can only request help for one task within a time window.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/telemetrynulllogger-class'>TelemetryNullLogger</a>
      </td>
      <td>
        <code>DEPRECATED</code>
      </td>
      <td>
        Null logger It can be used in places where logger instance is required, but events should be not send over.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/timer-class'>Timer</a>
      </td>
      <td>
      </td>
      <td>
        This class is a thin wrapper over setTimeout and clearTimeout which makes it simpler to keep track of recurring timeouts with the same or similar handlers and timeouts. This class supports long timeouts or timeouts exceeding (2^31)-1 ms or approximately 24.8 days.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/trace-class'>Trace</a>
      </td>
      <td>
      </td>
      <td>
        Helper class for tracing performance of events Time measurements are in milliseconds as a floating point with a decimal
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils/typedeventemitter-class'>TypedEventEmitter</a>
      </td>
      <td>
      </td>
      <td>
        Event Emitter helper class the supports emitting typed events
      </td>
    </tr>
  </tbody>
</table>

## Types

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        TypeAlias
      </th>
      <th>
        Alerts
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#eventemittereventtype-typealias'>EventEmitterEventType</a>
      </td>
      <td>
      </td>
      <td>
        <p>
          The event emitter polyfill and the node event emitter have different event types: string &#124; symbol vs. string &#124; number
        </p>
        <p>
          This type allow us to correctly handle either type
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#isobuffer-typealias'>IsoBuffer</a>
      </td>
      <td>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#isomorphicperformance-typealias'>IsomorphicPerformance</a>
      </td>
      <td>
      </td>
      <td>
        This type contains all browser performance properties as optional, and some of the intersecting properties of node and browser performance as required.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#promisecacheexpiry-typealias'>PromiseCacheExpiry</a>
      </td>
      <td>
        <code>DEPRECATED</code>
      </td>
      <td>
        Three supported expiry policies: - indefinite: entries don't expire and must be explicitly removed - absolute: entries expire after the given duration in MS, even if accessed multiple times in the mean time - sliding: entries expire after the given duration in MS of inactivity (i.e. get resets the clock)
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#typedeventtransform-typealias'>TypedEventTransform</a>
      </td>
      <td>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Functions

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Function
      </th>
      <th>
        Alerts
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#assert-function'>assert</a>
      </td>
      <td>
      </td>
      <td>
        <span>asserts condition</span>
      </td>
      <td>
        A browser friendly assert library. Use this instead of the 'assert' package, which has a big impact on bundle sizes.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#doifnotdisposed-function'>doIfNotDisposed</a>
      </td>
      <td>
        <code>DEPRECATED</code>
      </td>
      <td>
        <span>(...args: any[]) =&gt; T</span>
      </td>
      <td>
        Returns a wrapper around the provided function, which will only invoke the inner function if the provided <a href='/docs/apis/common-definitions/idisposable-interface'>disposable</a> object has not yet been disposed.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#githashfile-function'>gitHashFile</a>
      </td>
      <td>
      </td>
      <td>
        <span>Promise&lt;string&gt;</span>
      </td>
      <td>
        Create a github hash (Github hashes the string with blob and size) Must be called under secure context for browsers
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#hashfile-function'>hashFile</a>
      </td>
      <td>
      </td>
      <td>
        <span>Promise&lt;string&gt;</span>
      </td>
      <td>
        Hash a file. Consistent within a session, but should not be persisted and is not consistent with git. If called under an insecure context for a browser, this will fallback to using the node implementation.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#safelyparsejson-function'>safelyParseJSON</a>
      </td>
      <td>
      </td>
      <td>
        <span>any &#124; undefined</span>
      </td>
      <td>
        Wrapper for <a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse'>JSON.parse</a>, which will return <code>undefined</code> in the case of an error, rather than throwing.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#setlongtimeout-function'>setLongTimeout</a>
      </td>
      <td>
      </td>
      <td>
        <span>ReturnType&lt;typeof setTimeout&gt;</span>
      </td>
      <td>
        Sets timeouts like the setTimeout function allowing timeouts to exceed the setTimeout's max timeout limit. Timeouts may not be exactly accurate due to browser implementations and the OS. https://stackoverflow.com/questions/21097421/what-is-the-reason-javascript-settimeout-is-so-inaccurate
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#stringtobuffer-function'>stringToBuffer</a>
      </td>
      <td>
      </td>
      <td>
        <span>ArrayBufferLike</span>
      </td>
      <td>
        Convert base64 or utf8 string to array buffer.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#uint8arraytoarraybuffer-function'>Uint8ArrayToArrayBuffer</a>
      </td>
      <td>
      </td>
      <td>
        <span>ArrayBuffer</span>
      </td>
      <td>
        Converts a Uint8Array array to an ArrayBuffer.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#uint8arraytostring-function'>Uint8ArrayToString</a>
      </td>
      <td>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Converts a Uint8Array to a string of the provided encoding.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#unreachablecase-function'>unreachableCase</a>
      </td>
      <td>
      </td>
      <td>
        <span>never</span>
      </td>
      <td>
        <p>
          This function can be used to assert at compile time that a given value has type never. One common usage is in the default case of a switch block, to ensure that all cases are explicitly handled.
        </p>
        <p>
          Example:
        </p>
        <code>
          const bool: true &#124; false = ...;
          <br>
          switch(bool) {
          <br>
            case true: {...}
          <br>
            case false: {...}
          <br>
            default: unreachableCase(bool);
          <br>
          }
        </code>
        <p>
        </p>
      </td>
    </tr>
  </tbody>
</table>

## Variables

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Variable
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#buffertostring-variable'>bufferToString</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        Convert binary blob to string format
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#delay-variable'>delay</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        Returns a promise that resolves after <code>timeMs</code>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#frombase64toutf8-variable'>fromBase64ToUtf8</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        Converts the provided <a href='https://en.wikipedia.org/wiki/Base64'>base64</a>-encoded string to <a href='https://en.wikipedia.org/wiki/UTF-8'>utf-8</a>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#fromutf8tobase64-variable'>fromUtf8ToBase64</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        Converts the provided <a href='https://en.wikipedia.org/wiki/UTF-8'>utf-8</a>-encoded string to <a href='https://en.wikipedia.org/wiki/Base64'>base64</a>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#isobuffer-variable'>IsoBuffer</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#numbercomparer-variable'>NumberComparer</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        A comparer for numbers.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#performance_2-variable'>performance_2</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/common-utils#toutf8-variable'>toUtf8</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        Convenience function to convert unknown encoding to utf8 that avoids buffer copies/encode ops when no conversion is needed.
      </td>
    </tr>
  </tbody>
</table>

## Type Details

### EventEmitterEventType {#eventemittereventtype-typealias}

The event emitter polyfill and the node event emitter have different event types: string \| symbol vs. string \| number

This type allow us to correctly handle either type

#### Signature {#eventemittereventtype-signature}

```typescript
export declare type EventEmitterEventType = EventEmitter extends {
    on(event: infer E, listener: any): any;
} ? E : never;
```

### IsoBuffer {#isobuffer-typealias}

#### Signature {#isobuffer-signature}

```typescript
export declare type IsoBuffer = Buffer;
```

### IsomorphicPerformance {#isomorphicperformance-typealias}

This type contains all browser performance properties as optional, and some of the intersecting properties of node and browser performance as required.

#### Signature {#isomorphicperformance-signature}

```typescript
export declare type IsomorphicPerformance = Partial<Performance> & Pick<Performance, "clearMarks" | "mark" | "measure" | "now">;
```

### PromiseCacheExpiry {#promisecacheexpiry-typealias}

{{% callout warning Deprecated %}}
Moved to the `@fluidframework/core-utils` package.

{{% /callout %}}

Three supported expiry policies: - indefinite: entries don't expire and must be explicitly removed - absolute: entries expire after the given duration in MS, even if accessed multiple times in the mean time - sliding: entries expire after the given duration in MS of inactivity (i.e. get resets the clock)

#### Signature {#promisecacheexpiry-signature}

```typescript
export declare type PromiseCacheExpiry = {
    policy: "indefinite";
} | {
    policy: "absolute" | "sliding";
    durationMs: number;
};
```

### TypedEventTransform {#typedeventtransform-typealias}

#### Signature {#typedeventtransform-signature}

```typescript
export declare type TypedEventTransform<TThis, TEvent> = TransformedEvent<TThis, "newListener" | "removeListener", Parameters<(event: string, listener: (...args: any[]) => void) => void>> & IEventTransformer<TThis, TEvent & IEvent> & TransformedEvent<TThis, EventEmitterEventType, any[]>;
```

## Function Details

### assert {#assert-function}

A browser friendly assert library. Use this instead of the 'assert' package, which has a big impact on bundle sizes.

#### Signature {#assert-signature}

```typescript
export declare function assert(condition: boolean, message: string | number): asserts condition;
```

#### Parameters {#assert-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        condition
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        The condition that should be true, if the condition is false an error will be thrown. Only use this API when <code>false</code> indicates a logic error in the problem and thus a bug that should be fixed.
      </td>
    </tr>
    <tr>
      <td>
        message
      </td>
      <td>
        <span>string &#124; number</span>
      </td>
      <td>
        The message to include in the error when the condition does not hold. A number should not be specified manually: use a string. Before a release, policy-check should be run, which will convert any asserts still using strings to use numbered error codes instead.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#assert-returns}

**Return type:** asserts condition

### doIfNotDisposed {#doifnotdisposed-function}

{{% callout warning Deprecated %}}
This function has no replacement.

{{% /callout %}}

Returns a wrapper around the provided function, which will only invoke the inner function if the provided [disposable](/docs/apis/common-definitions/idisposable-interface) object has not yet been disposed.

#### Signature {#doifnotdisposed-signature}

```typescript
export declare function doIfNotDisposed<T>(disposable: IDisposable, f: (...args: any[]) => T): (...args: any[]) => T;
```

#### Parameters {#doifnotdisposed-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        disposable
      </td>
      <td>
        <span><a href='/docs/apis/common-definitions/idisposable-interface'>IDisposable</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        f
      </td>
      <td>
        <span>(...args: any[]) =&gt; T</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#doifnotdisposed-returns}

**Return type:** (...args: any\[\]) =&gt; T

#### Throws {#doifnotdisposed-throws}

Will throw an error if the item has already been disposed.

### gitHashFile {#githashfile-function}

Create a github hash (Github hashes the string with blob and size) Must be called under secure context for browsers

#### Signature {#githashfile-signature}

```typescript
export declare function gitHashFile(file: IsoBuffer): Promise<string>;
```

#### Parameters {#githashfile-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        file
      </td>
      <td>
        <span><a href='/docs/apis/common-utils#isobuffer-typealias'>IsoBuffer</a></span>
      </td>
      <td>
        The contents of the file in a buffer
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#githashfile-returns}

The sha1 hash of the content of the buffer with the `blob` prefix and size

**Return type:** Promise&lt;string&gt;

### hashFile {#hashfile-function}

Hash a file. Consistent within a session, but should not be persisted and is not consistent with git. If called under an insecure context for a browser, this will fallback to using the node implementation.

#### Signature {#hashfile-signature}

```typescript
export declare function hashFile(file: IsoBuffer, algorithm?: "SHA-1" | "SHA-256", hashEncoding?: "hex" | "base64"): Promise<string>;
```

#### Parameters {#hashfile-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        file
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/common-utils#isobuffer-typealias'>IsoBuffer</a></span>
      </td>
      <td>
        The contents of the file in a buffer.
      </td>
    </tr>
    <tr>
      <td>
        algorithm
      </td>
      <td>
        optional
      </td>
      <td>
        <span>&quot;SHA-1&quot; &#124; &quot;SHA-256&quot;</span>
      </td>
      <td>
        The hash algorithm to use, artificially constrained by what is used internally.
      </td>
    </tr>
    <tr>
      <td>
        hashEncoding
      </td>
      <td>
        optional
      </td>
      <td>
        <span>&quot;hex&quot; &#124; &quot;base64&quot;</span>
      </td>
      <td>
        The encoding of the returned hash, also artificially constrained.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#hashfile-returns}

The hash of the content of the buffer.

**Return type:** Promise&lt;string&gt;

### safelyParseJSON {#safelyparsejson-function}

Wrapper for [JSON.parse](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse), which will return `undefined` in the case of an error, rather than throwing.

#### Signature {#safelyparsejson-signature}

```typescript
export declare function safelyParseJSON(json: string): any | undefined;
```

#### Parameters {#safelyparsejson-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        json
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        The JSON string to parse
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#safelyparsejson-returns}

The result from `JSON.parse` if successful, otherwise `undefined`.

**Return type:** any \| undefined

### setLongTimeout {#setlongtimeout-function}

Sets timeouts like the setTimeout function allowing timeouts to exceed the setTimeout's max timeout limit. Timeouts may not be exactly accurate due to browser implementations and the OS. https://stackoverflow.com/questions/21097421/what-is-the-reason-javascript-settimeout-is-so-inaccurate

#### Signature {#setlongtimeout-signature}

```typescript
export declare function setLongTimeout(timeoutFn: () => void, timeoutMs: number, setTimeoutIdFn?: (timeoutId: ReturnType<typeof setTimeout>) => void): ReturnType<typeof setTimeout>;
```

#### Parameters {#setlongtimeout-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        timeoutFn
      </td>
      <td>
      </td>
      <td>
        <span>() =&gt; void</span>
      </td>
      <td>
        Executed when the timeout expires
      </td>
    </tr>
    <tr>
      <td>
        timeoutMs
      </td>
      <td>
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
        Duration of the timeout in milliseconds
      </td>
    </tr>
    <tr>
      <td>
        setTimeoutIdFn
      </td>
      <td>
        optional
      </td>
      <td>
        <span>(timeoutId: ReturnType&lt;typeof setTimeout&gt;) =&gt; void</span>
      </td>
      <td>
        Executed to update the timeout if multiple timeouts are required when timeoutMs greater than maxTimeout
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#setlongtimeout-returns}

The initial timeout

**Return type:** ReturnType&lt;typeof setTimeout&gt;

### stringToBuffer {#stringtobuffer-function}

Convert base64 or utf8 string to array buffer.

#### Signature {#stringtobuffer-signature}

```typescript
export declare function stringToBuffer(input: string, encoding: string): ArrayBufferLike;
```

#### Parameters {#stringtobuffer-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        input
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        encoding
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        The input string's encoding.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#stringtobuffer-returns}

**Return type:** ArrayBufferLike

### Uint8ArrayToArrayBuffer {#uint8arraytoarraybuffer-function}

Converts a Uint8Array array to an ArrayBuffer.

#### Signature {#uint8arraytoarraybuffer-signature}

```typescript
export declare function Uint8ArrayToArrayBuffer(array: Uint8Array): ArrayBuffer;
```

#### Parameters {#uint8arraytoarraybuffer-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        array
      </td>
      <td>
        <span>Uint8Array</span>
      </td>
      <td>
        Array to convert to ArrayBuffer.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#uint8arraytoarraybuffer-returns}

**Return type:** ArrayBuffer

### Uint8ArrayToString {#uint8arraytostring-function}

Converts a Uint8Array to a string of the provided encoding.

#### Signature {#uint8arraytostring-signature}

```typescript
export declare function Uint8ArrayToString(arr: Uint8Array, encoding?: string): string;
```

#### Remarks {#uint8arraytostring-remarks}

Useful when the array might be an IsoBuffer.

#### Parameters {#uint8arraytostring-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        arr
      </td>
      <td>
      </td>
      <td>
        <span>Uint8Array</span>
      </td>
      <td>
        The array to convert.
      </td>
    </tr>
    <tr>
      <td>
        encoding
      </td>
      <td>
        optional
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Optional target encoding; only &quot;utf8&quot; and &quot;base64&quot; are supported, with &quot;utf8&quot; being default.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#uint8arraytostring-returns}

The converted string.

**Return type:** string

### unreachableCase {#unreachablecase-function}

This function can be used to assert at compile time that a given value has type never. One common usage is in the default case of a switch block, to ensure that all cases are explicitly handled.

Example:

```typescript
const bool: true | false = ...;
switch(bool) {
  case true: {...}
  case false: {...}
  default: unreachableCase(bool);
}
```

#### Signature {#unreachablecase-signature}

```typescript
export declare function unreachableCase(_: never, message?: string): never;
```

#### Parameters {#unreachablecase-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        _
      </td>
      <td>
      </td>
      <td>
        <span>never</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        message
      </td>
      <td>
        optional
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#unreachablecase-returns}

**Return type:** never

## Variable Details

### bufferToString {#buffertostring-variable}

Convert binary blob to string format

#### Signature {#buffertostring-signature}

```typescript
bufferToString: (blob: ArrayBufferLike, encoding: string) => string
```

### delay {#delay-variable}

Returns a promise that resolves after `timeMs`.

#### Signature {#delay-signature}

```typescript
delay: (timeMs: number) => Promise<void>
```

### fromBase64ToUtf8 {#frombase64toutf8-variable}

Converts the provided [base64](https://en.wikipedia.org/wiki/Base64)-encoded string to [utf-8](https://en.wikipedia.org/wiki/UTF-8).

#### Signature {#frombase64toutf8-signature}

```typescript
fromBase64ToUtf8: (input: string) => string
```

### fromUtf8ToBase64 {#fromutf8tobase64-variable}

Converts the provided [utf-8](https://en.wikipedia.org/wiki/UTF-8)-encoded string to [base64](https://en.wikipedia.org/wiki/Base64).

#### Signature {#fromutf8tobase64-signature}

```typescript
fromUtf8ToBase64: (input: string) => string
```

### IsoBuffer {#isobuffer-variable}

#### Signature {#isobuffer-signature}

```typescript
IsoBuffer: typeof Buffer
```

### NumberComparer {#numbercomparer-variable}

A comparer for numbers.

#### Signature {#numbercomparer-signature}

```typescript
NumberComparer: IComparer<number>
```

### performance\_2 {#performance_2-variable}

#### Signature {#performance_2-signature}

```typescript
performance: IsomorphicPerformance
```

### toUtf8 {#toutf8-variable}

Convenience function to convert unknown encoding to utf8 that avoids buffer copies/encode ops when no conversion is needed.

#### Signature {#toutf8-signature}

```typescript
toUtf8: (input: string, encoding: string) => string
```
