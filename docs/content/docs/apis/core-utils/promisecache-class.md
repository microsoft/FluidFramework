{
  "title": "PromiseCache Class",
  "summary": "A specialized cache for async work, allowing you to safely cache the promised result of some async work without fear of running it multiple times or losing track of errors.",
  "kind": "Class",
  "members": {
    "Constructor": {
      "(constructor)": "/docs/apis/core-utils/promisecache-class#_constructor_-constructor"
    },
    "Method": {
      "add": "/docs/apis/core-utils/promisecache-class#add-method",
      "addOrGet": "/docs/apis/core-utils/promisecache-class#addorget-method",
      "addValue": "/docs/apis/core-utils/promisecache-class#addvalue-method",
      "addValueOrGet": "/docs/apis/core-utils/promisecache-class#addvalueorget-method",
      "get": "/docs/apis/core-utils/promisecache-class#get-method",
      "has": "/docs/apis/core-utils/promisecache-class#has-method",
      "remove": "/docs/apis/core-utils/promisecache-class#remove-method"
    }
  },
  "package": "@fluidframework/core-utils",
  "unscopedPackageName": "core-utils"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/core-utils](/docs/apis/core-utils) &gt; [PromiseCache](/docs/apis/core-utils/promisecache-class)

A specialized cache for async work, allowing you to safely cache the promised result of some async work without fear of running it multiple times or losing track of errors.

## Signature {#promisecache-signature}

```typescript
export declare class PromiseCache<TKey, TResult>
```

### Type Parameters

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        TKey
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        TResult
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Constructors

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Constructor
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/core-utils/promisecache-class#_constructor_-constructor'>(constructor)</a>
      </td>
      <td>
        <p>
          Create the PromiseCache with the given options, with the following defaults:
        </p>
        <p>
          expiry: indefinite, removeOnError: true for all errors
        </p>
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/core-utils/promisecache-class#add-method'>add</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Try to add the result of the given asyncFn, without overwriting an existing cache entry at that key. Returns false if the cache already contained an entry at that key, and true otherwise.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/core-utils/promisecache-class#addorget-method'>addOrGet</a>
      </td>
      <td>
        <span>Promise&lt;TResult&gt;</span>
      </td>
      <td>
        Try to add the result of the given asyncFn, without overwriting an existing cache entry at that key. Returns a Promise for the added or existing async work being done at that key.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/core-utils/promisecache-class#addvalue-method'>addValue</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Try to add the given value, without overwriting an existing cache entry at that key. Returns false if the cache already contained an entry at that key, and true otherwise.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/core-utils/promisecache-class#addvalueorget-method'>addValueOrGet</a>
      </td>
      <td>
        <span>Promise&lt;TResult&gt;</span>
      </td>
      <td>
        Try to add the given value, without overwriting an existing cache entry at that key. Returns a Promise for the added or existing async work being done at that key.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/core-utils/promisecache-class#get-method'>get</a>
      </td>
      <td>
        <span>Promise&lt;TResult&gt; &#124; undefined</span>
      </td>
      <td>
        Get the Promise for the given key, or undefined if it's not found. Extend expiry if applicable.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/core-utils/promisecache-class#has-method'>has</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Check if there's anything cached at the given key
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/core-utils/promisecache-class#remove-method'>remove</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Remove the Promise for the given key, returning true if it was found and removed
      </td>
    </tr>
  </tbody>
</table>

## Constructor Details

### (constructor) {#_constructor_-constructor}

Create the PromiseCache with the given options, with the following defaults:

expiry: indefinite, removeOnError: true for all errors

#### Signature {#_constructor_-signature}

```typescript
constructor({ expiry, removeOnError, }?: PromiseCacheOptions);
```

#### Parameters {#_constructor_-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        { expiry, removeOnError, }
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/core-utils/promisecacheoptions-interface'>PromiseCacheOptions</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Method Details

### add {#add-method}

Try to add the result of the given asyncFn, without overwriting an existing cache entry at that key. Returns false if the cache already contained an entry at that key, and true otherwise.

#### Signature {#add-signature}

```typescript
add(key: TKey, asyncFn: () => Promise<TResult>): boolean;
```

#### Parameters {#add-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        key
      </td>
      <td>
        <span>TKey</span>
      </td>
      <td>
        key name where to store the async work
      </td>
    </tr>
    <tr>
      <td>
        asyncFn
      </td>
      <td>
        <span>() =&gt; Promise&lt;TResult&gt;</span>
      </td>
      <td>
        the async work to do and store, if not already in progress under the given key
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#add-returns}

**Return type:** boolean

### addOrGet {#addorget-method}

Try to add the result of the given asyncFn, without overwriting an existing cache entry at that key. Returns a Promise for the added or existing async work being done at that key.

#### Signature {#addorget-signature}

```typescript
addOrGet(key: TKey, asyncFn: () => Promise<TResult>): Promise<TResult>;
```

#### Parameters {#addorget-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        key
      </td>
      <td>
        <span>TKey</span>
      </td>
      <td>
        key name where to store the async work
      </td>
    </tr>
    <tr>
      <td>
        asyncFn
      </td>
      <td>
        <span>() =&gt; Promise&lt;TResult&gt;</span>
      </td>
      <td>
        the async work to do and store, if not already in progress under the given key
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#addorget-returns}

**Return type:** Promise&lt;TResult&gt;

### addValue {#addvalue-method}

Try to add the given value, without overwriting an existing cache entry at that key. Returns false if the cache already contained an entry at that key, and true otherwise.

#### Signature {#addvalue-signature}

```typescript
addValue(key: TKey, value: TResult): boolean;
```

#### Parameters {#addvalue-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        key
      </td>
      <td>
        <span>TKey</span>
      </td>
      <td>
        key name where to store the value
      </td>
    </tr>
    <tr>
      <td>
        value
      </td>
      <td>
        <span>TResult</span>
      </td>
      <td>
        value to store
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#addvalue-returns}

**Return type:** boolean

### addValueOrGet {#addvalueorget-method}

Try to add the given value, without overwriting an existing cache entry at that key. Returns a Promise for the added or existing async work being done at that key.

#### Signature {#addvalueorget-signature}

```typescript
addValueOrGet(key: TKey, value: TResult): Promise<TResult>;
```

#### Parameters {#addvalueorget-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        key
      </td>
      <td>
        <span>TKey</span>
      </td>
      <td>
        key name where to store the async work
      </td>
    </tr>
    <tr>
      <td>
        value
      </td>
      <td>
        <span>TResult</span>
      </td>
      <td>
        value to store
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#addvalueorget-returns}

**Return type:** Promise&lt;TResult&gt;

### get {#get-method}

Get the Promise for the given key, or undefined if it's not found. Extend expiry if applicable.

#### Signature {#get-signature}

```typescript
get(key: TKey): Promise<TResult> | undefined;
```

#### Parameters {#get-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        key
      </td>
      <td>
        <span>TKey</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#get-returns}

**Return type:** Promise&lt;TResult&gt; \| undefined

### has {#has-method}

Check if there's anything cached at the given key

#### Signature {#has-signature}

```typescript
has(key: TKey): boolean;
```

#### Parameters {#has-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        key
      </td>
      <td>
        <span>TKey</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#has-returns}

**Return type:** boolean

### remove {#remove-method}

Remove the Promise for the given key, returning true if it was found and removed

#### Signature {#remove-signature}

```typescript
remove(key: TKey): boolean;
```

#### Parameters {#remove-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        key
      </td>
      <td>
        <span>TKey</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#remove-returns}

**Return type:** boolean
