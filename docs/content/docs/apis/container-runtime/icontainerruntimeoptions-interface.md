{
  "title": "IContainerRuntimeOptions Interface",
  "summary": "Options for container runtime.",
  "kind": "Interface",
  "members": {
    "PropertySignature": {
      "chunkSizeInBytes": "/docs/apis/container-runtime/icontainerruntimeoptions-interface#chunksizeinbytes-propertysignature",
      "compressionOptions": "/docs/apis/container-runtime/icontainerruntimeoptions-interface#compressionoptions-propertysignature",
      "enableGroupedBatching": "/docs/apis/container-runtime/icontainerruntimeoptions-interface#enablegroupedbatching-propertysignature",
      "enableOpReentryCheck": "/docs/apis/container-runtime/icontainerruntimeoptions-interface#enableopreentrycheck-propertysignature",
      "enableRuntimeIdCompressor": "/docs/apis/container-runtime/icontainerruntimeoptions-interface#enableruntimeidcompressor-propertysignature",
      "flushMode": "/docs/apis/container-runtime/icontainerruntimeoptions-interface#flushmode-propertysignature",
      "gcOptions": "/docs/apis/container-runtime/icontainerruntimeoptions-interface#gcoptions-propertysignature",
      "loadSequenceNumberVerification": "/docs/apis/container-runtime/icontainerruntimeoptions-interface#loadsequencenumberverification-propertysignature",
      "maxBatchSizeInBytes": "/docs/apis/container-runtime/icontainerruntimeoptions-interface#maxbatchsizeinbytes-propertysignature",
      "summaryOptions": "/docs/apis/container-runtime/icontainerruntimeoptions-interface#summaryoptions-propertysignature"
    }
  },
  "package": "@fluidframework/container-runtime",
  "unscopedPackageName": "container-runtime"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

Options for container runtime.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

## Signature {#icontainerruntimeoptions-signature}

```typescript
export interface IContainerRuntimeOptions
```

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Alerts
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/icontainerruntimeoptions-interface#chunksizeinbytes-propertysignature'>chunkSizeInBytes</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>optional</code>, <code>readonly</code>
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
        <p>
          If the op payload needs to be chunked in order to work around the maximum size of the batch, this value represents how large the individual chunks will be. This is only supported when compression is enabled. If after compression, the batch content size exceeds this value, it will be chunked into smaller ops of this exact size.
        </p>
        <p>
          This value is a trade-off between having many small chunks vs fewer larger chunks and by default, the runtime is configured to use 200 * 1024 = 204800 bytes. This default value ensures that no compressed payload's content is able to exceed <a href='/docs/apis/container-runtime/icontainerruntimeoptions-interface#maxbatchsizeinbytes-propertysignature'>maxBatchSizeInBytes</a> regardless of the overhead of an individual op.
        </p>
        <p>
          Any value of <code>chunkSizeInBytes</code> exceeding <a href='/docs/apis/container-runtime/icontainerruntimeoptions-interface#maxbatchsizeinbytes-propertysignature'>maxBatchSizeInBytes</a> will disable this feature, therefore if a compressed batch's content size exceeds <a href='/docs/apis/container-runtime/icontainerruntimeoptions-interface#maxbatchsizeinbytes-propertysignature'>maxBatchSizeInBytes</a> after compression, the container will close with an instance of <code>GenericError</code> with the <code>BatchTooLarge</code> message.
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/icontainerruntimeoptions-interface#compressionoptions-propertysignature'>compressionOptions</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>optional</code>, <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/container-runtime/icompressionruntimeoptions-interface'>ICompressionRuntimeOptions</a></span>
      </td>
      <td>
        Enables the runtime to compress ops. See <a href='/docs/apis/container-runtime/icompressionruntimeoptions-interface'>ICompressionRuntimeOptions</a>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/icontainerruntimeoptions-interface#enablegroupedbatching-propertysignature'>enableGroupedBatching</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>optional</code>, <code>readonly</code>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        <p>
          If enabled, the runtime will group messages within a batch into a single message to be sent to the service. The grouping an ungrouping of such messages is handled by the &quot;OpGroupingManager&quot;.
        </p>
        <p>
          By default, the feature is disabled. If enabled from options, the <code>Fluid.ContainerRuntime.DisableGroupedBatching</code> flag can be used to disable it at runtime.
        </p>
        <p>
          Not ready for use.
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/icontainerruntimeoptions-interface#enableopreentrycheck-propertysignature'>enableOpReentryCheck</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>optional</code>, <code>readonly</code>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        <p>
          If enabled, the runtime will block all attempts to send an op inside the <span><i>ContainerRuntime#ensureNoDataModelChanges</i></span> callback. The callback is used by <a href='/docs/apis/shared-object-base/sharedobjectcore-class'>SharedObjectCore</a> for event handlers so enabling this will disallow modifying DDSes while handling DDS events.
        </p>
        <p>
          By default, the feature is disabled. If enabled from options, the <code>Fluid.ContainerRuntime.DisableOpReentryCheck</code> can be used to disable it at runtime.
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/icontainerruntimeoptions-interface#enableruntimeidcompressor-propertysignature'>enableRuntimeIdCompressor</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>optional</code>, <code>readonly</code>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Enable the IdCompressor in the runtime. Not ready for use.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/icontainerruntimeoptions-interface#flushmode-propertysignature'>flushMode</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>optional</code>, <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/runtime-definitions/flushmode-enum'>FlushMode</a></span>
      </td>
      <td>
        Sets the flush mode for the runtime. In Immediate flush mode the runtime will immediately send all operations to the driver layer, while in TurnBased the operations will be buffered and then sent them as a single batch at the end of the turn. By default, flush mode is TurnBased.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/icontainerruntimeoptions-interface#gcoptions-propertysignature'>gcOptions</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>optional</code>, <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/container-runtime/igcruntimeoptions-interface'>IGCRuntimeOptions</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/icontainerruntimeoptions-interface#loadsequencenumberverification-propertysignature'>loadSequenceNumberVerification</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>optional</code>, <code>readonly</code>
      </td>
      <td>
        <span>&quot;close&quot; &#124; &quot;log&quot; &#124; &quot;bypass&quot;</span>
      </td>
      <td>
        Affects the behavior while loading the runtime when the data verification check which compares the DeltaManager sequence number (obtained from protocol in summary) to the runtime sequence number (obtained from runtime metadata in summary) finds a mismatch. 1. &quot;close&quot; (default) will close the container with an assertion. 2. &quot;log&quot; will log an error event to telemetry, but still continue to load. 3. &quot;bypass&quot; will skip the check entirely. This is not recommended.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/icontainerruntimeoptions-interface#maxbatchsizeinbytes-propertysignature'>maxBatchSizeInBytes</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>optional</code>, <code>readonly</code>
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
        <p>
          If specified, when in FlushMode.TurnBased, if the size of the ops between JS turns exceeds this value, an error will be thrown and the container will close.
        </p>
        <p>
          If unspecified, the limit is 950 * 1024.
        </p>
        <p>
          'Infinity' will disable any limit.
        </p>
        <p>
          This config should be driven by the connection with the service and will be moved in the future.
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/icontainerruntimeoptions-interface#summaryoptions-propertysignature'>summaryOptions</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>optional</code>, <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/container-runtime/isummaryruntimeoptions-interface'>ISummaryRuntimeOptions</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### chunkSizeInBytes (ALPHA) {#chunksizeinbytes-propertysignature}

If the op payload needs to be chunked in order to work around the maximum size of the batch, this value represents how large the individual chunks will be. This is only supported when compression is enabled. If after compression, the batch content size exceeds this value, it will be chunked into smaller ops of this exact size.

This value is a trade-off between having many small chunks vs fewer larger chunks and by default, the runtime is configured to use 200 \* 1024 = 204800 bytes. This default value ensures that no compressed payload's content is able to exceed [maxBatchSizeInBytes](/docs/apis/container-runtime/icontainerruntimeoptions-interface#maxbatchsizeinbytes-propertysignature) regardless of the overhead of an individual op.

Any value of `chunkSizeInBytes` exceeding [maxBatchSizeInBytes](/docs/apis/container-runtime/icontainerruntimeoptions-interface#maxbatchsizeinbytes-propertysignature) will disable this feature, therefore if a compressed batch's content size exceeds [maxBatchSizeInBytes](/docs/apis/container-runtime/icontainerruntimeoptions-interface#maxbatchsizeinbytes-propertysignature) after compression, the container will close with an instance of `GenericError` with the `BatchTooLarge` message.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#chunksizeinbytes-signature}

```typescript
readonly chunkSizeInBytes?: number;
```

### compressionOptions (ALPHA) {#compressionoptions-propertysignature}

Enables the runtime to compress ops. See [ICompressionRuntimeOptions](/docs/apis/container-runtime/icompressionruntimeoptions-interface).

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#compressionoptions-signature}

```typescript
readonly compressionOptions?: ICompressionRuntimeOptions;
```

### enableGroupedBatching (ALPHA) {#enablegroupedbatching-propertysignature}

If enabled, the runtime will group messages within a batch into a single message to be sent to the service. The grouping an ungrouping of such messages is handled by the "OpGroupingManager".

By default, the feature is disabled. If enabled from options, the `Fluid.ContainerRuntime.DisableGroupedBatching` flag can be used to disable it at runtime.

Not ready for use.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#enablegroupedbatching-signature}

```typescript
readonly enableGroupedBatching?: boolean;
```

### enableOpReentryCheck (ALPHA) {#enableopreentrycheck-propertysignature}

If enabled, the runtime will block all attempts to send an op inside the _ContainerRuntime\#ensureNoDataModelChanges_ callback. The callback is used by [SharedObjectCore](/docs/apis/shared-object-base/sharedobjectcore-class) for event handlers so enabling this will disallow modifying DDSes while handling DDS events.

By default, the feature is disabled. If enabled from options, the `Fluid.ContainerRuntime.DisableOpReentryCheck` can be used to disable it at runtime.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#enableopreentrycheck-signature}

```typescript
readonly enableOpReentryCheck?: boolean;
```

### enableRuntimeIdCompressor (ALPHA) {#enableruntimeidcompressor-propertysignature}

Enable the IdCompressor in the runtime. Not ready for use.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#enableruntimeidcompressor-signature}

```typescript
readonly enableRuntimeIdCompressor?: boolean;
```

### flushMode (ALPHA) {#flushmode-propertysignature}

Sets the flush mode for the runtime. In Immediate flush mode the runtime will immediately send all operations to the driver layer, while in TurnBased the operations will be buffered and then sent them as a single batch at the end of the turn. By default, flush mode is TurnBased.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#flushmode-signature}

```typescript
readonly flushMode?: FlushMode;
```

### gcOptions (ALPHA) {#gcoptions-propertysignature}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#gcoptions-signature}

```typescript
readonly gcOptions?: IGCRuntimeOptions;
```

### loadSequenceNumberVerification (ALPHA) {#loadsequencenumberverification-propertysignature}

Affects the behavior while loading the runtime when the data verification check which compares the DeltaManager sequence number (obtained from protocol in summary) to the runtime sequence number (obtained from runtime metadata in summary) finds a mismatch. 1. "close" (default) will close the container with an assertion. 2. "log" will log an error event to telemetry, but still continue to load. 3. "bypass" will skip the check entirely. This is not recommended.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#loadsequencenumberverification-signature}

```typescript
readonly loadSequenceNumberVerification?: "close" | "log" | "bypass";
```

### maxBatchSizeInBytes (ALPHA) {#maxbatchsizeinbytes-propertysignature}

If specified, when in FlushMode.TurnBased, if the size of the ops between JS turns exceeds this value, an error will be thrown and the container will close.

If unspecified, the limit is 950 \* 1024.

'Infinity' will disable any limit.

This config should be driven by the connection with the service and will be moved in the future.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#maxbatchsizeinbytes-signature}

```typescript
readonly maxBatchSizeInBytes?: number;
```

### summaryOptions (ALPHA) {#summaryoptions-propertysignature}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#summaryoptions-signature}

```typescript
readonly summaryOptions?: ISummaryRuntimeOptions;
```
