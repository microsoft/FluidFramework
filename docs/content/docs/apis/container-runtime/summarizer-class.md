{
  "title": "Summarizer Class",
  "summary": "Summarizer is responsible for coordinating when to generate and send summaries. It is the main entry point for summary work. It is created only by summarizing container (i.e. one with clientType === 'summarizer')",
  "kind": "Class",
  "members": {
    "Constructor": {
      "(constructor)": "/docs/apis/container-runtime/summarizer-class#_constructor_-constructor"
    },
    "Method": {
      "close": "/docs/apis/container-runtime/summarizer-class#close-method",
      "create": "/docs/apis/container-runtime/summarizer-class#create-method",
      "dispose": "/docs/apis/container-runtime/summarizer-class#dispose-method",
      "enqueueSummarize": "/docs/apis/container-runtime/summarizer-class#enqueuesummarize-method",
      "recordSummaryAttempt": "/docs/apis/container-runtime/summarizer-class#recordsummaryattempt-method",
      "run": "/docs/apis/container-runtime/summarizer-class#run-method",
      "stop": "/docs/apis/container-runtime/summarizer-class#stop-method",
      "stopReasonCanRunLastSummary": "/docs/apis/container-runtime/summarizer-class#stopreasoncanrunlastsummary-method",
      "summarizeOnDemand": "/docs/apis/container-runtime/summarizer-class#summarizeondemand-method"
    },
    "Property": {
      "ISummarizer": "/docs/apis/container-runtime/summarizer-class#isummarizer-property",
      "summaryCollection": "/docs/apis/container-runtime/summarizer-class#summarycollection-property"
    }
  },
  "package": "@fluidframework/container-runtime",
  "unscopedPackageName": "container-runtime"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/container-runtime](/docs/apis/container-runtime) &gt; [Summarizer](/docs/apis/container-runtime/summarizer-class)

Summarizer is responsible for coordinating when to generate and send summaries. It is the main entry point for summary work. It is created only by summarizing container (i.e. one with clientType === "summarizer")

## Signature {#summarizer-signature}

```typescript
export declare class Summarizer extends EventEmitter implements ISummarizer
```

**Extends:** EventEmitter

**Implements:** [ISummarizer](/docs/apis/container-runtime/isummarizer-interface)

## Constructors

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Constructor
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/summarizer-class#_constructor_-constructor'>(constructor)</a>
      </td>
      <td>
        Constructs a new instance of the <code>Summarizer</code> class
      </td>
    </tr>
  </tbody>
</table>

## Static Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/summarizer-class#create-method'>create</a>
      </td>
      <td>
        <span>Promise&lt;<a href='/docs/apis/container-runtime/isummarizer-interface'>ISummarizer</a>&gt;</span>
      </td>
      <td>
        Creates a Summarizer and its underlying client. Note that different implementations of ILoader will handle the URL differently. ILoader provided by a ContainerRuntime is a RelativeLoader, which will treat URL's starting with &quot;/&quot; as relative to the Container. The general ILoader interface will expect an absolute URL and will not handle &quot;/&quot;.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/summarizer-class#stopreasoncanrunlastsummary-method'>stopReasonCanRunLastSummary</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Should we try to run a last summary for the given stop reason? Currently only allows &quot;parentNotConnected&quot;
      </td>
    </tr>
  </tbody>
</table>

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/summarizer-class#isummarizer-property'>ISummarizer</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>this</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/summarizer-class#summarycollection-property'>summaryCollection</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/container-runtime/summarycollection-class'>SummaryCollection</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/summarizer-class#close-method'>close</a>
      </td>
      <td>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/summarizer-class#dispose-method'>dispose</a>
      </td>
      <td>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Disposes of resources after running. This cleanup will clear any outstanding timers and reset some of the state properties. Called by ContainerRuntime when it is disposed, as well as at the end the run().
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/summarizer-class#enqueuesummarize-method'>enqueueSummarize</a>
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/container-runtime#enqueuesummarizeresult-typealias'>EnqueueSummarizeResult</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/summarizer-class#recordsummaryattempt-method'>recordSummaryAttempt</a>
      </td>
      <td>
        <code>optional</code>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/summarizer-class#run-method'>run</a>
      </td>
      <td>
      </td>
      <td>
        <span>Promise&lt;<a href='/docs/apis/container-runtime#summarizerstopreason-typealias'>SummarizerStopReason</a>&gt;</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/summarizer-class#stop-method'>stop</a>
      </td>
      <td>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Stops the summarizer from running. This will complete the run promise, and also close the container.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/container-runtime/summarizer-class#summarizeondemand-method'>summarizeOnDemand</a>
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/container-runtime/isummarizeresults-interface'>ISummarizeResults</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Constructor Details

### (constructor) {#_constructor_-constructor}

Constructs a new instance of the `Summarizer` class

#### Signature {#_constructor_-signature}

```typescript
constructor(
    runtime: ISummarizerRuntime, configurationGetter: () => ISummaryConfiguration, 
    internalsProvider: ISummarizerInternalsProvider, handleContext: IFluidHandleContext, summaryCollection: SummaryCollection, runCoordinatorCreateFn: (runtime: IConnectableRuntime) => Promise<ICancellableSummarizerController>);
```

#### Parameters {#_constructor_-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        runtime
      </td>
      <td>
        <span><a href='/docs/apis/container-runtime/isummarizerruntime-interface'>ISummarizerRuntime</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        configurationGetter
      </td>
      <td>
        <span>() =&gt; <a href='/docs/apis/container-runtime#isummaryconfiguration-typealias'>ISummaryConfiguration</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        internalsProvider
      </td>
      <td>
        <span><a href='/docs/apis/container-runtime/isummarizerinternalsprovider-interface'>ISummarizerInternalsProvider</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        handleContext
      </td>
      <td>
        <span><a href='/docs/apis/core-interfaces/ifluidhandlecontext-interface'>IFluidHandleContext</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        summaryCollection
      </td>
      <td>
        <span><a href='/docs/apis/container-runtime/summarycollection-class'>SummaryCollection</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        runCoordinatorCreateFn
      </td>
      <td>
        <span>(runtime: <a href='/docs/apis/container-runtime/iconnectableruntime-interface'>IConnectableRuntime</a>) =&gt; Promise&lt;<a href='/docs/apis/container-runtime/icancellablesummarizercontroller-interface'>ICancellableSummarizerController</a>&gt;</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### ISummarizer {#isummarizer-property}

#### Signature {#isummarizer-signature}

```typescript
get ISummarizer(): this;
```

### summaryCollection {#summarycollection-property}

#### Signature {#summarycollection-signature}

```typescript
readonly summaryCollection: SummaryCollection;
```

## Method Details

### close {#close-method}

#### Signature {#close-signature}

```typescript
close(): void;
```

### create {#create-method}

Creates a Summarizer and its underlying client. Note that different implementations of ILoader will handle the URL differently. ILoader provided by a ContainerRuntime is a RelativeLoader, which will treat URL's starting with "/" as relative to the Container. The general ILoader interface will expect an absolute URL and will not handle "/".

#### Signature {#create-signature}

```typescript
static create(loader: ILoader, url: string): Promise<ISummarizer>;
```

#### Parameters {#create-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        loader
      </td>
      <td>
        <span>ILoader</span>
      </td>
      <td>
        the loader that resolves the request
      </td>
    </tr>
    <tr>
      <td>
        url
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        the URL used to resolve the container
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#create-returns}

**Return type:** Promise&lt;[ISummarizer](/docs/apis/container-runtime/isummarizer-interface)&gt;

### dispose {#dispose-method}

Disposes of resources after running. This cleanup will clear any outstanding timers and reset some of the state properties. Called by ContainerRuntime when it is disposed, as well as at the end the run().

#### Signature {#dispose-signature}

```typescript
dispose(): void;
```

### enqueueSummarize {#enqueuesummarize-method}

#### Signature {#enqueuesummarize-signature}

```typescript
enqueueSummarize(options: IEnqueueSummarizeOptions): EnqueueSummarizeResult;
```

#### Parameters {#enqueuesummarize-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        options
      </td>
      <td>
        <span><a href='/docs/apis/container-runtime/ienqueuesummarizeoptions-interface'>IEnqueueSummarizeOptions</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#enqueuesummarize-returns}

**Return type:** [EnqueueSummarizeResult](/docs/apis/container-runtime#enqueuesummarizeresult-typealias)

### recordSummaryAttempt {#recordsummaryattempt-method}

#### Signature {#recordsummaryattempt-signature}

```typescript
recordSummaryAttempt?(summaryRefSeqNum?: number): void;
```

#### Parameters {#recordsummaryattempt-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        summaryRefSeqNum
      </td>
      <td>
        optional
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### run {#run-method}

#### Signature {#run-signature}

```typescript
run(onBehalfOf: string): Promise<SummarizerStopReason>;
```

#### Parameters {#run-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        onBehalfOf
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#run-returns}

**Return type:** Promise&lt;[SummarizerStopReason](/docs/apis/container-runtime#summarizerstopreason-typealias)&gt;

### stop {#stop-method}

Stops the summarizer from running. This will complete the run promise, and also close the container.

#### Signature {#stop-signature}

```typescript
stop(reason: SummarizerStopReason): void;
```

#### Parameters {#stop-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        reason
      </td>
      <td>
        <span><a href='/docs/apis/container-runtime#summarizerstopreason-typealias'>SummarizerStopReason</a></span>
      </td>
      <td>
        reason code for stopping
      </td>
    </tr>
  </tbody>
</table>

### stopReasonCanRunLastSummary {#stopreasoncanrunlastsummary-method}

Should we try to run a last summary for the given stop reason? Currently only allows "parentNotConnected"

#### Signature {#stopreasoncanrunlastsummary-signature}

```typescript
static stopReasonCanRunLastSummary(stopReason: SummarizerStopReason): boolean;
```

#### Parameters {#stopreasoncanrunlastsummary-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        stopReason
      </td>
      <td>
        <span><a href='/docs/apis/container-runtime#summarizerstopreason-typealias'>SummarizerStopReason</a></span>
      </td>
      <td>
        SummarizerStopReason
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#stopreasoncanrunlastsummary-returns}

- true if the stop reason can run a last summary

**Return type:** boolean

### summarizeOnDemand {#summarizeondemand-method}

#### Signature {#summarizeondemand-signature}

```typescript
summarizeOnDemand(options: IOnDemandSummarizeOptions): ISummarizeResults;
```

#### Parameters {#summarizeondemand-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        options
      </td>
      <td>
        <span><a href='/docs/apis/container-runtime/iondemandsummarizeoptions-interface'>IOnDemandSummarizeOptions</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#summarizeondemand-returns}

**Return type:** [ISummarizeResults](/docs/apis/container-runtime/isummarizeresults-interface)
