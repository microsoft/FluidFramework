{
  "title": "EpochTracker Class",
  "summary": "In ODSP, the concept of 'epoch' refers to binary updates to files. For example, this might include using version restore, or if the user downloads a Fluid file and then uploads it again. These result in the epoch value being incremented.\n\nThe implications of these binary updates is that the Fluid state is disrupted: the sequence number might go backwards, the data might be inconsistent with the latest state of collaboration, etc. As a result, it's not safe to continue collaboration across an epoch change. We need to detect these epoch changes and error out from the collaboration.\n\nThis class is a wrapper around fetch calls. It adds epoch to the request made so that the server can match it with its epoch value in order to match the version. It also validates the epoch value received in response of fetch calls. If the epoch does not match, then it also clears all the cached entries for the given container.",
  "kind": "Class",
  "members": {
    "Constructor": {
      "(constructor)": "/docs/apis/odsp-driver/epochtracker-class#_constructor_-constructor"
    },
    "Property": {
      "cache": "/docs/apis/odsp-driver/epochtracker-class#cache-property",
      "clientIsSummarizer": "/docs/apis/odsp-driver/epochtracker-class#clientissummarizer-property",
      "fileEntry": "/docs/apis/odsp-driver/epochtracker-class#fileentry-property",
      "fluidEpoch": "/docs/apis/odsp-driver/epochtracker-class#fluidepoch-property",
      "logger": "/docs/apis/odsp-driver/epochtracker-class#logger-property",
      "rateLimiter": "/docs/apis/odsp-driver/epochtracker-class#ratelimiter-property"
    }
  },
  "package": "@fluidframework/odsp-driver",
  "unscopedPackageName": "odsp-driver"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

In ODSP, the concept of "epoch" refers to binary updates to files. For example, this might include using version restore, or if the user downloads a Fluid file and then uploads it again. These result in the epoch value being incremented.

The implications of these binary updates is that the Fluid state is disrupted: the sequence number might go backwards, the data might be inconsistent with the latest state of collaboration, etc. As a result, it's not safe to continue collaboration across an epoch change. We need to detect these epoch changes and error out from the collaboration.

This class is a wrapper around fetch calls. It adds epoch to the request made so that the server can match it with its epoch value in order to match the version. It also validates the epoch value received in response of fetch calls. If the epoch does not match, then it also clears all the cached entries for the given container.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

## Signature {#epochtracker-signature}

```typescript
export declare class EpochTracker implements IPersistedFileCache
```

**Implements:** [IPersistedFileCache](/docs/apis/odsp-driver/ipersistedfilecache-interface)

## Constructors

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Constructor
      </th>
      <th>
        Alerts
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/epochtracker-class#_constructor_-constructor'>(constructor)(cache, fileEntry, logger, clientIsSummarizer)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        Constructs a new instance of the <code>EpochTracker</code> class
      </td>
    </tr>
  </tbody>
</table>

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Alerts
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/epochtracker-class#cache-property'>cache</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver-definitions/ipersistedcache-interface'>IPersistedCache</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/epochtracker-class#clientissummarizer-property'>clientIsSummarizer</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>optional</code>, <code>readonly</code>
      </td>
      <td>
        <span>boolean &#124; undefined</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/epochtracker-class#fileentry-property'>fileEntry</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver-definitions/ifileentry-interface'>IFileEntry</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/epochtracker-class#fluidepoch-property'>fluidEpoch</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>string &#124; undefined</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/epochtracker-class#logger-property'>logger</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/telemetry-utils/itelemetryloggerext-interface'>ITelemetryLoggerExt</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/odsp-driver/epochtracker-class#ratelimiter-property'>rateLimiter</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span><a href='/docs/apis/driver-utils/ratelimiter-class'>RateLimiter</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Constructor Details

### (constructor) (ALPHA) {#_constructor_-constructor}

Constructs a new instance of the `EpochTracker` class

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#_constructor_-signature}

```typescript
constructor(cache: IPersistedCache, fileEntry: IFileEntry, logger: ITelemetryLoggerExt, clientIsSummarizer?: boolean | undefined);
```

#### Parameters {#_constructor_-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        cache
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver-definitions/ipersistedcache-interface'>IPersistedCache</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        fileEntry
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/odsp-driver-definitions/ifileentry-interface'>IFileEntry</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        logger
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/telemetry-utils/itelemetryloggerext-interface'>ITelemetryLoggerExt</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        clientIsSummarizer
      </td>
      <td>
        optional
      </td>
      <td>
        <span>boolean &#124; undefined</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### cache (ALPHA) {#cache-property}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#cache-signature}

```typescript
protected readonly cache: IPersistedCache;
```

### clientIsSummarizer (ALPHA) {#clientissummarizer-property}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#clientissummarizer-signature}

```typescript
protected readonly clientIsSummarizer?: boolean | undefined;
```

### fileEntry (ALPHA) {#fileentry-property}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#fileentry-signature}

```typescript
protected readonly fileEntry: IFileEntry;
```

### fluidEpoch (ALPHA) {#fluidepoch-property}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#fluidepoch-signature}

```typescript
get fluidEpoch(): string | undefined;
```

### logger (ALPHA) {#logger-property}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#logger-signature}

```typescript
protected readonly logger: ITelemetryLoggerExt;
```

### rateLimiter (ALPHA) {#ratelimiter-property}

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#ratelimiter-signature}

```typescript
readonly rateLimiter: RateLimiter;
```
