{
  "title": "ServiceAudience Class",
  "summary": "Base class for providing audience information for sessions interacting with [IFluidContainer](/docs/apis/fluid-static/ifluidcontainer-interface)",
  "kind": "Class",
  "members": {
    "Constructor": {
      "(constructor)": "/docs/apis/fluid-static/serviceaudience-class#_constructor_-constructor"
    },
    "Property": {
      "audience": "/docs/apis/fluid-static/serviceaudience-class#audience-property",
      "container": "/docs/apis/fluid-static/serviceaudience-class#container-property",
      "lastMembers": "/docs/apis/fluid-static/serviceaudience-class#lastmembers-property"
    },
    "Method": {
      "createServiceMember": "/docs/apis/fluid-static/serviceaudience-class#createservicemember-method",
      "getMembers": "/docs/apis/fluid-static/serviceaudience-class#getmembers-method",
      "getMyself": "/docs/apis/fluid-static/serviceaudience-class#getmyself-method",
      "shouldIncludeAsMember": "/docs/apis/fluid-static/serviceaudience-class#shouldincludeasmember-method"
    }
  },
  "package": "@fluidframework/fluid-static",
  "unscopedPackageName": "fluid-static"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

[Packages](/docs/apis/) &gt; [@fluidframework/fluid-static](/docs/apis/fluid-static) &gt; [ServiceAudience](/docs/apis/fluid-static/serviceaudience-class)

Base class for providing audience information for sessions interacting with [IFluidContainer](/docs/apis/fluid-static/ifluidcontainer-interface)

## Signature {#serviceaudience-signature}

```typescript
export declare abstract class ServiceAudience<M extends IMember = IMember> extends TypedEventEmitter<IServiceAudienceEvents<M>> implements IServiceAudience<M>
```

**Extends:** [TypedEventEmitter](/docs/apis/common-utils/typedeventemitter-class)&lt;[IServiceAudienceEvents](/docs/apis/fluid-static/iserviceaudienceevents-interface)&lt;M&gt;&gt;

**Implements:** [IServiceAudience](/docs/apis/fluid-static/iserviceaudience-interface)&lt;M&gt;

### Type Parameters

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        M
      </td>
      <td>
        optional
      </td>
      <td>
        A service-specific <a href='/docs/apis/fluid-static/imember-interface'>IMember</a> implementation.
      </td>
    </tr>
  </tbody>
</table>

## Remarks {#serviceaudience-remarks}

This can be extended by different service-specific client packages to additional parameters to the user and client details returned in [IMember](/docs/apis/fluid-static/imember-interface).

## Constructors

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Constructor
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/fluid-static/serviceaudience-class#_constructor_-constructor'>(constructor)</a>
      </td>
      <td>
        Constructs a new instance of the <code>ServiceAudience</code> class
      </td>
    </tr>
  </tbody>
</table>

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/fluid-static/serviceaudience-class#audience-property'>audience</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>IAudience</span>
      </td>
      <td>
        Audience object which includes all the existing members of the <a href='/docs/apis/fluid-static/ifluidcontainer-interface'>container</a>.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/fluid-static/serviceaudience-class#container-property'>container</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>IContainer</span>
      </td>
      <td>
        Fluid Container to read the audience from.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/fluid-static/serviceaudience-class#lastmembers-property'>lastMembers</a>
      </td>
      <td>
      </td>
      <td>
        <span>Map&lt;string, M&gt;</span>
      </td>
      <td>
        Retain the most recent member list.
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/fluid-static/serviceaudience-class#createservicemember-method'>createServiceMember</a>
      </td>
      <td>
        <span>M</span>
      </td>
      <td>
        Provides ability for inheriting class to modify/extend the audience object.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/fluid-static/serviceaudience-class#getmembers-method'>getMembers</a>
      </td>
      <td>
        <span>Map&lt;string, M&gt;</span>
      </td>
      <td>
        Returns an map of all users currently in the Fluid session where key is the userId and the value is the member object. The implementation may choose to exclude certain connections from the returned map. E.g. ServiceAudience excludes non-interactive connections to represent only the roster of live users.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/fluid-static/serviceaudience-class#getmyself-method'>getMyself</a>
      </td>
      <td>
        <span><a href='/docs/apis/fluid-static#myself-typealias'>Myself</a>&lt;M&gt; &#124; undefined</span>
      </td>
      <td>
        Returns the current active user on this client once they are connected. Otherwise, returns undefined.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/fluid-static/serviceaudience-class#shouldincludeasmember-method'>shouldIncludeAsMember</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Provides ability for the inheriting class to include/omit specific members. An example use case is omitting the summarizer client.
      </td>
    </tr>
  </tbody>
</table>

## Constructor Details

### (constructor) {#_constructor_-constructor}

Constructs a new instance of the `ServiceAudience` class

#### Signature {#_constructor_-signature}

```typescript
constructor(
    container: IContainer);
```

#### Parameters {#_constructor_-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        container
      </td>
      <td>
        <span>IContainer</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### audience {#audience-property}

Audience object which includes all the existing members of the [container](/docs/apis/fluid-static/ifluidcontainer-interface).

#### Signature {#audience-signature}

```typescript
protected readonly audience: IAudience;
```

### container {#container-property}

Fluid Container to read the audience from.

#### Signature {#container-signature}

```typescript
protected readonly container: IContainer;
```

### lastMembers {#lastmembers-property}

Retain the most recent member list.

#### Signature {#lastmembers-signature}

```typescript
protected lastMembers: Map<string, M>;
```

#### Remarks {#lastmembers-remarks}

This is so we have more information about a member leaving the audience in the `removeMember` event.

It allows us to match the behavior of the `addMember` event where it only fires on a change to the members this class exposes (and would actually produce a change in what `getMembers` returns).

It also allows us to provide the client details in the event which makes it easier to find that client connection in a map keyed on the `userId` and not `clientId`.

This map will always be up-to-date in a `removeMember` event because it is set once at construction and in every `addMember` event. It is mapped `clientId` to `M` to be better work with what the [IServiceAudience](/docs/apis/fluid-static/iserviceaudience-interface) events provide.

## Method Details

### createServiceMember {#createservicemember-method}

Provides ability for inheriting class to modify/extend the audience object.

#### Signature {#createservicemember-signature}

```typescript
protected abstract createServiceMember(audienceMember: IClient): M;
```

#### Parameters {#createservicemember-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        audienceMember
      </td>
      <td>
        <span><a href='/docs/apis/protocol-definitions/iclient-interface'>IClient</a></span>
      </td>
      <td>
        Record of a specific audience member.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#createservicemember-returns}

**Return type:** M

### getMembers {#getmembers-method}

Returns an map of all users currently in the Fluid session where key is the userId and the value is the member object. The implementation may choose to exclude certain connections from the returned map. E.g. ServiceAudience excludes non-interactive connections to represent only the roster of live users.

#### Signature {#getmembers-signature}

```typescript
getMembers(): Map<string, M>;
```

#### Returns {#getmembers-returns}

**Return type:** Map&lt;string, M&gt;

### getMyself {#getmyself-method}

Returns the current active user on this client once they are connected. Otherwise, returns undefined.

#### Signature {#getmyself-signature}

```typescript
getMyself(): Myself<M> | undefined;
```

#### Returns {#getmyself-returns}

**Return type:** [Myself](/docs/apis/fluid-static#myself-typealias)&lt;M&gt; \| undefined

### shouldIncludeAsMember {#shouldincludeasmember-method}

Provides ability for the inheriting class to include/omit specific members. An example use case is omitting the summarizer client.

#### Signature {#shouldincludeasmember-signature}

```typescript
protected shouldIncludeAsMember(member: IClient): boolean;
```

#### Parameters {#shouldincludeasmember-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        member
      </td>
      <td>
        <span><a href='/docs/apis/protocol-definitions/iclient-interface'>IClient</a></span>
      </td>
      <td>
        Member to be included/omitted.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#shouldincludeasmember-returns}

**Return type:** boolean
