{
  "title": "IConsensusRegisterCollection Interface",
  "summary": "A distributed data structure that holds a set of registers with update versions. On concurrent updates, a register internally stores all possible versions of a value by using reference sequence number of the incoming update.\n\nUsing all the stored versions, we can then distinguish amongst different read policies. Below are the policies we support:\n\nAtomic: Atomicity requires a linearizable register. A linearizable register behaves as if there is only a single copy of the data, and that every operation appears to take effect atomically at one point in time. This definition implies that operations are executed in an well-defined order. On a concurrent update, we perform a compare-and-set operation, where we compare a register sequence number with the incoming reference sequence number. The earliest operation overwriting prior sequence numbers wins since every client reaches to an agreement on the value. So we can safely return the first value.\n\nLWW: The last write to a key always wins.",
  "kind": "Interface",
  "members": {
    "MethodSignature": {
      "keys": "/docs/apis/register-collection/iconsensusregistercollection-interface#keys-methodsignature",
      "read": "/docs/apis/register-collection/iconsensusregistercollection-interface#read-methodsignature",
      "readVersions": "/docs/apis/register-collection/iconsensusregistercollection-interface#readversions-methodsignature",
      "write": "/docs/apis/register-collection/iconsensusregistercollection-interface#write-methodsignature"
    }
  },
  "package": "@fluidframework/register-collection",
  "unscopedPackageName": "register-collection"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

A distributed data structure that holds a set of registers with update versions. On concurrent updates, a register internally stores all possible versions of a value by using reference sequence number of the incoming update.

Using all the stored versions, we can then distinguish amongst different read policies. Below are the policies we support:

Atomic: Atomicity requires a linearizable register. A linearizable register behaves as if there is only a single copy of the data, and that every operation appears to take effect atomically at one point in time. This definition implies that operations are executed in an well-defined order. On a concurrent update, we perform a compare-and-set operation, where we compare a register sequence number with the incoming reference sequence number. The earliest operation overwriting prior sequence numbers wins since every client reaches to an agreement on the value. So we can safely return the first value.

LWW: The last write to a key always wins.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

## Signature {#iconsensusregistercollection-signature}

```typescript
export interface IConsensusRegisterCollection<T = any> extends ISharedObject<IConsensusRegisterCollectionEvents>
```

**Extends:** [ISharedObject](/docs/apis/shared-object-base/isharedobject-interface)&lt;[IConsensusRegisterCollectionEvents](/docs/apis/register-collection/iconsensusregistercollectionevents-interface)&gt;

### Type Parameters

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        T
      </td>
      <td>
        optional
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Alerts
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/register-collection/iconsensusregistercollection-interface#keys-methodsignature'>keys()</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>string[]</span>
      </td>
      <td>
        Returns the keys.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/register-collection/iconsensusregistercollection-interface#read-methodsignature'>read(key, policy)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>T &#124; undefined</span>
      </td>
      <td>
        Retrieves the agreed upon value for the register based on policy. Returns undefined if not present.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/register-collection/iconsensusregistercollection-interface#readversions-methodsignature'>readVersions(key)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>T[] &#124; undefined</span>
      </td>
      <td>
        Retrives all concurrent versions. Undefined if not present.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/register-collection/iconsensusregistercollection-interface#write-methodsignature'>write(key, value)</a>
      </td>
      <td>
        <code>ALPHA</code>
      </td>
      <td>
        <span>Promise&lt;boolean&gt;</span>
      </td>
      <td>
        Attempts to write a register with a value. Returns a promise to indicate the roundtrip completion. For a non existent register, it will attempt to create a new register with the specified value.
      </td>
    </tr>
  </tbody>
</table>

## Method Details

### keys (ALPHA) {#keys-methodsignature}

Returns the keys.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#keys-signature}

```typescript
keys(): string[];
```

#### Returns {#keys-returns}

**Return type:** string\[\]

### read (ALPHA) {#read-methodsignature}

Retrieves the agreed upon value for the register based on policy. Returns undefined if not present.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#read-signature}

```typescript
read(key: string, policy?: ReadPolicy): T | undefined;
```

#### Parameters {#read-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        key
      </td>
      <td>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        policy
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/register-collection/readpolicy-enum'>ReadPolicy</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#read-returns}

**Return type:** T \| undefined

### readVersions (ALPHA) {#readversions-methodsignature}

Retrives all concurrent versions. Undefined if not present.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#readversions-signature}

```typescript
readVersions(key: string): T[] | undefined;
```

#### Parameters {#readversions-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        key
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#readversions-returns}

**Return type:** T\[\] \| undefined

### write (ALPHA) {#write-methodsignature}

Attempts to write a register with a value. Returns a promise to indicate the roundtrip completion. For a non existent register, it will attempt to create a new register with the specified value.

WARNING: This API is provided as an alpha preview and may change without notice. Use at your own risk.

#### Signature {#write-signature}

```typescript
write(key: string, value: T): Promise<boolean>;
```

#### Parameters {#write-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        key
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        value
      </td>
      <td>
        <span>T</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#write-returns}

Promise<true> if write was non-concurrent

**Return type:** Promise&lt;boolean&gt;
