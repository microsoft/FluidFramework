{
  "title": "SharedMap Class",
  "summary": "The SharedMap distributed data structure can be used to store key-value pairs. It provides the same API for setting and retrieving values that JavaScript developers are accustomed to with the [Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map) built-in object. However, the keys of a SharedMap must be strings, and the values must either be a JSON-serializable object or a [FluidObjectHandle](/docs/apis/datastore/fluidobjecthandle-class).\n\nFor more information, including example usages, see [https://fluidframework.com/docs/data-structures/map/](https://fluidframework.com/docs/data-structures/map/).",
  "kind": "Class",
  "members": {
    "Method": {
      "[Symbol.iterator]": "/docs/apis/map/sharedmap-class#_symbol.iterator_-method",
      "applyStashedOp": "/docs/apis/map/sharedmap-class#applystashedop-method",
      "clear": "/docs/apis/map/sharedmap-class#clear-method",
      "create": "/docs/apis/map/sharedmap-class#create-method",
      "delete": "/docs/apis/map/sharedmap-class#delete-method",
      "entries": "/docs/apis/map/sharedmap-class#entries-method",
      "forEach": "/docs/apis/map/sharedmap-class#foreach-method",
      "get": "/docs/apis/map/sharedmap-class#get-method",
      "getFactory": "/docs/apis/map/sharedmap-class#getfactory-method",
      "has": "/docs/apis/map/sharedmap-class#has-method",
      "keys": "/docs/apis/map/sharedmap-class#keys-method",
      "loadCore": "/docs/apis/map/sharedmap-class#loadcore-method",
      "onDisconnect": "/docs/apis/map/sharedmap-class#ondisconnect-method",
      "processCore": "/docs/apis/map/sharedmap-class#processcore-method",
      "reSubmitCore": "/docs/apis/map/sharedmap-class#resubmitcore-method",
      "rollback": "/docs/apis/map/sharedmap-class#rollback-method",
      "set": "/docs/apis/map/sharedmap-class#set-method",
      "summarizeCore": "/docs/apis/map/sharedmap-class#summarizecore-method",
      "values": "/docs/apis/map/sharedmap-class#values-method"
    },
    "Property": {
      "[Symbol.toStringTag]": "/docs/apis/map/sharedmap-class#_symbol.tostringtag_-property",
      "size": "/docs/apis/map/sharedmap-class#size-property"
    },
    "Constructor": {
      "(constructor)": "/docs/apis/map/sharedmap-class#_constructor_-constructor"
    }
  },
  "package": "@fluidframework/map",
  "unscopedPackageName": "map"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

The SharedMap distributed data structure can be used to store key-value pairs. It provides the same API for setting and retrieving values that JavaScript developers are accustomed to with the [Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map) built-in object. However, the keys of a SharedMap must be strings, and the values must either be a JSON-serializable object or a [FluidObjectHandle](/docs/apis/datastore/fluidobjecthandle-class).

For more information, including example usages, see [https://fluidframework.com/docs/data-structures/map/](https://fluidframework.com/docs/data-structures/map/).

## Signature {#sharedmap-signature}

```typescript
export declare class SharedMap extends SharedObject<ISharedMapEvents> implements ISharedMap
```

**Extends:** [SharedObject](/docs/apis/shared-object-base/sharedobject-class)&lt;[ISharedMapEvents](/docs/apis/map/isharedmapevents-interface)&gt;

**Implements:** [ISharedMap](/docs/apis/map/isharedmap-interface)

## Constructors

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Constructor
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#_constructor_-constructor'>(constructor)(id, runtime, attributes)</a>
      </td>
      <td>
        Do not call the constructor. Instead, you should use the <a href='/docs/apis/map/sharedmap-class#create-method'>create method</a>.
      </td>
    </tr>
  </tbody>
</table>

## Static Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#create-method'>create(runtime, id)</a>
      </td>
      <td>
        <span><a href='/docs/apis/map/sharedmap-class'>SharedMap</a></span>
      </td>
      <td>
        Create a new shared map.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#getfactory-method'>getFactory()</a>
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ichannelfactory-interface'>IChannelFactory</a></span>
      </td>
      <td>
        Get a factory for SharedMap to register with the data store.
      </td>
    </tr>
  </tbody>
</table>

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Property
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#_symbol.tostringtag_-property'>[Symbol.toStringTag]</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        String representation for the class.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#size-property'>size</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        <span>number</span>
      </td>
      <td>
        The number of key/value pairs stored in the map.
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Method
      </th>
      <th>
        Return Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#_symbol.iterator_-method'>[Symbol.iterator]()</a>
      </td>
      <td>
        <span>IterableIterator&lt;[string, any]&gt;</span>
      </td>
      <td>
        Get an iterator over the entries in this map.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#applystashedop-method'>applyStashedOp(content)</a>
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
        Apply changes from an op. Used when rehydrating an attached container with pending changes. This prepares the SharedObject for seeing an ACK for the op or resubmitting the op upon reconnection.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#clear-method'>clear()</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Clear all data from the map.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#delete-method'>delete(key)</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Delete a key from the map.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#entries-method'>entries()</a>
      </td>
      <td>
        <span>IterableIterator&lt;[string, any]&gt;</span>
      </td>
      <td>
        Get an iterator over the entries in this map.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#foreach-method'>forEach(callbackFn)</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
        Executes the given callback on each entry in the map.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#get-method'>get(key)</a>
      </td>
      <td>
        <span>T &#124; undefined</span>
      </td>
      <td>
        Retrieves the given key from the map if it exists.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#has-method'>has(key)</a>
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
        Check if a key exists in the map.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#keys-method'>keys()</a>
      </td>
      <td>
        <span>IterableIterator&lt;string&gt;</span>
      </td>
      <td>
        Get an iterator over the keys in this map.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#loadcore-method'>loadCore(storage)</a>
      </td>
      <td>
        <span>Promise&lt;void&gt;</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#ondisconnect-method'>onDisconnect()</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#processcore-method'>processCore(message, local, localOpMetadata)</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#resubmitcore-method'>reSubmitCore(content, localOpMetadata)</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#rollback-method'>rollback(content, localOpMetadata)</a>
      </td>
      <td>
        <span>void</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#set-method'>set(key, value)</a>
      </td>
      <td>
        <span>this</span>
      </td>
      <td>
        Sets the value stored at key to the provided value.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#summarizecore-method'>summarizeCore(serializer, telemetryContext)</a>
      </td>
      <td>
        <span><a href='/docs/apis/runtime-definitions/isummarytreewithstats-interface'>ISummaryTreeWithStats</a></span>
      </td>
      <td>
        Gets a form of the object that can be serialized.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/map/sharedmap-class#values-method'>values()</a>
      </td>
      <td>
        <span>IterableIterator&lt;any&gt;</span>
      </td>
      <td>
        Get an iterator over the values in this map.
      </td>
    </tr>
  </tbody>
</table>

## Constructor Details

### (constructor) {#_constructor_-constructor}

Do not call the constructor. Instead, you should use the [create method](/docs/apis/map/sharedmap-class#create-method).

#### Signature {#_constructor_-signature}

```typescript
constructor(id: string, runtime: IFluidDataStoreRuntime, attributes: IChannelAttributes);
```

#### Parameters {#_constructor_-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        id
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        String identifier.
      </td>
    </tr>
    <tr>
      <td>
        runtime
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ifluiddatastoreruntime-interface'>IFluidDataStoreRuntime</a></span>
      </td>
      <td>
        Data store runtime.
      </td>
    </tr>
    <tr>
      <td>
        attributes
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ichannelattributes-interface'>IChannelAttributes</a></span>
      </td>
      <td>
        The attributes for the map.
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### \[Symbol.toStringTag\] {#_symbol.tostringtag_-property}

String representation for the class.

#### Signature {#_symbol.tostringtag_-signature}

```typescript
readonly [Symbol.toStringTag]: string;
```

### size {#size-property}

The number of key/value pairs stored in the map.

#### Signature {#size-signature}

```typescript
get size(): number;
```

## Method Details

### \[Symbol.iterator\] {#_symbol.iterator_-method}

Get an iterator over the entries in this map.

#### Signature {#_symbol.iterator_-signature}

```typescript
[Symbol.iterator](): IterableIterator<[string, any]>;
```

#### Returns {#_symbol.iterator_-returns}

The iterator

**Return type:** IterableIterator&lt;\[string, any\]&gt;

### applyStashedOp {#applystashedop-method}

Apply changes from an op. Used when rehydrating an attached container with pending changes. This prepares the SharedObject for seeing an ACK for the op or resubmitting the op upon reconnection.

#### Signature {#applystashedop-signature}

```typescript
protected applyStashedOp(content: unknown): unknown;
```

#### Parameters {#applystashedop-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        content
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
        Contents of a stashed op.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#applystashedop-returns}

localMetadata of the op, to be passed to process() or resubmit() when the op is ACKed or resubmitted, respectively

**Return type:** unknown

### clear {#clear-method}

Clear all data from the map.

#### Signature {#clear-signature}

```typescript
clear(): void;
```

### create {#create-method}

Create a new shared map.

#### Signature {#create-signature}

```typescript
static create(runtime: IFluidDataStoreRuntime, id?: string): SharedMap;
```

#### Example {#create-example}

To create a `SharedMap`, call the static create method:

```typescript
const myMap = SharedMap.create(this.runtime, id);
```

#### Parameters {#create-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        runtime
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ifluiddatastoreruntime-interface'>IFluidDataStoreRuntime</a></span>
      </td>
      <td>
        The data store runtime that the new shared map belongs to.
      </td>
    </tr>
    <tr>
      <td>
        id
      </td>
      <td>
        optional
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Optional name of the shared map.
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#create-returns}

Newly created shared map.

**Return type:** [SharedMap](/docs/apis/map/sharedmap-class)

### delete {#delete-method}

Delete a key from the map.

#### Signature {#delete-signature}

```typescript
delete(key: string): boolean;
```

#### Parameters {#delete-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        key
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Key to delete
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#delete-returns}

True if the key existed and was deleted, false if it did not exist

**Return type:** boolean

### entries {#entries-method}

Get an iterator over the entries in this map.

#### Signature {#entries-signature}

```typescript
entries(): IterableIterator<[string, any]>;
```

#### Returns {#entries-returns}

The iterator

**Return type:** IterableIterator&lt;\[string, any\]&gt;

### forEach {#foreach-method}

Executes the given callback on each entry in the map.

#### Signature {#foreach-signature}

```typescript
forEach(callbackFn: (value: any, key: string, map: Map<string, any>) => void): void;
```

#### Parameters {#foreach-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        callbackFn
      </td>
      <td>
        <span>(value: any, key: string, map: Map&lt;string, any&gt;) =&gt; void</span>
      </td>
      <td>
        Callback function
      </td>
    </tr>
  </tbody>
</table>

### get {#get-method}

Retrieves the given key from the map if it exists.

#### Signature {#get-signature}

```typescript
get<T = any>(key: string): T | undefined;
```

#### Parameters {#get-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        key
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Key to retrieve from
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#get-returns}

The stored value, or undefined if the key is not set

**Return type:** T \| undefined

### getFactory {#getfactory-method}

Get a factory for SharedMap to register with the data store.

#### Signature {#getfactory-signature}

```typescript
static getFactory(): IChannelFactory;
```

#### Returns {#getfactory-returns}

A factory that creates SharedMaps and loads them from storage.

**Return type:** [IChannelFactory](/docs/apis/datastore-definitions/ichannelfactory-interface)

### has {#has-method}

Check if a key exists in the map.

#### Signature {#has-signature}

```typescript
has(key: string): boolean;
```

#### Parameters {#has-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        key
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        The key to check
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#has-returns}

True if the key exists, false otherwise

**Return type:** boolean

### keys {#keys-method}

Get an iterator over the keys in this map.

#### Signature {#keys-signature}

```typescript
keys(): IterableIterator<string>;
```

#### Returns {#keys-returns}

The iterator

**Return type:** IterableIterator&lt;string&gt;

### loadCore {#loadcore-method}

#### Signature {#loadcore-signature}

```typescript
protected loadCore(storage: IChannelStorageService): Promise<void>;
```

#### Parameters {#loadcore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        storage
      </td>
      <td>
        <span><a href='/docs/apis/datastore-definitions/ichannelstorageservice-interface'>IChannelStorageService</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#loadcore-returns}

**Return type:** Promise&lt;void&gt;

### onDisconnect {#ondisconnect-method}

#### Signature {#ondisconnect-signature}

```typescript
protected onDisconnect(): void;
```

### processCore {#processcore-method}

#### Signature {#processcore-signature}

```typescript
protected processCore(message: ISequencedDocumentMessage, local: boolean, localOpMetadata: unknown): void;
```

#### Parameters {#processcore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        message
      </td>
      <td>
        <span>ISequencedDocumentMessage</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        local
      </td>
      <td>
        <span>boolean</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        localOpMetadata
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### reSubmitCore {#resubmitcore-method}

#### Signature {#resubmitcore-signature}

```typescript
protected reSubmitCore(content: unknown, localOpMetadata: unknown): void;
```

#### Parameters {#resubmitcore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        content
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        localOpMetadata
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### rollback {#rollback-method}

#### Signature {#rollback-signature}

```typescript
protected rollback(content: unknown, localOpMetadata: unknown): void;
```

#### Parameters {#rollback-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        content
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        localOpMetadata
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### set {#set-method}

Sets the value stored at key to the provided value.

#### Signature {#set-signature}

```typescript
set(key: string, value: unknown): this;
```

#### Parameters {#set-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        key
      </td>
      <td>
        <span>string</span>
      </td>
      <td>
        Key to set
      </td>
    </tr>
    <tr>
      <td>
        value
      </td>
      <td>
        <span>unknown</span>
      </td>
      <td>
        Value to set
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#set-returns}

The [ISharedMap](/docs/apis/map/isharedmap-interface) itself

**Return type:** this

### summarizeCore {#summarizecore-method}

Gets a form of the object that can be serialized.

#### Signature {#summarizecore-signature}

```typescript
protected summarizeCore(serializer: IFluidSerializer, telemetryContext?: ITelemetryContext): ISummaryTreeWithStats;
```

#### Parameters {#summarizecore-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Type
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        serializer
      </td>
      <td>
      </td>
      <td>
        <span><a href='/docs/apis/shared-object-base/ifluidserializer-interface'>IFluidSerializer</a></span>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        telemetryContext
      </td>
      <td>
        optional
      </td>
      <td>
        <span><a href='/docs/apis/runtime-definitions/itelemetrycontext-interface'>ITelemetryContext</a></span>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#summarizecore-returns}

A tree representing the snapshot of the shared object.

**Return type:** [ISummaryTreeWithStats](/docs/apis/runtime-definitions/isummarytreewithstats-interface)

### values {#values-method}

Get an iterator over the values in this map.

#### Signature {#values-signature}

```typescript
values(): IterableIterator<any>;
```

#### Returns {#values-returns}

The iterator

**Return type:** IterableIterator&lt;any&gt;
