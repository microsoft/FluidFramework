{
  "title": "@fluid-example/example-utils Package",
  "kind": "Package",
  "members": {
    "Class": {
      "ContainerViewRuntimeFactory": "/docs/apis/example-utils/containerviewruntimefactory-class",
      "MigrationTool": "/docs/apis/example-utils/migrationtool-class",
      "Migrator": "/docs/apis/example-utils/migrator-class",
      "ModelContainerRuntimeFactory": "/docs/apis/example-utils/modelcontainerruntimefactory-class",
      "ModelLoader": "/docs/apis/example-utils/modelloader-class",
      "SameContainerMigrationTool": "/docs/apis/example-utils/samecontainermigrationtool-class",
      "SameContainerMigrator": "/docs/apis/example-utils/samecontainermigrator-class",
      "SessionStorageModelLoader": "/docs/apis/example-utils/sessionstoragemodelloader-class",
      "StaticCodeLoader": "/docs/apis/example-utils/staticcodeloader-class",
      "TinyliciousModelLoader": "/docs/apis/example-utils/tinyliciousmodelloader-class"
    },
    "TypeAlias": {
      "DataTransformationCallback": "/docs/apis/example-utils#datatransformationcallback-typealias",
      "MigrationState": "/docs/apis/example-utils#migrationstate-typealias",
      "ModelMakerCallback": "/docs/apis/example-utils#modelmakercallback-typealias",
      "SameContainerMigrationState": "/docs/apis/example-utils#samecontainermigrationstate-typealias",
      "ViewCallback": "/docs/apis/example-utils#viewcallback-typealias"
    },
    "Interface": {
      "IDetachedModel": "/docs/apis/example-utils/idetachedmodel-interface",
      "IImportExportModel": "/docs/apis/example-utils/iimportexportmodel-interface",
      "IMigratableModel": "/docs/apis/example-utils/imigratablemodel-interface",
      "IMigratableModelEvents": "/docs/apis/example-utils/imigratablemodelevents-interface",
      "IMigrationTool": "/docs/apis/example-utils/imigrationtool-interface",
      "IMigrationToolEvents": "/docs/apis/example-utils/imigrationtoolevents-interface",
      "IMigrator": "/docs/apis/example-utils/imigrator-interface",
      "IMigratorEvents": "/docs/apis/example-utils/imigratorevents-interface",
      "IModelLoader": "/docs/apis/example-utils/imodelloader-interface",
      "ISameContainerMigratableModel": "/docs/apis/example-utils/isamecontainermigratablemodel-interface",
      "ISameContainerMigratableModelEvents": "/docs/apis/example-utils/isamecontainermigratablemodelevents-interface",
      "ISameContainerMigrationTool": "/docs/apis/example-utils/isamecontainermigrationtool-interface",
      "ISameContainerMigrationToolEvents": "/docs/apis/example-utils/isamecontainermigrationtoolevents-interface",
      "ISameContainerMigrator": "/docs/apis/example-utils/isamecontainermigrator-interface",
      "ISameContainerMigratorEvents": "/docs/apis/example-utils/isamecontainermigratorevents-interface",
      "IVersionedModel": "/docs/apis/example-utils/iversionedmodel-interface"
    },
    "Variable": {
      "makeModelRequestHandler": "/docs/apis/example-utils#makemodelrequesthandler-variable",
      "MigrationToolInstantiationFactory": "/docs/apis/example-utils#migrationtoolinstantiationfactory-variable",
      "SameContainerMigrationToolInstantiationFactory": "/docs/apis/example-utils#samecontainermigrationtoolinstantiationfactory-variable"
    }
  },
  "package": "@fluid-example/example-utils",
  "unscopedPackageName": "example-utils"
}

[//]: # (Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter.)

[Packages](/docs/apis/) &gt; [@fluid-example/example-utils](/docs/apis/example-utils)

## Interfaces

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Interface
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/idetachedmodel-interface'>IDetachedModel</a>
      </td>
      <td>
        Object returned from calling IModelLoader.createDetached().
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/iimportexportmodel-interface'>IImportExportModel</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/imigratablemodel-interface'>IMigratableModel</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/imigratablemodelevents-interface'>IMigratableModelEvents</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/imigrationtool-interface'>IMigrationTool</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/imigrationtoolevents-interface'>IMigrationToolEvents</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/imigrator-interface'>IMigrator</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/imigratorevents-interface'>IMigratorEvents</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/imodelloader-interface'>IModelLoader</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/isamecontainermigratablemodel-interface'>ISameContainerMigratableModel</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/isamecontainermigratablemodelevents-interface'>ISameContainerMigratableModelEvents</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/isamecontainermigrationtool-interface'>ISameContainerMigrationTool</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/isamecontainermigrationtoolevents-interface'>ISameContainerMigrationToolEvents</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/isamecontainermigrator-interface'>ISameContainerMigrator</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/isamecontainermigratorevents-interface'>ISameContainerMigratorEvents</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/iversionedmodel-interface'>IVersionedModel</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Classes

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Class
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/containerviewruntimefactory-class'>ContainerViewRuntimeFactory</a>
      </td>
      <td>
        The ContainerViewRuntimeFactory is an example utility built to support binding a single model to a single view within the container. For more-robust implementation of binding views within the container, check out the examples \@fluid-example/app-integration-container-views and \@fluid-example/multiview-container
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/migrationtool-class'>MigrationTool</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/migrator-class'>Migrator</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/modelcontainerruntimefactory-class'>ModelContainerRuntimeFactory</a>
      </td>
      <td>
        ModelContainerRuntimeFactory is an abstract class that gives a basic structure for container runtime initialization. It also requires a createModel method to returns the expected model type.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/modelloader-class'>ModelLoader</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/samecontainermigrationtool-class'>SameContainerMigrationTool</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/samecontainermigrator-class'>SameContainerMigrator</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/sessionstoragemodelloader-class'>SessionStorageModelLoader</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/staticcodeloader-class'>StaticCodeLoader</a>
      </td>
      <td>
        The StaticCodeLoader isn't directly a core piece of model loading, but since most of our examples don't require advanced code loading it simplifies the instantiation of the model loader.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils/tinyliciousmodelloader-class'>TinyliciousModelLoader</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Types

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        TypeAlias
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/example-utils#datatransformationcallback-typealias'>DataTransformationCallback</a>
      </td>
      <td>
        The DataTransformationCallback gives an opportunity to modify the exported data before attempting an import to the new model. The modelVersion is also provided to inform the appropriate transformation to perform. It is async to permit network calls or lazy-loading the transform logic within the function.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils#migrationstate-typealias'>MigrationState</a>
      </td>
      <td>
        The collaboration session may be in one of four states: * collaborating - normal collaboration is ongoing. The client may send data. * stopping - a proposal to migrate has been made, but not accepted yet. The client must stop sending data. * migrating - a proposal to migrate has been accepted. The data is currently being migrated. * migrated - migration has completed and the new container is available.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils#modelmakercallback-typealias'>ModelMakerCallback</a>
      </td>
      <td>
        The callback signature that the container author will provide. It must return a promise for the container's model.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils#samecontainermigrationstate-typealias'>SameContainerMigrationState</a>
      </td>
      <td>
        The collaboration session may be in one of these states: * collaborating - normal collaboration is ongoing. The client may send data. * proposingMigration - a proposal to migrate has been sent by the local client, but not sequenced yet. The client doesn't strictly have to stop sending data until it goes pending. * stoppingCollaboration - a proposal to migrate has been sequenced, but not accepted yet. The client must stop sending data. // TODO should there be an event here for non-summarizer clients to observe (collaborationStopped maybe) since they won't be generating the summary? // TODO: &quot;V1&quot; and &quot;V2&quot; aren't really appropriate here since we don't know the actual version numbers. Probably prefer &quot;old&quot;/&quot;current&quot; vs. &quot;new&quot;/&quot;next&quot; or something like that. * generatingV1Summary - the proposal has been accepted and we have started generating the final v1 summary locally, reflecting the state at the time of the acceptance. * uploadingV1Summary - the final v1 summary has been generated locally and the local client is in the process of uploading it to the service. * submittingV1Summary - the final v1 summary has been uploaded by the local client and is sending the summarize op, awaiting its summaryAck. * proposingV2Code - the local client is in the process of proposing v2 code * waitingForV2ProposalCompletion - at least one v2 code proposal has been approved, and we are waiting on remaining outstanding proposals to be approved. * readyForMigration - awaiting a call to migrationTool.finalizeTransform(v2Summary) * uploadingV2Summary - similar to above * submittingV2Summary - similar to above * migrated - migration has completed, if the client reloads from the latest summary they will be on v2.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils#viewcallback-typealias'>ViewCallback</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

## Variables

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Variable
      </th>
      <th>
        Modifiers
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/example-utils#makemodelrequesthandler-variable'>makeModelRequestHandler</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        A helper function for container authors, which generates the request handler they need to align with the ModelLoader contract.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils#migrationtoolinstantiationfactory-variable'>MigrationToolInstantiationFactory</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        The DataObjectFactory is used by Fluid Framework to instantiate our DataObject. We provide it with a unique name and the constructor it will call. The third argument lists the other data structures it will utilize. In this scenario, the fourth argument is not used.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/example-utils#samecontainermigrationtoolinstantiationfactory-variable'>SameContainerMigrationToolInstantiationFactory</a>
      </td>
      <td>
        <code>readonly</code>
      </td>
      <td>
        The DataObjectFactory is used by Fluid Framework to instantiate our DataObject. We provide it with a unique name and the constructor it will call. The third argument lists the other data structures it will utilize. In this scenario, the fourth argument is not used.
      </td>
    </tr>
  </tbody>
</table>

## Type Details

### DataTransformationCallback {#datatransformationcallback-typealias}

The DataTransformationCallback gives an opportunity to modify the exported data before attempting an import to the new model. The modelVersion is also provided to inform the appropriate transformation to perform. It is async to permit network calls or lazy-loading the transform logic within the function.

#### Signature {#datatransformationcallback-signature}

```typescript
export declare type DataTransformationCallback = (exportedData: unknown, modelVersion: string) => Promise<unknown>;
```

### MigrationState {#migrationstate-typealias}

The collaboration session may be in one of four states: \* collaborating - normal collaboration is ongoing. The client may send data. \* stopping - a proposal to migrate has been made, but not accepted yet. The client must stop sending data. \* migrating - a proposal to migrate has been accepted. The data is currently being migrated. \* migrated - migration has completed and the new container is available.

#### Signature {#migrationstate-signature}

```typescript
export declare type MigrationState = "collaborating" | "stopping" | "migrating" | "migrated";
```

### ModelMakerCallback {#modelmakercallback-typealias}

The callback signature that the container author will provide. It must return a promise for the container's model.

#### Signature {#modelmakercallback-signature}

```typescript
export declare type ModelMakerCallback<ModelType> = (runtime: IContainerRuntime, container: IContainer) => Promise<ModelType>;
```

### SameContainerMigrationState {#samecontainermigrationstate-typealias}

The collaboration session may be in one of these states: \* collaborating - normal collaboration is ongoing. The client may send data. \* proposingMigration - a proposal to migrate has been sent by the local client, but not sequenced yet. The client doesn't strictly have to stop sending data until it goes pending. \* stoppingCollaboration - a proposal to migrate has been sequenced, but not accepted yet. The client must stop sending data. // TODO should there be an event here for non-summarizer clients to observe (collaborationStopped maybe) since they won't be generating the summary? // TODO: "V1" and "V2" aren't really appropriate here since we don't know the actual version numbers. Probably prefer "old"/"current" vs. "new"/"next" or something like that. \* generatingV1Summary - the proposal has been accepted and we have started generating the final v1 summary locally, reflecting the state at the time of the acceptance. \* uploadingV1Summary - the final v1 summary has been generated locally and the local client is in the process of uploading it to the service. \* submittingV1Summary - the final v1 summary has been uploaded by the local client and is sending the summarize op, awaiting its summaryAck. \* proposingV2Code - the local client is in the process of proposing v2 code \* waitingForV2ProposalCompletion - at least one v2 code proposal has been approved, and we are waiting on remaining outstanding proposals to be approved. \* readyForMigration - awaiting a call to migrationTool.finalizeTransform(v2Summary) \* uploadingV2Summary - similar to above \* submittingV2Summary - similar to above \* migrated - migration has completed, if the client reloads from the latest summary they will be on v2.

#### Signature {#samecontainermigrationstate-signature}

```typescript
export declare type SameContainerMigrationState = "collaborating" | "proposingMigration" | "stoppingCollaboration" | "generatingV1Summary" | "uploadingV1Summary" | "submittingV1Summary" | "proposingV2Code" | "waitingForV2ProposalCompletion" | "readyForMigration" | "uploadingV2Summary" | "submittingV2Summary" | "migrated";
```

### ViewCallback {#viewcallback-typealias}

#### Signature {#viewcallback-signature}

```typescript
export declare type ViewCallback<T> = (fluidModel: T) => any;
```

## Variable Details

### makeModelRequestHandler {#makemodelrequesthandler-variable}

A helper function for container authors, which generates the request handler they need to align with the ModelLoader contract.

#### Signature {#makemodelrequesthandler-signature}

```typescript
makeModelRequestHandler: <ModelType>(modelMakerCallback: ModelMakerCallback<ModelType>) => (request: IRequest, runtime: IContainerRuntime) => Promise<IResponse>
```

### MigrationToolInstantiationFactory {#migrationtoolinstantiationfactory-variable}

The DataObjectFactory is used by Fluid Framework to instantiate our DataObject. We provide it with a unique name and the constructor it will call. The third argument lists the other data structures it will utilize. In this scenario, the fourth argument is not used.

#### Signature {#migrationtoolinstantiationfactory-signature}

```typescript
MigrationToolInstantiationFactory: DataObjectFactory<MigrationTool, import("@fluidframework/aqueduct").DataObjectTypes>
```

### SameContainerMigrationToolInstantiationFactory {#samecontainermigrationtoolinstantiationfactory-variable}

The DataObjectFactory is used by Fluid Framework to instantiate our DataObject. We provide it with a unique name and the constructor it will call. The third argument lists the other data structures it will utilize. In this scenario, the fourth argument is not used.

#### Signature {#samecontainermigrationtoolinstantiationfactory-signature}

```typescript
SameContainerMigrationToolInstantiationFactory: DataObjectFactory<SameContainerMigrationTool, import("@fluidframework/aqueduct").DataObjectTypes>
```
