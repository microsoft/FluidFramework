/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */

import Link from "@docusaurus/Link";
import { useColorMode } from "@docusaurus/theme-common";
import GitHubIcon from "@theme/Icon/Socials/GitHub";
import XIcon from "@theme/Icon/Socials/X";
import clsx from "clsx";
import React from "react";

import FooterLogo from "./Logo";

import "@site/src/css/footer.css";

/**
 * Note: this module was generated by `swizzling` (and in this case replacing) the Docusaurus "classic" theme's
 * Footer component.
 *
 * Its inner layout and contents were updated to better suite our needs, but the underlying styling and inner
 * components remain unchanged.
 *
 * See {@link https://docusaurus.io/docs/swizzling/ | here} for more information on swizzling.
 */

// TODO: get from site config
const githubRepoUrl = "https://github.com/microsoft/FluidFramework";
const githubDiscussionsUrl = `${githubRepoUrl}/discussions`;
const githubReportIssuesUrl = `${githubRepoUrl}/issues/new/choose`;

const xUrl = "https://x.com/fluidframework";

/**
 * Swizzled Docusaurus "classic" theme Footer component.
 */
function Footer(): JSX.Element {
	const { colorMode } = useColorMode();
	return (
		<footer
			className={clsx("footer", {
				"footer--dark": colorMode === "dark",
			})}
		>
			<FooterSocialLinks />
			<FooterCopyright />
			<FooterPrivacyLinks />
		</footer>
	);
}

interface LinkItemProps {
	children?: React.ReactNode;
	targetUrl: string;
	ariaLabel?: string;
}

function LinkItem({ ariaLabel, children, targetUrl }: LinkItemProps): JSX.Element {
	return (
		<Link className="footer__link-item" to={targetUrl} aria-label={ariaLabel}>
			{children}
		</Link>
	);
}

function FooterSocialLinks(): JSX.Element {
	return (
		<div className="ffcom-footer-social">
			<LinkItem targetUrl={xUrl} ariaLabel="Fluid Framework on X (Twitter).">
				<XIcon /> @fluidframework
			</LinkItem>
			<LinkItem targetUrl={githubRepoUrl} ariaLabel="Fluid Framework on GitHub.">
				<GitHubIcon /> fluid-framework
			</LinkItem>
			<LinkItem targetUrl={githubDiscussionsUrl} ariaLabel="Ask questions on GitHub.">
				üí¨ Ask questions
			</LinkItem>
			<LinkItem targetUrl={githubReportIssuesUrl} ariaLabel="Report issues on GitHub.">
				üêõ Report issues
			</LinkItem>
		</div>
	);
}

function FooterPrivacyLinks(): JSX.Element {
	return (
		<div className="ffcom-footer-privacy">
			<LinkItem targetUrl="https://privacy.microsoft.com/privacystatement">Privacy</LinkItem>
			<LinkItem targetUrl="https://go.microsoft.com/fwlink/?linkid=2259814">
				Consumer Health Privacy
			</LinkItem>
			<LinkItem targetUrl="https://www.microsoft.com/legal/terms-of-use">
				Terms of Use
			</LinkItem>
			<LinkItem targetUrl="https://github.com/microsoft/FluidFramework/blob/main/LICENSE">
				License
			</LinkItem>
		</div>
	);
}

function FooterCopyright(): JSX.Element {
	const { colorMode } = useColorMode();
	const imageFileName =
		colorMode === "dark" ? "microsoft-logo.png" : "microsoft-logo-inverted.png";
	return (
		<div className="ffcom-footer-copyright">
			<FooterLogo
				src={`https://storage.fluidframework.com/static/images/${imageFileName}`}
				href="https://www.microsoft.com/"
				width={200}
				alt="Microsoft Logo"
			/>
			<div className="footer__copyright">
				{`Copyright ¬© ${new Date().getFullYear()} Microsoft`}
			</div>
		</div>
	);
}

export default React.memo(Footer);
