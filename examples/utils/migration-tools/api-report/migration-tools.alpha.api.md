## Alpha API Report File for "@fluid-example/migration-tools"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

// @alpha
export type CreateModelCallback<ModelType> = (runtime: IContainerRuntime, container: IContainer) => Promise<ModelType>;

// @alpha
export type DataTransformationCallback = (exportedData: unknown, modelVersion: string) => Promise<unknown>;

// @alpha
export interface IAcceptedMigrationDetails {
    migrationSequenceNumber: number;
    newVersion: string;
}

// @alpha
export interface IAttachedMigratableModel<ModelType> {
    migrationTool: IMigrationTool;
    model: ModelType;
}

// @alpha
export interface IDetachedMigratableModel<ModelType> {
    attach: () => Promise<string>;
    migrationTool: IMigrationTool;
    model: ModelType;
}

// @alpha
export interface IImportExportModel<ImportType, ExportType> {
    exportData: () => Promise<ExportType>;
    importData: (initialData: ImportType) => Promise<void>;
    supportsDataFormat: (initialData: unknown) => initialData is ImportType;
}

// @alpha
export interface IMigratableModel extends IVersionedModel, IImportExportModel<unknown, unknown> {
    dispose(): void;
}

// @alpha (undocumented)
export interface IMigratableModelContainerRuntimeEntryPoint<T> {
    // (undocumented)
    getModelAndMigrationTool(container: IContainer): Promise<{
        model: T;
        migrationTool: IMigrationTool;
    }>;
}

// @alpha (undocumented)
export interface IMigratableModelLoader<ModelType> {
    createDetached(version: string): Promise<IDetachedMigratableModel<ModelType>>;
    loadExisting(id: string): Promise<IAttachedMigratableModel<ModelType>>;
    loadExistingToSequenceNumber(id: string, sequenceNumber: number): Promise<IAttachedMigratableModel<ModelType>>;
    supportsVersion(version: string): Promise<boolean>;
}

// @alpha (undocumented)
export interface IMigrationTool {
    readonly acceptedMigration: IAcceptedMigrationDetails | undefined;
    completeMigrationTask(): void;
    // (undocumented)
    readonly connected: boolean;
    // (undocumented)
    readonly events: IEventProvider<IMigrationToolEvents>;
    finalizeMigration(id: string): Promise<void>;
    haveMigrationTask(): boolean;
    readonly migrationState: MigrationState;
    readonly newContainerId: string | undefined;
    readonly proposedVersion: string | undefined;
    proposeVersion: (newVersion: string) => void;
    volunteerForMigration(): Promise<boolean>;
}

// @alpha (undocumented)
export interface IMigrationToolEvents extends IEvent {
    // (undocumented)
    (event: "stopping" | "migrating" | "migrated", listener: () => void): any;
    // (undocumented)
    (event: "connected" | "disconnected", listener: () => void): any;
    // (undocumented)
    (event: "disposed", listener: () => void): any;
}

// @alpha (undocumented)
export interface IMigrator {
    readonly currentModel: IMigratableModel;
    readonly currentModelId: string;
    // (undocumented)
    readonly events: IEventProvider<IMigratorEvents>;
    readonly migrationState: MigrationState;
}

// @alpha (undocumented)
export interface IMigratorEvents extends IEvent {
    // (undocumented)
    (event: "migrated" | "migrating", listener: () => void): any;
    // (undocumented)
    (event: "migrationNotSupported", listener: (version: string) => void): any;
}

// @alpha
export const instantiateMigratableRuntime: <ModelType>(context: IContainerContext, existing: boolean, registryEntries: NamedFluidDataStoreRegistryEntries, createModel: CreateModelCallback<ModelType>, runtimeOptions?: IContainerRuntimeOptions) => Promise<IContainerRuntime & IRuntime>;

// @alpha
export interface IVersionedModel {
    readonly version: string;
}

// @alpha (undocumented)
export class MigratableModelLoader<ModelType> implements IMigratableModelLoader<ModelType> {
    constructor(props: Pick<ILoaderProps, "urlResolver" | "documentServiceFactory" | "codeLoader" | "logger"> & {
        generateCreateNewRequest: () => IRequest;
    });
    // (undocumented)
    createDetached(version: string): Promise<IDetachedMigratableModel<ModelType>>;
    // (undocumented)
    loadExisting(id: string): Promise<IAttachedMigratableModel<ModelType>>;
    // (undocumented)
    loadExistingToSequenceNumber(id: string, sequenceNumber: number): Promise<IAttachedMigratableModel<ModelType>>;
    // (undocumented)
    supportsVersion(version: string): Promise<boolean>;
}

// @alpha (undocumented)
export class MigratableSessionStorageModelLoader<ModelType> implements IMigratableModelLoader<ModelType> {
    constructor(codeLoader: ICodeDetailsLoader, logger?: ITelemetryBaseLogger | undefined);
    // (undocumented)
    createDetached(version: string): Promise<IDetachedMigratableModel<ModelType>>;
    // (undocumented)
    loadExisting(id: string): Promise<IAttachedMigratableModel<ModelType>>;
    // (undocumented)
    loadExistingToSequenceNumber(id: string, sequenceNumber: number): Promise<IAttachedMigratableModel<ModelType>>;
    // (undocumented)
    supportsVersion(version: string): Promise<boolean>;
}

// @alpha (undocumented)
export class MigratableTinyliciousModelLoader<ModelType> implements IMigratableModelLoader<ModelType> {
    constructor(codeLoader: ICodeDetailsLoader);
    // (undocumented)
    createDetached(version: string): Promise<IDetachedMigratableModel<ModelType>>;
    // (undocumented)
    loadExisting(id: string): Promise<IAttachedMigratableModel<ModelType>>;
    // (undocumented)
    loadExistingToSequenceNumber(id: string, sequenceNumber: number): Promise<IAttachedMigratableModel<ModelType>>;
    // (undocumented)
    supportsVersion(version: string): Promise<boolean>;
}

// @alpha
export type MigrationState = "collaborating" | "stopping" | "migrating" | "migrated";

// @alpha (undocumented)
export class MigrationToolFactory implements IFluidDataStoreFactory {
    // (undocumented)
    get IFluidDataStoreFactory(): IFluidDataStoreFactory;
    // (undocumented)
    instantiateDataStore(context: IFluidDataStoreContext, existing: boolean): Promise<IFluidDataStoreChannel>;
    // (undocumented)
    get type(): string;
}

// @alpha
export class Migrator implements IMigrator {
    constructor(modelLoader: IMigratableModelLoader<IMigratableModel>, initialMigratable: IMigratableModel, initialMigrationTool: IMigrationTool, initialId: string, dataTransformationCallback?: DataTransformationCallback | undefined);
    // (undocumented)
    get connected(): boolean;
    // (undocumented)
    get currentMigrationTool(): IMigrationTool;
    // (undocumented)
    get currentModel(): IMigratableModel;
    // (undocumented)
    get currentModelId(): string;
    // (undocumented)
    get events(): IEventProvider<IMigratorEvents>;
    // (undocumented)
    get migrationState(): MigrationState;
}

```
