<!-- THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY. -->

# Fluid Framework v2.32.0

## Contents

- [‚ú® New Features](#-new-features)
  - [Blobs in Detached Container Supported by Default (#24119)](#blobs-in-detached-container-supported-by-default-24119)
  - [Shorter IDs for DataStores and DDSes (#24231)](#shorter-ids-for-datastores-and-ddses-24231)
- [üå≥ SharedTree DDS Changes](#-sharedtree-dds-changes)
  - [Cleanup of several tree and schema alpha APIs for content import and export (#24255)](#cleanup-of-several-tree-and-schema-alpha-apis-for-content-import-and-export-24255)
  - [Provide alpha APIs for accessing tree content and stored schema without requiring a compatible view schema (#24225)](#provide-alpha-apis-for-accessing-tree-content-and-stored-schema-without-requiring-a-compatible-view-schema-24225)
- [‚ö†Ô∏è Deprecations](#Ô∏è-deprecations)
  - [The containerPackageInfo parameter in createOdspCreateContainerRequest() is now deprecated (#23919)](#the-containerpackageinfo-parameter-in-createodspcreatecontainerrequest-is-now-deprecated-23919)

## ‚ú® New Features

### Blobs in Detached Container Supported by Default ([#24119](https://github.com/microsoft/FluidFramework/issues/24119))

It is no longer necessary or supported to provide `detachedBlobStorage` to the Loader. This functionality is now provided by default, and the deprecated `IDetachedBlobStorage` will be removed in the 2.40.0 release. The new behavior can be disabled by setting `Fluid.Container.MemoryBlobStorageEnabled` to `false`. This flag will also be removed in the 2.40.0 release if no issues are reported.

#### Change details

Commit: [`fcf561a`](https://github.com/microsoft/FluidFramework/commit/fcf561a802b2a9f8f9f3ac2d9f42fa14b6cbaf5e)

Affected packages:

- @fluidframework/container-loader

[‚¨ÜÔ∏è Table of contents](#contents)

### Shorter IDs for DataStores and DDSes ([#24231](https://github.com/microsoft/FluidFramework/issues/24231))

Fluid Framework will now use shorter IDs for Datastores and DDSes when `enableRuntimeIdCompressor:"on"` is set in `IContainerRuntimeOptions`. This change should help reduce summary and snapshot sizes as well as improve runtime performance because of a smaller memory footprint.

#### Change details

Commit: [`27bbb87`](https://github.com/microsoft/FluidFramework/commit/27bbb87a1f16b304767cd05e46ee0ed2876c4f57)

Affected packages:

- @fluidframework/container-runtime
- @fluidframework/datastore

[‚¨ÜÔ∏è Table of contents](#contents)

## üå≥ SharedTree DDS Changes

### Cleanup of several tree and schema alpha APIs for content import and export ([#24255](https://github.com/microsoft/FluidFramework/issues/24255))

A new `TreeSchema` type has been introduced which extends `SimpleTreeSchema` but contains `TreeNodeSchema` instead of `SimpleNodeSchema`.

`TreeViewConfigurationAlpha` is added which is just `TreeViewConfiguration` but implementing `TreeSchema`.

`SimpleTreeSchema` was modified to have a `root` property instead of implementing `SimpleFieldSchema` directly: this makes it possible for `TreeViewConfigurationAlpha` to implement `TreeSchema` which extends `SimpleTreeSchema`.

`generateSchemaFromSimpleSchema` now returns the new `TreeSchema` type.

`EncodeOptions` and `ParseOptions` have been unified as `TreeEncodingOptions` which covers both the encoding and parsing cases.

`getJsonSchema` now takes in `ImplicitAllowedTypes` instead of `ImplicitFieldSchema` since it can't handle optional roots. `getJsonSchema` also takes in the new `TreeSchemaEncodingOptions` to provide options for how to handle stored keys vs property keys, and fields with defaults.

Now that `getJsonSchema` takes in configuration options, its results are no longer cached.

#### Change details

Commit: [`c6563e5`](https://github.com/microsoft/FluidFramework/commit/c6563e57ac42f002f844aea4d9d6e849908ae1b2)

Affected packages:

- fluid-framework
- @fluidframework/tree

[‚¨ÜÔ∏è Table of contents](#contents)

### Provide alpha APIs for accessing tree content and stored schema without requiring a compatible view schema ([#24225](https://github.com/microsoft/FluidFramework/issues/24225))

Adds an `ITreeAlpha` interface (which `ITree` can be down-casted to) that provides access to both the tree content and the schema. This allows inspecting the content saved in a SharedTree in a generic way that can work on any SharedTree.

This can be combined with the existing `generateSchemaFromSimpleSchema` to generate a schema that can be used with [`ITree.viewWith`](https://fluidframework.com/docs/api/fluid-framework/viewabletree-interface#viewwith-methodsignature) to allow constructing a [`TreeView`](https://fluidframework.com/docs/api/fluid-framework/treeview-interface) for any SharedTree, regardless of its schema.

Note that the resulting TypeScript typing for such a view will not be friendly: the `TreeView` APIs are designed for statically known schema. Using them is possible with care and a lot of type casts but not recommended if it can be avoided: see disclaimer on `generateSchemaFromSimpleSchema`. Example using `ITreeAlpha` and `generateSchemaFromSimpleSchema`:

```typescript
const viewAlpha = tree as ITreeAlpha;
const treeSchema = generateSchemaFromSimpleSchema(
  viewAlpha.exportSimpleSchema(),
);
const config = new TreeViewConfiguration({ schema: treeSchema.root });
const view = viewAlpha.viewWith(config);
```

`getSimpleSchema` is also added as an `@alpha` API to provide a way to clone schema into the simple schema formats. Note that when using (or copying) a view schema as a simple schema, more metadata will be preserved than when deriving one from the stored schema using `ITreeAlpha`.

#### Change details

Commit: [`18b6e05`](https://github.com/microsoft/FluidFramework/commit/18b6e05e4e85fdc1a6d373b15c2bfcc191ea1bc3)

Affected packages:

- fluid-framework
- @fluidframework/tree

[‚¨ÜÔ∏è Table of contents](#contents)

## ‚ö†Ô∏è Deprecations

### The containerPackageInfo parameter in createOdspCreateContainerRequest() is now deprecated ([#23919](https://github.com/microsoft/FluidFramework/issues/23919))

The `containerPackageInfo` parameter in `createOdspCreateContainerRequest()` is now deprecated and will be removed in version 2.40.0.

The name of the containerPackage can no longer be sent through the request. Instead, it can be added in the constructor of `OdspDriverUrlResolverForShareLink`.

See [issue #23882](https://github.com/microsoft/FluidFramework/issues/23882) for more details.

#### Change details

Commit: [`42b26b7`](https://github.com/microsoft/FluidFramework/commit/42b26b7f18ede4471d4426c542345bc66b56e923)

Affected packages:

- @fluidframework/odsp-driver

[‚¨ÜÔ∏è Table of contents](#contents)

### üõ†Ô∏è Start Building Today!

Please continue to engage with us on GitHub [Discussion](https://github.com/microsoft/FluidFramework/discussions) and [Issue](https://github.com/microsoft/FluidFramework/issues) pages as you adopt Fluid Framework!
