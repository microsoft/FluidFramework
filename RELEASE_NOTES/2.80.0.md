<!-- THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY. -->

# Fluid Framework v2.80.0

## Contents

- [üö® Breaking Changes](#-breaking-changes)
  - [Removal of number key support in LatestMap (#25904)](#removal-of-number-key-support-in-latestmap-25904)
  - [Added layerIncompatibilityError to FluidErrorTypes, ContainerErrorTypes, DriverErrorTypes and OdspErrorTypes (#26068)](#added-layerincompatibilityerror-to-fluiderrortypes-containererrortypes-drivererrortypes-and-odsperrortypes-26068)
  - [TreeBranch operations throw when called during transactions (#26097)](#treebranch-operations-throw-when-called-during-transactions-26097)
  - [map: Emit valueChanged events for deleted keys after a clear operation (#26102)](#map-emit-valuechanged-events-for-deleted-keys-after-a-clear-operation-26102)
- [üêõ Bug Fixes](#-bug-fixes)
  - [Attendee status fixes on reconnect (#26111)](#attendee-status-fixes-on-reconnect-26111)
- [Legacy API Changes](#legacy-api-changes)
  - [Types not intended for consumer implementation/extension are now @sealed (#26024)](#types-not-intended-for-consumer-implementationextension-are-now-sealed-26024)

## üö® Breaking Changes

### Removal of number key support in LatestMap ([#25904](https://github.com/microsoft/FluidFramework/issues/25904))

`number` keys have never been successfully propagated as `number`s at runtime and this type clarification makes that clear. See [issue 25919](https://github.com/microsoft/FluidFramework/issues/25919) for more details.

#### Change details

Commit: [`c1d91d8`](https://github.com/microsoft/FluidFramework/commit/c1d91d8b5f4f141f890c848a7f344d4238d4a85a)

Affected packages:

- @fluidframework/presence

[‚¨ÜÔ∏è Table of contents](#contents)

### Added layerIncompatibilityError to FluidErrorTypes, ContainerErrorTypes, DriverErrorTypes and OdspErrorTypes ([#26068](https://github.com/microsoft/FluidFramework/issues/26068))

The Fluid error type `layerIncompatibilityError` is added to `FluidErrorTypes` and is now @legacy @beta. It is also added to `ContainerErrorTypes`, `DriverErrorTypes` and `OdspErrorTypes` which extend `FluidErrorTypes`. `layerIncompatibilityError` was added as @legacy @alpha in version 2.72.0. The corresponding interface `ILayerIncompatibilityError` for errors of type `layerIncompatibilityError` is now also @legacy @beta.

See [this issue](https://github.com/microsoft/FluidFramework/issues/25813) for more details.

#### Change details

Commit: [`a8532bd`](https://github.com/microsoft/FluidFramework/commit/a8532bdd903626524f17d2ec650d8904046e5308)

Affected packages:

- @fluidframework/container-definitions
- @fluidframework/core-interfaces
- @fluidframework/driver-definitions
- @fluidframework/odsp-driver-definitions

[‚¨ÜÔ∏è Table of contents](#contents)

### TreeBranch operations throw when called during transactions ([#26097](https://github.com/microsoft/FluidFramework/issues/26097))

This breaking change only affects the behavior of `TreeBranch` methods (currently released as beta).

- Invoking `TreeBranch.fork()` now throws an error if a transaction is ongoing on the branch.
- Invoking `TreeBranch.merge(sourceBranch)` now throws an error if a transaction is ongoing on the source branch. As before, it also throws an error if a transaction is ongoing on the target (i.e., `this`) branch.
- Invoking `TreeBranch.rebaseOnto(targetBranch)` now throws an error if a transaction is ongoing on the target branch. As before, it also throws an error if a transaction is ongoing on the source (i.e., `this`) branch.

These new restrictions insulate branches and their dependents from experiencing incomplete transaction changes. This is important because incomplete transaction changes may not uphold application invariants.

In scenarios that experience the new errors, application authors should consider whether the ongoing transaction can safely be closed before invoking these methods.

#### Change details

Commit: [`33b1ec0`](https://github.com/microsoft/FluidFramework/commit/33b1ec0827c433ce9afc126f26457a9245bd43eb)

Affected packages:

- @fluidframework/tree
- fluid-framework

[‚¨ÜÔ∏è Table of contents](#contents)

### map: Emit valueChanged events for deleted keys after a clear operation ([#26102](https://github.com/microsoft/FluidFramework/issues/26102))

When a `clear` op is processed on SharedMap, `valueChanged` events are now emitted for each key that was deleted. Previously, only the `clear` event was emitted with no subsequent `valueChanged` events.

#### Change details

Commit: [`7c9be0e`](https://github.com/microsoft/FluidFramework/commit/7c9be0e2d2cd7dd40aaa6bf6812ad9a6d43609f5)

Affected packages:

- @fluidframework/map

[‚¨ÜÔ∏è Table of contents](#contents)

## üêõ Bug Fixes

### Attendee status fixes on reconnect ([#26111](https://github.com/microsoft/FluidFramework/issues/26111))

Fix "Connected" status for Attendees when local client reconnects (intermittent connection or transition from read-only to read-write connection). This includes no longer emitting incorrect "attendeeDisconnected" events.

#### Change details

Commit: [`836f22f`](https://github.com/microsoft/FluidFramework/commit/836f22fac9e8728324ee1f3c34ea27ce8392f07e)

Affected packages:

- @fluidframework/presence

[‚¨ÜÔ∏è Table of contents](#contents)

## Legacy API Changes

### Types not intended for consumer implementation/extension are now @sealed ([#26024](https://github.com/microsoft/FluidFramework/issues/26024))

The following types are now explicitly marked as `@sealed` to indicate that they are not intended for consumer implementation or extension.

- `MockFluidDataStoreRuntime` class in `@fluidframework/test-runtime-utils`
- `IFluidParentContext` interface in `@fluidframework/runtime-definitions`
- `IFluidDataStoreContext` interface in `@fluidframework/runtime-definitions`
- `IFluidDataStoreContextDetached` interface in `@fluidframework/runtime-definitions`

#### Change details

Commit: [`75a3861`](https://github.com/microsoft/FluidFramework/commit/75a3861ba8bd4b1b0043bb137a17e0c8d4d3b330)

Affected packages:

- @fluidframework/runtime-definitions
- @fluidframework/test-runtime-utils

[‚¨ÜÔ∏è Table of contents](#contents)

### üõ†Ô∏è Start Building Today!

Please continue to engage with us on GitHub [Discussion](https://github.com/microsoft/FluidFramework/discussions) and [Issue](https://github.com/microsoft/FluidFramework/issues) pages as you adopt Fluid Framework!
