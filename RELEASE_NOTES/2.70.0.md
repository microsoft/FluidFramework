<!-- THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY. -->

# Fluid Framework v2.70.0

## Contents

- [üö® Breaking Changes](#-breaking-changes)
  - [Deprecated properties have been removed from IRuntimeStorageService and IContainerStorageService (#25708)](#deprecated-properties-have-been-removed-from-iruntimestorageservice-and-icontainerstorageservice-25708)
  - [getSnapshotTree is now required in IChannelStorageService (#25707)](#getsnapshottree-is-now-required-in-ichannelstorageservice-25707)
  - [Deprecated property processCore has been removed from SharedObject (#25749)](#deprecated-property-processcore-has-been-removed-from-sharedobject-25749)
  - [Remove submitMessage from FluidDataStoreRuntime and MockFluidDataStoreRuntime (#25755)](#remove-submitmessage-from-fluiddatastoreruntime-and-mockfluiddatastoreruntime-25755)
- [‚ú® New Features](#-new-features)
  - [Promote core devtools APIs from alpha to beta (#25695)](#promote-core-devtools-apis-from-alpha-to-beta-25695)
  - [Added `Tree.ensureSchema` (#25740)](#added-treeensureschema-25740)
  - [A minimal set of branching APIs has been promoted to beta. (#25744)](#a-minimal-set-of-branching-apis-has-been-promoted-to-beta-25744)
  - [Improved join scalability (#25371)](#improved-join-scalability-25371)
- [üå≥ SharedTree DDS Changes](#-sharedtree-dds-changes)
  - [Update TableSchema APIs (alpha) to accept SchemaFactoryBeta in addition to SchemaFactoryAlpha (#25613)](#update-tableschema-apis-alpha-to-accept-schemafactorybeta-in-addition-to-schemafactoryalpha-25613)
  - [All non-structurally named beta schema factory APIs now support node schema metadata (#25685)](#all-non-structurally-named-beta-schema-factory-apis-now-support-node-schema-metadata-25685)
  - [Promote FluidSerializableAsTree APIs from alpha to beta (#25693)](#promote-fluidserializableastree-apis-from-alpha-to-beta-25693)
- [‚ö†Ô∏è Deprecations](#Ô∏è-deprecations)
  - [Removed deprecated export of MinimumVersionForCollab from @fluidframework/container-runtime (#25309)](#removed-deprecated-export-of-minimumversionforcollab-from-fluidframeworkcontainer-runtime-25309)

## üö® Breaking Changes

### Deprecated properties have been removed from IRuntimeStorageService and IContainerStorageService ([#25708](https://github.com/microsoft/FluidFramework/issues/25708))

The following deprecated properties have been removed from `IRuntimeStorageService`:

- `createBlob`
- `dispose`
- `disposed`
- `downloadSummary`
- `getSnapshot`
- `getSnapshotTree`
- `getVersions`
- `policies`
- `uploadSummaryWithContext`

The following deprecated properties have been removed from `IContainerStorageService`:

- `dispose`
- `disposed`
- `downloadSummary`

Please see [this Github issue](https://github.com/microsoft/FluidFramework/issues/25069) for more details.

#### Change details

Commit: [`82c936e`](https://github.com/microsoft/FluidFramework/commit/82c936ed285c7e450d5e907a531ce71178f57819)

Affected packages:

- @fluidframework/container-definitions
- @fluidframework/runtime-definitions

[‚¨ÜÔ∏è Table of contents](#contents)

### getSnapshotTree is now required in IChannelStorageService ([#25707](https://github.com/microsoft/FluidFramework/issues/25707))

The `getSnapshotTree` property was added as optional to `IChannelStorageService` in version 2.51.0. It is now a required property. See this [github issue](https://github.com/microsoft/FluidFramework/issues/25178) for more details.

#### Change details

Commit: [`d1c4c0a`](https://github.com/microsoft/FluidFramework/commit/d1c4c0ab1d9f15af93f0a02c0dd0d13851655af8)

Affected packages:

- @fluidframework/datastore-definitions
- @fluidframework/test-runtime-utils

[‚¨ÜÔ∏è Table of contents](#contents)

### Deprecated property processCore has been removed from SharedObject ([#25749](https://github.com/microsoft/FluidFramework/issues/25749))

The deprecated property `processCore` has been removed from `SharedObject`.

Please see [this github issue](https://github.com/microsoft/FluidFramework/issues/25176) for more details.

#### Change details

Commit: [`a33a2e3`](https://github.com/microsoft/FluidFramework/commit/a33a2e370fbb95b565f39c2a14abc7716bc01980)

Affected packages:

- @fluidframework/ordered-collection
- @fluidframework/register-collection
- @fluidframework/shared-object-base

[‚¨ÜÔ∏è Table of contents](#contents)

### Remove submitMessage from FluidDataStoreRuntime and MockFluidDataStoreRuntime ([#25755](https://github.com/microsoft/FluidFramework/issues/25755))

As needed, access `submitMessage` via `IFluidDataStoreContext`/`IFluidParentContext`. See [#24406](https://github.com/microsoft/FluidFramework/issues/24406) for details.

#### Change details

Commit: [`88860f3`](https://github.com/microsoft/FluidFramework/commit/88860f348b0d67f94952d4e2ae227fa0b1f9f942)

Affected packages:

- @fluidframework/datastore
- @fluidframework/test-runtime-utils

[‚¨ÜÔ∏è Table of contents](#contents)

## ‚ú® New Features

### Promote core devtools APIs from alpha to beta ([#25695](https://github.com/microsoft/FluidFramework/issues/25695))

The primary devtools APIs may now be imported from `/beta`. This includes:

- **`initializeDevtools`** - Initialize the devtools singleton
- **`tryGetFluidDevtools`** - Get the existing devtools instance if initialized
- **`IFluidDevtools`** - Main devtools interface for registering containers
- **`ContainerDevtoolsProps`** - Properties for registering containers with devtools

For example:

```typescript
import {
  initializeDevtools,
  tryGetFluidDevtools,
  type IFluidDevtools,
  type ContainerDevtoolsProps,
} from "@fluidframework/devtools-core/beta";

// Initialize devtools
const devtools = initializeDevtools();

// Register a container
devtools.registerContainerDevtools({
  containerKey: "my-container",
  container: myContainer,
});
```

#### Change details

Commit: [`7c8e203`](https://github.com/microsoft/FluidFramework/commit/7c8e20324935717d8f7b599c3ec2a1b570b96ba1)

Affected packages:

- @fluidframework/devtools-core

[‚¨ÜÔ∏è Table of contents](#contents)

### Added `Tree.ensureSchema` ([#25740](https://github.com/microsoft/FluidFramework/issues/25740))

This helper function allows content to be tagged with a schema type before being inserted into the tree. This allows content that would otherwise be ambiguous to be well-defined, without having to wrap it in a node constructor.

Example:

```typescript
const sf = new SchemaFactory("example");
class Dog extends sf.object("Dog", { name: sf.string() }) {}
class Cat extends sf.object("Cat", { name: sf.string() }) {}
class Root extends sf.object("Root", { pet: [Dog, Cat] }) {}
// ...
const pet = { name: "Max" };
view.root.pet = pet; // Error: `pet` is ambiguous - is it a Dog or a Cat?
view.root.pet = new Dog(pet); // This works, but has the overhead of creating a Dog node before the insertion actually happens.
TreeAlpha.ensureSchema(Dog, pet); // Instead, this tags the `pet` object as a Dog...
view.root.pet = pet; // So now there is no error for a normal insertion - it's a Dog.
```

This function works by leveraging the new `schemaSymbol`, which is also available for use. See its documentation for more information.

#### Change details

Commit: [`8213407`](https://github.com/microsoft/FluidFramework/commit/8213407b3fe93f0e35925b1dcd7e799501cb0e92)

Affected packages:

- @fluidframework/tree

[‚¨ÜÔ∏è Table of contents](#contents)

### A minimal set of branching APIs has been promoted to beta. ([#25744](https://github.com/microsoft/FluidFramework/issues/25744))

The following APIs have been promoted to beta in `@fluidframework/tree`:

- `TreeBranch.fork()`
- `TreeBranch.merge()`
- `TreeBranch.rebaseOnto()`
- `TreeBranch.dispose()`
- `TreeView.fork()`

These APIs enable applications to implement basic local branching flows.

#### Change details

Commit: [`32cc2c7`](https://github.com/microsoft/FluidFramework/commit/32cc2c75d82c35403caa91e67e81f71baee5d092)

Affected packages:

- fluid-framework
- @fluidframework/tree
- @fluidframework/tree-agent

[‚¨ÜÔ∏è Table of contents](#contents)

### Improved join scalability ([#25371](https://github.com/microsoft/FluidFramework/issues/25371))

Protocol for attendees joining has been updated to more efficiently accommodate a larger number of attendees, including when few-to-none have write access.

#### Change details

Commit: [`98dadd3`](https://github.com/microsoft/FluidFramework/commit/98dadd30aebbf202c9fad268013d27719129c774)

Affected packages:

- @fluidframework/presence

[‚¨ÜÔ∏è Table of contents](#contents)

## üå≥ SharedTree DDS Changes

### Update TableSchema APIs (alpha) to accept SchemaFactoryBeta in addition to SchemaFactoryAlpha ([#25613](https://github.com/microsoft/FluidFramework/issues/25613))

Makes the [TableSchema](https://fluidframework.com/docs/api/fluid-framework/tableschema-namespace) APIs more flexible, and prepares them for future promotion to beta themselves.

#### Change details

Commit: [`1bdf44a`](https://github.com/microsoft/FluidFramework/commit/1bdf44ac5a93bcd1956e15e54c46a16ad2d1c005)

Affected packages:

- @fluidframework/tree
- fluid-framework

[‚¨ÜÔ∏è Table of contents](#contents)

### All non-structurally named beta schema factory APIs now support node schema metadata ([#25685](https://github.com/microsoft/FluidFramework/issues/25685))

The "options" parameter which allows providing metadata for `TreeNodeSchema` is now available consistently on `SchemaFactoryBeta`, not just `SchemaFactoryAlpha` and a subset of `SchemaFactoryBeta`.

#### Change details

Commit: [`6d8c0ca`](https://github.com/microsoft/FluidFramework/commit/6d8c0ca181c7ed7c600e56197ed4bc75cfbba3db)

Affected packages:

- fluid-framework
- @fluidframework/tree

[‚¨ÜÔ∏è Table of contents](#contents)

### Promote FluidSerializableAsTree APIs from alpha to beta ([#25693](https://github.com/microsoft/FluidFramework/issues/25693))

`FluidSerializableAsTree` may now be imported from `/beta`.

#### Change details

Commit: [`43fbc54`](https://github.com/microsoft/FluidFramework/commit/43fbc54d05351d06c4bc20d1e6f5ca732775f605)

Affected packages:

- @fluidframework/tree
- fluid-framework

[‚¨ÜÔ∏è Table of contents](#contents)

## ‚ö†Ô∏è Deprecations

### Removed deprecated export of MinimumVersionForCollab from @fluidframework/container-runtime ([#25309](https://github.com/microsoft/FluidFramework/issues/25309))

Removed the deprecated re-export of MinimumVersionForCollab from @fluidframework/container-runtime. This type should now be imported from @fluidframework/runtime-definitions. See the [Fluid Framework 2.52.0 release notes](https://github.com/microsoft/FluidFramework/releases/tag/client_v2.52.0) for details.

#### Change details

Commit: [`776cb1c`](https://github.com/microsoft/FluidFramework/commit/776cb1ce31176e1eb07ba2723c2d51e6f4cc379f)

Affected packages:

- @fluidframework/aqueduct
- @fluidframework/container-runtime
- @fluidframework/fluid-static
- @fluid-private/test-end-to-end-tests
- @fluidframework/test-utils
- @fluid-private/test-version-utils

[‚¨ÜÔ∏è Table of contents](#contents)

### üõ†Ô∏è Start Building Today!

Please continue to engage with us on GitHub [Discussion](https://github.com/microsoft/FluidFramework/discussions) and [Issue](https://github.com/microsoft/FluidFramework/issues) pages as you adopt Fluid Framework!
