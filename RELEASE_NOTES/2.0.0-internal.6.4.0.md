# Fluid Framework v2.0.0-internal.6.4.0

Note: For the most updated release notes, see the release on GitHub at
<https://github.com/microsoft/FluidFramework/releases/tag/client_v2.0.0-internal.6.4.0>.

## Upcoming: The type of the logger property/param in various APIs will be changing

- @fluidframework/runtime-definitions
  - `IFluidDataStoreRuntime.logger` will be re-typed as `ITelemetryBaseLogger`
- @fluidframework/odsp-driver
  - `protected OdspDocumentServiceFactoryCore.createDocumentServiceCore`'s parameter `odspLogger` will be re-typed as `ITelemetryLoggerExt`
  - `protected LocalOdspDocumentServiceFactory.createDocumentServiceCore`'s parameter `odspLogger` will be re-typed as `ITelemetryLoggerExt`

Additionally, several of @fluidframework/telemetry-utils's exports are being marked as internal and should not be consumed outside of other FF packages.

## tree2: Replace ValueSchema.Serializable with FluidHandle

Replace ValueSchema.Serializable with FluidHandle, removing support for arbitrary objects as tree values and preventing "any" type from Serializable from infecting TreeValue.

## tree2: Restrict struct field names to avoid collisions with schema2 names

Struct field names are now restricted to avoid collisions with schema2 names.

## api-markdown-documenter: Don't include file extension in paths in Documentation Domain

The Documentation Domain layer of the system is not intended to know anything about files on disk. It has a concept of abstract documentation hierarchy, which maps to file system structure, but that is as close as it gets.

Previously, `DocumentNode` included a property called `filePath`, which included a hard-coded `.md` file extension. This has been removed; it is now the responsibility of consumers to append the appropriate file extension when writing rendered document contents to disk. `renderDocumentsAsMarkdown` now handled this, as the only code in the system that interacts with the file system.

The `filePath` property has also been renamed to `documentPath` to help avoid confusion, and its docs have been updated call out the distinction.

This PR also removes the `getFilePathForApiItem` utility function from the public API - consumers shouldn't need to use it, and it could cause confusion.

## api-markdown-documenter: Enable `unicorn/prevent-abbreviations` eslint rule

Enabled rule to enhance developer accessibility. Rule details: https://github.com/sindresorhus/eslint-plugin-unicorn/blob/main/docs/rules/prevent-abbreviations.md

Updated code to adhere to new rules. This resulted in a single API breaking change: renaming "transformDocNode" to "transformTsdocNode".

## api-markdown-documenter: Add (alpha) HTML rendering APIs

Adds capabilities for rendering API docs as HTML in addition to Markdown.

Updates existing Markdown rendering to fall back to this separate infra, rather than bundling its own HTML rendering (for tables, etc.).

This PR includes a few of API breaking changes:

- Removes `RenderDocumentationNodeAsMarkdown` type alias, opting to inline the callback signature into `MarkdownRenderers`.
- Removes the `insideHtml` property from `MarkdownRenderContext`, as it is no longer needed.
- Renames `DocumentationNode`'s `filePath` property to `documentPath` to avoid confusion around file extensions.

## Some stack traces are improved

Some stack traces have been improved and might now include frames for async functions that weren't previously included.
