## API Report File for "@fluidframework/replay-driver"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { IClient } from '@fluidframework/driver-definitions';
import { ICreateBlobResponse } from '@fluidframework/driver-definitions/internal';
import { IDocumentDeltaConnection } from '@fluidframework/driver-definitions/internal';
import { IDocumentDeltaStorageService } from '@fluidframework/driver-definitions/internal';
import { IDocumentService } from '@fluidframework/driver-definitions/internal';
import { IDocumentServiceEvents } from '@fluidframework/driver-definitions/internal';
import { IDocumentServiceFactory } from '@fluidframework/driver-definitions/internal';
import { IDocumentStorageService } from '@fluidframework/driver-definitions/internal';
import { IResolvedUrl } from '@fluidframework/driver-definitions/internal';
import { ISequencedDocumentMessage } from '@fluidframework/driver-definitions';
import { ISnapshotTree } from '@fluidframework/driver-definitions/internal';
import { ISummaryContext } from '@fluidframework/driver-definitions/internal';
import { ISummaryHandle } from '@fluidframework/driver-definitions';
import { ISummaryTree } from '@fluidframework/driver-definitions';
import { ITelemetryBaseLogger } from '@fluidframework/core-interfaces';
import { ITelemetryLoggerExt } from '@fluidframework/telemetry-utils/internal';
import { ITree } from '@fluidframework/driver-definitions/internal';
import { IVersion } from '@fluidframework/driver-definitions/internal';
import { TypedEventEmitter } from '@fluid-internal/client-utils';

// @internal (undocumented)
export class FileSnapshotReader extends ReadDocumentStorageServiceBase implements IDocumentStorageService {
    constructor(json: IFileSnapshot);
    // (undocumented)
    protected blobs: Map<string, ArrayBufferLike>;
    // (undocumented)
    protected readonly commits: {
        [key: string]: ITree;
    };
    // (undocumented)
    protected docId?: string;
    // (undocumented)
    protected docTree: ISnapshotTree;
    // (undocumented)
    protected static readonly FileStorageVersionTreeId = "FileStorageTreeId";
    // (undocumented)
    getSnapshotTree(versionRequested?: IVersion): Promise<ISnapshotTree | null>;
    // (undocumented)
    getVersions(versionId: string | null, count: number): Promise<IVersion[]>;
    // (undocumented)
    readBlob(blobId: string): Promise<ArrayBufferLike>;
    // (undocumented)
    protected readonly trees: {
        [key: string]: ISnapshotTree;
    };
}

// @internal
export interface IFileSnapshot {
    // (undocumented)
    commits: {
        [key: string]: ITree;
    };
    // (undocumented)
    tree: ITree;
}

// @internal
export abstract class ReadDocumentStorageServiceBase implements IDocumentStorageService {
    // (undocumented)
    createBlob(file: ArrayBufferLike): Promise<ICreateBlobResponse>;
    // (undocumented)
    downloadSummary(handle: ISummaryHandle): Promise<ISummaryTree>;
    // (undocumented)
    abstract getSnapshotTree(version?: IVersion): Promise<ISnapshotTree | null>;
    // (undocumented)
    abstract getVersions(versionId: string | null, count: number): Promise<IVersion[]>;
    // (undocumented)
    abstract readBlob(blobId: string): Promise<ArrayBufferLike>;
    // (undocumented)
    uploadSummaryWithContext(summary: ISummaryTree, context: ISummaryContext): Promise<string>;
}

// @internal
export abstract class ReplayController extends ReadDocumentStorageServiceBase {
    abstract fetchTo(currentOp: number): number | undefined;
    abstract getStartingOpSequence(): Promise<number>;
    abstract initStorage(documentService: IDocumentService): Promise<boolean>;
    abstract isDoneFetch(currentOp: number, lastTimeStamp?: number): boolean;
    abstract replay(emitter: (op: ISequencedDocumentMessage[]) => void, fetchedOps: ISequencedDocumentMessage[]): Promise<void>;
}

// @internal
export class ReplayDocumentService extends TypedEventEmitter<IDocumentServiceEvents> implements IDocumentService {
    constructor(controller: IDocumentStorageService, deltaStorage: IDocumentDeltaConnection);
    connectToDeltaStorage(): Promise<IDocumentDeltaStorageService>;
    connectToDeltaStream(client: IClient): Promise<IDocumentDeltaConnection>;
    connectToStorage(): Promise<IDocumentStorageService>;
    // (undocumented)
    static create(documentService: IDocumentService, controller: ReplayController): Promise<IDocumentService>;
    // (undocumented)
    dispose(): void;
    // (undocumented)
    get resolvedUrl(): IResolvedUrl;
}

// @internal (undocumented)
export class ReplayDocumentServiceFactory implements IDocumentServiceFactory {
    constructor(documentServiceFactory: IDocumentServiceFactory, controller: ReplayController);
    // (undocumented)
    static create(from: number, to: number, documentServiceFactory: IDocumentServiceFactory): ReplayDocumentServiceFactory;
    // (undocumented)
    createContainer(createNewSummary: ISummaryTree, resolvedUrl: IResolvedUrl, logger?: ITelemetryBaseLogger, clientIsSummarizer?: boolean): Promise<IDocumentService>;
    createDocumentService(resolvedUrl: IResolvedUrl, logger?: ITelemetryBaseLogger, clientIsSummarizer?: boolean): Promise<IDocumentService>;
}

// @internal (undocumented)
export class SnapshotStorage extends ReadDocumentStorageServiceBase {
    constructor(storage: IDocumentStorageService, docTree: ISnapshotTree | null);
    // (undocumented)
    protected docId?: string;
    // (undocumented)
    protected readonly docTree: ISnapshotTree | null;
    // (undocumented)
    getSnapshotTree(versionRequested?: IVersion): Promise<ISnapshotTree | null>;
    // (undocumented)
    getVersions(versionId: string | null, count: number): Promise<IVersion[]>;
    // (undocumented)
    readBlob(blobId: string): Promise<ArrayBufferLike>;
    // (undocumented)
    protected readonly storage: IDocumentStorageService;
}

// @internal (undocumented)
export class StaticStorageDocumentServiceFactory implements IDocumentServiceFactory {
    constructor(storage: IDocumentStorageService);
    // (undocumented)
    createContainer(createNewSummary: ISummaryTree, resolvedUrl: IResolvedUrl, logger: ITelemetryLoggerExt, clientIsSummarizer?: boolean): Promise<IDocumentService>;
    // (undocumented)
    createDocumentService(fileURL: IResolvedUrl, logger?: ITelemetryLoggerExt, clientIsSummarizer?: boolean): Promise<IDocumentService>;
    // (undocumented)
    protected readonly storage: IDocumentStorageService;
}

// (No @packageDocumentation comment for this package)

```
