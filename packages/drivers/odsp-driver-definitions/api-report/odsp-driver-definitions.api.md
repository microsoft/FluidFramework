## API Report File for "@fluidframework/odsp-driver-definitions"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { DriverError } from '@fluidframework/driver-definitions';
import { IDriverErrorBase } from '@fluidframework/driver-definitions';
import { IResolvedUrl } from '@fluidframework/driver-definitions';

// @alpha (undocumented)
export type CacheContentType = "snapshot" | "ops";

// @internal
export function getKeyForCacheEntry(entry: ICacheEntry): string;

// @alpha (undocumented)
export interface HostStoragePolicy {
    avoidPrefetchSnapshotCache?: boolean;
    cacheCreateNewSummary?: boolean;
    // (undocumented)
    concurrentOpsBatches?: number;
    concurrentSnapshotFetch?: boolean;
    // @deprecated (undocumented)
    enableRedeemFallback?: boolean;
    // @deprecated (undocumented)
    enableShareLinkWithCreate?: boolean;
    enableSingleRequestForShareLinkWithCreate?: boolean;
    // @deprecated (undocumented)
    fetchBinarySnapshotFormat?: boolean;
    isolateSocketCache?: boolean;
    // (undocumented)
    opsBatchSize?: number;
    opsCaching?: IOpsCachingPolicy;
    sessionOptions?: ICollabSessionOptions;
    // (undocumented)
    snapshotOptions?: ISnapshotOptions;
}

// @alpha
export interface ICacheEntry extends IEntry {
    file: IFileEntry;
}

// @alpha (undocumented)
export interface ICollabSessionOptions {
    // @deprecated (undocumented)
    forceAccessTokenViaAuthorizationHeader?: boolean;
    unauthenticatedUserDisplayName?: string;
}

// @alpha
export type IdentityType = "Consumer" | "Enterprise";

// @alpha
export interface IEntry {
    key: string;
    type: CacheContentType;
}

// @alpha (undocumented)
export interface IFileEntry {
    docId: string;
    resolvedUrl: IResolvedUrl;
}

// @internal (undocumented)
export type InstrumentedStorageTokenFetcher = (options: TokenFetchOptions, name: string, alwaysRecordTokenFetchTelemetry?: boolean) => Promise<string | null>;

// @alpha
export interface IOdspError extends Omit<IDriverErrorBase, "errorType">, IOdspErrorAugmentations {
    // (undocumented)
    readonly errorType: OdspErrorType;
}

// @alpha (undocumented)
export interface IOdspErrorAugmentations {
    facetCodes?: string[];
    redirectLocation?: string;
    serverEpoch?: string;
}

// @alpha (undocumented)
export interface IOdspResolvedUrl extends IResolvedUrl, IOdspUrlParts {
    // (undocumented)
    codeHint?: {
        containerPackageName?: string;
    };
    // (undocumented)
    dataStorePath?: string;
    // (undocumented)
    endpoints: {
        snapshotStorageUrl: string;
        attachmentPOSTStorageUrl: string;
        attachmentGETStorageUrl: string;
        deltaStorageUrl: string;
    };
    // (undocumented)
    fileName: string;
    // (undocumented)
    fileVersion: string | undefined;
    // (undocumented)
    hashedDocumentId: string;
    // (undocumented)
    isClpCompliantApp?: boolean;
    // (undocumented)
    odspResolvedUrl: true;
    shareLinkInfo?: ShareLinkInfoType;
    // (undocumented)
    summarizer: boolean;
    // (undocumented)
    tokens: {};
    // (undocumented)
    type: "fluid";
    // (undocumented)
    url: string;
}

// @alpha (undocumented)
export interface IOdspUrlParts {
    // (undocumented)
    driveId: string;
    // (undocumented)
    itemId: string;
    // (undocumented)
    siteUrl: string;
}

// @alpha (undocumented)
export interface IOpsCachingPolicy {
    batchSize?: number;
    timerGranularity?: number;
    totalOpsToCache?: number;
}

// @alpha
export interface IPersistedCache {
    get(entry: ICacheEntry): Promise<any>;
    put(entry: ICacheEntry, value: any): Promise<void>;
    removeEntries(file: IFileEntry): Promise<void>;
}

// @alpha
export interface IProvideSessionAwareDriverFactory {
    // (undocumented)
    readonly IRelaySessionAwareDriverFactory: IRelaySessionAwareDriverFactory;
}

// @alpha
export interface IRelaySessionAwareDriverFactory extends IProvideSessionAwareDriverFactory {
    // (undocumented)
    getRelayServiceSessionInfo(resolvedUrl: IResolvedUrl): Promise<ISocketStorageDiscovery | undefined>;
}

// @alpha
export interface ISharingLink extends ISharingLinkKind {
    // (undocumented)
    webUrl: string;
}

// @alpha
export interface ISharingLinkKind {
    // (undocumented)
    role?: SharingLinkRole;
    // (undocumented)
    scope: SharingLinkScope;
}

// @alpha (undocumented)
export interface ISnapshotOptions {
    // (undocumented)
    blobs?: number;
    // (undocumented)
    channels?: number;
    // (undocumented)
    deltas?: number;
    // (undocumented)
    mds?: number;
    // (undocumented)
    timeout?: number;
}

// @alpha
export interface ISocketStorageDiscovery {
    // (undocumented)
    deltaStorageUrl: string;
    deltaStreamSocketUrl: string;
    // (undocumented)
    id: string;
    refreshSessionDurationSeconds?: number;
    // (undocumented)
    runtimeTenantId?: string;
    // (undocumented)
    snapshotStorageUrl: string;
    socketToken?: string;
    // (undocumented)
    tenantId: string;
}

// @internal
export const isTokenFromCache: (tokenResponse: string | TokenResponse | null) => boolean | undefined;

// @alpha (undocumented)
export type OdspError = IOdspError | (DriverError & IOdspErrorAugmentations);

// @alpha @deprecated
export enum OdspErrorType {
    blockedIPAddress = "blockedIPAddress",
    cannotCatchUp = "cannotCatchUp",
    fetchTimeout = "fetchTimeout",
    // (undocumented)
    fetchTokenError = "fetchTokenError",
    fluidNotEnabled = "fluidNotEnabled",
    invalidFileNameError = "invalidFileNameError",
    outOfStorageError = "outOfStorageError",
    serviceReadOnly = "serviceReadOnly",
    snapshotTooBig = "snapshotTooBig"
}

// @alpha
export const OdspErrorTypes: {
    readonly invalidFileNameError: "invalidFileNameError";
    readonly snapshotTooBig: "snapshotTooBig";
    readonly fetchTimeout: "fetchTimeout";
    readonly fluidNotEnabled: "fluidNotEnabled";
    readonly cannotCatchUp: "cannotCatchUp";
    readonly serviceReadOnly: "serviceReadOnly";
    readonly blockedIPAddress: "blockedIPAddress";
    readonly genericNetworkError: "genericNetworkError";
    readonly authorizationError: "authorizationError";
    readonly fileNotFoundOrAccessDeniedError: "fileNotFoundOrAccessDeniedError";
    readonly offlineError: "offlineError";
    readonly unsupportedClientProtocolVersion: "unsupportedClientProtocolVersion";
    readonly writeError: "writeError";
    readonly fetchFailure: "fetchFailure";
    readonly fetchTokenError: "fetchTokenError";
    readonly incorrectServerResponse: "incorrectServerResponse";
    readonly fileOverwrittenInStorage: "fileOverwrittenInStorage";
    readonly deltaStreamConnectionForbidden: "deltaStreamConnectionForbidden";
    readonly locationRedirection: "locationRedirection";
    readonly fluidInvalidSchema: "fluidInvalidSchema";
    readonly fileIsLocked: "fileIsLocked";
    readonly outOfStorageError: "outOfStorageError";
    readonly genericError: "genericError";
    readonly throttlingError: "throttlingError";
    readonly usageError: "usageError";
};

// @alpha (undocumented)
export type OdspErrorTypes = (typeof OdspErrorTypes)[keyof typeof OdspErrorTypes];

// @alpha
export interface OdspResourceTokenFetchOptions extends TokenFetchOptions {
    driveId?: string;
    itemId?: string;
    siteUrl: string;
}

// @alpha
export interface ShareLinkInfoType {
    createLink?: {
        type?: ShareLinkTypes | ISharingLinkKind;
        link?: string | ISharingLink;
        error?: any;
        shareId?: string;
    };
    sharingLinkToRedeem?: string;
}

// @alpha @deprecated (undocumented)
export enum ShareLinkTypes {
    // (undocumented)
    csl = "csl"
}

// @alpha
export enum SharingLinkRole {
    // (undocumented)
    edit = "edit",
    // (undocumented)
    view = "view"
}

// @alpha
export enum SharingLinkScope {
    // (undocumented)
    anonymous = "anonymous",
    // (undocumented)
    default = "default",
    // (undocumented)
    organization = "organization",
    // (undocumented)
    users = "users"
}

// @internal
export const snapshotKey = "snapshot";

// @alpha
export type TokenFetcher<T> = (options: T) => Promise<string | TokenResponse | null>;

// @alpha
export interface TokenFetchOptions {
    claims?: string;
    refresh: boolean;
    tenantId?: string;
}

// @internal
export const tokenFromResponse: (tokenResponse: string | TokenResponse | null | undefined) => string | null;

// @beta
export interface TokenResponse {
    fromCache?: boolean;
    token: string;
}

// (No @packageDocumentation comment for this package)

```
