## Alpha API Report File for "@fluidframework/odsp-driver"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

// @alpha
export function checkUrl(documentUrl: URL): DriverPreCheckInfo | undefined;

// @alpha
export function createLocalOdspDocumentServiceFactory(localSnapshot: Uint8Array | string): IDocumentServiceFactory;

// @alpha
export function createOdspCreateContainerRequest(siteUrl: string, driveId: string, filePath: string, fileName: string, createShareLinkType?: ISharingLinkKind): IRequest;

// @alpha
export function createOdspUrl(l: OdspFluidDataStoreLocator): string;

// @alpha
export function encodeOdspFluidDataStoreLocator(locator: OdspFluidDataStoreLocator): string;

// @alpha
export class EpochTracker implements IPersistedFileCache {
    constructor(cache: IPersistedCache, fileEntry: IFileEntry, logger: ITelemetryLoggerExt, clientIsSummarizer?: boolean | undefined);
    // (undocumented)
    protected readonly cache: IPersistedCache;
    // (undocumented)
    protected readonly clientIsSummarizer?: boolean | undefined;
    fetch(url: string, fetchOptions: RequestInit, fetchType: FetchType, addInBody?: boolean, fetchReason?: string): Promise<IOdspResponse<Response>>;
    fetchAndParseAsJSON<T>(url: string, fetchOptions: RequestInit, fetchType: FetchType, addInBody?: boolean, fetchReason?: string): Promise<IOdspResponse<T>>;
    fetchArray(url: string, fetchOptions: {
        [index: string]: RequestInit;
    }, fetchType: FetchType, addInBody?: boolean, fetchReason?: string): Promise<IOdspResponse<ArrayBuffer>>;
    // (undocumented)
    protected readonly fileEntry: IFileEntry;
    // (undocumented)
    get fluidEpoch(): string | undefined;
    // (undocumented)
    get(entry: IEntry): Promise<any>;
    // (undocumented)
    protected readonly logger: ITelemetryLoggerExt;
    // (undocumented)
    put(entry: IEntry, value: any): Promise<void>;
    // (undocumented)
    readonly rateLimiter: RateLimiter;
    // (undocumented)
    removeEntries(): Promise<void>;
    // (undocumented)
    setEpoch(epoch: string, fromCache: boolean, fetchType: FetchTypeInternal): void;
    // (undocumented)
    validateEpoch(epoch: string | undefined, fetchType: FetchType): Promise<void>;
    // (undocumented)
    protected validateEpochFromResponse(epochFromResponse: string | undefined, fetchType: FetchTypeInternal, fromCache?: boolean): void;
}

// @alpha (undocumented)
export type FetchType = "blob" | "createBlob" | "createFile" | "joinSession" | "ops" | "test" | "snapshotTree" | "treesLatest" | "uploadSummary" | "push" | "versions";

// @alpha (undocumented)
export type FetchTypeInternal = FetchType | "cache";

// @alpha
export function getHashedDocumentId(driveId: string, itemId: string): Promise<string>;

// @alpha
export function getLocatorFromOdspUrl(url: URL, requireFluidSignature?: boolean): OdspFluidDataStoreLocator | undefined;

// @alpha (undocumented)
export interface ICacheAndTracker {
    // (undocumented)
    cache: IOdspCache;
    // (undocumented)
    epochTracker: EpochTracker;
}

// @alpha
export interface INonPersistentCache {
    readonly fileUrlCache: PromiseCache<string, IOdspResolvedUrl>;
    readonly sessionJoinCache: PromiseCache<string, {
        entryTime: number;
        joinSessionResponse: ISocketStorageDiscovery;
    }>;
    readonly snapshotPrefetchResultCache: PromiseCache<string, IPrefetchSnapshotContents>;
}

// @alpha
export interface IOdspCache extends INonPersistentCache {
    readonly persistedCache: IPersistedFileCache;
}

// @alpha (undocumented)
export interface IOdspResponse<T> {
    // (undocumented)
    content: T;
    // (undocumented)
    duration: number;
    // (undocumented)
    headers: Map<string, string>;
    // (undocumented)
    propsToLog: ITelemetryBaseProperties;
}

// @alpha
export interface IPersistedFileCache {
    // (undocumented)
    get(entry: IEntry): Promise<any>;
    // (undocumented)
    put(entry: IEntry, value: any): Promise<void>;
    // (undocumented)
    removeEntries(): Promise<void>;
}

// @alpha (undocumented)
export interface IPrefetchSnapshotContents extends ISnapshot {
    // (undocumented)
    fluidEpoch: string;
    // (undocumented)
    prefetchStartTime: number;
}

// @alpha @deprecated (undocumented)
export interface ISnapshotContents {
    // (undocumented)
    blobs: Map<string, ArrayBuffer>;
    latestSequenceNumber: number | undefined;
    // (undocumented)
    ops: ISequencedDocumentMessage[];
    sequenceNumber: number | undefined;
    // (undocumented)
    snapshotTree: ISnapshotTree;
}

// @alpha
export const locatorQueryParamName = "nav";

// @alpha (undocumented)
export const OdcApiSiteOrigin = "https://my.microsoftpersonalcontent.com";

// @alpha (undocumented)
export const OdcFileSiteOrigin = "https://1drv.ms";

// @alpha
export class OdspDocumentServiceFactory extends OdspDocumentServiceFactoryCore {
    constructor(getStorageToken: TokenFetcher<OdspResourceTokenFetchOptions>, getWebsocketToken: TokenFetcher<OdspResourceTokenFetchOptions> | undefined, persistedCache?: IPersistedCache, hostPolicy?: HostStoragePolicy);
}

// @alpha
export class OdspDocumentServiceFactoryCore implements IDocumentServiceFactory, IRelaySessionAwareDriverFactory {
    constructor(getStorageToken: TokenFetcher<OdspResourceTokenFetchOptions>, getWebsocketToken: TokenFetcher<OdspResourceTokenFetchOptions> | undefined, persistedCache?: IPersistedCache, hostPolicy?: HostStoragePolicy);
    // (undocumented)
    createContainer(createNewSummary: ISummaryTree | undefined, createNewResolvedUrl: IResolvedUrl, logger?: ITelemetryBaseLogger, clientIsSummarizer?: boolean): Promise<IDocumentService>;
    // (undocumented)
    createDocumentService(resolvedUrl: IResolvedUrl, logger?: ITelemetryBaseLogger, clientIsSummarizer?: boolean): Promise<IDocumentService>;
    // (undocumented)
    protected createDocumentServiceCore(resolvedUrl: IResolvedUrl, odspLogger: ITelemetryBaseLogger, cacheAndTrackerArg?: ICacheAndTracker, clientIsSummarizer?: boolean): Promise<IDocumentService>;
    getRelayServiceSessionInfo(resolvedUrl: IResolvedUrl): Promise<ISocketStorageDiscovery | undefined>;
    // (undocumented)
    get IRelaySessionAwareDriverFactory(): this;
    // (undocumented)
    protected persistedCache: IPersistedCache;
    // (undocumented)
    get snapshotPrefetchResultCache(): PromiseCache<string, IPrefetchSnapshotContents>;
}

// @alpha
export class OdspDriverUrlResolver implements IUrlResolver {
    constructor();
    getAbsoluteUrl(resolvedUrl: IResolvedUrl, relativeUrl: string, packageInfoSource?: IContainerPackageInfo): Promise<string>;
    resolve(request: IRequest): Promise<IOdspResolvedUrl>;
}

// @alpha
export class OdspDriverUrlResolverForShareLink implements IUrlResolver {
    constructor(shareLinkFetcherProps?: ShareLinkFetcherProps | undefined, logger?: ITelemetryBaseLogger, appName?: string | undefined, getContext?: ((resolvedUrl: IOdspResolvedUrl, dataStorePath: string) => Promise<string | undefined>) | undefined);
    appendDataStorePath(requestUrl: URL, pathToAppend: string): string | undefined;
    appendLocatorParams(baseUrl: string, resolvedUrl: IResolvedUrl, dataStorePath: string, packageInfoSource?: IContainerPackageInfo): Promise<string>;
    static createDocumentUrl(baseUrl: string, driverInfo: OdspFluidDataStoreLocator): string;
    getAbsoluteUrl(resolvedUrl: IResolvedUrl, dataStorePath: string, packageInfoSource?: IContainerPackageInfo): Promise<string>;
    resolve(request: IRequest): Promise<IOdspResolvedUrl>;
}

// @alpha (undocumented)
export interface OdspFluidDataStoreLocator extends IOdspUrlParts {
    // (undocumented)
    appName?: string;
    // (undocumented)
    containerPackageName?: string;
    // (undocumented)
    context?: string;
    // (undocumented)
    dataStorePath: string;
    // (undocumented)
    fileVersion?: string;
}

// @alpha @deprecated
export function prefetchLatestSnapshot(resolvedUrl: IResolvedUrl, getStorageToken: TokenFetcher<OdspResourceTokenFetchOptions>, persistedCache: IPersistedCache, forceAccessTokenViaAuthorizationHeader: boolean, logger: ITelemetryBaseLogger, hostSnapshotFetchOptions: ISnapshotOptions | undefined, enableRedeemFallback?: boolean, fetchBinarySnapshotFormat?: boolean, snapshotFormatFetchType?: SnapshotFormatSupportType, odspDocumentServiceFactory?: OdspDocumentServiceFactory): Promise<boolean>;

// @alpha
export interface ShareLinkFetcherProps {
    identityType: IdentityType;
    tokenFetcher: TokenFetcher<OdspResourceTokenFetchOptions>;
}

// @alpha
export enum SnapshotFormatSupportType {
    // (undocumented)
    Binary = 1,
    // (undocumented)
    Json = 0,
    // (undocumented)
    JsonAndBinary = 2
}

// @alpha
export function storeLocatorInOdspUrl(url: URL, locator: OdspFluidDataStoreLocator): void;

// (No @packageDocumentation comment for this package)

```
