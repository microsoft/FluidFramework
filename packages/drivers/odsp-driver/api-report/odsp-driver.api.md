## API Report File for "@fluidframework/odsp-driver"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { DriverPreCheckInfo } from '@fluidframework/driver-definitions';
import { HostStoragePolicy } from '@fluidframework/odsp-driver-definitions';
import { IContainerPackageInfo } from '@fluidframework/driver-definitions';
import { IdentityType } from '@fluidframework/odsp-driver-definitions';
import { IDocumentService } from '@fluidframework/driver-definitions';
import { IDocumentServiceFactory } from '@fluidframework/driver-definitions';
import { IEntry } from '@fluidframework/odsp-driver-definitions';
import { IFileEntry } from '@fluidframework/odsp-driver-definitions';
import { IOdspResolvedUrl } from '@fluidframework/odsp-driver-definitions';
import { IOdspUrlParts } from '@fluidframework/odsp-driver-definitions';
import { IPersistedCache } from '@fluidframework/odsp-driver-definitions';
import { IPrefetchSnapshotContents as IPrefetchSnapshotContents_2 } from './odspCache';
import { IRelaySessionAwareDriverFactory } from '@fluidframework/odsp-driver-definitions';
import { IRequest } from '@fluidframework/core-interfaces';
import { IResolvedUrl } from '@fluidframework/driver-definitions';
import { ISequencedDocumentMessage } from '@fluidframework/protocol-definitions';
import { ISharingLinkKind } from '@fluidframework/odsp-driver-definitions';
import { ISnapshotOptions } from '@fluidframework/odsp-driver-definitions';
import { ISnapshotTree } from '@fluidframework/protocol-definitions';
import { ISocketStorageDiscovery } from '@fluidframework/odsp-driver-definitions';
import { ISummaryTree } from '@fluidframework/protocol-definitions';
import { ITelemetryBaseLogger } from '@fluidframework/core-interfaces';
import { ITelemetryLogger } from '@fluidframework/core-interfaces';
import { ITelemetryLoggerExt } from '@fluidframework/telemetry-utils';
import { ITelemetryProperties } from '@fluidframework/core-interfaces';
import { IUrlResolver } from '@fluidframework/driver-definitions';
import { OdspResourceTokenFetchOptions } from '@fluidframework/odsp-driver-definitions';
import { PromiseCache } from '@fluidframework/core-utils';
import { RateLimiter } from '@fluidframework/driver-utils';
import { ShareLinkTypes } from '@fluidframework/odsp-driver-definitions';
import { TokenFetcher } from '@fluidframework/odsp-driver-definitions';

// @public
export function checkUrl(documentUrl: URL): DriverPreCheckInfo | undefined;

// @public (undocumented)
export enum ClpCompliantAppHeader {
    // (undocumented)
    isClpCompliantApp = "X-CLP-Compliant-App"
}

// @public (undocumented)
export function createLocalOdspDocumentServiceFactory(localSnapshot: Uint8Array | string): IDocumentServiceFactory;

// @public
export function createOdspCreateContainerRequest(siteUrl: string, driveId: string, filePath: string, fileName: string, createShareLinkType?: ShareLinkTypes | ISharingLinkKind): IRequest;

// @public
export function createOdspUrl(l: OdspFluidDataStoreLocator): string;

// @public
export function encodeOdspFluidDataStoreLocator(locator: OdspFluidDataStoreLocator): string;

// @public
export class EpochTracker implements IPersistedFileCache {
    constructor(cache: IPersistedCache, fileEntry: IFileEntry, logger: ITelemetryLoggerExt, clientIsSummarizer?: boolean | undefined);
    // (undocumented)
    protected readonly cache: IPersistedCache;
    // (undocumented)
    protected readonly clientIsSummarizer?: boolean | undefined;
    fetch(url: string, fetchOptions: RequestInit, fetchType: FetchType, addInBody?: boolean, fetchReason?: string): Promise<IOdspResponse<Response>>;
    fetchAndParseAsJSON<T>(url: string, fetchOptions: RequestInit, fetchType: FetchType, addInBody?: boolean, fetchReason?: string): Promise<IOdspResponse<T>>;
    fetchArray(url: string, fetchOptions: {
        [index: string]: any;
    }, fetchType: FetchType, addInBody?: boolean, fetchReason?: string): Promise<IOdspResponse<ArrayBuffer>>;
    // (undocumented)
    protected readonly fileEntry: IFileEntry;
    // (undocumented)
    get fluidEpoch(): string | undefined;
    // (undocumented)
    get(entry: IEntry): Promise<any>;
    // (undocumented)
    protected readonly logger: ITelemetryLoggerExt;
    // (undocumented)
    put(entry: IEntry, value: any): Promise<void>;
    // (undocumented)
    readonly rateLimiter: RateLimiter;
    // (undocumented)
    removeEntries(): Promise<void>;
    // (undocumented)
    setEpoch(epoch: string, fromCache: boolean, fetchType: FetchTypeInternal): void;
    // (undocumented)
    validateEpoch(epoch: string | undefined, fetchType: FetchType): Promise<void>;
    // (undocumented)
    protected validateEpochFromResponse(epochFromResponse: string | undefined, fetchType: FetchTypeInternal, fromCache?: boolean): void;
}

// @public (undocumented)
export type FetchType = "blob" | "createBlob" | "createFile" | "joinSession" | "ops" | "test" | "snapshotTree" | "treesLatest" | "uploadSummary" | "push" | "versions";

// @public (undocumented)
export type FetchTypeInternal = FetchType | "cache";

// @public
export function getApiRoot(origin: string): string;

// @public (undocumented)
export function getHashedDocumentId(driveId: string, itemId: string): Promise<string>;

// @public
export function getLocatorFromOdspUrl(url: URL, requireFluidSignature?: boolean): OdspFluidDataStoreLocator | undefined;

// @public
export function getOdspUrlParts(url: URL): Promise<IOdspUrlParts | undefined>;

// @public (undocumented)
export interface ICacheAndTracker {
    // (undocumented)
    cache: IOdspCache;
    // (undocumented)
    epochTracker: EpochTracker;
}

// @public (undocumented)
export interface IClpCompliantAppHeader {
    // (undocumented)
    [ClpCompliantAppHeader.isClpCompliantApp]: boolean;
}

// @public
export interface INonPersistentCache {
    readonly fileUrlCache: PromiseCache<string, IOdspResolvedUrl>;
    readonly sessionJoinCache: PromiseCache<string, {
        entryTime: number;
        joinSessionResponse: ISocketStorageDiscovery;
    }>;
    readonly snapshotPrefetchResultCache: PromiseCache<string, IPrefetchSnapshotContents>;
}

// @public
export interface IOdspCache extends INonPersistentCache {
    readonly persistedCache: IPersistedFileCache;
}

// @public (undocumented)
export interface IOdspResponse<T> {
    // (undocumented)
    content: T;
    // (undocumented)
    duration: number;
    // (undocumented)
    headers: Map<string, string>;
    // (undocumented)
    propsToLog: ITelemetryProperties;
}

// @public
export interface IPersistedFileCache {
    // (undocumented)
    get(entry: IEntry): Promise<any>;
    // (undocumented)
    put(entry: IEntry, value: any): Promise<void>;
    // (undocumented)
    removeEntries(): Promise<void>;
}

// @public (undocumented)
export interface IPrefetchSnapshotContents extends ISnapshotContents {
    // (undocumented)
    fluidEpoch: string;
    // (undocumented)
    prefetchStartTime: number;
}

// @public (undocumented)
export interface ISharingLinkHeader {
    // (undocumented)
    [SharingLinkHeader.isSharingLinkToRedeem]: boolean;
}

// @public (undocumented)
export interface ISnapshotContents {
    // (undocumented)
    blobs: Map<string, ArrayBuffer>;
    latestSequenceNumber: number | undefined;
    // (undocumented)
    ops: ISequencedDocumentMessage[];
    sequenceNumber: number | undefined;
    // (undocumented)
    snapshotTree: ISnapshotTree;
}

// @public
export interface ISnapshotContentsWithProps extends ISnapshotContents {
    // (undocumented)
    telemetryProps: Record<string, number>;
}

// @public
export function isOdcOrigin(origin: string): boolean;

// @public
export function isOdcUrl(url: string | URL): boolean;

// @public (undocumented)
export function isOdspResolvedUrl(resolvedUrl: IResolvedUrl): resolvedUrl is IOdspResolvedUrl;

// @public
export function isSpoUrl(url: string): boolean;

// @public
export const locatorQueryParamName = "nav";

// @public (undocumented)
export const OdcApiSiteOrigin = "https://my.microsoftpersonalcontent.com";

// @public (undocumented)
export const OdcFileSiteOrigin = "https://1drv.ms";

// @public
export class OdspDocumentServiceFactory extends OdspDocumentServiceFactoryCore {
    constructor(getStorageToken: TokenFetcher<OdspResourceTokenFetchOptions>, getWebsocketToken: TokenFetcher<OdspResourceTokenFetchOptions> | undefined, persistedCache?: IPersistedCache, hostPolicy?: HostStoragePolicy);
}

// @public
export class OdspDocumentServiceFactoryCore implements IDocumentServiceFactory, IRelaySessionAwareDriverFactory {
    constructor(getStorageToken: TokenFetcher<OdspResourceTokenFetchOptions>, getWebsocketToken: TokenFetcher<OdspResourceTokenFetchOptions> | undefined, persistedCache?: IPersistedCache, hostPolicy?: HostStoragePolicy);
    // (undocumented)
    createContainer(createNewSummary: ISummaryTree | undefined, createNewResolvedUrl: IResolvedUrl, logger?: ITelemetryBaseLogger, clientIsSummarizer?: boolean): Promise<IDocumentService>;
    // (undocumented)
    createDocumentService(resolvedUrl: IResolvedUrl, logger?: ITelemetryBaseLogger, clientIsSummarizer?: boolean): Promise<IDocumentService>;
    // (undocumented)
    protected createDocumentServiceCore(resolvedUrl: IResolvedUrl, odspLogger: ITelemetryLogger, cacheAndTrackerArg?: ICacheAndTracker, clientIsSummarizer?: boolean): Promise<IDocumentService>;
    getRelayServiceSessionInfo(resolvedUrl: IResolvedUrl): Promise<ISocketStorageDiscovery | undefined>;
    // (undocumented)
    get IRelaySessionAwareDriverFactory(): this;
    // (undocumented)
    protected persistedCache: IPersistedCache;
    // (undocumented)
    get snapshotPrefetchResultCache(): PromiseCache<string, IPrefetchSnapshotContents_2>;
}

// @public @deprecated (undocumented)
export class OdspDocumentServiceFactoryWithCodeSplit extends OdspDocumentServiceFactoryCore implements IDocumentServiceFactory {
    constructor(getStorageToken: TokenFetcher<OdspResourceTokenFetchOptions>, getWebsocketToken: TokenFetcher<OdspResourceTokenFetchOptions> | undefined, persistedCache?: IPersistedCache, hostPolicy?: HostStoragePolicy);
}

// @public
export class OdspDriverUrlResolver implements IUrlResolver {
    constructor();
    getAbsoluteUrl(resolvedUrl: IResolvedUrl, relativeUrl: string, packageInfoSource?: IContainerPackageInfo): Promise<string>;
    // (undocumented)
    resolve(request: IRequest): Promise<IOdspResolvedUrl>;
}

// @public
export class OdspDriverUrlResolverForShareLink implements IUrlResolver {
    constructor(shareLinkFetcherProps?: ShareLinkFetcherProps | undefined, logger?: ITelemetryBaseLogger, appName?: string | undefined, getContext?: ((resolvedUrl: IOdspResolvedUrl, dataStorePath: string) => Promise<string | undefined>) | undefined);
    appendDataStorePath(requestUrl: URL, pathToAppend: string): string | undefined;
    static createDocumentUrl(baseUrl: string, driverInfo: OdspFluidDataStoreLocator): string;
    // @deprecated
    static createNavParam(locator: OdspFluidDataStoreLocator): string;
    getAbsoluteUrl(resolvedUrl: IResolvedUrl, dataStorePath: string, packageInfoSource?: IContainerPackageInfo): Promise<string>;
    resolve(request: IRequest): Promise<IOdspResolvedUrl>;
}

// @public (undocumented)
export interface OdspFluidDataStoreLocator extends IOdspUrlParts {
    // (undocumented)
    appName?: string;
    // (undocumented)
    containerPackageName?: string;
    // (undocumented)
    context?: string;
    // (undocumented)
    dataStorePath: string;
    // (undocumented)
    fileVersion?: string;
}

// @public
export function parseCompactSnapshotResponse(buffer: Uint8Array, logger: ITelemetryLoggerExt): ISnapshotContentsWithProps;

// @public
export function prefetchLatestSnapshot(resolvedUrl: IResolvedUrl, getStorageToken: TokenFetcher<OdspResourceTokenFetchOptions>, persistedCache: IPersistedCache, forceAccessTokenViaAuthorizationHeader: boolean, logger: ITelemetryBaseLogger, hostSnapshotFetchOptions: ISnapshotOptions | undefined, enableRedeemFallback?: boolean, fetchBinarySnapshotFormat?: boolean, snapshotFormatFetchType?: SnapshotFormatSupportType, odspDocumentServiceFactory?: OdspDocumentServiceFactory): Promise<boolean>;

// @public
export interface ShareLinkFetcherProps {
    identityType: IdentityType;
    tokenFetcher: TokenFetcher<OdspResourceTokenFetchOptions>;
}

// @public (undocumented)
export enum SharingLinkHeader {
    // (undocumented)
    isSharingLinkToRedeem = "isSharingLinkToRedeem"
}

// @public
export enum SnapshotFormatSupportType {
    // (undocumented)
    Binary = 1,
    // (undocumented)
    Json = 0,
    // (undocumented)
    JsonAndBinary = 2
}

// @public
export function storeLocatorInOdspUrl(url: URL, locator: OdspFluidDataStoreLocator): void;

// Warnings were encountered during analysis:
//
// src/compactSnapshotParser.ts:33:2 - (ae-undocumented) Missing documentation for "telemetryProps".
// src/constants.ts:9:14 - (ae-undocumented) Missing documentation for "OdcApiSiteOrigin".
// src/constants.ts:14:14 - (ae-undocumented) Missing documentation for "OdcFileSiteOrigin".
// src/contractsPublic.ts:11:1 - (ae-undocumented) Missing documentation for "OdspFluidDataStoreLocator".
// src/contractsPublic.ts:12:2 - (ae-undocumented) Missing documentation for "dataStorePath".
// src/contractsPublic.ts:13:2 - (ae-undocumented) Missing documentation for "appName".
// src/contractsPublic.ts:14:2 - (ae-undocumented) Missing documentation for "containerPackageName".
// src/contractsPublic.ts:15:2 - (ae-undocumented) Missing documentation for "fileVersion".
// src/contractsPublic.ts:16:2 - (ae-undocumented) Missing documentation for "context".
// src/contractsPublic.ts:22:1 - (ae-undocumented) Missing documentation for "SharingLinkHeader".
// src/contractsPublic.ts:25:2 - (ae-undocumented) Missing documentation for "isSharingLinkToRedeem".
// src/contractsPublic.ts:31:1 - (ae-undocumented) Missing documentation for "ISharingLinkHeader".
// src/contractsPublic.ts:32:2 - (ae-undocumented) Missing documentation for "isSharingLinkToRedeem".
// src/contractsPublic.ts:37:1 - (ae-undocumented) Missing documentation for "ClpCompliantAppHeader".
// src/contractsPublic.ts:40:2 - (ae-undocumented) Missing documentation for "isClpCompliantApp".
// src/contractsPublic.ts:46:1 - (ae-undocumented) Missing documentation for "IClpCompliantAppHeader".
// src/contractsPublic.ts:47:2 - (ae-undocumented) Missing documentation for ""X-CLP-Compliant-App"".
// src/epochTracker.ts:49:1 - (ae-undocumented) Missing documentation for "FetchType".
// src/epochTracker.ts:65:1 - (ae-undocumented) Missing documentation for "FetchTypeInternal".
// src/epochTracker.ts:92:2 - (ae-undocumented) Missing documentation for "rateLimiter".
// src/epochTracker.ts:97:3 - (ae-undocumented) Missing documentation for "cache".
// src/epochTracker.ts:98:3 - (ae-undocumented) Missing documentation for "fileEntry".
// src/epochTracker.ts:99:3 - (ae-undocumented) Missing documentation for "logger".
// src/epochTracker.ts:100:3 - (ae-undocumented) Missing documentation for "clientIsSummarizer".
// src/epochTracker.ts:114:9 - (ae-undocumented) Missing documentation for "setEpoch".
// src/epochTracker.ts:126:15 - (ae-undocumented) Missing documentation for "get".
// src/epochTracker.ts:171:15 - (ae-undocumented) Missing documentation for "put".
// src/epochTracker.ts:189:15 - (ae-undocumented) Missing documentation for "removeEntries".
// src/epochTracker.ts:197:2 - (ae-undocumented) Missing documentation for "fluidEpoch".
// src/epochTracker.ts:201:15 - (ae-undocumented) Missing documentation for "validateEpoch".
// src/epochTracker.ts:417:2 - (ae-undocumented) Missing documentation for "validateEpochFromResponse".
// src/epochTracker.ts:608:1 - (ae-undocumented) Missing documentation for "ICacheAndTracker".
// src/epochTracker.ts:609:2 - (ae-undocumented) Missing documentation for "cache".
// src/epochTracker.ts:610:2 - (ae-undocumented) Missing documentation for "epochTracker".
// src/fetchSnapshot.ts:62:2 - (ae-undocumented) Missing documentation for "Json".
// src/fetchSnapshot.ts:63:2 - (ae-undocumented) Missing documentation for "Binary".
// src/fetchSnapshot.ts:64:2 - (ae-undocumented) Missing documentation for "JsonAndBinary".
// src/odspCache.ts:22:2 - (ae-undocumented) Missing documentation for "get".
// src/odspCache.ts:23:2 - (ae-undocumented) Missing documentation for "put".
// src/odspCache.ts:24:2 - (ae-undocumented) Missing documentation for "removeEntries".
// src/odspCache.ts:145:1 - (ae-undocumented) Missing documentation for "IPrefetchSnapshotContents".
// src/odspCache.ts:146:2 - (ae-undocumented) Missing documentation for "fluidEpoch".
// src/odspCache.ts:147:2 - (ae-undocumented) Missing documentation for "prefetchStartTime".
// src/odspDocumentServiceFactory.ts:36:1 - (ae-undocumented) Missing documentation for "createLocalOdspDocumentServiceFactory".
// src/odspDocumentServiceFactoryCore.ts:61:2 - (ae-undocumented) Missing documentation for "snapshotPrefetchResultCache".
// src/odspDocumentServiceFactoryCore.ts:65:2 - (ae-undocumented) Missing documentation for "IRelaySessionAwareDriverFactory".
// src/odspDocumentServiceFactoryCore.ts:85:15 - (ae-undocumented) Missing documentation for "createContainer".
// src/odspDocumentServiceFactoryCore.ts:239:3 - (ae-undocumented) Missing documentation for "persistedCache".
// src/odspDocumentServiceFactoryCore.ts:254:15 - (ae-undocumented) Missing documentation for "createDocumentService".
// src/odspDocumentServiceFactoryCore.ts:258:30 - (ae-undocumented) Missing documentation for "createDocumentServiceCore".
// src/odspDocumentServiceFactoryWithCodeSplit.ts:20:1 - (ae-undocumented) Missing documentation for "OdspDocumentServiceFactoryWithCodeSplit".
// src/odspDriverUrlResolver.ts:88:15 - (ae-undocumented) Missing documentation for "resolve".
// src/odspPublicUtils.ts:12:1 - (ae-undocumented) Missing documentation for "getHashedDocumentId".
// src/odspPublicUtils.ts:20:1 - (ae-undocumented) Missing documentation for "ISnapshotContents".
// src/odspPublicUtils.ts:21:2 - (ae-undocumented) Missing documentation for "snapshotTree".
// src/odspPublicUtils.ts:22:2 - (ae-undocumented) Missing documentation for "blobs".
// src/odspPublicUtils.ts:23:2 - (ae-undocumented) Missing documentation for "ops".
// src/odspUtils.ts:56:1 - (ae-undocumented) Missing documentation for "IOdspResponse".
// src/odspUtils.ts:57:2 - (ae-undocumented) Missing documentation for "content".
// src/odspUtils.ts:58:2 - (ae-undocumented) Missing documentation for "headers".
// src/odspUtils.ts:59:2 - (ae-undocumented) Missing documentation for "propsToLog".
// src/odspUtils.ts:60:2 - (ae-undocumented) Missing documentation for "duration".
// src/odspUtils.ts:311:1 - (ae-undocumented) Missing documentation for "isOdspResolvedUrl".

// (No @packageDocumentation comment for this package)

```
