## API Report File for "@fluidframework/runtime-utils"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { fluidHandleSymbol } from '@fluidframework/core-interfaces';
import { IChannelStorageService } from '@fluidframework/datastore-definitions/internal';
import { IContainerContext } from '@fluidframework/container-definitions/internal';
import { IContainerRuntime } from '@fluidframework/container-runtime-definitions/internal';
import type { IDeltaManager } from '@fluidframework/container-definitions/internal';
import type { IDeltaManagerErased } from '@fluidframework/datastore-definitions/internal';
import type { IDocumentMessage } from '@fluidframework/driver-definitions/internal';
import { IFluidDataStoreFactory } from '@fluidframework/runtime-definitions/internal';
import { IFluidDataStoreRegistry } from '@fluidframework/runtime-definitions/internal';
import { IFluidHandle } from '@fluidframework/core-interfaces';
import { IFluidHandleContext } from '@fluidframework/core-interfaces/internal';
import type { IFluidHandleErased } from '@fluidframework/core-interfaces';
import type { IFluidHandleInternal } from '@fluidframework/core-interfaces/internal';
import { IGarbageCollectionData } from '@fluidframework/runtime-definitions/internal';
import { IProvideFluidDataStoreRegistry } from '@fluidframework/runtime-definitions/internal';
import { IRequest } from '@fluidframework/core-interfaces';
import { IRequestHeader } from '@fluidframework/core-interfaces';
import { IResponse } from '@fluidframework/core-interfaces';
import { IRuntime } from '@fluidframework/container-definitions/internal';
import { IRuntimeFactory } from '@fluidframework/container-definitions/internal';
import type { ISequencedDocumentMessage } from '@fluidframework/driver-definitions';
import { ISnapshotTree } from '@fluidframework/driver-definitions/internal';
import { ISnapshotTreeWithBlobContents } from '@fluidframework/container-definitions/internal';
import { ISummarizeResult } from '@fluidframework/runtime-definitions/internal';
import { ISummaryBlob } from '@fluidframework/driver-definitions';
import { ISummaryStats } from '@fluidframework/runtime-definitions/internal';
import { ISummaryTree } from '@fluidframework/driver-definitions';
import { ISummaryTreeWithStats } from '@fluidframework/runtime-definitions/internal';
import { ITelemetryContext } from '@fluidframework/runtime-definitions/internal';
import { ITelemetryContextExt } from '@fluidframework/runtime-definitions/internal';
import { ITree } from '@fluidframework/driver-definitions/internal';
import { SummaryObject } from '@fluidframework/driver-definitions';
import { SummaryType } from '@fluidframework/driver-definitions';
import type { TelemetryEventPropertyTypeExt } from '@fluidframework/telemetry-utils/internal';

// @internal (undocumented)
export function addBlobToSummary(summary: ISummaryTreeWithStats, key: string, content: string | Uint8Array): void;

// @internal (undocumented)
export function addSummarizeResultToSummary(summary: ISummaryTreeWithStats, key: string, summarizeResult: ISummarizeResult): void;

// @internal (undocumented)
export function calculateStats(summary: SummaryObject): ISummaryStats;

// @internal
export function convertSnapshotTreeToSummaryTree(snapshot: ISnapshotTreeWithBlobContents): ISummaryTreeWithStats;

// @internal
export function convertSummaryTreeToITree(summaryTree: ISummaryTree): ITree;

// @internal
export function convertToSummaryTree(snapshot: ITree, fullTree?: boolean): ISummarizeResult;

// @alpha
export function convertToSummaryTreeWithStats(snapshot: ITree, fullTree?: boolean): ISummaryTreeWithStats;

// @alpha (undocumented)
export const create404Response: (request: IRequest) => IResponse;

// @internal (undocumented)
export function createDataStoreFactory(type: string, factory: Factory | Promise<Factory>): IFluidDataStoreFactory & IFluidDataStoreRegistry;

// @internal (undocumented)
export function createResponseError(status: number, value: string, request: IRequest, headers?: {
    [key: string]: any;
}): IResponse;

// @internal
export function encodeCompactIdToString(idArg: number | string, prefix?: string): string;

// @internal (undocumented)
export function exceptionToResponse(err: any): IResponse;

// @internal (undocumented)
export type Factory = IFluidDataStoreFactory & Partial<IProvideFluidDataStoreRegistry>;

// @alpha
export abstract class FluidHandleBase<T> implements IFluidHandleInternal<T> {
    // (undocumented)
    get [fluidHandleSymbol](): IFluidHandleErased<T>;
    // (undocumented)
    abstract absolutePath: string;
    // (undocumented)
    abstract attachGraph(): void;
    // (undocumented)
    abstract bind(handle: IFluidHandleInternal): void;
    // (undocumented)
    abstract get(): Promise<T>;
    get IFluidHandle(): IFluidHandleInternal;
    // (undocumented)
    abstract readonly isAttached: boolean;
}

// @internal
export class GCDataBuilder implements IGarbageCollectionData {
    // (undocumented)
    addNode(id: string, outboundRoutes: string[]): void;
    // (undocumented)
    addNodes(gcNodes: {
        [id: string]: string[];
    }): void;
    addRouteToAllNodes(outboundRoute: string): void;
    // (undocumented)
    get gcNodes(): {
        [id: string]: string[];
    };
    // (undocumented)
    getGCData(): IGarbageCollectionData;
    prefixAndAddNodes(prefixId: string, gcNodes: {
        [id: string]: string[];
    }): void;
}

// @internal
export function generateHandleContextPath(path: string, routeContext?: IFluidHandleContext): string;

// @internal (undocumented)
export function getBlobSize(content: ISummaryBlob["content"]): number;

// @internal (undocumented)
export function getNormalizedObjectStoragePathParts(path: string): string[];

// @internal
export interface ISerializedHandle {
    // (undocumented)
    type: "__fluid_handle__";
    // (undocumented)
    url: string;
}

// @internal
export function isFluidHandle(value: unknown): value is IFluidHandle;

// @internal
export const isSerializedHandle: (value: any) => value is ISerializedHandle;

// @internal
export function isSnapshotFetchRequiredForLoadingGroupId(snapshotTree: ISnapshotTree, blobContents: Map<string, ArrayBuffer>): boolean;

// @internal (undocumented)
export function listBlobsAtTreePath(inputTree: ITree | undefined, path: string): Promise<string[]>;

// @internal
export function mergeStats(...stats: ISummaryStats[]): ISummaryStats;

// @internal
export class ObjectStoragePartition implements IChannelStorageService {
    constructor(storage: IChannelStorageService, path: string);
    // (undocumented)
    contains(path: string): Promise<boolean>;
    // (undocumented)
    list(path: string): Promise<string[]>;
    // (undocumented)
    readBlob(path: string): Promise<ArrayBufferLike>;
}

// @internal
export function processAttachMessageGCData(snapshot: ITree | null, addedGCOutboundRoute: (fromNodeId: string, toPath: string) => void): boolean;

// @internal
export type ReadAndParseBlob = <T>(id: string) => Promise<T>;

// @alpha
export class RequestParser implements IRequest {
    protected constructor(request: Readonly<IRequest>);
    // (undocumented)
    static create(request: Readonly<IRequest>): RequestParser;
    createSubRequest(startingPathIndex: number): IRequest;
    static getPathParts(url: string): readonly string[];
    // (undocumented)
    get headers(): IRequestHeader | undefined;
    isLeaf(elements: number): boolean;
    get pathParts(): readonly string[];
    // (undocumented)
    readonly query: string;
    // (undocumented)
    get url(): string;
}

// @internal (undocumented)
export function responseToException(response: IResponse, request: IRequest): Error;

// @alpha (undocumented)
export abstract class RuntimeFactoryHelper<T = IContainerRuntime> implements IRuntimeFactory {
    // (undocumented)
    hasInitialized(_runtime: T): Promise<void>;
    // (undocumented)
    instantiateFirstTime(_runtime: T): Promise<void>;
    // (undocumented)
    instantiateFromExisting(_runtime: T): Promise<void>;
    // (undocumented)
    instantiateRuntime(context: IContainerContext, existing: boolean): Promise<IRuntime>;
    // (undocumented)
    get IRuntimeFactory(): this;
    // (undocumented)
    abstract preInitialize(context: IContainerContext, existing: boolean): Promise<IRuntime & T>;
}

// @internal
export function seqFromTree(tree: ISnapshotTree, readAndParseBlob: ReadAndParseBlob): Promise<number>;

// @alpha (undocumented)
export class SummaryTreeBuilder implements ISummaryTreeWithStats {
    constructor();
    // (undocumented)
    addAttachment(id: string): void;
    // (undocumented)
    addBlob(key: string, content: string | Uint8Array): void;
    // (undocumented)
    addHandle(key: string, handleType: SummaryType.Tree | SummaryType.Blob | SummaryType.Attachment, handle: string): void;
    // (undocumented)
    addWithStats(key: string, summarizeResult: ISummarizeResult): void;
    // (undocumented)
    getSummaryTree(): ISummaryTreeWithStats;
    // (undocumented)
    get stats(): Readonly<ISummaryStats>;
    // (undocumented)
    get summary(): ISummaryTree;
}

// @internal (undocumented)
export class TelemetryContext implements ITelemetryContext, ITelemetryContextExt {
    get(prefix: string, property: string): TelemetryEventPropertyTypeExt;
    serialize(): string;
    set(prefix: string, property: string, value: TelemetryEventPropertyTypeExt): void;
    setMultiple(prefix: string, property: string, values: Record<string, TelemetryEventPropertyTypeExt>): void;
}

// @internal
export function toDeltaManagerErased(deltaManager: IDeltaManager<ISequencedDocumentMessage, IDocumentMessage>): IDeltaManagerErased;

// @alpha
export function toDeltaManagerInternal(deltaManager: IDeltaManagerErased): IDeltaManager<ISequencedDocumentMessage, IDocumentMessage>;

// @alpha
export function toFluidHandleErased<T>(handle: IFluidHandleInternal<T>): IFluidHandleErased<T>;

// @alpha
export function toFluidHandleInternal<T>(handle: IFluidHandle<T>): IFluidHandleInternal<T>;

// @internal
export function unpackChildNodesUsedRoutes(usedRoutes: readonly string[]): Map<string, string[]>;

// @internal (undocumented)
export function utf8ByteLength(str: string): number;

// (No @packageDocumentation comment for this package)

```
