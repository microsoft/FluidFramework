## Beta API Report File for "@fluidframework/container-loader"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

// @public
export enum ConnectionState {
    CatchingUp = 1,
    Connected = 2,
    Disconnected = 0,
    EstablishingConnection = 3
}

// @beta @legacy
export function createDetachedContainer(createDetachedContainerProps: ICreateDetachedContainerProps): Promise<IContainer>;

// @beta @legacy (undocumented)
export type EnqueueSummarizeResult<TSummaryOpMessage = unknown, TSummaryAckMessage = unknown, TSummaryNackMessage = unknown> = (ISummarizeResults<TSummaryOpMessage, TSummaryAckMessage, TSummaryNackMessage> & {
    readonly alreadyEnqueued?: undefined;
}) | (ISummarizeResults<TSummaryOpMessage, TSummaryAckMessage, TSummaryNackMessage> & {
    readonly alreadyEnqueued: true;
    readonly overridden: true;
}) | {
    readonly alreadyEnqueued: true;
    readonly overridden?: undefined;
};

// @beta @legacy (undocumented)
export interface IAckSummaryResult<TSummaryAckMessage = unknown> {
    // (undocumented)
    readonly ackNackDuration: number;
    // (undocumented)
    readonly summaryAckOp: TSummaryAckMessage;
}

// @beta @legacy (undocumented)
export interface IBaseProtocolHandler {
    // (undocumented)
    readonly attributes: IDocumentAttributes;
    // (undocumented)
    close(): void;
    // (undocumented)
    getProtocolState(): IScribeProtocolState;
    // (undocumented)
    processMessage(message: ISequencedDocumentMessage, local: boolean): IProcessMessageResult;
    // (undocumented)
    readonly quorum: IQuorum;
    // (undocumented)
    setConnectionState(connected: boolean, clientId: string | undefined): any;
    // (undocumented)
    snapshot(): IQuorumSnapshot;
}

// @beta @legacy
export interface IBaseSummarizeResult {
    readonly error: IRetriableFailureError | undefined;
    // (undocumented)
    readonly minimumSequenceNumber: number;
    readonly referenceSequenceNumber: number;
    // (undocumented)
    readonly stage: "base";
}

// @beta @legacy (undocumented)
export interface IBroadcastSummaryResult<TSummaryOpMessage = unknown> {
    // (undocumented)
    readonly broadcastDuration: number;
    // (undocumented)
    readonly summarizeOp: TSummaryOpMessage;
}

// @beta @deprecated @legacy (undocumented)
export interface ICodeDetailsLoader extends Partial<IProvideFluidCodeDetailsComparer> {
    load(source: IFluidCodeDetails): Promise<IFluidModuleWithDetails>;
}

// @beta @legacy
export interface ICreateAndLoadContainerProps {
    readonly allowReconnect?: boolean | undefined;
    readonly clientDetailsOverride?: IClientDetails | undefined;
    readonly codeLoader: ICodeDetailsLoader_2;
    readonly configProvider?: IConfigProviderBase | undefined;
    readonly documentServiceFactory: IDocumentServiceFactory;
    readonly logger?: ITelemetryBaseLogger | undefined;
    readonly options?: IContainerPolicies | undefined;
    readonly protocolHandlerBuilder?: ProtocolHandlerBuilder | undefined;
    readonly scope?: FluidObject | undefined;
    readonly urlResolver: IUrlResolver;
}

// @beta @legacy
export interface ICreateDetachedContainerProps extends ICreateAndLoadContainerProps {
    readonly codeDetails: IFluidCodeDetails;
}

// @beta @deprecated @legacy (undocumented)
export interface IFluidModuleWithDetails {
    details: IFluidCodeDetails;
    module: IFluidModule;
}

// @beta @legacy
export interface IGeneratedSummaryStats extends ISummaryStats {
    readonly dataStoreCount: number;
    readonly gcBlobNodeCount?: number;
    readonly gcStateUpdatedDataStoreCount?: number;
    readonly gcTotalBlobsSize?: number;
    readonly summarizedDataStoreCount: number;
    readonly summaryNumber: number;
}

// @beta @legacy
export interface IGenerateSummaryTreeResult extends Omit<IBaseSummarizeResult, "stage"> {
    readonly generateDuration: number;
    // (undocumented)
    readonly stage: "generate";
    readonly summaryStats: IGeneratedSummaryStats;
    readonly summaryTree: ISummaryTree;
}

// @beta @legacy
export interface ILoaderProps {
    readonly codeLoader: ICodeDetailsLoader;
    readonly configProvider?: IConfigProviderBase;
    readonly documentServiceFactory: IDocumentServiceFactory;
    readonly logger?: ITelemetryBaseLogger;
    readonly options?: ILoaderOptions;
    readonly protocolHandlerBuilder?: ProtocolHandlerBuilder;
    readonly scope?: FluidObject;
    readonly urlResolver: IUrlResolver;
}

// @beta @legacy
export interface ILoaderServices {
    readonly codeLoader: ICodeDetailsLoader;
    readonly documentServiceFactory: IDocumentServiceFactory;
    readonly options: ILoaderOptions;
    readonly protocolHandlerBuilder?: ProtocolHandlerBuilder;
    readonly scope: FluidObject;
    readonly subLogger: ITelemetryLoggerExt;
    readonly urlResolver: IUrlResolver;
}

// @beta @legacy
export interface ILoadExistingContainerProps extends ICreateAndLoadContainerProps {
    readonly pendingLocalState?: string | undefined;
    readonly request: IRequest;
}

// @beta @legacy (undocumented)
export interface INackSummaryResult<TSummaryNackMessage = unknown> {
    // (undocumented)
    readonly ackNackDuration: number;
    // (undocumented)
    readonly summaryNackOp: TSummaryNackMessage;
}

// @beta @legacy
export interface IParsedUrl {
    id: string;
    path: string;
    query: string;
    version: string | undefined;
}

// @beta @legacy (undocumented)
export interface IProtocolHandler extends IBaseProtocolHandler {
    // (undocumented)
    readonly audience: IAudienceOwner;
    // (undocumented)
    processSignal(message: ISignalMessage): any;
}

// @beta @legacy
export interface IQuorumSnapshot {
    // (undocumented)
    members: QuorumClientsSnapshot;
    // (undocumented)
    proposals: QuorumProposalsSnapshot["proposals"];
    // (undocumented)
    values: QuorumProposalsSnapshot["values"];
}

// @beta @legacy
export interface IRehydrateDetachedContainerProps extends ICreateAndLoadContainerProps {
    readonly serializedState: string;
}

// @beta @legacy
export interface IRetriableFailureError extends Error {
    // (undocumented)
    readonly retryAfterSeconds?: number;
}

// @beta @legacy (undocumented)
export interface IScribeProtocolState {
    // (undocumented)
    members: [string, ISequencedClient][];
    // (undocumented)
    minimumSequenceNumber: number;
    // (undocumented)
    proposals: [number, ISequencedProposal, string[]][];
    // (undocumented)
    sequenceNumber: number;
    // (undocumented)
    values: [string, ICommittedProposal][];
}

// @beta @legacy
export interface ISubmitSummaryOpResult extends Omit<IUploadSummaryResult, "stage" | "error"> {
    readonly clientSequenceNumber: number;
    // (undocumented)
    readonly stage: "submit";
    readonly submitOpDuration: number;
}

// @beta @legacy (undocumented)
export interface ISummarizeResults<TSummaryOpMessage = unknown, TSummaryAckMessage = unknown, TSummaryNackMessage = unknown> {
    readonly receivedSummaryAckOrNack: Promise<SummarizeResultPart<IAckSummaryResult<TSummaryAckMessage>, INackSummaryResult<TSummaryNackMessage>>>;
    readonly summaryOpBroadcasted: Promise<SummarizeResultPart<IBroadcastSummaryResult<TSummaryOpMessage>>>;
    readonly summarySubmitted: Promise<SummarizeResultPart<SubmitSummaryResult, SubmitSummaryFailureData>>;
}

// @beta @legacy (undocumented)
export interface ISummarizerSummaryFailure {
    // (undocumented)
    readonly error: Error;
    // (undocumented)
    readonly success: false;
}

// @beta @legacy (undocumented)
export interface ISummarizerSummarySuccess {
    // (undocumented)
    readonly success: true;
    // (undocumented)
    readonly summaryResults: OnDemandSummarizeResults;
}

// @beta @legacy
export interface IUploadSummaryResult extends Omit<IGenerateSummaryTreeResult, "stage"> {
    readonly handle: string;
    // (undocumented)
    readonly stage: "upload";
    readonly uploadDuration: number;
}

// @beta @legacy
export class Loader implements IHostLoader {
    constructor(loaderProps: ILoaderProps);
    // (undocumented)
    createDetachedContainer(codeDetails: IFluidCodeDetails, createDetachedProps?: {
        canReconnect?: boolean;
        clientDetailsOverride?: IClientDetails;
    }): Promise<IContainer>;
    // (undocumented)
    rehydrateDetachedContainerFromSnapshot(snapshot: string, createDetachedProps?: {
        canReconnect?: boolean;
        clientDetailsOverride?: IClientDetails;
    }): Promise<IContainer>;
    // (undocumented)
    resolve(request: IRequest, pendingLocalState?: string): Promise<IContainer>;
    // (undocumented)
    readonly services: ILoaderServices;
}

// @beta @legacy
export function loadExistingContainer(loadExistingContainerProps: ILoadExistingContainerProps): Promise<IContainer>;

// @beta
export function loadSummarizerContainerAndMakeSummary(loadExistingContainerProps: ILoadExistingContainerProps): Promise<LoadSummarizerSummaryResult>;

// @beta @legacy (undocumented)
export type LoadSummarizerSummaryResult = ISummarizerSummarySuccess | ISummarizerSummaryFailure;

// @beta @legacy (undocumented)
export interface OnDemandSummarizeOptions {
    // (undocumented)
    readonly fullTree?: boolean | undefined;
    // (undocumented)
    readonly reason?: string | undefined;
    // (undocumented)
    readonly retryOnFailure?: boolean | undefined;
}

// @beta @legacy (undocumented)
export interface OnDemandSummarizeResults {
    // (undocumented)
    readonly receivedSummaryAckOrNack: SummarizeResultPart<IAckSummaryResult<SummaryAckMessage>, INackSummaryResult<Record<string, unknown>>>;
    // (undocumented)
    readonly summaryOpBroadcasted: SummarizeResultPart<IBroadcastSummaryResult<Record<string, unknown>>>;
    // (undocumented)
    readonly summarySubmitted: SummarizeResultPart<SubmitSummaryResult, SubmitSummaryFailureData>;
}

// @beta @legacy
export type ProtocolHandlerBuilder = (attributes: IDocumentAttributes, snapshot: IQuorumSnapshot, sendProposal: (key: string, value: any) => number) => IProtocolHandler;

// @beta @legacy
export type QuorumClientsSnapshot = [string, ISequencedClient][];

// @beta @legacy
export type QuorumProposalsSnapshot = {
    proposals: [number, ISequencedProposal, string[]][];
    values: [string, ICommittedProposal][];
};

// @beta @legacy
export function rehydrateDetachedContainer(rehydrateDetachedContainerProps: IRehydrateDetachedContainerProps): Promise<IContainer>;

// @beta @legacy
export function resolveWithLocationRedirectionHandling<T>(api: (request: IRequest) => Promise<T>, request: IRequest, urlResolver: IUrlResolver, logger?: ITelemetryBaseLogger): Promise<T>;

// @beta @legacy
export interface SubmitSummaryFailureData {
    // (undocumented)
    readonly stage: SummaryStage;
}

// @beta @legacy
export type SubmitSummaryResult = IBaseSummarizeResult | IGenerateSummaryTreeResult | IUploadSummaryResult | ISubmitSummaryOpResult;

// @beta @legacy (undocumented)
export type SummarizeResultPart<TSuccess, TFailure = undefined> = {
    readonly success: true;
    readonly data: TSuccess;
} | {
    readonly success: false;
    readonly data: TFailure | undefined;
    readonly message: string;
    readonly error: IRetriableFailureError;
};

// @beta @legacy (undocumented)
export interface SummarizeResultsPromisesLike {
    // (undocumented)
    readonly receivedSummaryAckOrNack: Promise<OnDemandSummarizeResults["receivedSummaryAckOrNack"]>;
    // (undocumented)
    readonly summaryOpBroadcasted: Promise<OnDemandSummarizeResults["summaryOpBroadcasted"]>;
    // (undocumented)
    readonly summarySubmitted: Promise<OnDemandSummarizeResults["summarySubmitted"]>;
}

// @beta @legacy (undocumented)
export interface SummarizerLike {
    // (undocumented)
    readonly ISummarizer?: SummarizerLike;
    // (undocumented)
    summarizeOnDemand(options: OnDemandSummarizeOptions): SummarizeResultsPromisesLike;
}

// @beta @legacy (undocumented)
export const summarizerRequestUrl = "_summarizer";

// @beta @legacy (undocumented)
export interface SummaryAckMessage {
    // (undocumented)
    readonly [key: string]: unknown;
    // (undocumented)
    readonly contents: SummaryOpContents;
}

// @beta @legacy (undocumented)
export interface SummaryOpContents {
    // (undocumented)
    readonly [key: string]: unknown;
    // (undocumented)
    readonly handle?: string;
}

// @beta @legacy
export type SummaryStage = SubmitSummaryResult["stage"] | "unknown";

// @beta @legacy
export function tryParseCompatibleResolvedUrl(url: string): IParsedUrl | undefined;

// @beta @legacy
export function waitContainerToCatchUp(container: IContainer): Promise<boolean>;

// (No @packageDocumentation comment for this package)

```
