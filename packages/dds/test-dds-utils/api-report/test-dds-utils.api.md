## API Report File for "@fluid-private/test-dds-utils"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import type { AsyncGenerator as AsyncGenerator_2 } from '@fluid-private/stochastic-test-utils';
import type { AsyncReducer } from '@fluid-private/stochastic-test-utils';
import type { BaseFuzzTestState } from '@fluid-private/stochastic-test-utils';
import type { IChannelFactory } from '@fluidframework/datastore-definitions/internal';
import type { IFluidHandle } from '@fluidframework/core-interfaces';
import type { IIdCompressor } from '@fluidframework/id-compressor';
import type { IIdCompressorCore } from '@fluidframework/id-compressor/internal';
import type { IMockContainerRuntimeOptions } from '@fluidframework/test-runtime-utils/internal';
import type { IRandom } from '@fluid-private/stochastic-test-utils';
import type { ISharedObject } from '@fluidframework/shared-object-base/internal';
import { MockContainerRuntimeFactoryForReconnection } from '@fluidframework/test-runtime-utils/internal';
import type { MockContainerRuntimeForReconnection } from '@fluidframework/test-runtime-utils/internal';
import type { MockFluidDataStoreRuntime } from '@fluidframework/test-runtime-utils/internal';
import type { SaveInfo } from '@fluid-private/stochastic-test-utils';
import type { SerializedIdCompressorWithNoSession } from '@fluidframework/id-compressor/internal';
import type { SerializedIdCompressorWithOngoingSession } from '@fluidframework/id-compressor/internal';
import { TypedEventEmitter } from '@fluid-internal/client-utils';

// @internal (undocumented)
export interface AddClient {
    // (undocumented)
    addedClientId: string;
    // (undocumented)
    canBeStashed: boolean;
    // (undocumented)
    type: "addClient";
}

// @internal (undocumented)
export interface BaseOperation {
    // (undocumented)
    type: number | string;
}

// @internal (undocumented)
export interface ChangeConnectionState {
    // (undocumented)
    connected: boolean;
    // (undocumented)
    type: "changeConnectionState";
}

// @internal (undocumented)
export interface Client<TChannelFactory extends IChannelFactory> {
    // (undocumented)
    channel: ReturnType<TChannelFactory["create"]>;
    // (undocumented)
    containerRuntime: MockContainerRuntimeForReconnection;
    // (undocumented)
    dataStoreRuntime: MockFluidDataStoreRuntime;
}

// @internal (undocumented)
export interface ClientSpec {
    // (undocumented)
    clientId: string;
}

// @internal
export function createDDSFuzzSuite<TChannelFactory extends IChannelFactory, TOperation extends BaseOperation>(ddsModel: DDSFuzzModel<TChannelFactory, TOperation>, providedOptions?: Partial<DDSFuzzSuiteOptions>): void;

// @internal
export namespace createDDSFuzzSuite {
    const only: (...seeds: number[]) => <TChannelFactory extends IChannelFactory<unknown>, TOperation extends BaseOperation>(ddsModel: DDSFuzzModel<TChannelFactory, TOperation, DDSFuzzTestState<TChannelFactory>>, providedOptions?: Partial<DDSFuzzSuiteOptions>) => void;
    const skip: (...seeds: number[]) => <TChannelFactory extends IChannelFactory<unknown>, TOperation extends BaseOperation>(ddsModel: DDSFuzzModel<TChannelFactory, TOperation, DDSFuzzTestState<TChannelFactory>>, providedOptions?: Partial<DDSFuzzSuiteOptions>) => void;
}

// @internal
export function createSnapshotSuite(snapshotFolderPath: string): ISnapshotSuite;

// @internal (undocumented)
export interface DDSFuzzHarnessEvents {
    (event: "clientCreate", listener: (client: Client<IChannelFactory>) => void): any;
    (event: "testStart", listener: (initialState: DDSFuzzTestState<IChannelFactory>) => void): any;
    (event: "testEnd", listener: (finalState: DDSFuzzTestState<IChannelFactory>) => void): any;
    (event: "operationStart", listener: (operation: BaseOperation) => void): any;
}

// @internal
export interface DDSFuzzModel<TChannelFactory extends IChannelFactory, TOperation extends BaseOperation, TState extends DDSFuzzTestState<TChannelFactory> = DDSFuzzTestState<TChannelFactory>> {
    factory: TChannelFactory;
    generatorFactory: () => AsyncGenerator_2<TOperation, TState>;
    minimizationTransforms?: MinimizationTransform<TOperation>[];
    reducer: AsyncReducer<TOperation, TState>;
    validateConsistency: (channelA: Client<TChannelFactory>, channelB: Client<TChannelFactory>) => void | Promise<void>;
    workloadName: string;
}

// @internal (undocumented)
export interface DDSFuzzSuiteOptions {
    clientJoinOptions?: {
        maxNumberOfClients: number;
        clientAddProbability: number;
        stashableClientProbability?: number;
    };
    containerRuntimeOptions?: IMockContainerRuntimeOptions;
    defaultTestCount: number;
    detachedStartOptions: {
        numOpsBeforeAttach: number;
        rehydrateDisabled?: true;
        attachingBeforeRehydrateDisable?: true;
    };
    emitter: TypedEventEmitter<DDSFuzzHarnessEvents>;
    handleGenerationDisabled: boolean;
    idCompressorFactory?: (summary?: FuzzSerializedIdCompressor) => IIdCompressor & IIdCompressorCore;
    numberOfClients: number;
    only: Iterable<number>;
    // (undocumented)
    parseOperations: (serialized: string) => BaseOperation[];
    rebaseProbability: number;
    reconnectProbability: number;
    replay?: number;
    saveFailures: false | {
        directory: string;
    };
    saveSuccesses: false | {
        directory: string;
    };
    skip: Iterable<number>;
    skipMinimization?: boolean;
    validationStrategy: {
        type: "random";
        probability: number;
    } | {
        type: "fixedInterval";
        interval: number;
    } | {
        type: "partialSynchronization";
        probability: number;
        clientProbability: number;
    };
}

// @internal (undocumented)
export interface DDSFuzzTestState<TChannelFactory extends IChannelFactory> extends BaseFuzzTestState {
    // (undocumented)
    client: Client<TChannelFactory>;
    // (undocumented)
    clients: Client<TChannelFactory>[];
    // (undocumented)
    containerRuntimeFactory: MockContainerRuntimeFactoryForReconnection;
    // (undocumented)
    isDetached: boolean;
    // (undocumented)
    random: DDSRandom;
    summarizerClient: Client<TChannelFactory>;
}

// @internal (undocumented)
export interface DDSRandom extends IRandom {
    // (undocumented)
    handle(): IFluidHandle;
}

// @internal (undocumented)
export const defaultDDSFuzzSuiteOptions: DDSFuzzSuiteOptions;

// @internal (undocumented)
export type FuzzSerializedIdCompressor = {
    withSession: false;
    serializedCompressor: SerializedIdCompressorWithNoSession;
} | {
    withSession: true;
    serializedCompressor: SerializedIdCompressorWithOngoingSession;
};

// @internal
export interface IGCTestProvider {
    addNestedHandles(): Promise<void>;
    addOutboundRoutes(): Promise<void>;
    deleteOutboundRoutes(): Promise<void>;
    readonly expectedOutboundRoutes: string[];
    readonly sharedObject: ISharedObject;
}

// @internal (undocumented)
export interface ISnapshotSuite {
    readSnapshot: () => string;
    takeSnapshot: (data: string) => string;
    useSnapshotSubdirectory: (dirPath: string) => void;
}

// @internal
export type MinimizationTransform<TOperation extends BaseOperation> = (op: TOperation) => void;

// @internal
export function replayTest<TChannelFactory extends IChannelFactory, TOperation extends BaseOperation>(ddsModel: DDSFuzzModel<TChannelFactory, TOperation>, seed: number, operations: TOperation[], saveInfo?: SaveInfo, providedOptions?: Partial<DDSFuzzSuiteOptions>): Promise<void>;

// @internal
export const runGCTests: (ctor: new () => IGCTestProvider) => void;

// @internal (undocumented)
export interface Synchronize {
    // (undocumented)
    clients?: string[];
    // (undocumented)
    type: "synchronize";
}

// (No @packageDocumentation comment for this package)

```
